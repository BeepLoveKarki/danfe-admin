(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{XLLc:function(e,t,c){"use strict";c.r(t),c.d(t,"AddCountryToZoneDialogComponent",(function(){return Bt})),c.d(t,"AdminDetailComponent",(function(){return Jt})),c.d(t,"AdministratorListComponent",(function(){return Wt})),c.d(t,"AdministratorResolver",(function(){return Cc})),c.d(t,"ChannelDetailComponent",(function(){return Qt})),c.d(t,"ChannelListComponent",(function(){return Yt})),c.d(t,"ChannelResolver",(function(){return Sc})),c.d(t,"CountryDetailComponent",(function(){return Ht})),c.d(t,"CountryListComponent",(function(){return Xt})),c.d(t,"CountryResolver",(function(){return Vc})),c.d(t,"GlobalSettingsComponent",(function(){return ec})),c.d(t,"GlobalSettingsResolver",(function(){return jc})),c.d(t,"PaymentMethodDetailComponent",(function(){return tc})),c.d(t,"PaymentMethodListComponent",(function(){return cc})),c.d(t,"PaymentMethodResolver",(function(){return zc})),c.d(t,"PermissionGridComponent",(function(){return nc})),c.d(t,"RoleDetailComponent",(function(){return ic})),c.d(t,"RoleListComponent",(function(){return rc})),c.d(t,"RoleResolver",(function(){return kc})),c.d(t,"SettingsModule",(function(){return nn})),c.d(t,"ShippingEligibilityTestResultComponent",(function(){return ac})),c.d(t,"ShippingMethodDetailComponent",(function(){return sc})),c.d(t,"ShippingMethodListComponent",(function(){return oc})),c.d(t,"ShippingMethodResolver",(function(){return xc})),c.d(t,"ShippingMethodTestResultComponent",(function(){return dc})),c.d(t,"TaxCategoryDetailComponent",(function(){return lc})),c.d(t,"TaxCategoryListComponent",(function(){return mc})),c.d(t,"TaxCategoryResolver",(function(){return Ic})),c.d(t,"TaxRateDetailComponent",(function(){return bc})),c.d(t,"TaxRateListComponent",(function(){return uc})),c.d(t,"TaxRateResolver",(function(){return Ec})),c.d(t,"TestAddressFormComponent",(function(){return pc})),c.d(t,"TestOrderBuilderComponent",(function(){return hc})),c.d(t,"ZoneDetailDialogComponent",(function(){return gc})),c.d(t,"ZoneListComponent",(function(){return fc})),c.d(t,"ZoneMemberControlsDirective",(function(){return yc})),c.d(t,"ZoneMemberListComponent",(function(){return Oc})),c.d(t,"ZoneMemberListHeaderDirective",(function(){return vc})),c.d(t,"administratorBreadcrumb",(function(){return Wc})),c.d(t,"channelBreadcrumb",(function(){return Qc})),c.d(t,"countryBreadcrumb",(function(){return en})),c.d(t,"paymentMethodBreadcrumb",(function(){return cn})),c.d(t,"roleBreadcrumb",(function(){return Yc})),c.d(t,"settingsRoutes",(function(){return Jc})),c.d(t,"shippingMethodBreadcrumb",(function(){return tn})),c.d(t,"taxCategoryBreadcrumb",(function(){return Hc})),c.d(t,"taxRateBreadcrumb",(function(){return Xc})),c.d(t,"\u02750",(function(){return Pc})),c.d(t,"\u02751",(function(){return Tc})),c.d(t,"\u027510",(function(){return Lc})),c.d(t,"\u027511",(function(){return Nc})),c.d(t,"\u027512",(function(){return Kc})),c.d(t,"\u027513",(function(){return Uc})),c.d(t,"\u027514",(function(){return _c})),c.d(t,"\u027515",(function(){return Gc})),c.d(t,"\u027516",(function(){return qc})),c.d(t,"\u027517",(function(){return Bc})),c.d(t,"\u02752",(function(){return Fc})),c.d(t,"\u02753",(function(){return Dc})),c.d(t,"\u02754",(function(){return wc})),c.d(t,"\u02755",(function(){return Zc})),c.d(t,"\u02756",(function(){return Ac})),c.d(t,"\u02757",(function(){return Mc})),c.d(t,"\u02758",(function(){return Rc})),c.d(t,"\u02759",(function(){return $c}));var n=c("D57K"),i=c("EM62"),r=c("ixhn"),a=c("YtkY"),s=c("J+dc"),o=c("cJ9h"),d=c("TLy2"),l=c("jIqt"),m=c("8j5Y"),b=c("kuMc"),u=c("mWib"),p=c("Ohay"),h=c("7SLS"),g=c("nIj0"),f=c("sEIs"),y=c("OxKu"),v=c("6Oco"),O=c("ZTXN"),C=c("HM3f"),S=c("ROBh"),V=c("g6G6"),j=c("qZtG"),z=c("Ui7s"),k=c("hbhS"),x=c("jY47"),I=c("2kYt"),E=c("s2Ay"),P=c("Kej3"),T=c("E5oP");const F=function(e){return{zoneName:e}};function D(e,t){if(1&e&&(i.bd(0),i.yc(1,"translate")),2&e){const e=i.xc();i.cd(i.Ac(1,1,"settings.add-countries-to-zone",i.Jc(4,F,e.zoneName)))}}function w(e,t){if(1&e){const e=i.oc();i.nc(0,"button",3),i.vc("click",(function(){return i.Sc(e),i.xc().cancel()})),i.bd(1),i.yc(2,"translate"),i.mc(),i.nc(3,"button",4),i.vc("click",(function(){return i.Sc(e),i.xc().add()})),i.bd(4),i.yc(5,"translate"),i.mc()}if(2&e){const e=i.xc();i.Vb(1),i.cd(i.zc(2,3,"common.cancel")),i.Vb(2),i.Ec("disabled",!e.selectedMemberIds.length),i.Vb(1),i.dd(" ",i.Ac(5,5,"settings.add-countries-to-zone",i.Jc(8,F,e.zoneName))," ")}}function Z(e,t){if(1&e){const e=i.oc();i.nc(0,"button",18),i.vc("click",(function(){return i.Sc(e),i.xc().create()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc();i.Ec("disabled",e.detailForm.invalid||e.detailForm.pristine),i.Vb(1),i.dd(" ",i.zc(2,2,"common.create")," ")}}function A(e,t){if(1&e){const e=i.oc();i.nc(0,"button",18),i.vc("click",(function(){return i.Sc(e),i.xc(2).save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("disabled",e.detailForm.invalid||e.detailForm.pristine),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function M(e,t){1&e&&i.Zc(0,A,3,4,"button",19),2&e&&i.Ec("vdrIfPermissions","UpdateAdministrator")}function R(e,t){1&e&&(i.nc(0,"vdr-form-field",20),i.yc(1,"translate"),i.ic(2,"input",21),i.mc()),2&e&&i.Ec("label",i.zc(1,1,"settings.password"))}function $(e,t){1&e&&(i.nc(0,"vdr-form-field",22),i.yc(1,"translate"),i.ic(2,"input",21),i.mc()),2&e&&i.Ec("label",i.zc(1,2,"settings.password"))("readOnlyToggle",!0)}function L(e,t){if(1&e){const e=i.oc();i.nc(0,"li",23),i.nc(1,"button",24),i.vc("click",(function(){i.Sc(e);const c=t.$implicit;return i.xc().selectedChannelId=c.channelId})),i.bd(2),i.yc(3,"translate"),i.yc(4,"channelCodeToLabel"),i.mc(),i.mc()}if(2&e){const e=t.$implicit,c=i.xc();i.Vb(1),i.Yb("active",c.selectedChannelId===e.channelId),i.Ec("id",e.channelId),i.Wb("aria-selected",c.selectedChannelId===e.channelId),i.Vb(1),i.dd(" ",i.zc(3,5,i.zc(4,7,e.channelCode))," ")}}const N=function(){return["./create"]};function K(e,t){1&e&&(i.nc(0,"a",3),i.ic(1,"clr-icon",4),i.bd(2),i.yc(3,"translate"),i.mc()),2&e&&(i.Ec("routerLink",i.Ic(4,N)),i.Vb(2),i.dd(" ",i.zc(3,2,"admin.create-new-administrator")," "))}const U=function(e){return["./",e]};function _(e,t){if(1&e){const e=i.oc();i.nc(0,"td",5),i.bd(1),i.mc(),i.nc(2,"td",5),i.bd(3),i.mc(),i.nc(4,"td",5),i.bd(5),i.mc(),i.nc(6,"td",6),i.ic(7,"vdr-table-row-action",7),i.yc(8,"translate"),i.mc(),i.nc(9,"td"),i.nc(10,"vdr-dropdown"),i.nc(11,"button",8),i.bd(12),i.yc(13,"translate"),i.ic(14,"clr-icon",9),i.mc(),i.nc(15,"vdr-dropdown-menu",10),i.nc(16,"button",11),i.vc("click",(function(){i.Sc(e);const c=t.item;return i.xc().deleteAdministrator(c)})),i.yc(17,"hasPermission"),i.ic(18,"clr-icon",12),i.bd(19),i.yc(20,"translate"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.item;i.Vb(1),i.cd(e.firstName),i.Vb(2),i.cd(e.lastName),i.Vb(2),i.cd(e.emailAddress),i.Vb(2),i.Ec("label",i.zc(8,8,"common.edit"))("linkTo",i.Jc(16,U,e.id)),i.Vb(5),i.dd(" ",i.zc(13,10,"common.actions")," "),i.Vb(4),i.Ec("disabled",!i.zc(17,12,"DeleteAdministrator")),i.Vb(3),i.dd(" ",i.zc(20,14,"common.delete")," ")}}function G(e,t){if(1&e){const e=i.oc();i.nc(0,"button",21),i.vc("click",(function(){return i.Sc(e),i.xc().create()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc();i.Ec("disabled",!e.saveButtonEnabled()),i.Vb(1),i.dd(" ",i.zc(2,2,"common.create")," ")}}function q(e,t){if(1&e){const e=i.oc();i.nc(0,"button",21),i.vc("click",(function(){return i.Sc(e),i.xc(2).save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("disabled",!e.saveButtonEnabled()),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function B(e,t){1&e&&i.Zc(0,q,3,4,"button",22),2&e&&i.Ec("vdrIfPermissions","SuperAdmin")}function J(e,t){if(1&e&&(i.nc(0,"option",23),i.bd(1),i.yc(2,"currencyName"),i.mc()),2&e){const e=t.$implicit;i.Ec("value",e),i.Vb(1),i.cd(i.zc(2,2,e))}}function W(e,t){if(1&e&&(i.nc(0,"option",23),i.bd(1),i.yc(2,"translate"),i.yc(3,"uppercase"),i.mc()),2&e){const e=t.$implicit;i.Ec("value",e),i.Vb(1),i.ed("",i.zc(2,3,"lang."+e)," (",i.zc(3,5,e),")")}}function Q(e,t){if(1&e&&(i.nc(0,"option",23),i.bd(1),i.mc()),2&e){const e=t.$implicit;i.Ec("value",e.id),i.Vb(1),i.cd(e.name)}}function Y(e,t){1&e&&(i.nc(0,"clr-alert",24),i.nc(1,"clr-alert-item"),i.nc(2,"span",25),i.bd(3),i.yc(4,"translate"),i.mc(),i.mc(),i.mc()),2&e&&(i.Ec("clrAlertClosable",!1),i.Vb(3),i.dd(" ",i.zc(4,2,"error.no-default-tax-zone-set")," "))}function H(e,t){if(1&e&&(i.nc(0,"option",23),i.bd(1),i.mc()),2&e){const e=t.$implicit;i.Ec("value",e.id),i.Vb(1),i.cd(e.name)}}function X(e,t){1&e&&(i.nc(0,"clr-alert",26),i.nc(1,"clr-alert-item"),i.nc(2,"span",25),i.bd(3),i.yc(4,"translate"),i.mc(),i.mc(),i.mc()),2&e&&(i.Ec("clrAlertClosable",!1),i.Vb(3),i.dd(" ",i.zc(4,2,"error.no-default-shipping-zone-set")," "))}function ee(e,t){1&e&&(i.nc(0,"a",3),i.ic(1,"clr-icon",4),i.bd(2),i.yc(3,"translate"),i.mc()),2&e&&(i.Ec("routerLink",i.Ic(4,N)),i.Vb(2),i.dd(" ",i.zc(3,2,"settings.create-new-channel")," "))}function te(e,t){if(1&e){const e=i.oc();i.nc(0,"td",5),i.ic(1,"vdr-channel-badge",6),i.bd(2),i.yc(3,"translate"),i.yc(4,"channelCodeToLabel"),i.mc(),i.nc(5,"td",7),i.ic(6,"vdr-table-row-action",8),i.yc(7,"translate"),i.mc(),i.nc(8,"td",7),i.nc(9,"vdr-dropdown"),i.nc(10,"button",9),i.bd(11),i.yc(12,"translate"),i.ic(13,"clr-icon",10),i.mc(),i.nc(14,"vdr-dropdown-menu",11),i.nc(15,"button",12),i.vc("click",(function(){i.Sc(e);const c=t.item;return i.xc().deleteChannel(c.id)})),i.yc(16,"hasPermission"),i.ic(17,"clr-icon",13),i.bd(18),i.yc(19,"translate"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.item,c=i.xc();i.Vb(1),i.Ec("channelCode",e.code),i.Vb(1),i.dd(" ",i.zc(3,8,i.zc(4,10,e.code))," "),i.Vb(4),i.Ec("label",i.zc(7,12,"common.edit"))("linkTo",i.Jc(20,U,e.id)),i.Vb(4),i.Ec("disabled",c.isDefaultChannel(e.code)),i.Vb(1),i.dd(" ",i.zc(12,14,"common.actions")," "),i.Vb(4),i.Ec("disabled",!i.zc(16,16,"SuperAdmin")),i.Vb(3),i.dd(" ",i.zc(19,18,"common.delete")," ")}}function ce(e,t){if(1&e){const e=i.oc();i.nc(0,"button",12),i.vc("click",(function(){return i.Sc(e),i.xc().create()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc();i.Ec("disabled",e.detailForm.invalid||e.detailForm.pristine),i.Vb(1),i.dd(" ",i.zc(2,2,"common.create")," ")}}function ne(e,t){if(1&e){const e=i.oc();i.nc(0,"button",12),i.vc("click",(function(){return i.Sc(e),i.xc(2).save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("disabled",e.detailForm.invalid||e.detailForm.pristine),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function ie(e,t){1&e&&i.Zc(0,ne,3,4,"button",13),2&e&&i.Ec("vdrIfPermissions","UpdateSettings")}function re(e,t){1&e&&(i.nc(0,"a",5),i.ic(1,"clr-icon",6),i.bd(2),i.yc(3,"translate"),i.mc()),2&e&&(i.Ec("routerLink",i.Ic(4,N)),i.Vb(2),i.dd(" ",i.zc(3,2,"settings.create-new-country")," "))}const ae=function(e){return{contents:e}},se=function(e){return["/settings","zones",e]};function oe(e,t){if(1&e&&(i.nc(0,"a",16),i.nc(1,"vdr-chip",17),i.bd(2),i.mc(),i.mc()),2&e){const e=t.$implicit;i.Ec("routerLink",i.Jc(5,se,i.Jc(3,ae,e.id))),i.Vb(1),i.Ec("colorFrom",e.name),i.Vb(1),i.cd(e.name)}}function de(e,t){if(1&e){const e=i.oc();i.nc(0,"td",7),i.bd(1),i.mc(),i.nc(2,"td",7),i.bd(3),i.mc(),i.nc(4,"td",7),i.Zc(5,oe,3,7,"a",8),i.mc(),i.nc(6,"td",7),i.ic(7,"clr-icon"),i.mc(),i.nc(8,"td",9),i.ic(9,"vdr-table-row-action",10),i.yc(10,"translate"),i.mc(),i.nc(11,"td",9),i.nc(12,"vdr-dropdown"),i.nc(13,"button",11),i.bd(14),i.yc(15,"translate"),i.ic(16,"clr-icon",12),i.mc(),i.nc(17,"vdr-dropdown-menu",13),i.nc(18,"button",14),i.vc("click",(function(){i.Sc(e);const c=t.item;return i.xc().deleteCountry(c.id)})),i.yc(19,"hasPermission"),i.ic(20,"clr-icon",15),i.bd(21),i.yc(22,"translate"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.item;i.Vb(1),i.cd(e.code),i.Vb(2),i.cd(e.name),i.Vb(2),i.Ec("ngForOf",e.zones),i.Vb(2),i.Yb("is-success",e.enabled),i.Wb("shape",e.enabled?"check":"times"),i.Vb(2),i.Ec("label",i.zc(10,11,"common.edit"))("linkTo",i.Jc(19,U,e.id)),i.Vb(5),i.dd(" ",i.zc(15,13,"common.actions")," "),i.Vb(4),i.Ec("disabled",!i.zc(19,15,"DeleteSettings")),i.Vb(3),i.dd(" ",i.zc(22,17,"common.delete")," ")}}function le(e,t){if(1&e){const e=i.oc();i.nc(0,"button",9),i.vc("click",(function(){return i.Sc(e),i.xc().save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc();i.Ec("disabled",e.detailForm.invalid||e.detailForm.pristine),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function me(e,t){if(1&e&&(i.nc(0,"span",10),i.vc("click",(function(){const e=t.item;return t.clear.call(null,e)})),i.bd(1," \xd7 "),i.mc(),i.nc(2,"span",11),i.bd(3),i.yc(4,"translate"),i.mc()),2&e){const e=t.item;i.Vb(3),i.ed("",i.zc(4,2,"lang."+e)," (",e,")")}}function be(e,t){if(1&e&&(i.bd(0),i.yc(1,"translate")),2&e){const e=t.item;i.ed(" ",i.zc(1,2,"lang."+e)," (",e,") ")}}function ue(e,t){if(1&e&&i.ic(0,"vdr-custom-field-control",15),2&e){const e=i.xc().$implicit,t=i.xc(2);i.Ec("customFieldsFormGroup",t.detailForm.get("customFields"))("customField",e)}}function pe(e,t){if(1&e&&(i.lc(0),i.Zc(1,ue,1,2,"vdr-custom-field-control",14),i.kc()),2&e){const e=t.$implicit,c=i.xc(2);i.Vb(1),i.Ec("ngIf",c.customFieldIsSet(e.name))}}function he(e,t){if(1&e&&(i.nc(0,"section",12),i.nc(1,"label"),i.bd(2),i.yc(3,"translate"),i.mc(),i.Zc(4,pe,2,1,"ng-container",13),i.mc()),2&e){const e=i.xc();i.Vb(2),i.cd(i.zc(3,2,"common.custom-fields")),i.Vb(2),i.Ec("ngForOf",e.customFields)}}function ge(e,t){if(1&e&&(i.nc(0,"button",10),i.bd(1),i.yc(2,"translate"),i.mc()),2&e){const e=i.xc();i.Ec("disabled",e.detailForm.pristine||e.detailForm.invalid),i.Vb(1),i.dd(" ",i.zc(2,2,"common.create")," ")}}function fe(e,t){if(1&e){const e=i.oc();i.nc(0,"button",12),i.vc("click",(function(){return i.Sc(e),i.xc(2).save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("disabled",e.detailForm.pristine||e.detailForm.invalid),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function ye(e,t){1&e&&i.Zc(0,fe,3,4,"button",11),2&e&&i.Ec("vdrIfPermissions","UpdateSettings")}function ve(e,t){if(1&e&&(i.nc(0,"vdr-form-field",18),i.ic(1,"input",19),i.yc(2,"hasPermission"),i.mc()),2&e){const e=i.xc().$implicit;i.Ec("label",e.name)("for",e.name),i.Vb(1),i.Ec("id",e.name)("readonly",!i.zc(2,5,"UpdateSettings"))("formControlName",e.name)}}function Oe(e,t){if(1&e&&(i.nc(0,"vdr-form-field",18),i.ic(1,"input",20),i.yc(2,"hasPermission"),i.mc()),2&e){const e=i.xc().$implicit;i.Ec("label",e.name)("for",e.name),i.Vb(1),i.Ec("id",e.name)("readonly",!i.zc(2,5,"UpdateSettings"))("formControlName",e.name)}}function Ce(e,t){if(1&e&&(i.nc(0,"vdr-form-field",18),i.ic(1,"input",21),i.yc(2,"hasPermission"),i.mc()),2&e){const e=i.xc().$implicit;i.Ec("label",e.name)("for",e.name),i.Vb(1),i.Ec("id",e.name)("vdrDisabled",!i.zc(2,5,"UpdateSettings"))("formControlName",e.name)}}function Se(e,t){if(1&e&&(i.nc(0,"section",16),i.Zc(1,ve,3,7,"vdr-form-field",17),i.Zc(2,Oe,3,7,"vdr-form-field",17),i.Zc(3,Ce,3,7,"vdr-form-field",17),i.mc()),2&e){const e=t.$implicit,c=i.xc(2);i.Vb(1),i.Ec("ngIf","string"===c.getType(e)),i.Vb(1),i.Ec("ngIf","int"===c.getType(e)),i.Vb(1),i.Ec("ngIf","boolean"===c.getType(e))}}function Ve(e,t){if(1&e&&(i.nc(0,"div",13),i.nc(1,"div",14),i.nc(2,"label"),i.bd(3),i.yc(4,"translate"),i.mc(),i.Zc(5,Se,4,3,"section",15),i.yc(6,"async"),i.mc(),i.mc()),2&e){const e=i.xc();var c;const t=null==(c=i.zc(6,4,e.entity$))?null:c.configArgs;i.Vb(3),i.cd(i.zc(4,2,"settings.payment-method-config-options")),i.Vb(2),i.Ec("ngForOf",t)}}function je(e,t){if(1&e&&(i.nc(0,"td",2),i.bd(1),i.mc(),i.nc(2,"td",2),i.bd(3),i.mc(),i.nc(4,"td",3),i.ic(5,"vdr-table-row-action",4),i.yc(6,"translate"),i.mc()),2&e){const e=t.item;i.Vb(1),i.cd(e.code),i.Vb(2),i.cd(e.enabled),i.Vb(2),i.Ec("label",i.zc(6,4,"common.edit"))("linkTo",i.Jc(6,U,e.id))}}function ze(e,t){if(1&e){const e=i.oc();i.nc(0,"td"),i.nc(1,"vdr-select-toggle",2),i.vc("selectedChange",(function(c){i.Sc(e);const n=t.$implicit;return i.xc(2).setPermission(n,c)})),i.mc(),i.mc()}if(2&e){const e=t.$implicit,c=i.xc(2);i.Vb(1),i.Ec("disabled",c.readonly)("selected",c.permissions[e])}}function ke(e,t){if(1&e&&(i.nc(0,"tr"),i.nc(1,"td"),i.bd(2),i.yc(3,"translate"),i.mc(),i.Zc(4,ze,2,2,"td",1),i.mc()),2&e){const e=t.$implicit;i.Vb(2),i.cd(i.zc(3,2,e.label)),i.Vb(2),i.Ec("ngForOf",e.permissions)}}function xe(e,t){if(1&e){const e=i.oc();i.nc(0,"button",12),i.vc("click",(function(){return i.Sc(e),i.xc().create()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc();i.Ec("disabled",e.detailForm.invalid||e.detailForm.pristine),i.Vb(1),i.dd(" ",i.zc(2,2,"common.create")," ")}}function Ie(e,t){if(1&e){const e=i.oc();i.nc(0,"button",12),i.vc("click",(function(){return i.Sc(e),i.xc(2).save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("disabled",(e.detailForm.invalid||e.detailForm.pristine)&&!e.permissionsChanged),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function Ee(e,t){1&e&&i.Zc(0,Ie,3,4,"button",13),2&e&&i.Ec("vdrIfPermissions","UpdateAdministrator")}function Pe(e,t){1&e&&(i.nc(0,"a",3),i.ic(1,"clr-icon",4),i.bd(2),i.yc(3,"translate"),i.mc()),2&e&&(i.Ec("routerLink",i.Ic(4,N)),i.Vb(2),i.dd(" ",i.zc(3,2,"settings.create-new-role")," "))}function Te(e,t){if(1&e&&(i.nc(0,"span"),i.bd(1),i.mc()),2&e){const e=i.xc().item;i.Vb(1),i.cd(e.code)}}function Fe(e,t){if(1&e&&(i.nc(0,"vdr-chip"),i.ic(1,"vdr-channel-badge",17),i.bd(2),i.yc(3,"translate"),i.yc(4,"channelCodeToLabel"),i.mc()),2&e){const e=t.$implicit;i.Vb(1),i.Ec("channelCode",e.code),i.Vb(1),i.dd(" ",i.zc(3,2,i.zc(4,4,e.code))," ")}}function De(e,t){if(1&e&&(i.lc(0),i.Zc(1,Fe,5,6,"vdr-chip",16),i.kc()),2&e){const e=i.xc().item;i.Vb(1),i.Ec("ngForOf",e.channels)}}function we(e,t){if(1&e&&(i.nc(0,"vdr-chip"),i.bd(1),i.mc()),2&e){const e=t.$implicit;i.Vb(1),i.cd(e)}}function Ze(e,t){if(1&e&&(i.lc(0),i.ic(1,"clr-icon",4),i.bd(2),i.kc()),2&e){const e=i.xc(3).item,t=i.xc();i.Vb(2),i.dd(" ",e.permissions.length-t.initialLimit," ")}}function Ae(e,t){1&e&&i.ic(0,"clr-icon",21)}function Me(e,t){if(1&e){const e=i.oc();i.nc(0,"button",19),i.vc("click",(function(){i.Sc(e);const t=i.xc(2).item;return i.xc().toggleDisplayLimit(t)})),i.Zc(1,Ze,3,1,"ng-container",7),i.Zc(2,Ae,1,0,"ng-template",null,20,i.ad),i.mc()}if(2&e){const e=i.Pc(3),t=i.xc(2).item,c=i.xc();i.Vb(1),i.Ec("ngIf",(c.displayLimit[t.id]||0)<t.permissions.length)("ngIfElse",e)}}function Re(e,t){if(1&e&&(i.lc(0),i.Zc(1,we,2,1,"vdr-chip",16),i.yc(2,"slice"),i.Zc(3,Me,4,2,"button",18),i.kc()),2&e){const e=i.xc().item,t=i.xc();i.Vb(1),i.Ec("ngForOf",i.Bc(2,2,e.permissions,0,t.displayLimit[e.id]||3)),i.Vb(2),i.Ec("ngIf",e.permissions.length>t.initialLimit)}}function $e(e,t){1&e&&(i.nc(0,"span",22),i.bd(1),i.yc(2,"translate"),i.mc()),2&e&&(i.Vb(1),i.cd(i.zc(2,1,"settings.default-role-label")))}function Le(e,t){if(1&e&&(i.ic(0,"vdr-table-row-action",23),i.yc(1,"translate")),2&e){const e=i.xc().item;i.Ec("label",i.zc(1,2,"common.edit"))("linkTo",i.Jc(4,U,e.id))}}function Ne(e,t){if(1&e){const e=i.oc();i.nc(0,"td",5),i.bd(1),i.mc(),i.nc(2,"td",5),i.Zc(3,Te,2,1,"span",6),i.mc(),i.nc(4,"td",5),i.Zc(5,De,2,1,"ng-container",6),i.mc(),i.nc(6,"td",5),i.Zc(7,Re,4,6,"ng-container",7),i.Zc(8,$e,3,3,"ng-template",null,8,i.ad),i.mc(),i.nc(10,"td",9),i.Zc(11,Le,2,6,"vdr-table-row-action",10),i.mc(),i.nc(12,"td",9),i.nc(13,"vdr-dropdown"),i.nc(14,"button",11),i.bd(15),i.yc(16,"translate"),i.ic(17,"clr-icon",12),i.mc(),i.nc(18,"vdr-dropdown-menu",13),i.nc(19,"button",14),i.vc("click",(function(){i.Sc(e);const c=t.item;return i.xc().deleteRole(c.id)})),i.yc(20,"hasPermission"),i.ic(21,"clr-icon",15),i.bd(22),i.yc(23,"translate"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.item,c=i.Pc(9),n=i.xc();i.Vb(1),i.cd(e.description),i.Vb(2),i.Ec("ngIf",!n.isDefaultRole(e)),i.Vb(2),i.Ec("ngIf",!n.isDefaultRole(e)),i.Vb(2),i.Ec("ngIf",!n.isDefaultRole(e))("ngIfElse",c),i.Vb(4),i.Ec("ngIf",!n.isDefaultRole(e)),i.Vb(3),i.Ec("disabled",n.isDefaultRole(e)),i.Vb(1),i.dd(" ",i.zc(16,10,"common.actions")," "),i.Vb(4),i.Ec("disabled",!i.zc(20,12,"SuperAdmin")),i.Vb(3),i.dd(" ",i.zc(23,14,"common.delete")," ")}}function Ke(e,t){if(1&e&&i.ic(0,"vdr-object-tree",11),2&e){const e=i.xc().$implicit;i.Ec("value",e.metadata)}}function Ue(e,t){if(1&e&&(i.nc(0,"div",6),i.nc(1,"div",7),i.nc(2,"vdr-labeled-data",8),i.yc(3,"translate"),i.bd(4),i.mc(),i.nc(5,"div",9),i.nc(6,"vdr-labeled-data",8),i.yc(7,"translate"),i.bd(8),i.yc(9,"currency"),i.mc(),i.nc(10,"vdr-labeled-data",8),i.yc(11,"translate"),i.bd(12),i.yc(13,"currency"),i.mc(),i.mc(),i.Zc(14,Ke,1,1,"vdr-object-tree",10),i.mc(),i.mc()),2&e){const e=t.$implicit,c=i.xc();i.Vb(1),i.Yb("stale",c.testDataUpdated),i.Vb(1),i.Ec("label",i.zc(3,9,"settings.shipping-method")),i.Vb(2),i.dd(" ",e.description," "),i.Vb(2),i.Ec("label",i.zc(7,11,"common.price")),i.Vb(2),i.dd(" ",i.Ac(9,13,e.price/100,c.currencyCode)," "),i.Vb(2),i.Ec("label",i.zc(11,16,"common.price-with-tax")),i.Vb(2),i.dd(" ",i.Ac(13,18,e.priceWithTax/100,c.currencyCode)," "),i.Vb(2),i.Ec("ngIf",e.metadata)}}function _e(e,t){1&e&&(i.nc(0,"div",6),i.ic(1,"clr-icon",12),i.bd(2),i.yc(3,"translate"),i.mc()),2&e&&(i.Vb(2),i.dd(" ",i.zc(3,1,"settings.no-eligible-shipping-methods")," "))}function Ge(e,t){if(1&e){const e=i.oc();i.nc(0,"button",7),i.vc("click",(function(){return i.Sc(e),i.xc().create()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc();i.Ec("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedChecker||!e.selectedCalculator),i.Vb(1),i.dd(" ",i.zc(2,2,"common.create")," ")}}function qe(e,t){if(1&e){const e=i.oc();i.nc(0,"button",7),i.vc("click",(function(){return i.Sc(e),i.xc(2).save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedChecker||!e.selectedCalculator),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function Be(e,t){1&e&&i.Zc(0,qe,3,4,"button",8),2&e&&i.Ec("vdrIfPermissions","UpdateSettings")}function Je(e,t){if(1&e){const e=i.oc();i.nc(0,"vdr-configurable-input",20),i.vc("remove",(function(){return i.Sc(e),i.xc(2).selectedChecker=null})),i.yc(1,"hasPermission"),i.yc(2,"async"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("operation",e.selectedChecker)("operationDefinition",e.selectedCheckerDefinition)("readonly",!i.zc(1,4,"UpdateSettings"))("activeChannel",i.zc(2,6,e.activeChannel$))}}function We(e,t){if(1&e){const e=i.oc();i.nc(0,"button",25),i.vc("click",(function(){i.Sc(e);const c=t.$implicit;return i.xc(3).selectChecker(c)})),i.bd(1),i.mc()}if(2&e){const e=t.$implicit;i.Vb(1),i.dd(" ",e.description," ")}}function Qe(e,t){if(1&e&&(i.nc(0,"div"),i.nc(1,"vdr-dropdown"),i.nc(2,"button",21),i.ic(3,"clr-icon",22),i.bd(4),i.yc(5,"translate"),i.mc(),i.nc(6,"vdr-dropdown-menu",23),i.Zc(7,We,2,1,"button",24),i.mc(),i.mc(),i.mc()),2&e){const e=i.xc(2);i.Vb(4),i.dd(" ",i.zc(5,2,"common.select")," "),i.Vb(3),i.Ec("ngForOf",e.checkers)}}function Ye(e,t){if(1&e){const e=i.oc();i.nc(0,"vdr-configurable-input",26),i.vc("remove",(function(){return i.Sc(e),i.xc(2).selectedCalculator=null})),i.yc(1,"hasPermission"),i.yc(2,"async"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("operation",e.selectedCalculator)("operationDefinition",e.selectedCalculatorDefinition)("readonly",!i.zc(1,4,"UpdateSettings"))("activeChannel",i.zc(2,6,e.activeChannel$))}}function He(e,t){if(1&e){const e=i.oc();i.nc(0,"button",25),i.vc("click",(function(){i.Sc(e);const c=t.$implicit;return i.xc(3).selectCalculator(c)})),i.bd(1),i.mc()}if(2&e){const e=t.$implicit;i.Vb(1),i.dd(" ",e.description," ")}}function Xe(e,t){if(1&e&&(i.nc(0,"div"),i.nc(1,"vdr-dropdown"),i.nc(2,"button",21),i.ic(3,"clr-icon",22),i.bd(4),i.yc(5,"translate"),i.mc(),i.nc(6,"vdr-dropdown-menu",23),i.Zc(7,He,2,1,"button",24),i.mc(),i.mc(),i.mc()),2&e){const e=i.xc(2);i.Vb(4),i.dd(" ",i.zc(5,2,"common.select")," "),i.Vb(3),i.Ec("ngForOf",e.calculators)}}function et(e,t){if(1&e){const e=i.oc();i.nc(0,"form",9),i.nc(1,"vdr-form-field",10),i.yc(2,"translate"),i.nc(3,"input",11),i.vc("input",(function(c){i.Sc(e);const n=t.ngIf;return i.xc().updateCode(n.code,c.target.value)})),i.yc(4,"hasPermission"),i.mc(),i.mc(),i.nc(5,"vdr-form-field",12),i.yc(6,"translate"),i.yc(7,"hasPermission"),i.ic(8,"input",13),i.yc(9,"hasPermission"),i.mc(),i.nc(10,"div",14),i.nc(11,"div",15),i.nc(12,"label",16),i.bd(13),i.yc(14,"translate"),i.mc(),i.Zc(15,Je,3,8,"vdr-configurable-input",17),i.Zc(16,Qe,8,4,"div",18),i.mc(),i.nc(17,"div",15),i.nc(18,"label",16),i.bd(19),i.yc(20,"translate"),i.mc(),i.Zc(21,Ye,3,8,"vdr-configurable-input",19),i.Zc(22,Xe,8,4,"div",18),i.mc(),i.mc(),i.mc()}if(2&e){const e=i.xc();i.Ec("formGroup",e.detailForm),i.Vb(1),i.Ec("label",i.zc(2,12,"common.description")),i.Vb(2),i.Ec("readonly",!i.zc(4,14,"UpdateSettings")),i.Vb(2),i.Ec("label",i.zc(6,16,"common.code"))("readOnlyToggle",i.zc(7,18,"UpdateSettings")),i.Vb(3),i.Ec("readonly",!i.zc(9,20,"UpdateSettings")),i.Vb(5),i.cd(i.zc(14,22,"settings.shipping-eligibility-checker")),i.Vb(2),i.Ec("ngIf",e.selectedChecker),i.Vb(1),i.Ec("ngIf",!e.selectedChecker),i.Vb(3),i.cd(i.zc(20,24,"settings.shipping-calculator")),i.Vb(2),i.Ec("ngIf",e.selectedCalculator),i.Vb(1),i.Ec("ngIf",!e.selectedCalculator)}}function tt(e,t){if(1&e){const e=i.oc();i.nc(0,"clr-accordion-content"),i.nc(1,"div",14),i.nc(2,"div",15),i.nc(3,"vdr-test-order-builder",27),i.vc("orderLinesChange",(function(t){return i.Sc(e),i.xc().setTestOrderLines(t)})),i.mc(),i.mc(),i.nc(4,"div",15),i.nc(5,"vdr-test-address-form",28),i.vc("addressChange",(function(t){return i.Sc(e),i.xc().setTestAddress(t)})),i.mc(),i.nc(6,"vdr-shipping-method-test-result",29),i.vc("runTest",(function(){return i.Sc(e),i.xc().runTest()})),i.yc(7,"async"),i.yc(8,"async"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=i.xc();var c;const t=null==(c=i.zc(7,4,e.activeChannel$))?null:c.currencyCode;i.Vb(6),i.Ec("currencyCode",t)("okToRun",e.allTestDataPresent()&&e.testDataUpdated&&e.detailForm.valid)("testDataUpdated",e.testDataUpdated)("testResult",i.zc(8,6,e.testResult$))}}function ct(e,t){1&e&&(i.nc(0,"a",5),i.ic(1,"clr-icon",6),i.bd(2),i.yc(3,"translate"),i.mc()),2&e&&(i.Ec("routerLink",i.Ic(4,N)),i.Vb(2),i.dd(" ",i.zc(3,2,"settings.create-new-shipping-method")," "))}function nt(e,t){if(1&e){const e=i.oc();i.nc(0,"td",7),i.bd(1),i.mc(),i.nc(2,"td",7),i.bd(3),i.mc(),i.nc(4,"td",8),i.ic(5,"vdr-table-row-action",9),i.yc(6,"translate"),i.mc(),i.nc(7,"td",8),i.nc(8,"vdr-dropdown"),i.nc(9,"button",10),i.bd(10),i.yc(11,"translate"),i.ic(12,"clr-icon",11),i.mc(),i.nc(13,"vdr-dropdown-menu",12),i.nc(14,"button",13),i.vc("click",(function(){i.Sc(e);const c=t.item;return i.xc().deleteShippingMethod(c.id)})),i.yc(15,"hasPermission"),i.ic(16,"clr-icon",14),i.bd(17),i.yc(18,"translate"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.item;i.Vb(1),i.cd(e.code),i.Vb(2),i.cd(e.description),i.Vb(2),i.Ec("label",i.zc(6,7,"common.edit"))("linkTo",i.Jc(15,U,e.id)),i.Vb(5),i.dd(" ",i.zc(11,9,"common.actions")," "),i.Vb(4),i.Ec("disabled",!i.zc(15,11,"DeleteSettings")),i.Vb(3),i.dd(" ",i.zc(18,13,"common.delete")," ")}}function it(e,t){if(1&e){const e=i.oc();i.nc(0,"clr-accordion-content"),i.nc(1,"div",15),i.nc(2,"div",16),i.nc(3,"vdr-test-order-builder",17),i.vc("orderLinesChange",(function(t){return i.Sc(e),i.xc().setTestOrderLines(t)})),i.mc(),i.mc(),i.nc(4,"div",16),i.nc(5,"vdr-test-address-form",18),i.vc("addressChange",(function(t){return i.Sc(e),i.xc().setTestAddress(t)})),i.mc(),i.nc(6,"vdr-shipping-eligibility-test-result",19),i.vc("runTest",(function(){return i.Sc(e),i.xc().runTest()})),i.yc(7,"async"),i.yc(8,"async"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=i.xc();var c;const t=null==(c=i.zc(7,4,e.activeChannel$))?null:c.currencyCode;i.Vb(6),i.Ec("currencyCode",t)("okToRun",e.allTestDataPresent())("testDataUpdated",e.testDataUpdated)("testResult",i.zc(8,6,e.testResult$))}}function rt(e,t){1&e&&i.ic(0,"clr-icon",14)}function at(e,t){1&e&&i.ic(0,"clr-icon",15)}function st(e,t){1&e&&i.ic(0,"clr-icon",16)}function ot(e,t){if(1&e&&(i.nc(0,"vdr-labeled-data",4),i.yc(1,"translate"),i.bd(2),i.yc(3,"currency"),i.mc()),2&e){const e=i.xc();i.Ec("label",i.zc(1,2,"common.price")),i.Vb(2),i.dd(" ",i.Ac(3,4,(null==e.testResult.quote?null:e.testResult.quote.price)/100,e.currencyCode)," ")}}function dt(e,t){if(1&e&&(i.nc(0,"vdr-labeled-data",4),i.yc(1,"translate"),i.bd(2),i.yc(3,"currency"),i.mc()),2&e){const e=i.xc();i.Ec("label",i.zc(1,2,"common.price-with-tax")),i.Vb(2),i.dd(" ",i.Ac(3,4,(null==e.testResult.quote?null:e.testResult.quote.priceWithTax)/100,e.currencyCode)," ")}}function lt(e,t){if(1&e&&i.ic(0,"vdr-object-tree",17),2&e){const e=i.xc();i.Ec("value",null==e.testResult?null:null==e.testResult.quote?null:e.testResult.quote.metadata)}}const mt=function(e,t,c){return{success:e,error:t,unknown:c}};function bt(e,t){if(1&e){const e=i.oc();i.nc(0,"button",7),i.vc("click",(function(){return i.Sc(e),i.xc().create()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc();i.Ec("disabled",!e.saveButtonEnabled()),i.Vb(1),i.dd(" ",i.zc(2,2,"common.create")," ")}}function ut(e,t){if(1&e){const e=i.oc();i.nc(0,"button",7),i.vc("click",(function(){return i.Sc(e),i.xc(2).save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("disabled",!e.saveButtonEnabled()),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function pt(e,t){1&e&&i.Zc(0,ut,3,4,"button",8),2&e&&i.Ec("vdrIfPermissions","UpdateSettings")}function ht(e,t){1&e&&(i.nc(0,"a",3),i.ic(1,"clr-icon",4),i.bd(2),i.yc(3,"translate"),i.mc()),2&e&&(i.Ec("routerLink",i.Ic(4,N)),i.Vb(2),i.dd(" ",i.zc(3,2,"settings.create-new-tax-category")," "))}function gt(e,t){if(1&e){const e=i.oc();i.nc(0,"td",5),i.bd(1),i.mc(),i.nc(2,"td",6),i.ic(3,"vdr-table-row-action",7),i.yc(4,"translate"),i.mc(),i.nc(5,"td",6),i.nc(6,"vdr-dropdown"),i.nc(7,"button",8),i.bd(8),i.yc(9,"translate"),i.ic(10,"clr-icon",9),i.mc(),i.nc(11,"vdr-dropdown-menu",10),i.nc(12,"button",11),i.vc("click",(function(){i.Sc(e);const c=t.item;return i.xc().deleteTaxCategory(c)})),i.yc(13,"hasPermission"),i.ic(14,"clr-icon",12),i.bd(15),i.yc(16,"translate"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.item;i.Vb(1),i.cd(e.name),i.Vb(2),i.Ec("label",i.zc(4,6,"common.edit"))("linkTo",i.Jc(14,U,e.id)),i.Vb(5),i.dd(" ",i.zc(9,8,"common.actions")," "),i.Vb(4),i.Ec("disabled",!i.zc(13,10,"DeleteSettings")),i.Vb(3),i.dd(" ",i.zc(16,12,"common.delete")," ")}}function ft(e,t){if(1&e){const e=i.oc();i.nc(0,"button",17),i.vc("click",(function(){return i.Sc(e),i.xc().create()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc();i.Ec("disabled",!e.saveButtonEnabled()),i.Vb(1),i.dd(" ",i.zc(2,2,"common.create")," ")}}function yt(e,t){if(1&e){const e=i.oc();i.nc(0,"button",17),i.vc("click",(function(){return i.Sc(e),i.xc(2).save()})),i.bd(1),i.yc(2,"translate"),i.mc()}if(2&e){const e=i.xc(2);i.Ec("disabled",!e.saveButtonEnabled()),i.Vb(1),i.dd(" ",i.zc(2,2,"common.update")," ")}}function vt(e,t){1&e&&i.Zc(0,yt,3,4,"button",18),2&e&&i.Ec("vdrIfPermissions","UpdateSettings")}function Ot(e,t){if(1&e&&(i.nc(0,"option",19),i.bd(1),i.mc()),2&e){const e=t.$implicit;i.Ec("value",e.id),i.Vb(1),i.dd(" ",e.name," ")}}function Ct(e,t){if(1&e&&(i.nc(0,"option",19),i.bd(1),i.mc()),2&e){const e=t.$implicit;i.Ec("value",e.id),i.Vb(1),i.cd(e.name)}}function St(e,t){1&e&&(i.nc(0,"a",3),i.ic(1,"clr-icon",4),i.bd(2),i.yc(3,"translate"),i.mc()),2&e&&(i.Ec("routerLink",i.Ic(4,N)),i.Vb(2),i.dd(" ",i.zc(3,2,"settings.create-new-tax-rate")," "))}function Vt(e,t){if(1&e){const e=i.oc();i.nc(0,"td",5),i.bd(1),i.mc(),i.nc(2,"td",5),i.bd(3),i.mc(),i.nc(4,"td",5),i.bd(5),i.mc(),i.nc(6,"td",5),i.bd(7),i.mc(),i.nc(8,"td",6),i.ic(9,"vdr-table-row-action",7),i.yc(10,"translate"),i.mc(),i.nc(11,"td",6),i.nc(12,"vdr-dropdown"),i.nc(13,"button",8),i.bd(14),i.yc(15,"translate"),i.ic(16,"clr-icon",9),i.mc(),i.nc(17,"vdr-dropdown-menu",10),i.nc(18,"button",11),i.vc("click",(function(){i.Sc(e);const c=t.item;return i.xc().deleteTaxRate(c)})),i.yc(19,"hasPermission"),i.ic(20,"clr-icon",12),i.bd(21),i.yc(22,"translate"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.item;i.Vb(1),i.cd(e.name),i.Vb(2),i.cd(e.category.name),i.Vb(2),i.cd(e.zone.name),i.Vb(2),i.dd("",e.value,"%"),i.Vb(2),i.Ec("label",i.zc(10,9,"common.edit"))("linkTo",i.Jc(17,U,e.id)),i.Vb(5),i.dd(" ",i.zc(15,11,"common.actions")," "),i.Vb(4),i.Ec("disabled",!i.zc(19,13,"DeleteSettings")),i.Vb(3),i.dd(" ",i.zc(22,15,"common.delete")," ")}}function jt(e,t){if(1&e&&(i.nc(0,"option",9),i.bd(1),i.mc()),2&e){const e=t.$implicit;i.Ec("value",e.code),i.Vb(1),i.dd(" ",e.name," ")}}const zt=["autoComplete"];function kt(e,t){if(1&e){const e=i.oc();i.nc(0,"tr",11),i.nc(1,"td",12),i.ic(2,"img",13),i.mc(),i.nc(3,"td",14),i.bd(4),i.mc(),i.nc(5,"td",15),i.bd(6),i.mc(),i.nc(7,"td",16),i.bd(8),i.yc(9,"currency"),i.mc(),i.nc(10,"td",17),i.nc(11,"input",18),i.vc("ngModelChange",(function(c){return i.Sc(e),t.$implicit.quantity=c}))("change",(function(){return i.Sc(e),i.xc(2).updateQuantity()})),i.mc(),i.nc(12,"button",19),i.vc("click",(function(){i.Sc(e);const c=t.$implicit;return i.xc(2).removeLine(c)})),i.ic(13,"clr-icon",20),i.mc(),i.mc(),i.nc(14,"td",21),i.bd(15),i.yc(16,"currency"),i.mc(),i.mc()}if(2&e){const e=t.$implicit,c=i.xc(2);i.Vb(2),i.Ec("src",e.preview+"?preset=tiny",i.Uc),i.Vb(2),i.cd(e.name),i.Vb(2),i.cd(e.sku),i.Vb(2),i.dd(" ",i.Ac(9,6,e.unitPriceWithTax/100,c.currencyCode)," "),i.Vb(3),i.Ec("ngModel",e.quantity),i.Vb(4),i.dd(" ",i.Ac(16,9,e.unitPriceWithTax*e.quantity/100,c.currencyCode)," ")}}function xt(e,t){if(1&e&&(i.nc(0,"table",7),i.nc(1,"thead"),i.nc(2,"tr"),i.ic(3,"th"),i.nc(4,"th"),i.bd(5),i.yc(6,"translate"),i.mc(),i.nc(7,"th"),i.bd(8),i.yc(9,"translate"),i.mc(),i.nc(10,"th"),i.bd(11),i.yc(12,"translate"),i.mc(),i.nc(13,"th"),i.bd(14),i.yc(15,"translate"),i.mc(),i.nc(16,"th"),i.bd(17),i.yc(18,"translate"),i.mc(),i.mc(),i.mc(),i.Zc(19,kt,17,12,"tr",8),i.nc(20,"tr",9),i.nc(21,"td",10),i.bd(22),i.yc(23,"translate"),i.mc(),i.ic(24,"td"),i.ic(25,"td"),i.ic(26,"td"),i.ic(27,"td"),i.nc(28,"td"),i.bd(29),i.yc(30,"currency"),i.mc(),i.mc(),i.mc()),2&e){const e=i.xc();i.Vb(5),i.cd(i.zc(6,8,"order.product-name")),i.Vb(3),i.cd(i.zc(9,10,"order.product-sku")),i.Vb(3),i.cd(i.zc(12,12,"order.unit-price")),i.Vb(3),i.cd(i.zc(15,14,"order.quantity")),i.Vb(3),i.cd(i.zc(18,16,"order.total")),i.Vb(2),i.Ec("ngForOf",e.lines),i.Vb(3),i.cd(i.zc(23,18,"order.sub-total")),i.Vb(7),i.cd(i.Ac(30,20,e.subTotal/100,e.currencyCode))}}function It(e,t){1&e&&(i.nc(0,"div",22),i.nc(1,"div",23),i.bd(2),i.yc(3,"translate"),i.mc(),i.ic(4,"clr-icon",24),i.mc()),2&e&&(i.Vb(2),i.cd(i.zc(3,1,"settings.add-products-to-test-order")))}function Et(e,t){1&e&&(i.nc(0,"span"),i.bd(1),i.yc(2,"translate"),i.mc()),2&e&&(i.Vb(1),i.cd(i.zc(2,1,"settings.update-zone")))}function Pt(e,t){1&e&&(i.nc(0,"span"),i.bd(1),i.yc(2,"translate"),i.mc()),2&e&&(i.Vb(1),i.cd(i.zc(2,1,"settings.create-zone")))}function Tt(e,t){if(1&e&&(i.Zc(0,Et,3,3,"span",4),i.Zc(1,Pt,3,3,"span",4)),2&e){const e=i.xc();i.Ec("ngIf",e.zone.id),i.Vb(1),i.Ec("ngIf",!e.zone.id)}}function Ft(e,t){1&e&&(i.nc(0,"span"),i.bd(1),i.yc(2,"translate"),i.mc()),2&e&&(i.Vb(1),i.cd(i.zc(2,1,"settings.update-zone")))}function Dt(e,t){1&e&&(i.nc(0,"span"),i.bd(1),i.yc(2,"translate"),i.mc()),2&e&&(i.Vb(1),i.cd(i.zc(2,1,"settings.create-zone")))}function wt(e,t){if(1&e){const e=i.oc();i.nc(0,"button",5),i.vc("click",(function(){return i.Sc(e),i.xc().cancel()})),i.bd(1),i.yc(2,"translate"),i.mc(),i.nc(3,"button",6),i.vc("click",(function(){return i.Sc(e),i.xc().save()})),i.Zc(4,Ft,3,3,"span",4),i.Zc(5,Dt,3,3,"span",4),i.mc()}if(2&e){const e=i.xc();i.Vb(1),i.cd(i.zc(2,4,"common.cancel")),i.Vb(2),i.Ec("disabled",!e.zone.name),i.Vb(1),i.Ec("ngIf",e.zone.id),i.Vb(1),i.Ec("ngIf",!e.zone.id)}}function Zt(e,t){if(1&e){const e=i.oc();i.nc(0,"button",7),i.vc("click",(function(){return i.Sc(e),i.xc().create()})),i.ic(1,"clr-icon",8),i.bd(2),i.yc(3,"translate"),i.mc()}2&e&&(i.Vb(2),i.dd(" ",i.zc(3,1,"settings.create-new-zone")," "))}function At(e,t){if(1&e){const e=i.oc();i.nc(0,"tr"),i.yc(1,"async"),i.nc(2,"td",9),i.ic(3,"vdr-entity-info",10),i.mc(),i.nc(4,"td",9),i.nc(5,"vdr-chip",11),i.bd(6),i.mc(),i.mc(),i.nc(7,"td",12),i.nc(8,"a",13),i.ic(9,"clr-icon",14),i.bd(10),i.yc(11,"translate"),i.mc(),i.mc(),i.nc(12,"td",15),i.nc(13,"button",16),i.vc("click",(function(){i.Sc(e);const c=t.$implicit;return i.xc().update(c)})),i.ic(14,"clr-icon",17),i.bd(15),i.yc(16,"translate"),i.mc(),i.mc(),i.nc(17,"td",15),i.nc(18,"vdr-dropdown"),i.nc(19,"button",18),i.bd(20),i.yc(21,"translate"),i.ic(22,"clr-icon",19),i.mc(),i.nc(23,"vdr-dropdown-menu",20),i.nc(24,"button",21),i.vc("click",(function(){i.Sc(e);const c=t.$implicit;return i.xc().delete(c.id)})),i.yc(25,"hasPermission"),i.ic(26,"clr-icon",22),i.bd(27),i.yc(28,"translate"),i.mc(),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.$implicit,n=i.xc();var c;const r=e.id===(null==(c=i.zc(1,11,n.activeZone$))?null:c.id);i.Yb("active",r),i.Vb(3),i.Ec("entity",e),i.Vb(2),i.Ec("colorFrom",e.name),i.Vb(1),i.cd(e.name),i.Vb(2),i.Ec("routerLink",i.Jc(25,U,i.Jc(23,ae,e.id))),i.Vb(2),i.dd(" ",i.zc(11,13,"settings.view-zone-members")," "),i.Vb(5),i.dd(" ",i.zc(16,15,"common.edit")," "),i.Vb(5),i.dd(" ",i.zc(21,17,"common.actions")," "),i.Vb(4),i.Ec("disabled",!i.zc(25,19,"DeleteSettings")),i.Vb(3),i.dd(" ",i.zc(28,21,"common.delete")," ")}}function Mt(e,t){if(1&e){const e=i.oc();i.nc(0,"div"),i.nc(1,"div",26),i.nc(2,"div",27),i.bd(3),i.mc(),i.ic(4,"div",28),i.nc(5,"button",29),i.vc("click",(function(){return i.Sc(e),i.xc(2).closeMembers()})),i.ic(6,"clr-icon",30),i.mc(),i.mc(),i.nc(7,"div",31),i.nc(8,"vdr-dropdown"),i.nc(9,"button",32),i.bd(10),i.yc(11,"translate"),i.ic(12,"clr-icon",19),i.mc(),i.nc(13,"vdr-dropdown-menu",20),i.nc(14,"button",33),i.vc("click",(function(){i.Sc(e);const t=i.xc().ngIf,c=i.xc();return c.removeFromZone(t,c.selectedMemberIds)})),i.yc(15,"hasPermission"),i.ic(16,"clr-icon",22),i.bd(17),i.yc(18,"translate"),i.mc(),i.mc(),i.mc(),i.nc(19,"button",34),i.vc("click",(function(){i.Sc(e);const t=i.xc().ngIf;return i.xc().addToZone(t)})),i.bd(20),i.yc(21,"translate"),i.mc(),i.mc(),i.mc()}if(2&e){const e=i.xc().ngIf,t=i.xc();i.Vb(3),i.ed(" ",e.name," (",e.members.length,") "),i.Vb(6),i.Ec("disabled",0===t.selectedMemberIds.length),i.Vb(1),i.dd(" ",i.zc(11,7,"common.with-selected")," "),i.Vb(4),i.Ec("disabled",!i.zc(15,9,"DeleteSettings")),i.Vb(3),i.dd(" ",i.zc(18,11,"settings.remove-from-zone")," "),i.Vb(3),i.dd(" ",i.Ac(21,13,"settings.add-countries-to-zone",i.Jc(16,F,e.name))," ")}}const Rt=function(e){return["/settings","countries",e]};function $t(e,t){if(1&e){const e=i.oc();i.nc(0,"div"),i.nc(1,"vdr-dropdown"),i.nc(2,"button",18),i.bd(3),i.yc(4,"translate"),i.ic(5,"clr-icon",19),i.mc(),i.nc(6,"vdr-dropdown-menu",20),i.nc(7,"a",35),i.ic(8,"clr-icon",17),i.bd(9),i.yc(10,"translate"),i.mc(),i.nc(11,"button",33),i.vc("click",(function(){i.Sc(e);const c=t.member,n=i.xc().ngIf;return i.xc().removeFromZone(n,[c.id])})),i.yc(12,"hasPermission"),i.ic(13,"clr-icon",22),i.bd(14),i.yc(15,"translate"),i.mc(),i.mc(),i.mc(),i.mc()}if(2&e){const e=t.member;i.Vb(3),i.dd(" ",i.zc(4,5,"common.actions")," "),i.Vb(4),i.Ec("routerLink",i.Jc(13,Rt,e.id)),i.Vb(2),i.dd(" ",i.zc(10,7,"common.edit")," "),i.Vb(2),i.Ec("disabled",!i.zc(12,9,"DeleteSettings")),i.Vb(3),i.dd(" ",i.zc(15,11,"settings.remove-from-zone")," ")}}function Lt(e,t){if(1&e){const e=i.oc();i.lc(0),i.nc(1,"vdr-zone-member-list",23),i.vc("selectionChange",(function(t){return i.Sc(e),i.xc().selectedMemberIds=t})),i.Zc(2,Mt,22,18,"div",24),i.Zc(3,$t,16,15,"div",25),i.mc(),i.kc()}if(2&e){const e=t.ngIf,c=i.xc();i.Vb(1),i.Ec("members",e.members)("selectedMemberIds",c.selectedMemberIds)}}function Nt(e,t){1&e&&i.jc(0)}function Kt(e,t){if(1&e&&(i.lc(0),i.Zc(1,Nt,1,0,"ng-container",4),i.kc()),2&e){const e=i.xc();i.Vb(1),i.Ec("ngTemplateOutlet",e.headerTemplate.templateRef)}}function Ut(e,t){1&e&&i.jc(0)}const _t=function(e){return{member:e}};function Gt(e,t){if(1&e&&(i.lc(0),i.Zc(1,Ut,1,0,"ng-container",7),i.kc()),2&e){const e=i.xc().item,t=i.xc();i.Vb(1),i.Ec("ngTemplateOutlet",t.controlsTemplate.templateRef)("ngTemplateOutletContext",i.Jc(2,_t,e))}}function qt(e,t){if(1&e&&(i.nc(0,"td",5),i.bd(1),i.mc(),i.nc(2,"td",5),i.bd(3),i.mc(),i.nc(4,"td",5),i.ic(5,"clr-icon"),i.mc(),i.nc(6,"td",6),i.Zc(7,Gt,2,4,"ng-container",1),i.mc()),2&e){const e=t.item,c=i.xc();i.Vb(1),i.cd(e.code),i.Vb(2),i.cd(e.name),i.Vb(2),i.Yb("is-success",e.enabled),i.Wb("shape",e.enabled?"check":"times"),i.Vb(2),i.Ec("ngIf",c.controlsTemplate)}}let Bt=class{constructor(e){this.dataService=e,this.currentMembers=[],this.selectedMemberIds=[]}ngOnInit(){const e=this.currentMembers.map(e=>e.id);this.availableCountries$=this.dataService.settings.getCountries(99999).mapStream(e=>e.countries.items).pipe(Object(a.a)(t=>t.filter(t=>!e.includes(t.id))))}cancel(){this.resolveWith()}add(){this.resolveWith(this.selectedMemberIds)}};Bt.\u0275fac=function(e){return new(e||Bt)(i.hc(r.K))},Bt.\u0275cmp=i.bc({type:Bt,selectors:[["vdr-add-country-to-zone-dialog"]],decls:4,vars:4,consts:[["vdrDialogTitle",""],[3,"members","selectedMemberIds","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(i.Zc(0,D,2,6,"ng-template",0),i.nc(1,"vdr-zone-member-list",1),i.vc("selectionChange",(function(e){return t.selectedMemberIds=e})),i.yc(2,"async"),i.mc(),i.Zc(3,w,6,10,"ng-template",2)),2&e&&(i.Vb(1),i.Ec("members",i.zc(2,2,t.availableCountries$))("selectedMemberIds",t.selectedMemberIds))},directives:function(){return[r.Q,Oc,r.P]},pipes:function(){return[I.b,E.d]},styles:[""],changeDetection:0}),Bt.ctorParameters=()=>[{type:r.K}],Bt=Object(n.c)([Object(n.f)("design:paramtypes",[r.K])],Bt);let Jt=class extends r.u{constructor(e,t,c,n,i,r,a){super(t,e,c,i),this.changeDetector=n,this.dataService=i,this.formBuilder=r,this.notificationService=a,this.selectedRoles=[],this.selectedRolePermissions={},this.selectedChannelId=null,this.detailForm=this.formBuilder.group({emailAddress:["",g.C.required],firstName:["",g.C.required],lastName:["",g.C.required],password:[""],roles:[[]]})}getAvailableChannels(){return Object.values(this.selectedRolePermissions)}ngOnInit(){this.init(),this.administrator$=this.entity$,this.allRoles$=this.dataService.administrator.getRoles(99999).mapStream(e=>e.roles.items),this.dataService.client.userStatus().single$.subscribe(({userStatus:e})=>{if(!e.permissions.includes(r.Db.UpdateAdministrator)){const e=this.detailForm.get("roles");e&&e.disable()}})}ngOnDestroy(){this.destroy()}rolesChanged(e){this.buildPermissionsMap()}getPermissionsForSelectedChannel(){if(this.selectedChannelId){if(this.selectedRolePermissions[this.selectedChannelId])return this.selectedRolePermissions[this.selectedChannelId].permissions}const e=Object.values(this.selectedRolePermissions);return 0<e.length?(this.selectedChannelId=e[0].channelId,e[0].permissions):[]}create(){const e=this.detailForm.value,t={emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName,password:e.password,roleIds:e.roles.map(e=>e.id)};this.dataService.administrator.createAdministrator(t).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-create-success"),{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createAdministrator.id],{relativeTo:this.route})},e=>{this.notificationService.error(Object(y.a)("common.notify-create-error"),{entity:"Administrator"})})}save(){this.administrator$.pipe(Object(s.a)(1),Object(o.a)(({id:e})=>{const t=this.detailForm.value,c={id:e,emailAddress:t.emailAddress,firstName:t.firstName,lastName:t.lastName,password:t.password,roleIds:t.roles.map(e=>e.id)};return this.dataService.administrator.updateAdministrator(c)})).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"Administrator"})})}setFormValues(e,t){this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName,roles:e.user.roles});const c=this.detailForm.get("password");c&&(e.id?c.setValidators([]):c.setValidators([g.C.required])),this.buildPermissionsMap()}buildPermissionsMap(){const e=this.detailForm.get("roles");if(e){const t=e.value,c=new Map,n=new Map;for(const e of t)for(const t of e.channels){const i=c.get(t.id)||new Set;e.permissions.forEach(e=>i.add(e)),c.set(t.id,i),n.set(t.id,t.code)}this.selectedRolePermissions={};for(const e of Array.from(c.keys())){const t=c.get(e),i={};for(const e of Object.keys(r.Db))i[e]=t.has(e);this.selectedRolePermissions[e]={channelId:e,channelCode:n.get(e),permissions:i}}}}};Jt.\u0275fac=function(e){return new(e||Jt)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},Jt.\u0275cmp=i.bc({type:Jt,selectors:[["vdr-admin-detail"]],features:[i.Sb],decls:36,vars:45,consts:[[3,"entity"],["locationId","administrator-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress",3,"readonly"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName",3,"readonly"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName",3,"readonly"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle",4,"ngIf"],[1,"clr-control-label"],["formControlName","roles","bindLabel","description",3,"items","multiple","hideSelected","change"],["role","tablist",1,"nav"],["role","presentation","class","nav-item",4,"ngFor","ngForOf"],[3,"permissions","readonly"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["for","password",3,"label","readOnlyToggle"],["role","presentation",1,"nav-item"],["type","button",1,"btn","btn-link","nav-link",3,"id","click"]],template:function(e,t){if(1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"vdr-entity-info",0),i.yc(3,"async"),i.mc(),i.nc(4,"vdr-ab-right"),i.ic(5,"vdr-action-bar-items",1),i.Zc(6,Z,3,4,"button",2),i.yc(7,"async"),i.Zc(8,M,1,1,"ng-template",null,3,i.ad),i.mc(),i.mc(),i.nc(10,"form",4),i.nc(11,"vdr-form-field",5),i.yc(12,"translate"),i.ic(13,"input",6),i.yc(14,"hasPermission"),i.mc(),i.nc(15,"vdr-form-field",7),i.yc(16,"translate"),i.ic(17,"input",8),i.yc(18,"hasPermission"),i.mc(),i.nc(19,"vdr-form-field",9),i.yc(20,"translate"),i.ic(21,"input",10),i.yc(22,"hasPermission"),i.mc(),i.Zc(23,R,3,3,"vdr-form-field",11),i.yc(24,"async"),i.Zc(25,$,3,4,"vdr-form-field",12),i.yc(26,"async"),i.yc(27,"hasPermission"),i.nc(28,"label",13),i.bd(29),i.yc(30,"translate"),i.mc(),i.nc(31,"ng-select",14),i.vc("change",(function(e){return t.rolesChanged(e)})),i.yc(32,"async"),i.mc(),i.nc(33,"ul",15),i.Zc(34,L,5,9,"li",16),i.mc(),i.ic(35,"vdr-permission-grid",17),i.mc()),2&e){const e=i.Pc(9);i.Vb(2),i.Ec("entity",i.zc(3,19,t.entity$)),i.Vb(4),i.Ec("ngIf",i.zc(7,21,t.isNew$))("ngIfElse",e),i.Vb(4),i.Ec("formGroup",t.detailForm),i.Vb(1),i.Ec("label",i.zc(12,23,"settings.email-address")),i.Vb(2),i.Ec("readonly",!i.zc(14,25,"UpdateAdministrator")),i.Vb(2),i.Ec("label",i.zc(16,27,"settings.first-name")),i.Vb(2),i.Ec("readonly",!i.zc(18,29,"UpdateAdministrator")),i.Vb(2),i.Ec("label",i.zc(20,31,"settings.last-name")),i.Vb(2),i.Ec("readonly",!i.zc(22,33,"UpdateAdministrator")),i.Vb(2),i.Ec("ngIf",i.zc(24,35,t.isNew$)),i.Vb(2),i.Ec("ngIf",!i.zc(26,37,t.isNew$)&&i.zc(27,39,"UpdateAdministrator")),i.Vb(4),i.cd(i.zc(30,41,"settings.roles")),i.Vb(2),i.Ec("items",i.zc(32,43,t.allRoles$))("multiple",!0)("hideSelected",!0),i.Vb(3),i.Ec("ngForOf",t.getAvailableChannels()),i.Vb(1),i.Ec("permissions",t.getPermissionsForSelectedChannel())("readonly",!0)}},directives:function(){return[r.c,r.e,r.Z,r.f,r.d,I.p,g.E,g.q,g.j,r.cb,r.db,g.b,g.p,g.h,P.t,x.a,I.o,nc,r.ob]},pipes:function(){return[I.b,E.d,r.gb,r.A]},styles:[""],changeDetection:0}),Jt.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],Jt=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],Jt);let Wt=class extends r.w{constructor(e,t,c,n,i){super(t,c),this.dataService=e,this.modalService=n,this.notificationService=i,super.setQueryFn((...e)=>this.dataService.administrator.getAdministrators(...e),e=>e.administrators)}deleteAdministrator(e){return this.modalService.dialog({title:Object(y.a)("catalog.confirm-delete-administrator"),body:`${e.firstName} ${e.lastName}`,buttons:[{type:"secondary",label:Object(y.a)("common.cancel")},{type:"danger",label:Object(y.a)("common.delete"),returnValue:!0}]}).pipe(Object(d.a)(t=>t?this.dataService.administrator.deleteAdministrator(e.id):v.a)).subscribe(()=>{this.notificationService.success(Object(y.a)("common.notify-delete-success"),{entity:"Administrator"}),this.refresh()},e=>{this.notificationService.error(Object(y.a)("common.notify-delete-error"),{entity:"Administrator"})})}};Wt.\u0275fac=function(e){return new(e||Wt)(i.hc(r.K),i.hc(f.e),i.hc(f.a),i.hc(r.xb),i.hc(r.yb))},Wt.\u0275cmp=i.bc({type:Wt,selectors:[["vdr-administrator-list"]],features:[i.Sb],decls:21,vars:22,consts:[["locationId","administrator-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-right"),i.ic(2,"vdr-action-bar-items",0),i.Zc(3,K,4,5,"a",1),i.mc(),i.mc(),i.nc(4,"vdr-data-table",2),i.vc("pageChange",(function(e){return t.setPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setItemsPerPage(e)})),i.yc(5,"async"),i.yc(6,"async"),i.yc(7,"async"),i.yc(8,"async"),i.nc(9,"vdr-dt-column"),i.bd(10),i.yc(11,"translate"),i.mc(),i.nc(12,"vdr-dt-column"),i.bd(13),i.yc(14,"translate"),i.mc(),i.nc(15,"vdr-dt-column"),i.bd(16),i.yc(17,"translate"),i.mc(),i.ic(18,"vdr-dt-column"),i.ic(19,"vdr-dt-column"),i.Zc(20,_,21,18,"ng-template"),i.mc()),2&e&&(i.Vb(3),i.Ec("vdrIfPermissions","CreateAdministrator"),i.Vb(1),i.Ec("items",i.zc(5,8,t.items$))("itemsPerPage",i.zc(6,10,t.itemsPerPage$))("totalItems",i.zc(7,12,t.totalItems$))("currentPage",i.zc(8,14,t.currentPage$)),i.Vb(6),i.cd(i.zc(11,16,"settings.first-name")),i.Vb(3),i.cd(i.zc(14,18,"settings.last-name")),i.Vb(3),i.cd(i.zc(17,20,"settings.email-address")))},directives:[r.c,r.f,r.d,r.ob,r.M,r.L,f.h,P.o,r.Lb,r.S,r.V,r.U,r.T],pipes:[I.b,E.d,r.gb],styles:[""]}),Wt.ctorParameters=()=>[{type:r.K},{type:f.e},{type:f.a},{type:r.xb},{type:r.yb}],Wt=Object(n.c)([Object(n.f)("design:paramtypes",[r.K,f.e,f.a,r.xb,r.yb])],Wt);let Qt=class extends r.u{constructor(e,t,c,n,i,a,s){super(t,e,c,i),this.serverConfigService=c,this.changeDetector=n,this.dataService=i,this.formBuilder=a,this.notificationService=s,this.currencyCodes=Object.values(r.E),this.detailForm=this.formBuilder.group({code:["",g.C.required],token:["",g.C.required],pricesIncludeTax:[!1],currencyCode:[""],defaultShippingZoneId:["",g.C.required],defaultLanguageCode:[],defaultTaxZoneId:["",g.C.required]})}ngOnInit(){this.init(),this.zones$=this.dataService.settings.getZones().mapSingle(e=>e.zones),this.availableLanguageCodes$=this.serverConfigService.getAvailableLanguages()}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const e=this.detailForm.value,t={code:e.code,token:e.token,defaultLanguageCode:e.defaultLanguageCode,pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZoneId,defaultTaxZoneId:e.defaultTaxZoneId};this.dataService.settings.createChannel(t).pipe(Object(o.a)(({createChannel:e})=>this.dataService.auth.currentUser().single$.pipe(Object(a.a)(({me:t})=>({me:t,createChannel:e})))),Object(o.a)(({me:e,createChannel:t})=>this.dataService.client.updateUserChannels(e.channels).pipe(Object(a.a)(()=>t)))).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-create-success"),{entity:"Channel"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.id],{relativeTo:this.route})},e=>{this.notificationService.error(Object(y.a)("common.notify-create-error"),{entity:"Channel"})})}save(){if(!this.detailForm.dirty)return;const e=this.detailForm.value;this.entity$.pipe(Object(s.a)(1),Object(o.a)(t=>{const c={id:t.id,code:e.code,pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZoneId,defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZoneId};return this.dataService.settings.updateChannel(c)})).subscribe(()=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"Channel"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"Channel"})})}setFormValues(e,t){if(this.detailForm.patchValue({code:e.code,token:e.token||this.generateToken(),pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZone?e.defaultShippingZone.id:"",defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZone?e.defaultTaxZone.id:""}),e.code===z.DEFAULT_CHANNEL_CODE){const e=this.detailForm.get("code");e&&e.disable()}}generateToken(){const e=()=>Math.random().toString(36).substr(3,10);return`${e()}${e()}`}};Qt.\u0275fac=function(e){return new(e||Qt)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},Qt.\u0275cmp=i.bc({type:Qt,selectors:[["vdr-channel-detail"]],features:[i.Sb],decls:49,vars:62,consts:[[3,"entity"],["locationId","channel-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","token",3,"label"],["id","token","type","text","formControlName","token",3,"readonly"],["for","defaultTaxZoneId",3,"label"],["clrSelect","","name","currencyCode","formControlName","currencyCode",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","defaultLanguage",3,"label"],["clrSelect","","name","defaultLanguageCode","formControlName","defaultLanguageCode",3,"vdrDisabled"],["for","pricesIncludeTax",3,"label"],["type","checkbox","clrToggle","","id","pricesIncludeTax","formControlName","pricesIncludeTax",3,"vdrDisabled"],["clrSelect","","name","defaultTaxZoneId","formControlName","defaultTaxZoneId",3,"vdrDisabled"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","defaultShippingZoneId",3,"label"],["clrSelect","","name","defaultShippingZoneId","formControlName","defaultShippingZoneId",3,"vdrDisabled"],["clrAlertType","warning",3,"clrAlertClosable",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["clrAlertType","warning",3,"clrAlertClosable"]],template:function(e,t){if(1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"vdr-entity-info",0),i.yc(3,"async"),i.mc(),i.nc(4,"vdr-ab-right"),i.ic(5,"vdr-action-bar-items",1),i.Zc(6,G,3,4,"button",2),i.yc(7,"async"),i.Zc(8,B,1,1,"ng-template",null,3,i.ad),i.mc(),i.mc(),i.nc(10,"form",4),i.nc(11,"vdr-form-field",5),i.yc(12,"translate"),i.ic(13,"input",6),i.yc(14,"hasPermission"),i.mc(),i.nc(15,"vdr-form-field",7),i.yc(16,"translate"),i.ic(17,"input",8),i.yc(18,"hasPermission"),i.mc(),i.nc(19,"vdr-form-field",9),i.yc(20,"translate"),i.nc(21,"select",10),i.yc(22,"hasPermission"),i.Zc(23,J,3,4,"option",11),i.mc(),i.mc(),i.nc(24,"vdr-form-field",12),i.yc(25,"translate"),i.nc(26,"select",13),i.yc(27,"hasPermission"),i.Zc(28,W,4,7,"option",11),i.yc(29,"async"),i.mc(),i.mc(),i.nc(30,"vdr-form-field",14),i.yc(31,"translate"),i.nc(32,"clr-toggle-wrapper"),i.ic(33,"input",15),i.yc(34,"hasPermission"),i.mc(),i.mc(),i.nc(35,"vdr-form-field",9),i.yc(36,"translate"),i.nc(37,"select",16),i.yc(38,"hasPermission"),i.Zc(39,Q,2,2,"option",11),i.yc(40,"async"),i.mc(),i.mc(),i.Zc(41,Y,5,4,"clr-alert",17),i.nc(42,"vdr-form-field",18),i.yc(43,"translate"),i.nc(44,"select",19),i.yc(45,"hasPermission"),i.Zc(46,H,2,2,"option",11),i.yc(47,"async"),i.mc(),i.mc(),i.Zc(48,X,5,4,"clr-alert",20),i.mc()),2&e){const e=i.Pc(9);i.Vb(2),i.Ec("entity",i.zc(3,24,t.entity$)),i.Vb(4),i.Ec("ngIf",i.zc(7,26,t.isNew$))("ngIfElse",e),i.Vb(4),i.Ec("formGroup",t.detailForm),i.Vb(1),i.Ec("label",i.zc(12,28,"common.code")),i.Vb(2),i.Ec("readonly",!i.zc(14,30,"SuperAdmin")),i.Vb(2),i.Ec("label",i.zc(16,32,"settings.channel-token")),i.Vb(2),i.Ec("readonly",!i.zc(18,34,"SuperAdmin")),i.Vb(2),i.Ec("label",i.zc(20,36,"settings.currency")),i.Vb(2),i.Ec("vdrDisabled",!i.zc(22,38,"SuperAdmin")),i.Vb(2),i.Ec("ngForOf",t.currencyCodes),i.Vb(1),i.Ec("label",i.zc(25,40,"common.default-language")),i.Vb(2),i.Ec("vdrDisabled",!i.zc(27,42,"SuperAdmin")),i.Vb(2),i.Ec("ngForOf",i.zc(29,44,t.availableLanguageCodes$)),i.Vb(2),i.Ec("label",i.zc(31,46,"settings.prices-include-tax")),i.Vb(3),i.Ec("vdrDisabled",!i.zc(34,48,"SuperAdmin")),i.Vb(2),i.Ec("label",i.zc(36,50,"settings.default-tax-zone")),i.Vb(2),i.Ec("vdrDisabled",!i.zc(38,52,"SuperAdmin")),i.Vb(2),i.Ec("ngForOf",i.zc(40,54,t.zones$)),i.Vb(2),i.Ec("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultTaxZoneId),i.Vb(1),i.Ec("label",i.zc(43,56,"settings.default-shipping-zone")),i.Vb(2),i.Ec("vdrDisabled",!i.zc(45,58,"SuperAdmin")),i.Vb(2),i.Ec("ngForOf",i.zc(47,60,t.zones$)),i.Vb(2),i.Ec("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultShippingZoneId)}},directives:[r.c,r.e,r.Z,r.f,r.d,I.p,g.E,g.q,g.j,r.cb,r.db,g.b,g.p,g.h,g.A,P.z,r.R,I.o,P.k,g.a,P.i,r.ob,g.u,g.D,P.f,P.g,P.h],pipes:[I.b,E.d,r.gb,r.G,I.B],styles:["clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}"],changeDetection:0}),Qt.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],Qt=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],Qt);let Yt=class{constructor(e,t,c){this.dataService=e,this.modalService=t,this.notificationService=c,this.refresh$=new O.a,this.channels$=this.refresh$.pipe(Object(l.a)(1),Object(d.a)(()=>this.dataService.settings.getChannels().mapStream(e=>e.channels)))}isDefaultChannel(e){return e===z.DEFAULT_CHANNEL_CODE}deleteChannel(e){this.modalService.dialog({title:Object(y.a)("catalog.confirm-delete-channel"),buttons:[{type:"secondary",label:Object(y.a)("common.cancel")},{type:"danger",label:Object(y.a)("common.delete"),returnValue:!0}]}).pipe(Object(d.a)(t=>t?this.dataService.settings.deleteChannel(e):v.a),Object(o.a)(()=>this.dataService.auth.currentUser().single$),Object(o.a)(e=>this.dataService.client.updateUserChannels(e.me.channels))).subscribe(()=>{this.notificationService.success(Object(y.a)("common.notify-delete-success"),{entity:"Channel"}),this.refresh$.next(1)},e=>{this.notificationService.error(Object(y.a)("common.notify-delete-error"),{entity:"Channel"})})}};Yt.\u0275fac=function(e){return new(e||Yt)(i.hc(r.K),i.hc(r.xb),i.hc(r.yb))},Yt.\u0275cmp=i.bc({type:Yt,selectors:[["vdr-channel-list"]],decls:12,vars:7,consts:[["locationId","channel-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"channelCode"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-right"),i.ic(2,"vdr-action-bar-items",0),i.Zc(3,ee,4,5,"a",1),i.mc(),i.mc(),i.nc(4,"vdr-data-table",2),i.yc(5,"async"),i.nc(6,"vdr-dt-column"),i.bd(7),i.yc(8,"translate"),i.mc(),i.ic(9,"vdr-dt-column"),i.ic(10,"vdr-dt-column"),i.Zc(11,te,20,22,"ng-template"),i.mc()),2&e&&(i.Vb(3),i.Ec("vdrIfPermissions","SuperAdmin"),i.Vb(1),i.Ec("items",i.zc(5,3,t.channels$)),i.Vb(3),i.cd(i.zc(8,5,"common.code")))},directives:[r.c,r.f,r.d,r.ob,r.M,r.L,f.h,P.o,r.z,r.Lb,r.S,r.V,r.U,r.T],pipes:[I.b,E.d,r.A,r.gb],styles:[""],changeDetection:0}),Yt.ctorParameters=()=>[{type:r.K},{type:r.xb},{type:r.yb}],Yt=Object(n.c)([Object(n.f)("design:paramtypes",[r.K,r.xb,r.yb])],Yt);let Ht=class extends r.u{constructor(e,t,c,n,i,r,a){super(t,e,c,i),this.changeDetector=n,this.dataService=i,this.formBuilder=r,this.notificationService=a,this.detailForm=this.formBuilder.group({code:["",g.C.required],name:["",g.C.required],enabled:[!0]})}ngOnInit(){this.init(),this.country$=this.entity$}ngOnDestroy(){this.destroy()}create(){this.detailForm.dirty&&Object(C.a)(this.country$,this.languageCode$).pipe(Object(s.a)(1),Object(o.a)(([e,t])=>{const c=this.detailForm.value,n=Object(r.Sb)({translatable:e,updatedFields:c,languageCode:t,defaultTranslation:{name:c.name,languageCode:t}});return this.dataService.settings.createCountry(n)})).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-create-success"),{entity:"Country"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createCountry.id],{relativeTo:this.route})},e=>{this.notificationService.error(Object(y.a)("common.notify-create-error"),{entity:"Country"})})}save(){Object(C.a)(this.country$,this.languageCode$).pipe(Object(s.a)(1),Object(o.a)(([e,t])=>{const c=this.detailForm.value,n=Object(r.Sb)({translatable:e,updatedFields:c,languageCode:t});return this.dataService.settings.updateCountry(n)})).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"Country"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"Country"})})}setFormValues(e,t){const c=e.translations.find(e=>e.languageCode===t);this.detailForm.patchValue({code:e.code,name:c?c.name:"",enabled:e.enabled})}};Ht.\u0275fac=function(e){return new(e||Ht)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},Ht.\u0275cmp=i.bc({type:Ht,selectors:[["vdr-country-detail"]],features:[i.Sb],decls:28,vars:35,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","country-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"vdr-entity-info",0),i.yc(3,"async"),i.nc(4,"vdr-language-selector",1),i.vc("languageCodeChange",(function(e){return t.setLanguage(e)})),i.yc(5,"async"),i.yc(6,"async"),i.yc(7,"async"),i.mc(),i.mc(),i.nc(8,"vdr-ab-right"),i.ic(9,"vdr-action-bar-items",2),i.Zc(10,ce,3,4,"button",3),i.yc(11,"async"),i.Zc(12,ie,1,1,"ng-template",null,4,i.ad),i.mc(),i.mc(),i.nc(14,"form",5),i.nc(15,"vdr-form-field",6),i.yc(16,"translate"),i.ic(17,"input",7),i.yc(18,"hasPermission"),i.mc(),i.nc(19,"vdr-form-field",8),i.yc(20,"translate"),i.ic(21,"input",9),i.yc(22,"hasPermission"),i.mc(),i.nc(23,"vdr-form-field",10),i.yc(24,"translate"),i.nc(25,"clr-toggle-wrapper"),i.ic(26,"input",11),i.yc(27,"hasPermission"),i.mc(),i.mc(),i.mc()),2&e){const e=i.Pc(13);i.Vb(2),i.Ec("entity",i.zc(3,13,t.entity$)),i.Vb(2),i.Ec("disabled",i.zc(5,15,t.isNew$))("availableLanguageCodes",i.zc(6,17,t.availableLanguages$))("currentLanguageCode",i.zc(7,19,t.languageCode$)),i.Vb(6),i.Ec("ngIf",i.zc(11,21,t.isNew$))("ngIfElse",e),i.Vb(4),i.Ec("formGroup",t.detailForm),i.Vb(1),i.Ec("label",i.zc(16,23,"common.code")),i.Vb(2),i.Ec("readonly",!i.zc(18,25,"UpdateSettings")),i.Vb(2),i.Ec("label",i.zc(20,27,"common.name")),i.Vb(2),i.Ec("readonly",!i.zc(22,29,"UpdateSettings")),i.Vb(2),i.Ec("label",i.zc(24,31,"common.enabled")),i.Vb(3),i.Ec("vdrDisabled",!i.zc(27,33,"UpdateSettings"))}},directives:[r.c,r.e,r.Z,r.ub,r.f,r.d,I.p,g.E,g.q,g.j,r.cb,r.db,g.b,g.p,g.h,P.k,g.a,P.i,r.R,r.ob],pipes:[I.b,E.d,r.gb],styles:[""]}),Ht.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],Ht=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],Ht);let Xt=class{constructor(e,t,c){this.dataService=e,this.notificationService=t,this.modalService=c,this.searchTerm=new g.f(""),this.countries=[],this.destroy$=new O.a}ngOnInit(){const e=this.searchTerm.valueChanges.pipe(Object(l.a)(null),Object(d.a)(e=>this.dataService.settings.getCountries(9999,0,e).stream$),Object(m.a)(e=>this.countries=e.countries.items),Object(a.a)(e=>e.countries.items));this.zones$=this.dataService.settings.getZones().mapStream(e=>e.zones),this.countriesWithZones$=Object(C.a)(e,this.zones$).pipe(Object(a.a)(([e,t])=>e.map(e=>Object.assign(Object.assign({},e),{zones:t.filter(t=>!!t.members.find(t=>t.id===e.id))}))))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}deleteCountry(e){this.modalService.dialog({title:Object(y.a)("catalog.confirm-delete-country"),buttons:[{type:"secondary",label:Object(y.a)("common.cancel")},{type:"danger",label:Object(y.a)("common.delete"),returnValue:!0}]}).pipe(Object(d.a)(t=>t?this.dataService.settings.deleteCountry(e):v.a)).subscribe(e=>{e.deleteCountry.result===r.O.DELETED?(this.notificationService.success(Object(y.a)("common.notify-delete-success"),{entity:"Country"}),this.dataService.settings.getCountries(9999,0).single$.subscribe()):this.notificationService.error(e.deleteCountry.message||"")},e=>{this.notificationService.error(Object(y.a)("common.notify-delete-error"),{entity:"Country"})})}isZone(e){return e.hasOwnProperty("id")}};Xt.\u0275fac=function(e){return new(e||Xt)(i.hc(r.K),i.hc(r.yb),i.hc(r.xb))},Xt.\u0275cmp=i.bc({type:Xt,selectors:[["vdr-country-list"]],decls:24,vars:21,consts:[["type","text","name","searchTerm",1,"clr-input","search-input",3,"formControl","placeholder"],["locationId","country-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"routerLink"],[3,"colorFrom"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"input",0),i.yc(3,"translate"),i.mc(),i.nc(4,"vdr-ab-right"),i.ic(5,"vdr-action-bar-items",1),i.Zc(6,re,4,5,"a",2),i.mc(),i.mc(),i.nc(7,"vdr-data-table",3),i.yc(8,"async"),i.nc(9,"vdr-dt-column"),i.bd(10),i.yc(11,"translate"),i.mc(),i.nc(12,"vdr-dt-column",4),i.bd(13),i.yc(14,"translate"),i.mc(),i.nc(15,"vdr-dt-column"),i.bd(16),i.yc(17,"translate"),i.mc(),i.nc(18,"vdr-dt-column"),i.bd(19),i.yc(20,"translate"),i.mc(),i.ic(21,"vdr-dt-column"),i.ic(22,"vdr-dt-column"),i.Zc(23,de,23,21,"ng-template"),i.mc()),2&e&&(i.Vb(2),i.Ec("formControl",t.searchTerm)("placeholder",i.zc(3,9,"settings.search-country-by-name")),i.Vb(4),i.Ec("vdrIfPermissions","CreateSettings"),i.Vb(1),i.Ec("items",i.zc(8,11,t.countriesWithZones$)),i.Vb(3),i.cd(i.zc(11,13,"common.code")),i.Vb(2),i.Ec("expand",!0),i.Vb(1),i.cd(i.zc(14,15,"common.name")),i.Vb(3),i.cd(i.zc(17,17,"settings.zone")),i.Vb(3),i.cd(i.zc(20,19,"common.enabled")))},directives:[r.c,r.e,r.db,g.b,g.p,g.g,r.f,r.d,r.ob,r.M,r.L,f.h,P.o,I.o,r.Lb,r.S,r.V,r.U,r.T,r.B],pipes:[E.d,I.b,r.gb],styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"],changeDetection:0}),Xt.ctorParameters=()=>[{type:r.K},{type:r.yb},{type:r.xb}],Xt=Object(n.c)([Object(n.f)("design:paramtypes",[r.K,r.yb,r.xb])],Xt);let ec=class extends r.u{constructor(e,t,c,n,i,a,s){super(t,e,c,i),this.changeDetector=n,this.dataService=i,this.formBuilder=a,this.notificationService=s,this.languageCodes=Object.values(r.tb),this.customFields=this.getCustomFieldConfig("GlobalSettings"),this.detailForm=this.formBuilder.group({availableLanguages:[""],trackInventory:!1,customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init(),this.dataService.client.userStatus().single$.subscribe(({userStatus:e})=>{if(!e.permissions.includes(r.Db.UpdateSettings)){const e=this.detailForm.get("availableLanguages");e&&e.disable()}})}customFieldIsSet(e){return!!this.detailForm.get(["customFields",e])}save(){this.detailForm.dirty&&this.dataService.settings.updateGlobalSettings(this.detailForm.value).pipe(Object(d.a)(()=>this.serverConfigService.refreshGlobalSettings())).subscribe(()=>{this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"Settings"})},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"Settings"})})}setFormValues(e,t){if(this.detailForm.patchValue({availableLanguages:e.availableLanguages,trackInventory:e.trackInventory}),this.customFields.length){const t=this.detailForm.get("customFields");for(const c of this.customFields){const n=c.name,i=e.customFields[n],r=t.get(n);r&&r.patchValue(i)}}}};ec.\u0275fac=function(e){return new(e||ec)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},ec.\u0275cmp=i.bc({type:ec,selectors:[["vdr-global-settings"]],features:[i.Sb],decls:17,vars:15,consts:[["locationId","global-settings-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","availableLanguages",3,"label"],["multiple","true","appendTo","body","formControlName","availableLanguages",3,"items","addTag","hideSelected"],["ng-label-tmp",""],["ng-option-tmp",""],["type","checkbox","clrToggle","","name","enabled","formControlName","trackInventory",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","GlobalSettings",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","GlobalSettings",3,"customFieldsFormGroup","customField"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-right"),i.ic(2,"vdr-action-bar-items",0),i.Zc(3,le,3,4,"button",1),i.mc(),i.mc(),i.nc(4,"form",2),i.nc(5,"vdr-form-field",3),i.yc(6,"translate"),i.nc(7,"ng-select",4),i.Zc(8,me,5,4,"ng-template",5),i.Zc(9,be,2,4,"ng-template",6),i.mc(),i.mc(),i.nc(10,"clr-toggle-wrapper"),i.ic(11,"input",7),i.yc(12,"hasPermission"),i.nc(13,"label"),i.bd(14),i.yc(15,"translate"),i.mc(),i.mc(),i.Zc(16,he,5,4,"section",8),i.mc()),2&e&&(i.Vb(3),i.Ec("vdrIfPermissions","UpdateSettings"),i.Vb(1),i.Ec("formGroup",t.detailForm),i.Vb(1),i.Ec("label",i.zc(6,9,"common.available-languages")),i.Vb(2),i.Ec("items",t.languageCodes)("addTag",!1)("hideSelected",!0),i.Vb(4),i.Ec("vdrDisabled",!i.zc(12,11,"UpdateSettings")),i.Vb(3),i.cd(i.zc(15,13,"settings.track-inventory-default")),i.Vb(2),i.Ec("ngIf",t.customFields.length))},directives:[r.c,r.f,r.d,r.ob,g.E,g.q,g.j,r.cb,x.a,g.p,g.h,x.e,x.d,P.k,r.db,g.a,P.i,r.R,P.t,I.p,g.k,I.o,r.H],pipes:[E.d,r.gb],styles:["ng-select .ng-value>span{margin:0!important}  ng-select .ng-arrow-wrapper .ng-arrow{margin:0!important}  ng-select .ng-select-container>span{margin:0!important}"],changeDetection:0}),ec.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],ec=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],ec);let tc=class extends r.u{constructor(e,t,c,n,i,r,a){super(t,e,c,i),this.changeDetector=n,this.dataService=i,this.formBuilder=r,this.notificationService=a,this.detailForm=this.formBuilder.group({code:["",g.C.required],enabled:[!0,g.C.required],configArgs:this.formBuilder.group({})})}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}getType(e){return e.type}configArgsIsPopulated(){const e=this.detailForm.get("configArgs");return!!e&&0<Object.keys(e.controls).length}save(){this.entity$.pipe(Object(s.a)(1),Object(o.a)(({id:e,configArgs:t})=>{const c=this.detailForm.value,n={id:e,code:c.code,enabled:c.enabled,configArgs:Object.entries(c.configArgs).map(([e,c],n)=>({name:e,value:c.toString(),type:t[n].type}))};return this.dataService.settings.updatePaymentMethod(n)})).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"PaymentMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"PaymentMethod"})})}setFormValues(e){this.detailForm.patchValue({code:e.code,enabled:e.enabled});const t=this.detailForm.get("configArgs");if(t)for(const c of e.configArgs){const e=t.get(c.name);e?e.patchValue(this.parseArgValue(c)):t.addControl(c.name,this.formBuilder.control(this.parseArgValue(c)))}this.changeDetector.markForCheck()}parseArgValue(e){switch(e.type){case"int":return Number.parseInt(e.value||"0",10);case"boolean":return"false"!==e.value;default:return e.value||""}}};tc.\u0275fac=function(e){return new(e||tc)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},tc.\u0275cmp=i.bc({type:tc,selectors:[["vdr-payment-method-detail"]],features:[i.Sb],decls:22,vars:23,consts:[[3,"entity"],["locationId","payment-method-detail"],["class","btn btn-primary",3,"disabled",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","description",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["class","clr-row","formGroupName","configArgs",4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"btn","btn-primary",3,"disabled","click"],["formGroupName","configArgs",1,"clr-row"],[1,"clr-col"],["class","form-block",4,"ngFor","ngForOf"],[1,"form-block"],[3,"label","for",4,"ngIf"],[3,"label","for"],["type","text",3,"id","readonly","formControlName"],["type","number",3,"id","readonly","formControlName"],["type","checkbox","clrCheckbox","",3,"id","vdrDisabled","formControlName"]],template:function(e,t){if(1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"vdr-entity-info",0),i.yc(3,"async"),i.mc(),i.nc(4,"vdr-ab-right"),i.ic(5,"vdr-action-bar-items",1),i.Zc(6,ge,3,4,"button",2),i.yc(7,"async"),i.Zc(8,ye,1,1,"ng-template",null,3,i.ad),i.mc(),i.mc(),i.nc(10,"form",4),i.nc(11,"vdr-form-field",5),i.yc(12,"translate"),i.ic(13,"input",6),i.yc(14,"hasPermission"),i.mc(),i.nc(15,"vdr-form-field",7),i.yc(16,"translate"),i.nc(17,"clr-toggle-wrapper"),i.ic(18,"input",8),i.yc(19,"hasPermission"),i.mc(),i.mc(),i.Zc(20,Ve,7,6,"div",9),i.yc(21,"async"),i.mc()),2&e){const e=i.Pc(9);var c;const n=(null==(c=i.zc(21,21,t.entity$))?null:null==c.configArgs?null:c.configArgs.length)&&t.configArgsIsPopulated();i.Vb(2),i.Ec("entity",i.zc(3,9,t.entity$)),i.Vb(4),i.Ec("ngIf",i.zc(7,11,t.isNew$))("ngIfElse",e),i.Vb(4),i.Ec("formGroup",t.detailForm),i.Vb(1),i.Ec("label",i.zc(12,13,"common.code")),i.Vb(2),i.Ec("readonly",!i.zc(14,15,"UpdateSettings")),i.Vb(2),i.Ec("label",i.zc(16,17,"common.enabled")),i.Vb(3),i.Ec("vdrDisabled",!i.zc(19,19,"UpdateSettings")),i.Vb(2),i.Ec("ngIf",n)}},directives:[r.c,r.e,r.Z,r.f,r.d,I.p,g.E,g.q,g.j,r.cb,r.db,g.b,g.p,g.h,P.k,g.a,P.i,r.R,r.ob,g.k,P.t,I.o,g.v],pipes:[I.b,E.d,r.gb],styles:[""],changeDetection:0}),tc.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],tc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],tc);let cc=class extends r.w{constructor(e,t,c){super(t,c),this.dataService=e,super.setQueryFn((...e)=>this.dataService.settings.getPaymentMethods(...e),e=>e.paymentMethods)}};cc.\u0275fac=function(e){return new(e||cc)(i.hc(r.K),i.hc(f.e),i.hc(f.a))},cc.\u0275cmp=i.bc({type:cc,selectors:[["vdr-payment-method-list"]],features:[i.Sb],decls:16,vars:18,consts:[["locationId","payment-method-list"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-right"),i.ic(2,"vdr-action-bar-items",0),i.mc(),i.mc(),i.nc(3,"vdr-data-table",1),i.vc("pageChange",(function(e){return t.setPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setItemsPerPage(e)})),i.yc(4,"async"),i.yc(5,"async"),i.yc(6,"async"),i.yc(7,"async"),i.nc(8,"vdr-dt-column"),i.bd(9),i.yc(10,"translate"),i.mc(),i.nc(11,"vdr-dt-column"),i.bd(12),i.yc(13,"translate"),i.mc(),i.ic(14,"vdr-dt-column"),i.Zc(15,je,7,8,"ng-template"),i.mc()),2&e&&(i.Vb(3),i.Ec("items",i.zc(4,6,t.items$))("itemsPerPage",i.zc(5,8,t.itemsPerPage$))("totalItems",i.zc(6,10,t.totalItems$))("currentPage",i.zc(7,12,t.currentPage$)),i.Vb(6),i.cd(i.zc(10,14,"common.code")),i.Vb(3),i.cd(i.zc(13,16,"common.enabled")))},directives:[r.c,r.f,r.d,r.M,r.L,r.Lb],pipes:[I.b,E.d],styles:[""],changeDetection:0}),cc.ctorParameters=()=>[{type:r.K},{type:f.e},{type:f.a}],cc=Object(n.c)([Object(n.f)("design:paramtypes",[r.K,f.e,f.a])],cc);let nc=class{constructor(){this.permissions={},this.readonly=!1,this.permissionChange=new i.u,this.gridData=[{label:Object(y.a)("settings.catalog"),permissions:["CreateCatalog","ReadCatalog","UpdateCatalog","DeleteCatalog"]},{label:Object(y.a)("settings.customer"),permissions:["CreateCustomer","ReadCustomer","UpdateCustomer","DeleteCustomer"]},{label:Object(y.a)("settings.order"),permissions:["CreateOrder","ReadOrder","UpdateOrder","DeleteOrder"]},{label:Object(y.a)("settings.promotion"),permissions:["CreatePromotion","ReadPromotion","UpdatePromotion","DeletePromotion"]},{label:Object(y.a)("settings.administrator"),permissions:["CreateAdministrator","ReadAdministrator","UpdateAdministrator","DeleteAdministrator"]},{label:Object(y.a)("settings.settings"),permissions:["CreateSettings","ReadSettings","UpdateSettings","DeleteSettings"]}]}setPermission(e,t){this.readonly||this.permissionChange.emit({permission:e,value:t})}};nc.\u0275fac=function(e){return new(e||nc)},nc.\u0275cmp=i.bc({type:nc,selectors:[["vdr-permission-grid"]],inputs:{permissions:"permissions",readonly:"readonly"},outputs:{permissionChange:"permissionChange"},decls:19,vars:16,consts:[[1,"table"],[4,"ngFor","ngForOf"],["size","small",3,"disabled","selected","selectedChange"]],template:function(e,t){1&e&&(i.nc(0,"table",0),i.nc(1,"tr"),i.nc(2,"th"),i.bd(3),i.yc(4,"translate"),i.mc(),i.nc(5,"th"),i.bd(6),i.yc(7,"translate"),i.mc(),i.nc(8,"th"),i.bd(9),i.yc(10,"translate"),i.mc(),i.nc(11,"th"),i.bd(12),i.yc(13,"translate"),i.mc(),i.nc(14,"th"),i.bd(15),i.yc(16,"translate"),i.mc(),i.mc(),i.nc(17,"tbody"),i.Zc(18,ke,5,4,"tr",1),i.mc(),i.mc()),2&e&&(i.Vb(3),i.cd(i.zc(4,6,"settings.section")),i.Vb(3),i.cd(i.zc(7,8,"settings.create")),i.Vb(3),i.cd(i.zc(10,10,"settings.read")),i.Vb(3),i.cd(i.zc(13,12,"settings.update")),i.Vb(3),i.cd(i.zc(16,14,"settings.delete")),i.Vb(3),i.Ec("ngForOf",t.gridData))},directives:[I.o,r.Fb],pipes:[E.d],styles:[""]}),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Object)],nc.prototype,"permissions",void 0),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Object)],nc.prototype,"readonly",void 0),Object(n.c)([Object(i.O)(),Object(n.f)("design:type",Object)],nc.prototype,"permissionChange",void 0);let ic=class extends r.u{constructor(e,t,c,n,i,a,s){super(t,e,c,i),this.changeDetector=n,this.dataService=i,this.formBuilder=a,this.notificationService=s,this.permissionsChanged=!1,this.permissions=Object.keys(r.Db).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:!1}),{}),this.detailForm=this.formBuilder.group({code:["",g.C.required],description:["",g.C.required],channelIds:[]})}ngOnInit(){this.init(),this.role$=this.entity$}ngOnDestroy(){this.destroy()}updateCode(e){const t=this.detailForm.get(["code"]);t&&t.pristine&&t.setValue(Object(k.normalizeString)(e,"-"))}setPermission(e){this.permissions=Object.assign(Object.assign({},this.permissions),{[e.permission]:e.value}),this.permissionsChanged=!0}create(){const e=this.detailForm.value,t={code:e.code,description:e.description,permissions:this.getSelectedPermissions(),channelIds:e.channelIds};this.dataService.administrator.createRole(t).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-create-success"),{entity:"Role"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.permissionsChanged=!1,this.router.navigate(["../",e.createRole.id],{relativeTo:this.route})},e=>{this.notificationService.error(Object(y.a)("common.notify-create-error"),{entity:"Role"})})}save(){this.role$.pipe(Object(s.a)(1),Object(o.a)(({id:e})=>{const t=this.detailForm.value,c={id:e,code:t.code,description:t.description,permissions:this.getSelectedPermissions(),channelIds:t.channelIds};return this.dataService.administrator.updateRole(c)})).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"Role"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.permissionsChanged=!1},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"Role"})})}setFormValues(e,t){this.detailForm.patchValue({description:e.description,code:e.code,channelIds:e.channels.map(e=>e.id)});for(const c of Object.keys(this.permissions))this.permissions[c]=e.permissions.includes(c);this.changeDetector.detectChanges()}getSelectedPermissions(){return Object.keys(this.permissions).filter(e=>this.permissions[e])}};ic.\u0275fac=function(e){return new(e||ic)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},ic.\u0275cmp=i.bc({type:ic,selectors:[["vdr-role-detail"]],features:[i.Sb],decls:29,vars:36,consts:[[3,"entity"],["locationId","role-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","description",3,"label"],["id","description","type","text","formControlName","description",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],[3,"label"],["formControlName","channelIds",3,"vdrDisabled"],[3,"permissions","readonly","permissionChange"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"vdr-entity-info",0),i.yc(3,"async"),i.mc(),i.nc(4,"vdr-ab-right"),i.ic(5,"vdr-action-bar-items",1),i.Zc(6,xe,3,4,"button",2),i.yc(7,"async"),i.Zc(8,Ee,1,1,"ng-template",null,3,i.ad),i.mc(),i.mc(),i.nc(10,"form",4),i.nc(11,"vdr-form-field",5),i.yc(12,"translate"),i.nc(13,"input",6),i.vc("input",(function(e){return t.updateCode(e.target.value)})),i.yc(14,"hasPermission"),i.mc(),i.mc(),i.nc(15,"vdr-form-field",7),i.yc(16,"translate"),i.yc(17,"hasPermission"),i.ic(18,"input",8),i.yc(19,"hasPermission"),i.mc(),i.nc(20,"vdr-form-field",9),i.yc(21,"translate"),i.ic(22,"vdr-channel-assignment-control",10),i.yc(23,"hasPermission"),i.mc(),i.nc(24,"label"),i.bd(25),i.yc(26,"translate"),i.mc(),i.nc(27,"vdr-permission-grid",11),i.vc("permissionChange",(function(e){return t.setPermission(e)})),i.yc(28,"hasPermission"),i.mc(),i.mc()),2&e){const e=i.Pc(9);i.Vb(2),i.Ec("entity",i.zc(3,14,t.entity$)),i.Vb(4),i.Ec("ngIf",i.zc(7,16,t.isNew$))("ngIfElse",e),i.Vb(4),i.Ec("formGroup",t.detailForm),i.Vb(1),i.Ec("label",i.zc(12,18,"common.description")),i.Vb(2),i.Ec("readonly",!i.zc(14,20,"UpdateAdministrator")),i.Vb(2),i.Ec("label",i.zc(16,22,"common.code"))("readOnlyToggle",i.zc(17,24,"UpdateAdministrator")),i.Vb(3),i.Ec("readonly",!i.zc(19,26,"UpdateAdministrator")),i.Vb(2),i.Ec("label",i.zc(21,28,"settings.channel")),i.Vb(2),i.Ec("vdrDisabled",!i.zc(23,30,"UpdateAdministrator")),i.Vb(3),i.cd(i.zc(26,32,"settings.permissions")),i.Vb(2),i.Ec("permissions",t.permissions)("readonly",!i.zc(28,34,"UpdateAdministrator"))}},directives:[r.c,r.e,r.Z,r.f,r.d,I.p,g.E,g.q,g.j,r.cb,r.db,g.b,g.p,g.h,r.y,r.R,P.t,nc,r.ob],pipes:[I.b,E.d,r.gb],styles:[""],changeDetection:0}),ic.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],ic=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],ic);let rc=class extends r.w{constructor(e,t,c,n,i){super(n,i),this.modalService=e,this.notificationService=t,this.dataService=c,this.initialLimit=3,this.displayLimit={},super.setQueryFn((...e)=>this.dataService.administrator.getRoles(...e),e=>e.roles)}toggleDisplayLimit(e){this.displayLimit[e.id]===e.permissions.length?this.displayLimit[e.id]=this.initialLimit:this.displayLimit[e.id]=e.permissions.length}isDefaultRole(e){return e.code===z.SUPER_ADMIN_ROLE_CODE||e.code===z.CUSTOMER_ROLE_CODE}deleteRole(e){this.modalService.dialog({title:Object(y.a)("settings.confirm-delete-role"),buttons:[{type:"secondary",label:Object(y.a)("common.cancel")},{type:"danger",label:Object(y.a)("common.delete"),returnValue:!0}]}).pipe(Object(d.a)(t=>t?this.dataService.administrator.deleteRole(e):v.a)).subscribe(()=>{this.notificationService.success(Object(y.a)("common.notify-delete-success"),{entity:"Role"}),this.refresh()},e=>{this.notificationService.error(Object(y.a)("common.notify-delete-error"),{entity:"Role"})})}};rc.\u0275fac=function(e){return new(e||rc)(i.hc(r.xb),i.hc(r.yb),i.hc(r.K),i.hc(f.e),i.hc(f.a))},rc.\u0275cmp=i.bc({type:rc,selectors:[["vdr-role-list"]],features:[i.Sb],decls:24,vars:25,consts:[["locationId","role-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultRole",""],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo",4,"ngIf"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[4,"ngFor","ngForOf"],[3,"channelCode"],["class","btn btn-sm btn-secondary btn-icon",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary","btn-icon",3,"click"],["collapse",""],["shape","minus"],[1,"default-role-label"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-right"),i.ic(2,"vdr-action-bar-items",0),i.Zc(3,Pe,4,5,"a",1),i.mc(),i.mc(),i.nc(4,"vdr-data-table",2),i.vc("pageChange",(function(e){return t.setPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setItemsPerPage(e)})),i.yc(5,"async"),i.yc(6,"async"),i.yc(7,"async"),i.yc(8,"async"),i.nc(9,"vdr-dt-column"),i.bd(10),i.yc(11,"translate"),i.mc(),i.nc(12,"vdr-dt-column"),i.bd(13),i.yc(14,"translate"),i.mc(),i.nc(15,"vdr-dt-column"),i.bd(16),i.yc(17,"translate"),i.mc(),i.nc(18,"vdr-dt-column"),i.bd(19),i.yc(20,"translate"),i.mc(),i.ic(21,"vdr-dt-column"),i.ic(22,"vdr-dt-column"),i.Zc(23,Ne,24,16,"ng-template"),i.mc()),2&e&&(i.Vb(3),i.Ec("vdrIfPermissions","CreateAdministrator"),i.Vb(1),i.Ec("items",i.zc(5,9,t.items$))("itemsPerPage",i.zc(6,11,t.itemsPerPage$))("totalItems",i.zc(7,13,t.totalItems$))("currentPage",i.zc(8,15,t.currentPage$)),i.Vb(6),i.cd(i.zc(11,17,"common.description")),i.Vb(3),i.cd(i.zc(14,19,"common.code")),i.Vb(3),i.cd(i.zc(17,21,"settings.channel")),i.Vb(3),i.cd(i.zc(20,23,"settings.permissions")))},directives:[r.c,r.f,r.d,r.ob,r.M,r.L,f.h,P.o,I.p,r.S,r.V,r.U,r.T,I.o,r.B,r.z,r.Lb],pipes:[I.b,E.d,r.gb,r.A,I.y],styles:[".default-role-label[_ngcontent-%COMP%]{color:#97979a}"],changeDetection:0}),rc.ctorParameters=()=>[{type:r.xb},{type:r.yb},{type:r.K},{type:f.e},{type:f.a}],rc=Object(n.c)([Object(n.f)("design:paramtypes",[r.xb,r.yb,r.K,f.e,f.a])],rc);let ac=class{constructor(){this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new i.u}};ac.\u0275fac=function(e){return new(e||ac)},ac.\u0275cmp=i.bc({type:ac,selectors:[["vdr-shipping-eligibility-test-result"]],inputs:{okToRun:"okToRun",testDataUpdated:"testDataUpdated",testResult:"testResult",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:10,vars:9,consts:[[1,"test-result","card"],[1,"card-header"],["class","card-block",4,"ngFor","ngForOf"],["class","card-block",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"price-row"],[3,"value",4,"ngIf"],[3,"value"],["shape","ban",1,"is-solid","error"]],template:function(e,t){1&e&&(i.nc(0,"div",0),i.nc(1,"div",1),i.bd(2),i.yc(3,"translate"),i.mc(),i.Zc(4,Ue,15,21,"div",2),i.Zc(5,_e,4,3,"div",3),i.nc(6,"div",4),i.nc(7,"button",5),i.vc("click",(function(){return t.runTest.emit()})),i.bd(8),i.yc(9,"translate"),i.mc(),i.mc(),i.mc()),2&e&&(i.Vb(2),i.dd(" ",i.zc(3,5,"settings.test-result")," "),i.Vb(2),i.Ec("ngForOf",t.testResult),i.Vb(1),i.Ec("ngIf",0===(null==t.testResult?null:t.testResult.length)),i.Vb(2),i.Ec("disabled",!t.okToRun),i.Vb(1),i.dd(" ",i.zc(9,7,"settings.test-shipping-methods")," "))},directives:[I.o,I.p,r.sb,r.zb,P.o],pipes:[E.d,I.d],styles:[".result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:24px}clr-icon.error[_ngcontent-%COMP%]{color:#c92100}"],changeDetection:0}),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Array)],ac.prototype,"testResult",void 0),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Object)],ac.prototype,"okToRun",void 0),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Object)],ac.prototype,"testDataUpdated",void 0),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",String)],ac.prototype,"currencyCode",void 0),Object(n.c)([Object(i.O)(),Object(n.f)("design:type",Object)],ac.prototype,"runTest",void 0);let sc=class extends r.u{constructor(e,t,c,n,i,r,a){super(t,e,c,i),this.changeDetector=n,this.dataService=i,this.formBuilder=r,this.notificationService=a,this.checkers=[],this.calculators=[],this.testDataUpdated=!1,this.fetchTestResult$=new O.a,this.detailForm=this.formBuilder.group({code:["",g.C.required],description:["",g.C.required],checker:{},calculator:{}})}ngOnInit(){this.init(),Object(C.a)(this.dataService.shippingMethod.getShippingMethodOperations().single$,this.entity$.pipe(Object(s.a)(1))).subscribe(([e,t])=>{this.checkers=e.shippingEligibilityCheckers,this.calculators=e.shippingCalculators,this.changeDetector.markForCheck(),this.selectedCheckerDefinition=e.shippingEligibilityCheckers.find(e=>e.code===(t.checker&&t.checker.code)),this.selectedCalculatorDefinition=e.shippingCalculators.find(e=>e.code===(t.calculator&&t.calculator.code))}),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(e=>e.activeChannel),this.testResult$=this.fetchTestResult$.pipe(Object(d.a)(([e,t])=>{if(!this.selectedChecker||!this.selectedCalculator)return Object(S.a)(void 0);const c=this.detailForm.value,n={shippingAddress:Object.assign(Object.assign({},e),{streetLine1:"test"}),lines:t.map(e=>({productVariantId:e.id,quantity:e.quantity})),checker:this.toAdjustmentOperationInput(this.selectedChecker,c.checker),calculator:this.toAdjustmentOperationInput(this.selectedCalculator,c.calculator)};return this.dataService.shippingMethod.testShippingMethod(n).mapSingle(e=>e.testShippingMethod)})),Object(V.a)(this.detailForm.get(["checker"]).valueChanges,this.detailForm.get(["calculator"]).valueChanges).pipe(Object(b.a)(this.destroy$)).subscribe(()=>this.testDataUpdated=!0)}ngOnDestroy(){this.destroy()}updateCode(e,t){if(!e){const e=this.detailForm.get(["code"]);e&&e.pristine&&e.setValue(Object(k.normalizeString)(t,"-"))}}selectChecker(e){this.selectedCheckerDefinition=e,this.selectedChecker=this.configurableDefinitionToInstance(e);const t=this.detailForm.get("checker");t&&t.patchValue(this.selectedChecker),this.detailForm.markAsDirty()}selectCalculator(e){this.selectedCalculatorDefinition=e,this.selectedCalculator=this.configurableDefinitionToInstance(e);const t=this.detailForm.get("calculator");t&&t.patchValue(this.selectedCalculator),this.detailForm.markAsDirty()}configurableDefinitionToInstance(e){return Object.assign(Object.assign({},e),{args:e.args.map(e=>Object.assign(Object.assign({},e),{value:Object(r.Vb)(e)}))})}create(){if(!this.selectedChecker||!this.selectedCalculator)return;const e=this.detailForm.value,t={code:e.code,description:e.description,checker:this.toAdjustmentOperationInput(this.selectedChecker,e.checker),calculator:this.toAdjustmentOperationInput(this.selectedCalculator,e.calculator)};this.dataService.shippingMethod.createShippingMethod(t).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-create-success"),{entity:"ShippingMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createShippingMethod.id],{relativeTo:this.route})},e=>{this.notificationService.error(Object(y.a)("common.notify-create-error"),{entity:"ShippingMethod"})})}save(){const e=this.selectedChecker,t=this.selectedCalculator;e&&t&&this.entity$.pipe(Object(s.a)(1),Object(o.a)(({id:c})=>{const n=this.detailForm.value,i={id:c,code:n.code,description:n.description,checker:this.toAdjustmentOperationInput(e,n.checker),calculator:this.toAdjustmentOperationInput(t,n.calculator)};return this.dataService.shippingMethod.updateShippingMethod(i)})).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"ShippingMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"ShippingMethod"})})}setTestOrderLines(e){this.testOrderLines=e,this.testDataUpdated=!0}setTestAddress(e){this.testAddress=e,this.testDataUpdated=!0}allTestDataPresent(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length&&this.selectedChecker&&this.selectedCalculator)}runTest(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}toAdjustmentOperationInput(e,t){return{code:e.code,arguments:Object.values(t.args||{}).map((t,c)=>({name:e.args[c].name,value:t.hasOwnProperty("value")?t.value:t.toString(),type:e.args[c].type}))}}setFormValues(e){this.detailForm.patchValue({description:e.description,code:e.code,checker:e.checker||{},calculator:e.calculator||{}}),this.selectedChecker=e.checker,this.selectedCalculator=e.calculator}};sc.\u0275fac=function(e){return new(e||sc)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},sc.\u0275cmp=i.bc({type:sc,selectors:[["vdr-shipping-method-detail"]],features:[i.Sb],decls:19,vars:13,consts:[[3,"entity"],["locationId","shipping-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","description",3,"label"],["id","description","type","text","formControlName","description",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],[1,"clr-row"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","activeChannel","remove",4,"ngIf"],[4,"ngIf"],["formControlName","calculator",3,"operation","operationDefinition","readonly","activeChannel","remove",4,"ngIf"],["formControlName","checker",3,"operation","operationDefinition","readonly","activeChannel","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","calculator",3,"operation","operationDefinition","readonly","activeChannel","remove"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){if(1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"vdr-entity-info",0),i.yc(3,"async"),i.mc(),i.nc(4,"vdr-ab-right"),i.ic(5,"vdr-action-bar-items",1),i.Zc(6,Ge,3,4,"button",2),i.yc(7,"async"),i.Zc(8,Be,1,1,"ng-template",null,3,i.ad),i.mc(),i.mc(),i.Zc(10,et,23,26,"form",4),i.yc(11,"async"),i.nc(12,"div",5),i.nc(13,"clr-accordion"),i.nc(14,"clr-accordion-panel"),i.nc(15,"clr-accordion-title"),i.bd(16),i.yc(17,"translate"),i.mc(),i.Zc(18,tt,9,8,"clr-accordion-content",6),i.mc(),i.mc(),i.mc()),2&e){const e=i.Pc(9);i.Vb(2),i.Ec("entity",i.zc(3,5,t.entity$)),i.Vb(4),i.Ec("ngIf",i.zc(7,7,t.isNew$))("ngIfElse",e),i.Vb(4),i.Ec("ngIf",i.zc(11,9,t.entity$)),i.Vb(6),i.cd(i.zc(17,11,"settings.test-shipping-method"))}},directives:function(){return[r.c,r.e,r.Z,r.f,r.d,I.p,P.b,P.Q,P.d,P.P,P.e,P.M,P.q,r.ob,g.E,g.q,g.j,r.cb,r.db,g.b,g.p,g.h,P.t,r.C,r.S,r.V,P.o,r.U,I.o,r.T,P.c,hc,pc,dc]},pipes:function(){return[I.b,E.d,r.gb]},styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px;margin-bottom:128px}.testing-tool[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),sc.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],sc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],sc);let oc=class extends r.w{constructor(e,t,c,n,i){super(n,i),this.modalService=e,this.notificationService=t,this.dataService=c,this.testDataUpdated=!1,this.fetchTestResult$=new O.a,super.setQueryFn((...e)=>this.dataService.shippingMethod.getShippingMethods(...e),e=>e.shippingMethods)}ngOnInit(){super.ngOnInit(),this.testResult$=this.fetchTestResult$.pipe(Object(d.a)(([e,t])=>{const c={shippingAddress:Object.assign(Object.assign({},e),{streetLine1:"test"}),lines:t.map(e=>({productVariantId:e.id,quantity:e.quantity}))};return this.dataService.shippingMethod.testEligibleShippingMethods(c).mapSingle(e=>e.testEligibleShippingMethods)})),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(e=>e.activeChannel)}deleteShippingMethod(e){this.modalService.dialog({title:Object(y.a)("catalog.confirm-delete-shipping-method"),buttons:[{type:"secondary",label:Object(y.a)("common.cancel")},{type:"danger",label:Object(y.a)("common.delete"),returnValue:!0}]}).pipe(Object(d.a)(t=>t?this.dataService.shippingMethod.deleteShippingMethod(e):v.a)).subscribe(()=>{this.notificationService.success(Object(y.a)("common.notify-delete-success"),{entity:"ShippingMethod"}),this.refresh()},e=>{this.notificationService.error(Object(y.a)("common.notify-delete-error"),{entity:"ShippingMethod"})})}setTestOrderLines(e){this.testOrderLines=e,this.testDataUpdated=!0}setTestAddress(e){this.testAddress=e,this.testDataUpdated=!0}allTestDataPresent(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length)}runTest(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}};oc.\u0275fac=function(e){return new(e||oc)(i.hc(r.xb),i.hc(r.yb),i.hc(r.K),i.hc(f.e),i.hc(f.a))},oc.\u0275cmp=i.bc({type:oc,selectors:[["vdr-shipping-method-list"]],features:[i.Sb],decls:25,vars:22,consts:[["locationId","shipping-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"clr-row"],[1,"clr-col"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-right"),i.ic(2,"vdr-action-bar-items",0),i.Zc(3,ct,4,5,"a",1),i.mc(),i.mc(),i.nc(4,"vdr-data-table",2),i.vc("pageChange",(function(e){return t.setPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setItemsPerPage(e)})),i.yc(5,"async"),i.yc(6,"async"),i.yc(7,"async"),i.yc(8,"async"),i.nc(9,"vdr-dt-column"),i.bd(10),i.yc(11,"translate"),i.mc(),i.nc(12,"vdr-dt-column"),i.bd(13),i.yc(14,"translate"),i.mc(),i.ic(15,"vdr-dt-column"),i.ic(16,"vdr-dt-column"),i.Zc(17,nt,19,17,"ng-template"),i.mc(),i.nc(18,"div",3),i.nc(19,"clr-accordion"),i.nc(20,"clr-accordion-panel"),i.nc(21,"clr-accordion-title"),i.bd(22),i.yc(23,"translate"),i.mc(),i.Zc(24,it,9,8,"clr-accordion-content",4),i.mc(),i.mc(),i.mc()),2&e&&(i.Vb(3),i.Ec("vdrIfPermissions","CreateSettings"),i.Vb(1),i.Ec("items",i.zc(5,8,t.items$))("itemsPerPage",i.zc(6,10,t.itemsPerPage$))("totalItems",i.zc(7,12,t.totalItems$))("currentPage",i.zc(8,14,t.currentPage$)),i.Vb(6),i.cd(i.zc(11,16,"common.code")),i.Vb(3),i.cd(i.zc(14,18,"common.description")),i.Vb(9),i.cd(i.zc(23,20,"settings.test-shipping-methods")))},directives:function(){return[r.c,r.f,r.d,r.ob,r.M,r.L,P.b,P.Q,P.d,P.P,P.e,P.M,P.q,f.h,P.o,r.Lb,r.S,r.V,r.U,r.T,P.c,hc,pc,ac]},pipes:function(){return[I.b,E.d,r.gb]},styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px}"],changeDetection:0}),oc.ctorParameters=()=>[{type:r.xb},{type:r.yb},{type:r.K},{type:f.e},{type:f.a}],oc=Object(n.c)([Object(n.f)("design:paramtypes",[r.xb,r.yb,r.K,f.e,f.a])],oc);let dc=class{constructor(){this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new i.u}};dc.\u0275fac=function(e){return new(e||dc)},dc.\u0275cmp=i.bc({type:dc,selectors:[["vdr-shipping-method-test-result"]],inputs:{okToRun:"okToRun",testDataUpdated:"testDataUpdated",testResult:"testResult",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:21,vars:24,consts:[[1,"test-result","card",3,"ngClass"],[1,"card-header"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"eligible-icon"],["shape","success-standard","class","is-solid success",4,"ngIf"],["shape","ban","class","is-solid error",4,"ngIf"],["shape","unknown-status",4,"ngIf"],[1,"price-row"],[3,"label",4,"ngIf"],[3,"value",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],["shape","success-standard",1,"is-solid","success"],["shape","ban",1,"is-solid","error"],["shape","unknown-status"],[3,"value"]],template:function(e,t){1&e&&(i.nc(0,"div",0),i.nc(1,"div",1),i.bd(2),i.yc(3,"translate"),i.mc(),i.nc(4,"div",2),i.nc(5,"div",3),i.nc(6,"vdr-labeled-data",4),i.yc(7,"translate"),i.nc(8,"div",5),i.Zc(9,rt,1,0,"clr-icon",6),i.Zc(10,at,1,0,"clr-icon",7),i.Zc(11,st,1,0,"clr-icon",8),i.mc(),i.bd(12),i.mc(),i.nc(13,"div",9),i.Zc(14,ot,4,7,"vdr-labeled-data",10),i.Zc(15,dt,4,7,"vdr-labeled-data",10),i.mc(),i.Zc(16,lt,1,1,"vdr-object-tree",11),i.mc(),i.mc(),i.nc(17,"div",12),i.nc(18,"button",13),i.vc("click",(function(){return t.runTest.emit()})),i.bd(19),i.yc(20,"translate"),i.mc(),i.mc(),i.mc()),2&e&&(i.Ec("ngClass",i.Lc(20,mt,!0===(null==t.testResult?null:t.testResult.eligible),!1===(null==t.testResult?null:t.testResult.eligible),!t.testResult)),i.Vb(2),i.dd(" ",i.zc(3,14,"settings.test-result")," "),i.Vb(3),i.Yb("stale",t.testDataUpdated),i.Vb(1),i.Ec("label",i.zc(7,16,"settings.eligible")),i.Vb(3),i.Ec("ngIf",null==t.testResult?null:t.testResult.eligible),i.Vb(1),i.Ec("ngIf",!1===(null==t.testResult?null:t.testResult.eligible)),i.Vb(1),i.Ec("ngIf",!t.testResult),i.Vb(1),i.dd(" ",null==t.testResult?null:t.testResult.eligible," "),i.Vb(2),i.Ec("ngIf",null!=(null==t.testResult?null:null==t.testResult.quote?null:t.testResult.quote.price)),i.Vb(1),i.Ec("ngIf",null!=(null==t.testResult?null:null==t.testResult.quote?null:t.testResult.quote.priceWithTax)),i.Vb(1),i.Ec("ngIf",null==t.testResult?null:null==t.testResult.quote?null:t.testResult.quote.metadata),i.Vb(2),i.Ec("disabled",!t.okToRun),i.Vb(1),i.dd(" ",i.zc(20,18,"settings.test-shipping-method")," "))},directives:[I.n,r.sb,I.p,P.o,r.zb],pipes:[E.d,I.d],styles:[".test-result.success[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:#ddfbdd}.test-result.error[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:#fce2de}.test-result.unknown[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:#fafafa}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.eligible-icon[_ngcontent-%COMP%]{display:inline-block}.eligible-icon[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#308300}.eligible-icon[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#c92100}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:24px}"],changeDetection:0}),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Object)],dc.prototype,"testResult",void 0),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Object)],dc.prototype,"okToRun",void 0),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Object)],dc.prototype,"testDataUpdated",void 0),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",String)],dc.prototype,"currencyCode",void 0),Object(n.c)([Object(i.O)(),Object(n.f)("design:type",Object)],dc.prototype,"runTest",void 0);let lc=class extends r.u{constructor(e,t,c,n,i,r,a){super(t,e,c,i),this.changeDetector=n,this.dataService=i,this.formBuilder=r,this.notificationService=a,this.detailForm=this.formBuilder.group({name:["",g.C.required],taxRate:[0,g.C.required]})}ngOnInit(){this.init(),this.taxCategory$=this.entity$}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const e={name:this.detailForm.value.name};this.dataService.settings.createTaxCategory(e).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-create-success"),{entity:"TaxCategory"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createTaxCategory.id],{relativeTo:this.route})},e=>{this.notificationService.error(Object(y.a)("common.notify-create-error"),{entity:"TaxCategory"})})}save(){if(!this.detailForm.dirty)return;const e=this.detailForm.value;this.taxCategory$.pipe(Object(s.a)(1),Object(o.a)(t=>{const c={id:t.id,name:e.name};return this.dataService.settings.updateTaxCategory(c)})).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"TaxCategory"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"TaxCategory"})})}setFormValues(e,t){this.detailForm.patchValue({name:e.name})}};lc.\u0275fac=function(e){return new(e||lc)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},lc.\u0275cmp=i.bc({type:lc,selectors:[["vdr-tax-detail"]],features:[i.Sb],decls:15,vars:14,consts:[[3,"entity"],["locationId","tax-category-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"vdr-entity-info",0),i.yc(3,"async"),i.mc(),i.nc(4,"vdr-ab-right"),i.ic(5,"vdr-action-bar-items",1),i.Zc(6,bt,3,4,"button",2),i.yc(7,"async"),i.Zc(8,pt,1,1,"ng-template",null,3,i.ad),i.mc(),i.mc(),i.nc(10,"form",4),i.nc(11,"vdr-form-field",5),i.yc(12,"translate"),i.ic(13,"input",6),i.yc(14,"hasPermission"),i.mc(),i.mc()),2&e){const e=i.Pc(9);i.Vb(2),i.Ec("entity",i.zc(3,6,t.entity$)),i.Vb(4),i.Ec("ngIf",i.zc(7,8,t.isNew$))("ngIfElse",e),i.Vb(4),i.Ec("formGroup",t.detailForm),i.Vb(1),i.Ec("label",i.zc(12,10,"common.name")),i.Vb(2),i.Ec("readonly",!i.zc(14,12,"UpdateSettings"))}},directives:[r.c,r.e,r.Z,r.f,r.d,I.p,g.E,g.q,g.j,r.cb,r.db,g.b,g.p,g.h,r.ob],pipes:[I.b,E.d,r.gb],styles:[""],changeDetection:0}),lc.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],lc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],lc);let mc=class{constructor(e,t,c){this.dataService=e,this.notificationService=t,this.modalService=c,this.queryResult=this.dataService.settings.getTaxCategories(),this.taxCategories$=this.queryResult.mapStream(e=>e.taxCategories)}deleteTaxCategory(e){return this.modalService.dialog({title:Object(y.a)("settings.confirm-delete-tax-category"),body:e.name,buttons:[{type:"secondary",label:Object(y.a)("common.cancel")},{type:"danger",label:Object(y.a)("common.delete"),returnValue:!0}]}).pipe(Object(d.a)(t=>t?this.dataService.settings.deleteTaxCategory(e.id):v.a),Object(a.a)(e=>e.deleteTaxCategory)).subscribe(e=>{e.result===r.O.DELETED?(this.notificationService.success(Object(y.a)("common.notify-delete-success"),{entity:"TaxRate"}),this.queryResult.ref.refetch()):this.notificationService.error(e.message||Object(y.a)("common.notify-delete-error"),{entity:"TaxRate"})},e=>{this.notificationService.error(Object(y.a)("common.notify-delete-error"),{entity:"TaxRate"})})}};mc.\u0275fac=function(e){return new(e||mc)(i.hc(r.K),i.hc(r.yb),i.hc(r.xb))},mc.\u0275cmp=i.bc({type:mc,selectors:[["vdr-tax-list"]],decls:12,vars:7,consts:[["locationId","tax-category-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-right"),i.ic(2,"vdr-action-bar-items",0),i.Zc(3,ht,4,5,"a",1),i.mc(),i.mc(),i.nc(4,"vdr-data-table",2),i.yc(5,"async"),i.nc(6,"vdr-dt-column"),i.bd(7),i.yc(8,"translate"),i.mc(),i.ic(9,"vdr-dt-column"),i.ic(10,"vdr-dt-column"),i.Zc(11,gt,17,16,"ng-template"),i.mc()),2&e&&(i.Vb(3),i.Ec("vdrIfPermissions","CreateSettings"),i.Vb(1),i.Ec("items",i.zc(5,3,t.taxCategories$)),i.Vb(3),i.cd(i.zc(8,5,"common.name")))},directives:[r.c,r.f,r.d,r.ob,r.M,r.L,f.h,P.o,r.Lb,r.S,r.V,r.U,r.T],pipes:[I.b,E.d,r.gb],styles:[""],changeDetection:0}),mc.ctorParameters=()=>[{type:r.K},{type:r.yb},{type:r.xb}],mc=Object(n.c)([Object(n.f)("design:paramtypes",[r.K,r.yb,r.xb])],mc);let bc=class extends r.u{constructor(e,t,c,n,i,r,a){super(t,e,c,i),this.changeDetector=n,this.dataService=i,this.formBuilder=r,this.notificationService=a,this.detailForm=this.formBuilder.group({name:["",g.C.required],enabled:[!0],value:[0,g.C.required],taxCategoryId:[""],zoneId:[""],customerGroupId:[""]})}ngOnInit(){this.init(),this.taxCategories$=this.dataService.settings.getTaxCategories().mapSingle(e=>e.taxCategories),this.zones$=this.dataService.settings.getZones().mapSingle(e=>e.zones)}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const e=this.detailForm.value,t={name:e.name,enabled:e.enabled,value:e.value,categoryId:e.taxCategoryId,zoneId:e.zoneId,customerGroupId:e.customerGroupId};this.dataService.settings.createTaxRate(t).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-create-success"),{entity:"TaxRate"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createTaxRate.id],{relativeTo:this.route})},e=>{this.notificationService.error(Object(y.a)("common.notify-create-error"),{entity:"TaxRate"})})}save(){if(!this.detailForm.dirty)return;const e=this.detailForm.value;this.entity$.pipe(Object(s.a)(1),Object(o.a)(t=>{const c={id:t.id,name:e.name,enabled:e.enabled,value:e.value,categoryId:e.taxCategoryId,zoneId:e.zoneId,customerGroupId:e.customerGroupId};return this.dataService.settings.updateTaxRate(c)})).subscribe(e=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"TaxRate"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"TaxRate"})})}setFormValues(e,t){this.detailForm.patchValue({name:e.name,enabled:e.enabled,value:e.value,taxCategoryId:e.category?e.category.id:"",zoneId:e.zone?e.zone.id:"",customerGroupId:e.customerGroup?e.customerGroup.id:""})}};bc.\u0275fac=function(e){return new(e||bc)(i.hc(f.e),i.hc(f.a),i.hc(r.Gb),i.hc(i.k),i.hc(r.K),i.hc(g.e),i.hc(r.yb))},bc.\u0275cmp=i.bc({type:bc,selectors:[["vdr-tax-rate-detail"]],features:[i.Sb],decls:37,vars:44,consts:[[3,"entity"],["locationId","tax-rate-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["for","value",3,"label"],["suffix","%"],["id","value","type","number","step","0.1","formControlName","value",3,"readonly"],["for","taxCategoryId",3,"label"],["clrSelect","","name","taxCategoryId","formControlName","taxCategoryId",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","zoneId",3,"label"],["clrSelect","","name","zoneId","formControlName","zoneId",3,"vdrDisabled"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"]],template:function(e,t){if(1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-left"),i.ic(2,"vdr-entity-info",0),i.yc(3,"async"),i.mc(),i.nc(4,"vdr-ab-right"),i.ic(5,"vdr-action-bar-items",1),i.Zc(6,ft,3,4,"button",2),i.yc(7,"async"),i.Zc(8,vt,1,1,"ng-template",null,3,i.ad),i.mc(),i.mc(),i.nc(10,"form",4),i.nc(11,"vdr-form-field",5),i.yc(12,"translate"),i.ic(13,"input",6),i.yc(14,"hasPermission"),i.mc(),i.nc(15,"vdr-form-field",7),i.yc(16,"translate"),i.nc(17,"clr-toggle-wrapper"),i.ic(18,"input",8),i.yc(19,"hasPermission"),i.mc(),i.mc(),i.nc(20,"vdr-form-field",9),i.yc(21,"translate"),i.nc(22,"vdr-affixed-input",10),i.ic(23,"input",11),i.yc(24,"hasPermission"),i.mc(),i.mc(),i.nc(25,"vdr-form-field",12),i.yc(26,"translate"),i.nc(27,"select",13),i.yc(28,"hasPermission"),i.Zc(29,Ot,2,2,"option",14),i.yc(30,"async"),i.mc(),i.mc(),i.nc(31,"vdr-form-field",15),i.yc(32,"translate"),i.nc(33,"select",16),i.yc(34,"hasPermission"),i.Zc(35,Ct,2,2,"option",14),i.yc(36,"async"),i.mc(),i.mc(),i.mc()),2&e){const e=i.Pc(9);i.Vb(2),i.Ec("entity",i.zc(3,16,t.entity$)),i.Vb(4),i.Ec("ngIf",i.zc(7,18,t.isNew$))("ngIfElse",e),i.Vb(4),i.Ec("formGroup",t.detailForm),i.Vb(1),i.Ec("label",i.zc(12,20,"common.name")),i.Vb(2),i.Ec("readonly",!i.zc(14,22,"UpdateSettings")),i.Vb(2),i.Ec("label",i.zc(16,24,"common.enabled")),i.Vb(3),i.Ec("vdrDisabled",!i.zc(19,26,"UpdateSettings")),i.Vb(2),i.Ec("label",i.zc(21,28,"settings.rate")),i.Vb(3),i.Ec("readonly",!i.zc(24,30,"UpdateSettings")),i.Vb(2),i.Ec("label",i.zc(26,32,"settings.tax-category")),i.Vb(2),i.Ec("vdrDisabled",!i.zc(28,34,"UpdateSettings")),i.Vb(2),i.Ec("ngForOf",i.zc(30,36,t.taxCategories$)),i.Vb(2),i.Ec("label",i.zc(32,38,"settings.zone")),i.Vb(2),i.Ec("vdrDisabled",!i.zc(34,40,"UpdateSettings")),i.Vb(2),i.Ec("ngForOf",i.zc(36,42,t.zones$))}},directives:[r.c,r.e,r.Z,r.f,r.d,I.p,g.E,g.q,g.j,r.cb,r.db,g.b,g.p,g.h,P.k,g.a,P.i,r.R,r.h,g.v,g.A,P.z,I.o,r.ob,g.u,g.D],pipes:[I.b,E.d,r.gb],styles:[""],changeDetection:0}),bc.ctorParameters=()=>[{type:f.e},{type:f.a},{type:r.Gb},{type:i.k},{type:r.K},{type:g.e},{type:r.yb}],bc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,f.a,r.Gb,i.k,r.K,g.e,r.yb])],bc);let uc=class extends r.w{constructor(e,t,c,n,i){super(n,i),this.modalService=e,this.notificationService=t,this.dataService=c,super.setQueryFn((...e)=>this.dataService.settings.getTaxRates(...e),e=>e.taxRates)}deleteTaxRate(e){return this.modalService.dialog({title:Object(y.a)("settings.confirm-delete-tax-rate"),body:e.name,buttons:[{type:"secondary",label:Object(y.a)("common.cancel")},{type:"danger",label:Object(y.a)("common.delete"),returnValue:!0}]}).pipe(Object(d.a)(t=>t?this.dataService.settings.deleteTaxRate(e.id):v.a),Object(a.a)(e=>e.deleteTaxRate)).subscribe(e=>{e.result===r.O.DELETED?(this.notificationService.success(Object(y.a)("common.notify-delete-success"),{entity:"TaxRate"}),this.refresh()):this.notificationService.error(e.message||Object(y.a)("common.notify-delete-error"),{entity:"TaxRate"})},e=>{this.notificationService.error(Object(y.a)("common.notify-delete-error"),{entity:"TaxRate"})})}};uc.\u0275fac=function(e){return new(e||uc)(i.hc(r.xb),i.hc(r.yb),i.hc(r.K),i.hc(f.e),i.hc(f.a))},uc.\u0275cmp=i.bc({type:uc,selectors:[["vdr-tax-rate-list"]],features:[i.Sb],decls:24,vars:25,consts:[["locationId","tax-rate-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.nc(1,"vdr-ab-right"),i.ic(2,"vdr-action-bar-items",0),i.Zc(3,St,4,5,"a",1),i.mc(),i.mc(),i.nc(4,"vdr-data-table",2),i.vc("pageChange",(function(e){return t.setPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setItemsPerPage(e)})),i.yc(5,"async"),i.yc(6,"async"),i.yc(7,"async"),i.yc(8,"async"),i.nc(9,"vdr-dt-column"),i.bd(10),i.yc(11,"translate"),i.mc(),i.nc(12,"vdr-dt-column"),i.bd(13),i.yc(14,"translate"),i.mc(),i.nc(15,"vdr-dt-column"),i.bd(16),i.yc(17,"translate"),i.mc(),i.nc(18,"vdr-dt-column"),i.bd(19),i.yc(20,"translate"),i.mc(),i.ic(21,"vdr-dt-column"),i.ic(22,"vdr-dt-column"),i.Zc(23,Vt,23,19,"ng-template"),i.mc()),2&e&&(i.Vb(3),i.Ec("vdrIfPermissions","CreateSettings"),i.Vb(1),i.Ec("items",i.zc(5,9,t.items$))("itemsPerPage",i.zc(6,11,t.itemsPerPage$))("totalItems",i.zc(7,13,t.totalItems$))("currentPage",i.zc(8,15,t.currentPage$)),i.Vb(6),i.cd(i.zc(11,17,"common.name")),i.Vb(3),i.cd(i.zc(14,19,"settings.tax-category")),i.Vb(3),i.cd(i.zc(17,21,"settings.zone")),i.Vb(3),i.cd(i.zc(20,23,"settings.tax-rate")))},directives:[r.c,r.f,r.d,r.ob,r.M,r.L,f.h,P.o,r.Lb,r.S,r.V,r.U,r.T],pipes:[I.b,E.d,r.gb],styles:[""],changeDetection:0}),uc.ctorParameters=()=>[{type:r.xb},{type:r.yb},{type:r.K},{type:f.e},{type:f.a}],uc=Object(n.c)([Object(n.f)("design:paramtypes",[r.xb,r.yb,r.K,f.e,f.a])],uc);let pc=class{constructor(e,t,c){this.formBuilder=e,this.dataService=t,this.localStorageService=c,this.addressChange=new i.u}ngOnInit(){this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(e=>e.countries.items);const e=this.localStorageService.getForCurrentLocation("shippingTestAddress"),t=e||{city:"",countryCode:"",postalCode:"",province:""};this.addressChange.emit(t),this.form=this.formBuilder.group(t),this.subscription=this.form.valueChanges.subscribe(e=>{this.localStorageService.setForCurrentLocation("shippingTestAddress",e),this.addressChange.emit(e)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}};pc.\u0275fac=function(e){return new(e||pc)(i.hc(g.e),i.hc(r.K),i.hc(r.vb))},pc.\u0275cmp=i.bc({type:pc,selectors:[["vdr-test-address-form"]],outputs:{addressChange:"addressChange"},decls:28,vars:19,consts:[[1,"card"],[1,"card-header"],[1,"card-block"],[3,"formGroup"],["formControlName","city","type","text","clrInput",""],["formControlName","province","type","text","clrInput",""],["formControlName","postalCode","type","text","clrInput",""],["name","countryCode","formControlName","countryCode","clrInput","","clrSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.nc(0,"div",0),i.nc(1,"div",1),i.bd(2),i.yc(3,"translate"),i.mc(),i.nc(4,"div",2),i.nc(5,"form",3),i.nc(6,"clr-input-container"),i.nc(7,"label"),i.bd(8),i.yc(9,"translate"),i.mc(),i.ic(10,"input",4),i.mc(),i.nc(11,"clr-input-container"),i.nc(12,"label"),i.bd(13),i.yc(14,"translate"),i.mc(),i.ic(15,"input",5),i.mc(),i.nc(16,"clr-input-container"),i.nc(17,"label"),i.bd(18),i.yc(19,"translate"),i.mc(),i.ic(20,"input",6),i.mc(),i.nc(21,"clr-input-container"),i.nc(22,"label"),i.bd(23),i.yc(24,"translate"),i.mc(),i.nc(25,"select",7),i.Zc(26,jt,2,2,"option",8),i.yc(27,"async"),i.mc(),i.mc(),i.mc(),i.mc(),i.mc()),2&e&&(i.Vb(2),i.dd(" ",i.zc(3,7,"settings.test-address")," "),i.Vb(3),i.Ec("formGroup",t.form),i.Vb(3),i.cd(i.zc(9,9,"customer.city")),i.Vb(5),i.cd(i.zc(14,11,"customer.province")),i.Vb(5),i.cd(i.zc(19,13,"customer.postal-code")),i.Vb(5),i.cd(i.zc(24,15,"customer.country")),i.Vb(3),i.Ec("ngForOf",i.zc(27,17,t.availableCountries$)))},directives:[g.E,g.q,g.j,P.s,P.t,r.db,g.b,g.p,g.h,P.r,g.A,P.z,I.o,g.u,g.D],pipes:[E.d,I.b],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),pc.ctorParameters=()=>[{type:g.e},{type:r.K},{type:r.vb}],Object(n.c)([Object(i.O)(),Object(n.f)("design:type",Object)],pc.prototype,"addressChange",void 0),pc=Object(n.c)([Object(n.f)("design:paramtypes",[g.e,r.K,r.vb])],pc);let hc=class{constructor(e,t){this.dataService=e,this.localStorageService=t,this.orderLinesChange=new i.u,this.lines=[],this.searchInput$=new O.a,this.resultSelected$=new O.a,this.searchLoading=!1}get subTotal(){return this.lines.reduce((e,t)=>e+t.unitPriceWithTax*t.quantity,0)}ngOnInit(){this.lines=this.loadFromLocalStorage(),this.lines&&this.orderLinesChange.emit(this.lines),this.initSearchResults(),this.dataService.settings.getActiveChannel("cache-first").single$.subscribe(e=>{this.currencyCode=e.activeChannel.currencyCode})}selectResult(e){e&&(this.resultSelected$.next(),this.ngSelect.clearModel(),this.addToLines(e))}addToLines(e){this.lines.find(t=>t.id===e.productVariantId)||(this.lines.push({id:e.productVariantId,name:e.productVariantName,preview:e.productPreview,quantity:1,sku:e.sku,unitPriceWithTax:"SinglePrice"===e.priceWithTax.__typename&&e.priceWithTax.value||0}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines))}updateQuantity(){this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}removeLine(e){this.lines=this.lines.filter(t=>t.id!==e.id),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}initSearchResults(){const e=this.searchInput$.pipe(Object(u.a)(200),Object(p.a)(),Object(m.a)(()=>this.searchLoading=!0),Object(d.a)(e=>e?this.dataService.settings.searchForTestOrder(e,10).mapSingle(e=>e.search.items):Object(S.a)([])),Object(m.a)(()=>this.searchLoading=!1)),t=this.resultSelected$.pipe(Object(h.a)([]));this.searchResults$=Object(j.a)(Object(S.a)([]),Object(V.a)(e,t))}persistToLocalStorage(){this.localStorageService.setForCurrentLocation("shippingTestOrder",this.lines)}loadFromLocalStorage(){return this.localStorageService.getForCurrentLocation("shippingTestOrder")||[]}};hc.\u0275fac=function(e){return new(e||hc)(i.hc(r.K),i.hc(r.vb))},hc.\u0275cmp=i.bc({type:hc,selectors:[["vdr-test-order-builder"]],viewQuery:function(e,t){var c;(1&e&&i.Xc(zt,!0),2&e)&&(i.Oc(c=i.wc())&&(t.ngSelect=c.first))},outputs:{orderLinesChange:"orderLinesChange"},decls:12,vars:16,consts:[[1,"card"],[1,"card-header"],["class","order-lines table",4,"ngIf","ngIfElse"],["emptyPlaceholder",""],[1,"card-block"],["bindLabel","productVariantName",3,"items","addTag","multiple","hideSelected","loading","typeahead","placeholder","change"],["autoComplete",""],[1,"order-lines","table"],["class","order-line",4,"ngFor","ngForOf"],[1,"sub-total"],[1,"left"],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","unit-price"],[1,"align-middle","quantity"],["type","number","max","9999","min","1",3,"ngModel","ngModelChange","change"],[1,"icon-button",3,"click"],["shape","trash"],[1,"align-middle","total"],[1,"card-block","empty-placeholder"],[1,"empty-text"],["shape","arrow","dir","down","size","96"]],template:function(e,t){if(1&e&&(i.nc(0,"div",0),i.nc(1,"div",1),i.bd(2),i.yc(3,"translate"),i.mc(),i.Zc(4,xt,31,23,"table",2),i.Zc(5,It,5,3,"ng-template",null,3,i.ad),i.nc(7,"div",4),i.nc(8,"ng-select",5,6),i.vc("change",(function(e){return t.selectResult(e)})),i.yc(10,"async"),i.yc(11,"translate"),i.mc(),i.mc(),i.mc()),2&e){const e=i.Pc(6);i.Vb(2),i.dd(" ",i.zc(3,10,"settings.test-order")," "),i.Vb(2),i.Ec("ngIf",t.lines.length)("ngIfElse",e),i.Vb(4),i.Ec("items",i.zc(10,12,t.searchResults$))("addTag",!1)("multiple",!1)("hideSelected",!0)("loading",t.searchLoading)("typeahead",t.searchInput$)("placeholder",i.zc(11,14,"settings.search-by-product-name-or-sku"))}},directives:[I.p,x.a,I.o,r.db,g.v,g.b,g.p,g.s,P.o,T.b],pipes:[E.d,I.b,I.d],styles:[".empty-placeholder[_ngcontent-%COMP%]{color:#97979a;text-align:center}.empty-text[_ngcontent-%COMP%]{font-size:22px}"],changeDetection:0}),hc.ctorParameters=()=>[{type:r.K},{type:r.vb}],Object(n.c)([Object(i.O)(),Object(n.f)("design:type",Object)],hc.prototype,"orderLinesChange",void 0),Object(n.c)([Object(i.fb)("autoComplete",{static:!0}),Object(n.f)("design:type",x.a)],hc.prototype,"ngSelect",void 0),hc=Object(n.c)([Object(n.f)("design:paramtypes",[r.K,r.vb])],hc);let gc=class{cancel(){this.resolveWith()}save(){this.resolveWith(this.zone.name)}};gc.\u0275fac=function(e){return new(e||gc)},gc.\u0275cmp=i.bc({type:gc,selectors:[["vdr-zone-detail-dialog"]],decls:6,vars:7,consts:[["vdrDialogTitle",""],["for","name",3,"label"],["id","name","type","text",3,"ngModel","readonly","ngModelChange"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(i.Zc(0,Tt,2,2,"ng-template",0),i.nc(1,"vdr-form-field",1),i.yc(2,"translate"),i.nc(3,"input",2),i.vc("ngModelChange",(function(e){return t.zone.name=e})),i.yc(4,"hasPermission"),i.mc(),i.mc(),i.Zc(5,wt,6,6,"ng-template",3)),2&e&&(i.Vb(1),i.Ec("label",i.zc(2,3,"common.name")),i.Vb(2),i.Ec("ngModel",t.zone.name)("readonly",!i.zc(4,5,"UpdateSettings")))},directives:[r.Q,r.cb,r.db,g.b,g.p,g.s,r.P,I.p],pipes:[E.d,r.gb],styles:[""],changeDetection:0});let fc=class{constructor(e,t,c,n,i){this.dataService=e,this.notificationService=t,this.modalService=c,this.route=n,this.router=i,this.selectedMemberIds=[]}ngOnInit(){this.zones$=this.dataService.settings.getZones().mapStream(e=>e.zones);const e=this.route.paramMap.pipe(Object(a.a)(e=>e.get("contents")),Object(p.a)(),Object(m.a)(()=>this.selectedMemberIds=[]));this.activeZone$=Object(C.a)(this.zones$,e).pipe(Object(a.a)(([e,t])=>{if(t)return e.find(e=>e.id===t)}))}create(){this.modalService.fromComponent(gc,{locals:{zone:{name:""}}}).pipe(Object(d.a)(e=>e?this.dataService.settings.createZone({name:e,memberIds:[]}):v.a),Object(d.a)(()=>this.dataService.settings.getZones().single$)).subscribe(()=>{this.notificationService.success(Object(y.a)("common.notify-create-success"),{entity:"Zone"})},e=>{this.notificationService.error(Object(y.a)("common.notify-create-error"),{entity:"Zone"})})}delete(e){this.modalService.dialog({title:Object(y.a)("catalog.confirm-delete-zone"),buttons:[{type:"secondary",label:Object(y.a)("common.cancel")},{type:"danger",label:Object(y.a)("common.delete"),returnValue:!0}]}).pipe(Object(d.a)(t=>t?this.dataService.settings.deleteZone(e):v.a),Object(d.a)(e=>e.deleteZone.result===r.O.DELETED?this.dataService.settings.getZones().mapSingle(()=>({errorMessage:!1})):Object(S.a)({errorMessage:e.deleteZone.message}))).subscribe(e=>{"string"==typeof e.errorMessage?this.notificationService.error(e.errorMessage):this.notificationService.success(Object(y.a)("common.notify-delete-success"),{entity:"Zone"})},e=>{this.notificationService.error(Object(y.a)("common.notify-delete-error"),{entity:"Zone"})})}update(e){this.modalService.fromComponent(gc,{locals:{zone:e}}).pipe(Object(d.a)(t=>t?this.dataService.settings.updateZone({id:e.id,name:t}):v.a)).subscribe(()=>{this.notificationService.success(Object(y.a)("common.notify-update-success"),{entity:"Zone"})},e=>{this.notificationService.error(Object(y.a)("common.notify-update-error"),{entity:"Zone"})})}closeMembers(){const e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}addToZone(e){this.modalService.fromComponent(Bt,{locals:{zoneName:e.name,currentMembers:e.members},size:"md"}).pipe(Object(d.a)(t=>t?this.dataService.settings.addMembersToZone(e.id,t).pipe(Object(h.a)(t)):v.a)).subscribe({next:t=>{this.notificationService.success(Object(y.a)("settings.add-countries-to-zone-success"),{countryCount:t.length,zoneName:e.name})},error:e=>{this.notificationService.error(e)}})}removeFromZone(e,t){this.dataService.settings.removeMembersFromZone(e.id,t).subscribe({complete:()=>{this.notificationService.success(Object(y.a)("settings.remove-countries-from-zone-success"),{countryCount:t.length,zoneName:e.name})}})}};fc.\u0275fac=function(e){return new(e||fc)(i.hc(r.K),i.hc(r.yb),i.hc(r.xb),i.hc(f.a),i.hc(f.e))},fc.\u0275cmp=i.bc({type:fc,selectors:[["vdr-zone-list"]],decls:14,vars:11,consts:[["locationId","zone-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"zone-wrapper"],[1,"table","zone-list"],[3,"active",4,"ngFor","ngForOf"],[1,"zone-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],[1,"text-right","align-middle"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"members","selectedMemberIds","selectionChange"],[4,"vdrZoneMemberListHeader"],[4,"vdrZoneMemberControls"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],["type","button","vdrDropdownItem","",3,"routerLink"]],template:function(e,t){1&e&&(i.nc(0,"vdr-action-bar"),i.ic(1,"vdr-ab-left"),i.nc(2,"vdr-ab-right"),i.ic(3,"vdr-action-bar-items",0),i.Zc(4,Zt,4,3,"button",1),i.mc(),i.mc(),i.nc(5,"div",2),i.nc(6,"table",3),i.nc(7,"tbody"),i.Zc(8,At,29,27,"tr",4),i.yc(9,"async"),i.mc(),i.mc(),i.nc(10,"div",5),i.yc(11,"async"),i.Zc(12,Lt,4,2,"ng-container",6),i.yc(13,"async"),i.mc(),i.mc()),2&e&&(i.Vb(4),i.Ec("vdrIfPermissions","CreateSettings"),i.Vb(4),i.Ec("ngForOf",i.zc(9,5,t.zones$)),i.Vb(2),i.Yb("expanded",i.zc(11,7,t.activeZone$)),i.Vb(2),i.Ec("ngIf",i.zc(13,9,t.activeZone$)))},directives:function(){return[r.c,r.e,r.f,r.d,r.ob,I.o,I.p,P.o,r.Z,r.B,f.h,r.S,r.V,r.U,r.T,Oc,vc,yc]},pipes:function(){return[I.b,E.d,r.gb]},styles:[".zone-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:#f2f3f5}.zone-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility .3s}.zone-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-left:12px}.zone-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:0 0;border:none;cursor:pointer}.zone-members[_ngcontent-%COMP%]     table.table{margin-top:0}.zone-members[_ngcontent-%COMP%]     table.table th{top:0}.zone-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),fc.ctorParameters=()=>[{type:r.K},{type:r.yb},{type:r.xb},{type:f.a},{type:f.e}],fc=Object(n.c)([Object(n.f)("design:paramtypes",[r.K,r.yb,r.xb,f.a,f.e])],fc);let yc=class{constructor(e){this.templateRef=e}};yc.\u0275fac=function(e){return new(e||yc)(i.hc(i.bb))},yc.\u0275dir=i.cc({type:yc,selectors:[["","vdrZoneMemberControls",""]]}),yc.ctorParameters=()=>[{type:i.bb}],yc=Object(n.c)([Object(n.f)("design:paramtypes",[i.bb])],yc);let vc=class{constructor(e){this.templateRef=e}};vc.\u0275fac=function(e){return new(e||vc)(i.hc(i.bb))},vc.\u0275dir=i.cc({type:vc,selectors:[["","vdrZoneMemberListHeader",""]]}),vc.ctorParameters=()=>[{type:i.bb}],vc=Object(n.c)([Object(n.f)("design:paramtypes",[i.bb])],vc);let Oc=class{constructor(){this.members=[],this.selectedMemberIds=[],this.selectionChange=new i.u,this.filterTerm="",this.isMemberSelected=e=>-1<this.selectedMemberIds.indexOf(e.id)}filteredMembers(){if(""!==this.filterTerm){const e=this.filterTerm.toLocaleLowerCase();return this.members.filter(t=>t.name.toLocaleLowerCase().includes(e)||t.code.toLocaleLowerCase().includes(e))}return this.members}areAllSelected(){return!!this.members&&this.selectedMemberIds.length===this.members.length}toggleSelectAll(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map(e=>e.id))}toggleSelectMember(e){this.selectedMemberIds.includes(e.id)?this.selectionChange.emit(this.selectedMemberIds.filter(t=>t!==e.id)):this.selectionChange.emit([...this.selectedMemberIds,e.id])}};Oc.\u0275fac=function(e){return new(e||Oc)},Oc.\u0275cmp=i.bc({type:Oc,selectors:[["vdr-zone-member-list"]],contentQueries:function(e,t,c){var n;(1&e&&(i.ac(c,vc,!0),i.ac(c,yc,!0)),2&e)&&(i.Oc(n=i.wc())&&(t.headerTemplate=n.first),i.Oc(n=i.wc())&&(t.controlsTemplate=n.first))},inputs:{members:"members",selectedMemberIds:"selectedMemberIds"},outputs:{selectionChange:"selectionChange"},decls:17,vars:19,consts:[[1,"members-header"],[4,"ngIf"],["type","text",1,"clr-input",3,"placeholder","ngModel","ngModelChange"],[3,"items","allSelected","isRowSelectedFn","rowSelectChange","allSelectChange"],[4,"ngTemplateOutlet"],[1,"left","align-middle"],[1,"right","align-middle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(i.nc(0,"div",0),i.Zc(1,Kt,2,1,"ng-container",1),i.nc(2,"input",2),i.vc("ngModelChange",(function(e){return t.filterTerm=e})),i.yc(3,"translate"),i.mc(),i.mc(),i.nc(4,"vdr-data-table",3),i.vc("rowSelectChange",(function(e){return t.toggleSelectMember(e)}))("allSelectChange",(function(){return t.toggleSelectAll()})),i.yc(5,"hasPermission"),i.nc(6,"vdr-dt-column"),i.bd(7),i.yc(8,"translate"),i.mc(),i.nc(9,"vdr-dt-column"),i.bd(10),i.yc(11,"translate"),i.mc(),i.nc(12,"vdr-dt-column"),i.bd(13),i.yc(14,"translate"),i.mc(),i.ic(15,"vdr-dt-column"),i.Zc(16,qt,8,6,"ng-template"),i.mc()),2&e&&(i.Vb(1),i.Ec("ngIf",t.headerTemplate),i.Vb(1),i.Ec("placeholder",i.zc(3,9,"settings.filter-by-member-name"))("ngModel",t.filterTerm),i.Vb(2),i.Ec("items",t.filteredMembers())("allSelected",t.areAllSelected())("isRowSelectedFn",i.zc(5,11,"UpdateSettings")&&t.isMemberSelected),i.Vb(3),i.cd(i.zc(8,13,"common.code")),i.Vb(3),i.cd(i.zc(11,15,"common.name")),i.Vb(3),i.cd(i.zc(14,17,"common.enabled")))},directives:[I.p,r.db,g.b,g.p,g.s,r.M,r.L,I.u,P.o],pipes:[E.d,r.gb],styles:[".members-header[_ngcontent-%COMP%]{background-color:#fafafa;position:-webkit-sticky;position:sticky;top:0;padding:6px;z-index:5;border-bottom:1px solid #bfc3cc}.members-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.members-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Array)],Oc.prototype,"members",void 0),Object(n.c)([Object(i.D)(),Object(n.f)("design:type",Array)],Oc.prototype,"selectedMemberIds",void 0),Object(n.c)([Object(i.O)(),Object(n.f)("design:type",Object)],Oc.prototype,"selectionChange",void 0),Object(n.c)([Object(i.o)(vc),Object(n.f)("design:type",vc)],Oc.prototype,"headerTemplate",void 0),Object(n.c)([Object(i.o)(yc),Object(n.f)("design:type",yc)],Oc.prototype,"controlsTemplate",void 0);let Cc=class extends r.v{constructor(e,t){super(e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},e=>t.administrator.getAdministrator(e).mapStream(e=>e.administrator))}};Cc.\u0275fac=function(e){return new(e||Cc)(i.rc(f.e),i.rc(r.K))},Cc.ctorParameters=()=>[{type:f.e},{type:r.K}],Cc.\u0275prov=Object(i.dc)({factory:function(){return new Cc(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:Cc,providedIn:"root"}),Cc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],Cc);let Sc=class extends r.v{constructor(e,t){super(e,{__typename:"Channel",id:"",createdAt:"",updatedAt:"",code:"",token:"",pricesIncludeTax:!1,currencyCode:r.E.USD,defaultLanguageCode:Object(r.Wb)(),defaultShippingZone:{},defaultTaxZone:{}},e=>t.settings.getChannel(e).mapStream(e=>e.channel))}};Sc.\u0275fac=function(e){return new(e||Sc)(i.rc(f.e),i.rc(r.K))},Sc.ctorParameters=()=>[{type:f.e},{type:r.K}],Sc.\u0275prov=Object(i.dc)({factory:function(){return new Sc(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:Sc,providedIn:"root"}),Sc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],Sc);let Vc=class extends r.v{constructor(e,t){super(e,{__typename:"Country",id:"",createdAt:"",updatedAt:"",code:"",name:"",enabled:!1,translations:[]},e=>t.settings.getCountry(e).mapStream(e=>e.country))}};Vc.\u0275fac=function(e){return new(e||Vc)(i.rc(f.e),i.rc(r.K))},Vc.ctorParameters=()=>[{type:f.e},{type:r.K}],Vc.\u0275prov=Object(i.dc)({factory:function(){return new Vc(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:Vc,providedIn:"root"}),Vc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],Vc);let jc=class extends r.v{constructor(e,t){super(e,{},()=>t.settings.getGlobalSettings().mapStream(e=>e.globalSettings))}};jc.\u0275fac=function(e){return new(e||jc)(i.rc(f.e),i.rc(r.K))},jc.ctorParameters=()=>[{type:f.e},{type:r.K}],jc.\u0275prov=Object(i.dc)({factory:function(){return new jc(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:jc,providedIn:"root"}),jc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],jc);let zc=class extends r.v{constructor(e,t){super(e,{__typename:"PaymentMethod",id:"",createdAt:"",updatedAt:"",code:"",enabled:!0,configArgs:[]},e=>t.settings.getPaymentMethod(e).mapStream(e=>e.paymentMethod))}};zc.\u0275fac=function(e){return new(e||zc)(i.rc(f.e),i.rc(r.K))},zc.ctorParameters=()=>[{type:f.e},{type:r.K}],zc.\u0275prov=Object(i.dc)({factory:function(){return new zc(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:zc,providedIn:"root"}),zc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],zc);let kc=class extends r.v{constructor(e,t){super(e,{__typename:"Role",id:"",createdAt:"",updatedAt:"",code:"",description:"",permissions:[],channels:[]},e=>t.administrator.getRole(e).mapStream(e=>e.role))}};kc.\u0275fac=function(e){return new(e||kc)(i.rc(f.e),i.rc(r.K))},kc.ctorParameters=()=>[{type:f.e},{type:r.K}],kc.\u0275prov=Object(i.dc)({factory:function(){return new kc(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:kc,providedIn:"root"}),kc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],kc);let xc=class extends r.v{constructor(e,t){super(e,{__typename:"ShippingMethod",createdAt:"",updatedAt:"",id:"",code:"",description:"",checker:void 0,calculator:void 0},e=>t.shippingMethod.getShippingMethod(e).mapStream(e=>e.shippingMethod))}};xc.\u0275fac=function(e){return new(e||xc)(i.rc(f.e),i.rc(r.K))},xc.ctorParameters=()=>[{type:f.e},{type:r.K}],xc.\u0275prov=Object(i.dc)({factory:function(){return new xc(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:xc,providedIn:"root"}),xc=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],xc);let Ic=class extends r.v{constructor(e,t){super(e,{__typename:"TaxCategory",id:"",createdAt:"",updatedAt:"",name:""},e=>t.settings.getTaxCategory(e).mapStream(e=>e.taxCategory))}};Ic.\u0275fac=function(e){return new(e||Ic)(i.rc(f.e),i.rc(r.K))},Ic.ctorParameters=()=>[{type:f.e},{type:r.K}],Ic.\u0275prov=Object(i.dc)({factory:function(){return new Ic(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:Ic,providedIn:"root"}),Ic=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],Ic);let Ec=class extends r.v{constructor(e,t){super(e,{__typename:"TaxRate",id:"",createdAt:"",updatedAt:"",name:"",value:0,enabled:!0,category:{},zone:{},customerGroup:null},e=>t.settings.getTaxRate(e).mapStream(e=>e.taxRate))}};Ec.\u0275fac=function(e){return new(e||Ec)(i.rc(f.e),i.rc(r.K))},Ec.ctorParameters=()=>[{type:f.e},{type:r.K}],Ec.\u0275prov=Object(i.dc)({factory:function(){return new Ec(Object(i.rc)(f.e),Object(i.rc)(r.K))},token:Ec,providedIn:"root"}),Ec=Object(n.c)([Object(n.f)("design:paramtypes",[f.e,r.K])],Ec);const Pc={breadcrumb:Object(y.a)("breadcrumb.administrators")},Tc={breadcrumb:Wc},Fc={breadcrumb:Object(y.a)("breadcrumb.channels")},Dc={breadcrumb:Qc},wc={breadcrumb:Object(y.a)("breadcrumb.roles")},Zc={breadcrumb:Yc},Ac={breadcrumb:Object(y.a)("breadcrumb.tax-categories")},Mc={breadcrumb:Hc},Rc={breadcrumb:Object(y.a)("breadcrumb.tax-rates")},$c={breadcrumb:Xc},Lc={breadcrumb:Object(y.a)("breadcrumb.countries")},Nc={breadcrumb:en},Kc={breadcrumb:Object(y.a)("breadcrumb.zones")},Uc={breadcrumb:Object(y.a)("breadcrumb.shipping-methods")},_c={breadcrumb:tn},Gc={breadcrumb:Object(y.a)("breadcrumb.payment-methods")},qc={breadcrumb:cn},Bc={breadcrumb:Object(y.a)("breadcrumb.global-settings")},Jc=[{path:"administrators",component:Wt,data:Pc},{path:"administrators/:id",component:Jt,resolve:Object(r.Rb)(Cc),canDeactivate:[r.x],data:Tc},{path:"channels",component:Yt,data:Fc},{path:"channels/:id",component:Qt,resolve:Object(r.Rb)(Sc),canDeactivate:[r.x],data:Dc},{path:"roles",component:rc,data:wc},{path:"roles/:id",component:ic,resolve:Object(r.Rb)(kc),canDeactivate:[r.x],data:Zc},{path:"tax-categories",component:mc,data:Ac},{path:"tax-categories/:id",component:lc,resolve:Object(r.Rb)(Ic),canDeactivate:[r.x],data:Mc},{path:"tax-rates",component:uc,data:Rc},{path:"tax-rates/:id",component:bc,resolve:Object(r.Rb)(Ec),canDeactivate:[r.x],data:$c},{path:"countries",component:Xt,data:Lc},{path:"countries/:id",component:Ht,resolve:Object(r.Rb)(Vc),canDeactivate:[r.x],data:Nc},{path:"zones",component:fc,data:Kc},{path:"shipping-methods",component:oc,data:Uc},{path:"shipping-methods/:id",component:sc,resolve:Object(r.Rb)(xc),canDeactivate:[r.x],data:_c},{path:"payment-methods",component:cc,data:Gc},{path:"payment-methods/:id",component:tc,resolve:Object(r.Rb)(zc),canDeactivate:[r.x],data:qc},{path:"global-settings",component:ec,resolve:Object(r.Rb)(jc),canDeactivate:[r.x],data:Bc}];function Wc(e,t){return Object(r.Tb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.administrators",getName:e=>`${e.firstName} ${e.lastName}`,route:"administrators"})}function Qc(e,t){return Object(r.Tb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.channels",getName:e=>e.code,route:"channels"})}function Yc(e,t){return Object(r.Tb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.roles",getName:e=>e.description,route:"roles"})}function Hc(e,t){return Object(r.Tb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-categories",getName:e=>e.name,route:"tax-categories"})}function Xc(e,t){return Object(r.Tb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-rates",getName:e=>e.name,route:"tax-rates"})}function en(e,t){return Object(r.Tb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.countries",getName:e=>e.name,route:"countries"})}function tn(e,t){return Object(r.Tb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.shipping-methods",getName:e=>e.description,route:"shipping-methods"})}function cn(e,t){return Object(r.Tb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.payment-methods",getName:e=>e.code,route:"payment-methods"})}let nn=class{};nn.\u0275mod=i.fc({type:nn}),nn.\u0275inj=i.ec({factory:function(e){return new(e||nn)},imports:[[r.Hb,f.i.forChild(Jc)]]})}}]);