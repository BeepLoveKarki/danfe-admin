function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var c,n=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;c=Reflect.construct(n,arguments,r)}else c=n.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _get(e,t,c){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,c){var n=_superPropBase(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(c):r.value}})(e,t,c||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{tB2i:function(e,t,c){"use strict";c.r(t),c.d(t,"HealthCheckComponent",(function(){return x})),c.d(t,"JobListComponent",(function(){return T})),c.d(t,"JobStateLabelComponent",(function(){return A})),c.d(t,"SystemModule",(function(){return M})),c.d(t,"systemRoutes",(function(){return D})),c.d(t,"\u02750",(function(){return R})),c.d(t,"\u02751",(function(){return N}));var n=c("D57K"),r=c("EM62"),a=c("ixhn"),o=c("nIj0"),s=c("sEIs"),i=c("8lHc"),l=c("kuMc"),u=c("xVbo"),d=c("YtkY"),b=c("OxKu"),f=c("2kYt"),m=c("Kej3"),p=c("s2Ay"),y=c("jY47");function h(e,t){1&e&&(r.lc(0),r.bd(1),r.yc(2,"translate"),r.kc()),2&e&&(r.Vb(1),r.dd(" ",r.zc(2,1,"system.health-all-systems-up")," "))}function g(e,t){1&e&&(r.bd(0),r.yc(1,"translate")),2&e&&r.dd(" ",r.zc(1,1,"system.health-error")," ")}var v=function(e,t){return{"is-success":e,"is-danger":t}};function _(e,t){if(1&e&&(r.nc(0,"div",7),r.nc(1,"div",8),r.ic(2,"clr-icon",9),r.mc(),r.nc(3,"div",10),r.Zc(4,h,3,3,"ng-container",11),r.Zc(5,g,2,3,"ng-template",null,12,r.ad),r.nc(7,"div",13),r.bd(8),r.yc(9,"translate"),r.yc(10,"date"),r.yc(11,"async"),r.mc(),r.mc(),r.mc()),2&e){var c=t.ngIf,n=r.Pc(6),a=r.xc();r.Vb(2),r.Ec("ngClass",r.Kc(13,v,"ok"===c,"ok"!==c)),r.Wb("shape","ok"===c?"check-circle":"exclamation-circle"),r.Vb(2),r.Ec("ngIf","ok"===c)("ngIfElse",n),r.Vb(4),r.ed(" ",r.zc(9,6,"system.health-last-checked"),": ",r.Ac(10,8,r.zc(11,11,a.healthCheckService.lastCheck$),"mediumTime")," ")}}function j(e,t){1&e&&(r.lc(0),r.ic(1,"clr-icon",17),r.bd(2),r.yc(3,"translate"),r.kc()),2&e&&(r.Vb(2),r.dd(" ",r.zc(3,1,"system.health-status-up")," "))}function O(e,t){1&e&&(r.ic(0,"clr-icon",18),r.bd(1),r.yc(2,"translate")),2&e&&(r.Vb(1),r.dd(" ",r.zc(2,1,"system.health-status-down")," "))}function k(e,t){if(1&e&&(r.nc(0,"tr"),r.nc(1,"td",14),r.bd(2),r.mc(),r.nc(3,"td",14),r.nc(4,"vdr-chip",15),r.Zc(5,j,4,3,"ng-container",11),r.Zc(6,O,3,3,"ng-template",null,16,r.ad),r.mc(),r.mc(),r.nc(8,"td",14),r.bd(9),r.mc(),r.mc()),2&e){var c=t.$implicit,n=r.Pc(7);r.Vb(2),r.cd(c.key),r.Vb(2),r.Ec("colorType","up"===c.result.status?"success":"error"),r.Vb(1),r.Ec("ngIf","up"===c.result.status)("ngIfElse",n),r.Vb(4),r.cd(c.result.message)}}function C(e,t){1&e&&(r.lc(0),r.bd(1),r.yc(2,"translate"),r.kc()),2&e&&(r.Vb(1),r.dd(" ",r.zc(2,1,"system.all-job-queues")," "))}function P(e,t){if(1&e&&(r.nc(0,"vdr-chip",8),r.bd(1),r.mc()),2&e){var c=r.xc().item;r.Ec("colorFrom",c.name),r.Vb(1),r.cd(c.name)}}function V(e,t){if(1&e&&(r.Zc(0,C,3,3,"ng-container",6),r.Zc(1,P,2,2,"ng-template",null,7,r.ad)),2&e){var c=t.item,n=r.Pc(2);r.Ec("ngIf","all"===c.name)("ngIfElse",n)}}function w(e,t){if(1&e&&(r.nc(0,"vdr-dropdown"),r.nc(1,"button",13),r.yc(2,"translate"),r.ic(3,"clr-icon",14),r.mc(),r.nc(4,"vdr-dropdown-menu"),r.nc(5,"div",15),r.ic(6,"vdr-object-tree",16),r.mc(),r.mc(),r.mc()),2&e){var c=r.xc().item;r.Vb(1),r.Ec("title",r.zc(2,2,"system.job-data")),r.Vb(5),r.Ec("value",c.data)}}function I(e,t){if(1&e&&(r.nc(0,"vdr-dropdown"),r.nc(1,"button",17),r.ic(2,"clr-icon",14),r.bd(3),r.yc(4,"translate"),r.mc(),r.nc(5,"vdr-dropdown-menu"),r.nc(6,"div",15),r.ic(7,"vdr-object-tree",16),r.mc(),r.mc(),r.mc()),2&e){var c=r.xc().item;r.Vb(3),r.dd(" ",r.zc(4,2,"system.job-result")," "),r.Vb(4),r.Ec("value",c.result)}}function E(e,t){if(1&e&&(r.nc(0,"vdr-dropdown"),r.nc(1,"button",17),r.ic(2,"clr-icon",18),r.bd(3),r.yc(4,"translate"),r.mc(),r.nc(5,"vdr-dropdown-menu"),r.nc(6,"div",15),r.bd(7),r.mc(),r.mc(),r.mc()),2&e){var c=r.xc().item;r.Vb(3),r.dd(" ",r.zc(4,2,"system.job-error")," "),r.Vb(4),r.dd(" ",c.error," ")}}function z(e,t){if(1&e&&(r.nc(0,"td",9),r.ic(1,"vdr-entity-info",10),r.mc(),r.nc(2,"td",9),r.Zc(3,w,7,4,"vdr-dropdown",11),r.nc(4,"vdr-chip",8),r.bd(5),r.mc(),r.mc(),r.nc(6,"td",9),r.bd(7),r.yc(8,"timeAgo"),r.mc(),r.nc(9,"td",9),r.ic(10,"vdr-job-state-label",12),r.mc(),r.nc(11,"td",9),r.bd(12),r.yc(13,"duration"),r.mc(),r.nc(14,"td",9),r.Zc(15,I,8,4,"vdr-dropdown",11),r.Zc(16,E,8,4,"vdr-dropdown",11),r.mc()),2&e){var c=t.item,n=r.xc();r.Vb(1),r.Ec("entity",c),r.Vb(2),r.Ec("ngIf",c.data),r.Vb(1),r.Ec("colorFrom",c.queueName),r.Vb(1),r.cd(c.queueName),r.Vb(2),r.cd(r.zc(8,9,c.createdAt)),r.Vb(3),r.Ec("job",c),r.Vb(2),r.cd(r.zc(13,11,c.duration)),r.Vb(3),r.Ec("ngIf",n.hasResult(c)),r.Vb(1),r.Ec("ngIf",c.error)}}function S(e,t){if(1&e&&(r.nc(0,"span",2),r.bd(1),r.yc(2,"percent"),r.mc()),2&e){var c=r.xc();r.Vb(1),r.dd(" ",r.zc(2,1,c.job.progress/100)," ")}}var x=function e(t){_classCallCheck(this,e),this.healthCheckService=t};x.\u0275fac=function(e){return new(e||x)(r.hc(a.hb))},x.\u0275cmp=r.bc({type:x,selectors:[["vdr-health-check"]],decls:25,vars:18,consts:[["class","system-status-header",4,"ngIf"],["locationId","system-status"],[1,"btn","btn-secondary",3,"click"],["shape","refresh"],[1,"table"],[1,"left"],[4,"ngFor","ngForOf"],[1,"system-status-header"],[1,"status-icon"],["size","48",3,"ngClass"],[1,"status-detail"],[4,"ngIf","ngIfElse"],["error",""],[1,"last-checked"],[1,"align-middle","left"],[3,"colorType"],["down",""],["shape","check-circle"],["shape","exclamation-circle"]],template:function(e,t){1&e&&(r.nc(0,"vdr-action-bar"),r.nc(1,"vdr-ab-left"),r.Zc(2,_,12,16,"div",0),r.yc(3,"async"),r.mc(),r.nc(4,"vdr-ab-right"),r.ic(5,"vdr-action-bar-items",1),r.nc(6,"button",2),r.vc("click",(function(){return t.healthCheckService.refresh()})),r.ic(7,"clr-icon",3),r.bd(8),r.yc(9,"translate"),r.mc(),r.mc(),r.mc(),r.nc(10,"table",4),r.nc(11,"thead"),r.nc(12,"tr"),r.nc(13,"th",5),r.bd(14),r.yc(15,"translate"),r.mc(),r.nc(16,"th",5),r.bd(17),r.yc(18,"translate"),r.mc(),r.nc(19,"th",5),r.bd(20),r.yc(21,"translate"),r.mc(),r.mc(),r.mc(),r.nc(22,"tbody"),r.Zc(23,k,10,5,"tr",6),r.yc(24,"async"),r.mc(),r.mc()),2&e&&(r.Vb(2),r.Ec("ngIf",r.zc(3,6,t.healthCheckService.status$)),r.Vb(6),r.dd(" ",r.zc(9,8,"system.health-refresh")," "),r.Vb(6),r.dd(" ",r.zc(15,10,"common.name")," "),r.Vb(3),r.dd(" ",r.zc(18,12,"system.health-status")," "),r.Vb(3),r.dd(" ",r.zc(21,14,"system.health-message")," "),r.Vb(3),r.Ec("ngForOf",r.zc(24,16,t.healthCheckService.details$)))},directives:[a.c,a.e,f.p,a.f,a.d,m.o,f.o,f.n,a.B],pipes:[f.b,p.d,f.f],styles:[".system-status-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.system-status-header[_ngcontent-%COMP%]   .status-detail[_ngcontent-%COMP%]{font-weight:700}.system-status-header[_ngcontent-%COMP%]   .last-checked[_ngcontent-%COMP%]{font-weight:400;color:#525456}"],changeDetection:0}),x.ctorParameters=function(){return[{type:a.hb}]},x=Object(n.c)([Object(n.f)("design:paramtypes",[a.hb])],x);var T=function(e){_inherits(c,e);var t=_createSuper(c);function c(e,n,r,s,i){var l,u;return _classCallCheck(this,c),(u=t.call(this,s,i)).dataService=e,u.modalService=n,u.notificationService=r,u.liveUpdate=new o.f(!0),u.hideSettled=new o.f(!0),u.queueFilter=new o.f("all"),_get((l=_assertThisInitialized(u),_getPrototypeOf(c.prototype)),"setQueryFn",l).call(l,(function(){var e;return(e=u.dataService.settings).getAllJobs.apply(e,arguments)}),(function(e){return e.jobs}),(function(e,t){var c="all"===u.queueFilter.value?null:{queueName:{eq:u.queueFilter.value}},n=u.hideSettled.value;return{options:{skip:e,take:t,filter:Object.assign(Object.assign({},c),n?{isSettled:{eq:!1}}:{}),sort:{createdAt:a.Ib.DESC}}}})),u}return _createClass(c,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(c.prototype),"ngOnInit",this).call(this),Object(i.a)(5e3,2e3).pipe(Object(l.a)(this.destroy$),Object(u.a)((function(){return e.liveUpdate.value}))).subscribe((function(){e.refresh()})),this.queues$=this.dataService.settings.getJobQueues().mapStream((function(e){return e.jobQueues})).pipe(Object(d.a)((function(e){return[{name:"all",running:!0}].concat(_toConsumableArray(e))})))}},{key:"hasResult",value:function(e){var t=e.result;return null!=t&&("object"!=typeof t||Object.keys(t).length>0)}}]),c}(a.w);T.\u0275fac=function(e){return new(e||T)(r.hc(a.K),r.hc(a.xb),r.hc(a.yb),r.hc(s.e),r.hc(s.a))},T.\u0275cmp=r.bc({type:T,selectors:[["vdr-job-list"]],features:[r.Sb],decls:40,vars:45,consts:[["type","checkbox","clrCheckbox","","name","live-update",3,"formControl"],["type","checkbox","clrCheckbox","","name","hide-settled",3,"formControl","change"],["bindValue","name",3,"addTag","items","hideSelected","multiple","markFirst","clearable","searchable","formControl","change"],["ng-label-tmp","","ng-option-tmp",""],["locationId","job-list"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[4,"ngIf","ngIfElse"],["others",""],[3,"colorFrom"],[1,"left","align-middle"],[3,"entity"],[4,"ngIf"],[3,"job"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-icon",3,"title"],["shape","details"],[1,"result-detail"],[3,"value"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-sm","details-button"],["shape","exclamation-circle"]],template:function(e,t){1&e&&(r.nc(0,"vdr-action-bar"),r.nc(1,"vdr-ab-left"),r.nc(2,"clr-checkbox-container"),r.nc(3,"clr-checkbox-wrapper"),r.ic(4,"input",0),r.nc(5,"label"),r.bd(6),r.yc(7,"translate"),r.mc(),r.mc(),r.nc(8,"clr-checkbox-wrapper"),r.nc(9,"input",1),r.vc("change",(function(){return t.refresh()})),r.mc(),r.nc(10,"label"),r.bd(11),r.yc(12,"translate"),r.mc(),r.mc(),r.mc(),r.mc(),r.nc(13,"vdr-ab-right"),r.nc(14,"ng-select",2),r.vc("change",(function(){return t.refresh()})),r.yc(15,"async"),r.Zc(16,V,3,2,"ng-template",3),r.mc(),r.ic(17,"vdr-action-bar-items",4),r.mc(),r.mc(),r.nc(18,"vdr-data-table",5),r.vc("pageChange",(function(e){return t.setPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setItemsPerPage(e)})),r.yc(19,"async"),r.yc(20,"async"),r.yc(21,"async"),r.yc(22,"async"),r.ic(23,"vdr-dt-column"),r.nc(24,"vdr-dt-column"),r.bd(25),r.yc(26,"translate"),r.mc(),r.nc(27,"vdr-dt-column"),r.bd(28),r.yc(29,"translate"),r.mc(),r.nc(30,"vdr-dt-column"),r.bd(31),r.yc(32,"translate"),r.mc(),r.nc(33,"vdr-dt-column"),r.bd(34),r.yc(35,"translate"),r.mc(),r.nc(36,"vdr-dt-column"),r.bd(37),r.yc(38,"translate"),r.mc(),r.Zc(39,z,17,13,"ng-template"),r.mc()),2&e&&(r.Vb(4),r.Ec("formControl",t.liveUpdate),r.Vb(2),r.cd(r.zc(7,21,"common.live-update")),r.Vb(3),r.Ec("formControl",t.hideSettled),r.Vb(2),r.cd(r.zc(12,23,"system.hide-settled-jobs")),r.Vb(3),r.Ec("addTag",!1)("items",r.zc(15,25,t.queues$))("hideSelected",!0)("multiple",!1)("markFirst",!1)("clearable",!1)("searchable",!1)("formControl",t.queueFilter),r.Vb(4),r.Ec("items",r.zc(19,27,t.items$))("itemsPerPage",r.zc(20,29,t.itemsPerPage$))("totalItems",r.zc(21,31,t.totalItems$))("currentPage",r.zc(22,33,t.currentPage$)),r.Vb(7),r.cd(r.zc(26,35,"system.job-queue-name")),r.Vb(3),r.cd(r.zc(29,37,"common.created-at")),r.Vb(3),r.cd(r.zc(32,39,"system.job-state")),r.Vb(3),r.cd(r.zc(35,41,"system.job-duration")),r.Vb(3),r.cd(r.zc(38,43,"system.job-result")))},directives:function(){return[a.c,a.e,m.j,m.k,a.db,o.a,m.i,o.p,o.g,m.t,a.f,y.a,y.e,y.d,a.d,a.M,a.L,f.p,a.B,a.Z,A,a.S,a.V,m.o,a.U,a.zb]},pipes:function(){return[p.d,f.b,a.Mb,a.W]},styles:[".result-detail[_ngcontent-%COMP%]{margin:0 12px}"],changeDetection:0}),T.ctorParameters=function(){return[{type:a.K},{type:a.xb},{type:a.yb},{type:s.e},{type:s.a}]},T=Object(n.c)([Object(n.f)("design:paramtypes",[a.K,a.xb,a.yb,s.e,s.a])],T);var A=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"iconShape",get:function(){switch(this.job.state){case a.rb.COMPLETED:return"check-circle";case a.rb.FAILED:return"exclamation-circle";case a.rb.PENDING:case a.rb.RETRYING:return"hourglass";case a.rb.RUNNING:return"sync"}}},{key:"colorType",get:function(){switch(this.job.state){case a.rb.COMPLETED:return"success";case a.rb.FAILED:return"error";case a.rb.PENDING:case a.rb.RETRYING:return"";case a.rb.RUNNING:return"warning"}}}]),e}();A.\u0275fac=function(e){return new(e||A)},A.\u0275cmp=r.bc({type:A,selectors:[["vdr-job-state-label"]],inputs:{job:"job"},decls:5,vars:6,consts:[[3,"colorType"],["class","progress",4,"ngIf"],[1,"progress"]],template:function(e,t){1&e&&(r.nc(0,"vdr-chip",0),r.ic(1,"clr-icon"),r.bd(2),r.yc(3,"titlecase"),r.Zc(4,S,3,3,"span",1),r.mc()),2&e&&(r.Ec("colorType",t.colorType),r.Vb(1),r.Wb("shape",t.iconShape),r.Vb(1),r.dd(" ",r.zc(3,4,t.job.state)," "),r.Vb(2),r.Ec("ngIf","RUNNING"===t.job.state))},directives:[a.B,m.o,f.p],pipes:[f.z,f.w],styles:[".progress[_ngcontent-%COMP%]{margin-left:3px}clr-icon[_ngcontent-%COMP%]{min-width:12px}"],changeDetection:0}),Object(n.c)([Object(r.D)(),Object(n.f)("design:type",Object)],A.prototype,"job",void 0);var R={breadcrumb:Object(b.a)("breadcrumb.job-queue")},N={breadcrumb:Object(b.a)("breadcrumb.system-status")},D=[{path:"jobs",component:T,data:R},{path:"system-status",component:x,data:N}],M=function e(){_classCallCheck(this,e)};M.\u0275mod=r.fc({type:M}),M.\u0275inj=r.ec({factory:function(e){return new(e||M)},imports:[[a.Hb,s.i.forChild(D)]]})}}]);