!function(){function e(t,c,r){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,c){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(c):n.value}})(t,c,r||t)}function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var c=[],r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(c.push(s.value),!t||c.length!==t);r=!0);}catch(a){n=!0,i=a}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return c}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var c;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(c=n(e))||t&&e&&"number"==typeof e.length){c&&(e=c);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==c.return||c.return()}finally{if(a)throw s}}}}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,r=new Array(t);c<t;c++)r[c]=e[c];return r}function s(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,r=m(e);if(t){var n=m(this).constructor;c=Reflect.construct(r,arguments,n)}else c=r.apply(this,arguments);return l(this,c)}}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var c=0;c<t.length;c++){var r=t[c];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,c){return t&&f(e.prototype,t),c&&f(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{H88a:function(n,i,a){"use strict";a.r(i),a.d(i,"AddCustomerToGroupDialogComponent",(function(){return gt})),a.d(i,"AddressCardComponent",(function(){return yt})),a.d(i,"AddressDetailDialogComponent",(function(){return vt})),a.d(i,"CustomerDetailComponent",(function(){return Rt})),a.d(i,"CustomerGroupDetailDialogComponent",(function(){return Ot})),a.d(i,"CustomerGroupListComponent",(function(){return St})),a.d(i,"CustomerGroupMemberListComponent",(function(){return It})),a.d(i,"CustomerHistoryComponent",(function(){return Pt})),a.d(i,"CustomerListComponent",(function(){return Dt})),a.d(i,"CustomerModule",(function(){return Tt})),a.d(i,"CustomerResolver",(function(){return wt})),a.d(i,"CustomerStatusLabelComponent",(function(){return kt})),a.d(i,"SelectCustomerGroupDialogComponent",(function(){return Ct})),a.d(i,"customerBreadcrumb",(function(){return Nt})),a.d(i,"customerRoutes",(function(){return At})),a.d(i,"\u02750",(function(){return Ft})),a.d(i,"\u02751",(function(){return Mt})),a.d(i,"\u02752",(function(){return jt}));var l=a("EM62"),f=a("ixhn"),h=a("C05f"),g=a("ZTXN"),v=a("P4Xx"),y=a("GoAz"),C=a("6Oco"),R=a("HM3f"),O=a("ROBh"),S=a("TLy2"),I=a("YtkY"),P=a("xVbo"),D=a("J+dc"),k=a("wqq/"),w=a("g6G6"),F=a("jIqt"),M=a("cJ9h"),j=a("5uDM"),A=a("Ohay"),N=a("8j5Y"),T=a("7SLS"),E=a("mWib"),X=a("kuMc"),$=a("nIj0"),_=a("iFVg"),V=a("sEIs"),x=a("OxKu"),G=a("hG4v"),U=a("8hOy"),Z=a("2kYt"),Y=a("s2Ay"),B=a("Kej3"),L=a("jY47"),W=function(e){return{groupName:e}};function K(e,t){if(1&e&&(l.Xc(0),l.sc(1,"translate")),2&e){var c=l.rc();l.Zc(" ",l.uc(1,1,"customer.add-customers-to-group-with-name",l.Dc(4,W,c.group.name)),"\n")}}var H=function(e){return{count:e}};function q(e,t){if(1&e){var c=l.jc();l.ic(0,"button",3),l.pc("click",(function(){return l.Mc(c),l.rc().cancel()})),l.Xc(1),l.sc(2,"translate"),l.hc(),l.ic(3,"button",4),l.pc("click",(function(){return l.Mc(c),l.rc().add()})),l.Xc(4),l.sc(5,"translate"),l.hc()}if(2&e){var r=l.rc();l.Rb(1),l.Yc(l.tc(2,3,"common.cancel")),l.Rb(2),l.yc("disabled",!r.selectedCustomerIds.length),l.Rb(1),l.Zc(" ",l.uc(5,5,"customer.add-customers-to-group-with-count",l.Dc(8,H,r.selectedCustomerIds.length))," ")}}function J(e,t){if(1&e&&(l.ic(0,"span"),l.Xc(1),l.hc()),2&e){var c=t.ngIf;l.Rb(1),l.Zc("",c,",")}}function Q(e,t){if(1&e&&(l.ic(0,"span"),l.Xc(1),l.hc()),2&e){var c=t.ngIf;l.Rb(1),l.Zc(" ",c,"")}}function z(e,t){if(1&e&&(l.Vc(0,J,2,1,"span",15),l.Vc(1,Q,2,1,"span",15)),2&e){var c,r,n=l.rc();l.yc("ngIf",null==(c=n.addressForm.get("streetLine1"))?null:c.value),l.Rb(1),l.yc("ngIf",null==(r=n.addressForm.get("countryCode"))?null:r.value)}}function ee(e,t){if(1&e&&(l.ic(0,"option",16),l.Xc(1),l.hc()),2&e){var c=t.$implicit;l.yc("value",c.code),l.Rb(1),l.Zc(" ",c.name," ")}}function te(e,t){if(1&e&&(l.gc(0),l.dc(1,"vdr-custom-field-control",19),l.fc()),2&e){var c=t.$implicit,r=l.rc().ngIf;l.Rb(1),l.yc("customFieldsFormGroup",r)("customField",c)}}function ce(e,t){if(1&e&&(l.ic(0,"section",17),l.ic(1,"label"),l.Xc(2),l.sc(3,"translate"),l.hc(),l.Vc(4,te,2,2,"ng-container",18),l.hc()),2&e){var c=l.rc();l.Rb(2),l.Yc(l.tc(3,2,"common.custom-fields")),l.Rb(2),l.yc("ngForOf",c.customFields)}}function re(e,t){if(1&e){var c=l.jc();l.ic(0,"button",20),l.pc("click",(function(){return l.Mc(c),l.rc().cancel()})),l.Xc(1),l.sc(2,"translate"),l.hc(),l.ic(3,"button",21),l.pc("click",(function(){return l.Mc(c),l.rc().save()})),l.Xc(4),l.sc(5,"translate"),l.hc()}if(2&e){var r=l.rc();l.Rb(1),l.Yc(l.tc(2,3,"common.cancel")),l.Rb(2),l.yc("disabled",!r.addressForm.valid||!r.addressForm.touched),l.Rb(1),l.Zc(" ",l.tc(5,5,"common.update")," ")}}function ne(e,t){if(1&e&&(l.ic(0,"span",16),l.Xc(1),l.hc()),2&e){var c=l.rc().ngIf;l.Rb(1),l.Zc("",c.streetLine1,",")}}function ie(e,t){1&e&&(l.ic(0,"vdr-chip",17),l.dc(1,"clr-icon",18),l.Xc(2),l.sc(3,"translate"),l.hc()),2&e&&(l.Rb(2),l.Zc(" ",l.tc(3,1,"customer.default-shipping-address")," "))}function se(e,t){1&e&&(l.ic(0,"vdr-chip",17),l.dc(1,"clr-icon",19),l.Xc(2),l.sc(3,"translate"),l.hc()),2&e&&(l.Rb(2),l.Zc(" ",l.tc(3,1,"customer.default-billing-address")," "))}function oe(e,t){if(1&e){var c=l.jc();l.ic(0,"div",1),l.ic(1,"div",2),l.ic(2,"div",3),l.Vc(3,ne,2,1,"span",4),l.Xc(4),l.hc(),l.ic(5,"div",5),l.Vc(6,ie,4,3,"vdr-chip",6),l.Vc(7,se,4,3,"vdr-chip",6),l.hc(),l.hc(),l.ic(8,"div",7),l.ic(9,"div",8),l.dc(10,"vdr-formatted-address",9),l.hc(),l.hc(),l.ic(11,"div",10),l.dc(12,"vdr-entity-info",11),l.ic(13,"button",12),l.pc("click",(function(){return l.Mc(c),l.rc().editAddress()})),l.Xc(14),l.sc(15,"translate"),l.hc(),l.ic(16,"vdr-dropdown"),l.ic(17,"button",13),l.Xc(18),l.sc(19,"translate"),l.dc(20,"clr-icon",14),l.hc(),l.ic(21,"vdr-dropdown-menu"),l.ic(22,"button",15),l.pc("click",(function(){return l.Mc(c),l.rc().setAsDefaultShippingAddress()})),l.Xc(23),l.sc(24,"translate"),l.hc(),l.ic(25,"button",15),l.pc("click",(function(){return l.Mc(c),l.rc().setAsDefaultBillingAddress()})),l.Xc(26),l.sc(27,"translate"),l.hc(),l.hc(),l.hc(),l.hc(),l.hc()}if(2&e){var r=t.ngIf,n=l.rc();l.Rb(3),l.yc("ngIf",r.streetLine1),l.Rb(1),l.Zc(" ",r.countryCode," "),l.Rb(2),l.yc("ngIf",n.isDefaultShipping),l.Rb(1),l.yc("ngIf",n.isDefaultBilling),l.Rb(3),l.yc("address",r),l.Rb(2),l.yc("entity",r),l.Rb(2),l.Zc(" ",l.tc(15,12,"common.edit")," "),l.Rb(4),l.Zc(" ",l.tc(19,14,"common.more")," "),l.Rb(4),l.yc("disabled",n.isDefaultShipping),l.Rb(1),l.Zc(" ",l.tc(24,16,"customer.set-as-default-shipping-address")," "),l.Rb(2),l.yc("disabled",n.isDefaultBilling),l.Rb(1),l.Zc(" ",l.tc(27,18,"customer.set-as-default-billing-address")," ")}}function ae(e,t){1&e&&(l.Xc(0),l.sc(1,"translate")),2&e&&l.Zc(" ",l.tc(1,1,"customer.add-customer-to-group"),"\n")}function ue(e,t){if(1&e&&(l.ic(0,"span",5),l.pc("click",(function(){var e=t.item;return(0,t.clear)(e)})),l.Xc(1," \xd7 "),l.hc(),l.ic(2,"vdr-chip",6),l.Xc(3),l.hc()),2&e){var c=t.item;l.Rb(2),l.yc("colorFrom",c.id),l.Rb(1),l.Yc(c.name)}}function le(e,t){if(1&e&&(l.ic(0,"vdr-chip",6),l.Xc(1),l.hc()),2&e){var c=t.item;l.yc("colorFrom",c.id),l.Rb(1),l.Yc(c.name)}}function de(e,t){if(1&e){var c=l.jc();l.ic(0,"button",7),l.pc("click",(function(){return l.Mc(c),l.rc().cancel()})),l.Xc(1),l.sc(2,"translate"),l.hc(),l.ic(3,"button",8),l.pc("click",(function(){return l.Mc(c),l.rc().add()})),l.Xc(4),l.sc(5,"translate"),l.hc()}if(2&e){var r=l.rc();l.Rb(1),l.Yc(l.tc(2,3,"common.cancel")),l.Rb(2),l.yc("disabled",!r.selectedGroupIds.length),l.Rb(1),l.Zc(" ",l.uc(5,5,"customer.add-customer-to-groups-with-count",l.Dc(8,H,r.selectedGroupIds.length))," ")}}function me(e,t){if(1&e&&(l.ic(0,"div",22),l.sc(1,"date"),l.Xc(2),l.sc(3,"translate"),l.sc(4,"timeAgo"),l.hc()),2&e){var c=t.ngIf;l.yc("title",l.uc(1,3,c,"medium")),l.Rb(2),l.ad(" ",l.tc(3,6,"customer.last-login"),": ",l.tc(4,8,c)," ")}}function pe(e,t){if(1&e){var c=l.jc();l.ic(0,"button",23),l.pc("click",(function(){return l.Mc(c),l.rc().create()})),l.Xc(1),l.sc(2,"translate"),l.hc()}if(2&e){var r=l.rc();l.yc("disabled",!(r.addressDefaultsUpdated||r.detailForm.valid&&r.detailForm.dirty)),l.Rb(1),l.Zc(" ",l.tc(2,2,"common.create")," ")}}function fe(e,t){if(1&e){var c=l.jc();l.ic(0,"button",23),l.pc("click",(function(){return l.Mc(c),l.rc().save()})),l.Xc(1),l.sc(2,"translate"),l.hc()}if(2&e){var r=l.rc();l.yc("disabled",!(r.addressDefaultsUpdated||r.detailForm.valid&&r.detailForm.dirty)),l.Rb(1),l.Zc(" ",l.tc(2,2,"common.update")," ")}}function be(e,t){1&e&&(l.ic(0,"vdr-form-field",24),l.sc(1,"translate"),l.dc(2,"input",25),l.hc()),2&e&&l.yc("label",l.tc(1,1,"customer.password"))}var he=function(){return["customer","customFields"]};function ge(e,t){if(1&e&&l.dc(0,"vdr-custom-field-control",29),2&e){var c=l.rc().$implicit,r=l.rc(2);l.yc("customFieldsFormGroup",r.detailForm.get(l.Cc(2,he)))("customField",c)}}function ve(e,t){if(1&e&&(l.gc(0),l.Vc(1,ge,1,3,"vdr-custom-field-control",28),l.fc()),2&e){var c=t.$implicit,r=l.rc(2);l.Rb(1),l.yc("ngIf",r.customFieldIsSet(c.name))}}function ye(e,t){if(1&e&&(l.ic(0,"section",26),l.ic(1,"label"),l.Xc(2),l.sc(3,"translate"),l.hc(),l.Vc(4,ve,2,1,"ng-container",27),l.hc()),2&e){var c=l.rc();l.Rb(2),l.Yc(l.tc(3,2,"common.custom-fields")),l.Rb(2),l.yc("ngForOf",c.customFields)}}function Ce(e,t){if(1&e){var c=l.jc();l.ic(0,"vdr-chip",37),l.pc("iconClick",(function(){l.Mc(c);var e=t.$implicit;return l.rc(3).removeFromGroup(e)})),l.Xc(1),l.hc()}if(2&e){var r=t.$implicit;l.yc("colorFrom",r.id),l.Rb(1),l.Yc(r.name)}}function Re(e,t){if(1&e&&(l.gc(0),l.Vc(1,Ce,2,2,"vdr-chip",36),l.fc()),2&e){var c=l.rc().ngIf;l.Rb(1),l.yc("ngForOf",c)}}function Oe(e,t){1&e&&(l.Xc(0),l.sc(1,"translate")),2&e&&l.Zc(" ",l.tc(1,1,"customer.not-a-member-of-any-groups")," ")}function Se(e,t){if(1&e){var c=l.jc();l.ic(0,"div",30),l.ic(1,"label",31),l.Xc(2),l.sc(3,"translate"),l.hc(),l.Vc(4,Re,2,1,"ng-container",32),l.Vc(5,Oe,2,3,"ng-template",null,33,l.Wc),l.ic(7,"div"),l.ic(8,"button",34),l.pc("click",(function(){return l.Mc(c),l.rc().addToGroup()})),l.dc(9,"clr-icon",35),l.Xc(10),l.sc(11,"translate"),l.hc(),l.hc(),l.hc()}if(2&e){var r=t.ngIf,n=l.Jc(6);l.Rb(2),l.Yc(l.tc(3,4,"customer.customer-groups")),l.Rb(2),l.yc("ngIf",r.length)("ngIfElse",n),l.Rb(6),l.Zc(" ",l.tc(11,6,"customer.add-customer-to-group")," ")}}function Ie(e,t){if(1&e){var c=l.jc();l.ic(0,"vdr-address-card",44),l.pc("setAsDefaultBilling",(function(e){return l.Mc(c),l.rc(2).setDefaultBillingAddressId(e)}))("setAsDefaultShipping",(function(e){return l.Mc(c),l.rc(2).setDefaultShippingAddressId(e)})),l.sc(1,"async"),l.hc()}if(2&e){var r=t.$implicit,n=l.rc(2);l.yc("availableCountries",l.tc(1,5,n.availableCountries$))("isDefaultBilling",n.defaultBillingAddressId===r.value.id)("isDefaultShipping",n.defaultShippingAddressId===r.value.id)("addressForm",r)("customFields",n.addressCustomFields)}}var Pe=function(e){return["/orders/",e]};function De(e,t){if(1&e&&(l.ic(0,"td",45),l.Xc(1),l.hc(),l.ic(2,"td",45),l.Xc(3),l.hc(),l.ic(4,"td",45),l.Xc(5),l.sc(6,"currency"),l.hc(),l.ic(7,"td",45),l.Xc(8),l.sc(9,"date"),l.hc(),l.ic(10,"td",46),l.dc(11,"vdr-table-row-action",47),l.sc(12,"translate"),l.hc()),2&e){var c=t.item;l.Rb(1),l.Yc(c.code),l.Rb(2),l.Yc(c.state),l.Rb(2),l.Yc(l.uc(6,6,c.total/100,c.currencyCode)),l.Rb(3),l.Yc(l.uc(9,9,c.updatedAt,"medium")),l.Rb(3),l.yc("label",l.tc(12,12,"common.open"))("linkTo",l.Dc(14,Pe,c.id))}}function ke(e,t){if(1&e){var c=l.jc();l.ic(0,"div",38),l.ic(1,"div",39),l.ic(2,"h3"),l.Xc(3),l.sc(4,"translate"),l.hc(),l.Vc(5,Ie,2,7,"vdr-address-card",40),l.ic(6,"button",41),l.pc("click",(function(){return l.Mc(c),l.rc().addAddress()})),l.dc(7,"clr-icon",35),l.Xc(8),l.sc(9,"translate"),l.hc(),l.hc(),l.ic(10,"div",42),l.ic(11,"h3"),l.Xc(12),l.sc(13,"translate"),l.hc(),l.ic(14,"vdr-data-table",43),l.pc("itemsPerPageChange",(function(e){return l.Mc(c),l.rc().setOrderItemsPerPage(e)}))("pageChange",(function(e){return l.Mc(c),l.rc().setOrderCurrentPage(e)})),l.sc(15,"async"),l.sc(16,"async"),l.sc(17,"translate"),l.ic(18,"vdr-dt-column"),l.Xc(19),l.sc(20,"translate"),l.hc(),l.ic(21,"vdr-dt-column"),l.Xc(22),l.sc(23,"translate"),l.hc(),l.ic(24,"vdr-dt-column"),l.Xc(25),l.sc(26,"translate"),l.hc(),l.ic(27,"vdr-dt-column"),l.Xc(28),l.sc(29,"translate"),l.hc(),l.dc(30,"vdr-dt-column"),l.Vc(31,De,13,16,"ng-template"),l.hc(),l.hc(),l.hc()}if(2&e){var r=l.rc();l.Rb(3),l.Yc(l.tc(4,13,"customer.addresses")),l.Rb(2),l.yc("ngForOf",r.getAddressFormControls()),l.Rb(3),l.Zc(" ",l.tc(9,15,"customer.create-new-address")," "),l.Rb(4),l.Yc(l.tc(13,17,"customer.orders")),l.Rb(2),l.yc("items",l.tc(15,19,r.orders$))("itemsPerPage",r.ordersPerPage)("totalItems",l.tc(16,21,r.ordersCount$))("currentPage",r.currentOrdersPage)("emptyStateLabel",l.tc(17,23,"customer.no-orders-placed")),l.Rb(5),l.Yc(l.tc(20,25,"common.code")),l.Rb(3),l.Yc(l.tc(23,27,"order.state")),l.Rb(3),l.Yc(l.tc(26,29,"order.total")),l.Rb(3),l.Yc(l.tc(29,31,"common.updated-at"))}}function we(e,t){if(1&e){var c=l.jc();l.ic(0,"div",38),l.ic(1,"div",48),l.ic(2,"vdr-customer-history",49),l.pc("addNote",(function(e){return l.Mc(c),l.rc().addNoteToCustomer(e)}))("updateNote",(function(e){return l.Mc(c),l.rc().updateNote(e)}))("deleteNote",(function(e){return l.Mc(c),l.rc().deleteNote(e)})),l.sc(3,"async"),l.sc(4,"async"),l.hc(),l.hc(),l.hc()}if(2&e){var r=l.rc();l.Rb(2),l.yc("customer",l.tc(3,2,r.entity$))("history",l.tc(4,4,r.history$))}}function Fe(e,t){1&e&&(l.ic(0,"span"),l.Xc(1),l.sc(2,"translate"),l.hc()),2&e&&(l.Rb(1),l.Yc(l.tc(2,1,"customer.update-customer-group")))}function Me(e,t){1&e&&(l.ic(0,"span"),l.Xc(1),l.sc(2,"translate"),l.hc()),2&e&&(l.Rb(1),l.Yc(l.tc(2,1,"customer.create-customer-group")))}function je(e,t){if(1&e&&(l.Vc(0,Fe,3,3,"span",4),l.Vc(1,Me,3,3,"span",4)),2&e){var c=l.rc();l.yc("ngIf",c.group.id),l.Rb(1),l.yc("ngIf",!c.group.id)}}function Ae(e,t){1&e&&(l.ic(0,"span"),l.Xc(1),l.sc(2,"translate"),l.hc()),2&e&&(l.Rb(1),l.Yc(l.tc(2,1,"customer.update-customer-group")))}function Ne(e,t){1&e&&(l.ic(0,"span"),l.Xc(1),l.sc(2,"translate"),l.hc()),2&e&&(l.Rb(1),l.Yc(l.tc(2,1,"customer.create-customer-group")))}function Te(e,t){if(1&e){var c=l.jc();l.ic(0,"button",5),l.pc("click",(function(){return l.Mc(c),l.rc().cancel()})),l.Xc(1),l.sc(2,"translate"),l.hc(),l.ic(3,"button",6),l.pc("click",(function(){return l.Mc(c),l.rc().save()})),l.Vc(4,Ae,3,3,"span",4),l.Vc(5,Ne,3,3,"span",4),l.hc()}if(2&e){var r=l.rc();l.Rb(1),l.Yc(l.tc(2,4,"common.cancel")),l.Rb(2),l.yc("disabled",!r.group.name),l.Rb(1),l.yc("ngIf",r.group.id),l.Rb(1),l.yc("ngIf",!r.group.id)}}function Ee(e,t){if(1&e){var c=l.jc();l.ic(0,"button",7),l.pc("click",(function(){return l.Mc(c),l.rc().create()})),l.dc(1,"clr-icon",8),l.Xc(2),l.sc(3,"translate"),l.hc()}2&e&&(l.Rb(2),l.Zc(" ",l.tc(3,1,"customer.create-new-customer-group")," "))}var Xe=function(e){return{contents:e}},$e=function(e){return["./",e]};function _e(e,t){if(1&e){var c=l.jc();l.ic(0,"tr"),l.sc(1,"async"),l.ic(2,"td",11),l.dc(3,"vdr-entity-info",12),l.hc(),l.ic(4,"td",11),l.ic(5,"vdr-chip",13),l.Xc(6),l.hc(),l.hc(),l.ic(7,"td",14),l.ic(8,"a",15),l.dc(9,"clr-icon",16),l.Xc(10),l.sc(11,"translate"),l.hc(),l.hc(),l.ic(12,"td",17),l.ic(13,"button",18),l.pc("click",(function(){l.Mc(c);var e=t.$implicit;return l.rc(2).update(e)})),l.dc(14,"clr-icon",19),l.Xc(15),l.sc(16,"translate"),l.hc(),l.hc(),l.ic(17,"td",17),l.ic(18,"vdr-dropdown"),l.ic(19,"button",20),l.Xc(20),l.sc(21,"translate"),l.dc(22,"clr-icon",21),l.hc(),l.ic(23,"vdr-dropdown-menu",22),l.ic(24,"button",23),l.pc("click",(function(){l.Mc(c);var e=t.$implicit;return l.rc(2).delete(e.id)})),l.sc(25,"hasPermission"),l.dc(26,"clr-icon",24),l.Xc(27),l.sc(28,"translate"),l.hc(),l.hc(),l.hc(),l.hc(),l.hc()}if(2&e){var r,n=t.$implicit,i=l.rc(2);l.Ub("active",n.id===(null==(r=l.tc(1,11,i.activeGroup$))?null:r.id)),l.Rb(3),l.yc("entity",n),l.Rb(2),l.yc("colorFrom",n.id),l.Rb(1),l.Yc(n.name),l.Rb(2),l.yc("routerLink",l.Dc(25,$e,l.Dc(23,Xe,n.id))),l.Rb(2),l.Zc(" ",l.tc(11,13,"customer.view-group-members")," "),l.Rb(5),l.Zc(" ",l.tc(16,15,"common.edit")," "),l.Rb(5),l.Zc(" ",l.tc(21,17,"common.actions")," "),l.Rb(4),l.yc("disabled",!l.tc(25,19,"DeleteSettings")),l.Rb(3),l.Zc(" ",l.tc(28,21,"common.delete")," ")}}function Ve(e,t){if(1&e&&(l.ic(0,"table",9),l.sc(1,"async"),l.ic(2,"tbody"),l.Vc(3,_e,29,27,"tr",10),l.sc(4,"async"),l.hc(),l.hc()),2&e){var c=l.rc();l.Ub("expanded",l.tc(1,3,c.activeGroup$)),l.Rb(3),l.yc("ngForOf",l.tc(4,5,c.groups$))}}function xe(e,t){1&e&&l.dc(0,"vdr-empty-placeholder")}function Ge(e,t){if(1&e){var c=l.jc();l.gc(0),l.ic(1,"div",25),l.ic(2,"div",26),l.Xc(3),l.sc(4,"async"),l.hc(),l.dc(5,"div",27),l.ic(6,"button",28),l.pc("click",(function(){return l.Mc(c),l.rc().closeMembers()})),l.dc(7,"clr-icon",29),l.hc(),l.hc(),l.ic(8,"div",30),l.ic(9,"vdr-dropdown"),l.ic(10,"button",31),l.Xc(11),l.sc(12,"translate"),l.dc(13,"clr-icon",21),l.hc(),l.ic(14,"vdr-dropdown-menu",22),l.ic(15,"button",32),l.pc("click",(function(){l.Mc(c);var e=t.ngIf,r=l.rc();return r.removeFromGroup(e,r.selectedCustomerIds)})),l.sc(16,"hasPermission"),l.dc(17,"clr-icon",24),l.Xc(18),l.sc(19,"translate"),l.hc(),l.hc(),l.hc(),l.ic(20,"button",33),l.pc("click",(function(){l.Mc(c);var e=t.ngIf;return l.rc().addToGroup(e)})),l.Xc(21),l.sc(22,"translate"),l.hc(),l.hc(),l.ic(23,"vdr-customer-group-member-list",34),l.pc("selectionChange",(function(e){return l.Mc(c),l.rc().selectedCustomerIds=e}))("fetchParamsChange",(function(e){return l.Mc(c),l.rc().fetchGroupMembers$.next(e)})),l.sc(24,"async"),l.sc(25,"async"),l.hc(),l.fc()}if(2&e){var r=t.ngIf,n=l.rc();l.Rb(3),l.ad(" ",r.name," (",l.tc(4,11,n.membersTotal$),") "),l.Rb(7),l.yc("disabled",0===n.selectedCustomerIds.length),l.Rb(1),l.Zc(" ",l.tc(12,13,"common.with-selected")," "),l.Rb(4),l.yc("disabled",!l.tc(16,15,"DeleteSettings")),l.Rb(3),l.Zc(" ",l.tc(19,17,"customer.remove-from-group")," "),l.Rb(3),l.Zc(" ",l.uc(22,19,"customer.add-customers-to-group",l.Dc(26,W,r.name))," "),l.Rb(2),l.yc("members",l.tc(24,22,n.members$))("route",n.route)("totalItems",l.tc(25,24,n.membersTotal$))("selectedMemberIds",n.selectedCustomerIds)}}var Ue=function(e){return["/customer","customers",e]};function Ze(e,t){if(1&e&&(l.ic(0,"td",3),l.Xc(1),l.hc(),l.ic(2,"td",3),l.Xc(3),l.hc(),l.ic(4,"td",4),l.dc(5,"vdr-table-row-action",5),l.sc(6,"translate"),l.hc()),2&e){var c=t.item;l.Rb(1),l.bd(" ",c.title," ",c.firstName," ",c.lastName," "),l.Rb(2),l.Yc(c.emailAddress),l.Rb(2),l.yc("label",l.tc(6,6,"common.edit"))("linkTo",l.Dc(8,Ue,c.id))}}function Ye(e,t){1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.fc()),2&e&&(l.Rb(1),l.Zc(" ",l.tc(2,1,"customer.history-using-native-auth-strategy")," "))}var Be=function(e){return{strategy:e}};function Le(e,t){if(1&e&&(l.Xc(0),l.sc(1,"translate")),2&e){var c=l.rc(2).$implicit;l.Zc(" ",l.uc(1,1,"customer.history-using-external-auth-strategy",l.Dc(4,Be,c.data.strategy))," ")}}function We(e,t){if(1&e&&(l.gc(0),l.ic(1,"div",10),l.Xc(2),l.sc(3,"translate"),l.hc(),l.Vc(4,Ye,3,3,"ng-container",11),l.Vc(5,Le,2,6,"ng-template",null,12,l.Wc),l.fc()),2&e){var c=l.Jc(6),r=l.rc().$implicit;l.Rb(2),l.Zc(" ",l.tc(3,3,"customer.history-customer-registered")," "),l.Rb(2),l.yc("ngIf","native"===r.data.strategy)("ngIfElse",c)}}function Ke(e,t){1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.fc()),2&e&&(l.Rb(1),l.Zc(" ",l.tc(2,1,"customer.history-using-native-auth-strategy")," "))}function He(e,t){if(1&e&&(l.Xc(0),l.sc(1,"translate")),2&e){var c=l.rc(2).$implicit;l.Zc(" ",l.uc(1,1,"customer.history-using-external-auth-strategy",l.Dc(4,Be,c.data.strategy))," ")}}function qe(e,t){if(1&e&&(l.gc(0),l.ic(1,"div",10),l.Xc(2),l.sc(3,"translate"),l.hc(),l.Vc(4,Ke,3,3,"ng-container",11),l.Vc(5,He,2,6,"ng-template",null,12,l.Wc),l.fc()),2&e){var c=l.Jc(6),r=l.rc().$implicit;l.Rb(2),l.Zc(" ",l.tc(3,3,"customer.history-customer-verified")," "),l.Rb(2),l.yc("ngIf","native"===r.data.strategy)("ngIfElse",c)}}function Je(e,t){if(1&e&&(l.gc(0),l.ic(1,"div",13),l.Xc(2),l.sc(3,"translate"),l.ic(4,"vdr-history-entry-detail"),l.dc(5,"vdr-object-tree",14),l.hc(),l.hc(),l.fc()),2&e){var c=l.rc().$implicit;l.Rb(2),l.Zc(" ",l.tc(3,2,"customer.history-customer-detail-updated")," "),l.Rb(3),l.yc("value",c.data.input)}}function Qe(e,t){if(1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.fc()),2&e){var c=l.rc().$implicit;l.Rb(1),l.Zc(" ",l.uc(2,1,"customer.history-customer-added-to-group",l.Dc(4,W,c.data.groupName))," ")}}function ze(e,t){if(1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.fc()),2&e){var c=l.rc().$implicit;l.Rb(1),l.Zc(" ",l.uc(2,1,"customer.history-customer-removed-from-group",l.Dc(4,W,c.data.groupName))," ")}}function et(e,t){if(1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.ic(3,"div",13),l.ic(4,"div",15),l.Xc(5),l.hc(),l.hc(),l.fc()),2&e){var c=l.rc().$implicit;l.Rb(1),l.Zc(" ",l.tc(2,2,"customer.history-customer-address-created")," "),l.Rb(4),l.Yc(c.data.address)}}function tt(e,t){if(1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.ic(3,"div",13),l.ic(4,"div",15),l.Xc(5),l.hc(),l.ic(6,"vdr-history-entry-detail"),l.dc(7,"vdr-object-tree",14),l.hc(),l.hc(),l.fc()),2&e){var c=l.rc().$implicit;l.Rb(1),l.Zc(" ",l.tc(2,3,"customer.history-customer-address-updated")," "),l.Rb(4),l.Yc(c.data.address),l.Rb(2),l.yc("value",c.data.input)}}function ct(e,t){if(1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.ic(3,"div",15),l.Xc(4),l.hc(),l.fc()),2&e){var c=l.rc().$implicit;l.Rb(1),l.Zc(" ",l.tc(2,2,"customer.history-customer-address-deleted")," "),l.Rb(3),l.Yc(c.data.address)}}function rt(e,t){1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.fc()),2&e&&(l.Rb(1),l.Zc(" ",l.tc(2,1,"customer.history-customer-password-updated")," "))}function nt(e,t){1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.fc()),2&e&&(l.Rb(1),l.Zc(" ",l.tc(2,1,"customer.history-customer-password-reset-requested")," "))}function it(e,t){1&e&&(l.gc(0),l.Xc(1),l.sc(2,"translate"),l.fc()),2&e&&(l.Rb(1),l.Zc(" ",l.tc(2,1,"customer.history-customer-password-reset-verified")," "))}function st(e,t){if(1&e&&(l.gc(0),l.ic(1,"div",13),l.Xc(2),l.sc(3,"translate"),l.ic(4,"vdr-history-entry-detail"),l.ic(5,"vdr-labeled-data",16),l.sc(6,"translate"),l.Xc(7),l.hc(),l.ic(8,"vdr-labeled-data",16),l.sc(9,"translate"),l.Xc(10),l.hc(),l.hc(),l.hc(),l.fc()),2&e){var c=l.rc().$implicit;l.Rb(2),l.Zc(" ",l.tc(3,5,"customer.history-customer-email-update-requested")," "),l.Rb(3),l.yc("label",l.tc(6,7,"customer.old-email-address")),l.Rb(2),l.Yc(c.data.oldEmailAddress),l.Rb(1),l.yc("label",l.tc(9,9,"customer.new-email-address")),l.Rb(2),l.Yc(c.data.newEmailAddress)}}function ot(e,t){if(1&e&&(l.gc(0),l.ic(1,"div",13),l.Xc(2),l.sc(3,"translate"),l.ic(4,"vdr-history-entry-detail"),l.ic(5,"vdr-labeled-data",16),l.sc(6,"translate"),l.Xc(7),l.hc(),l.ic(8,"vdr-labeled-data",16),l.sc(9,"translate"),l.Xc(10),l.hc(),l.hc(),l.hc(),l.fc()),2&e){var c=l.rc().$implicit;l.Rb(2),l.Zc(" ",l.tc(3,5,"customer.history-customer-email-update-verified")," "),l.Rb(3),l.yc("label",l.tc(6,7,"customer.old-email-address")),l.Rb(2),l.Yc(c.data.oldEmailAddress),l.Rb(1),l.yc("label",l.tc(9,9,"customer.new-email-address")),l.Rb(2),l.Yc(c.data.newEmailAddress)}}function at(e,t){if(1&e){var c=l.jc();l.gc(0),l.ic(1,"div",13),l.ic(2,"div",17),l.Xc(3),l.hc(),l.dc(4,"div",18),l.ic(5,"vdr-dropdown"),l.ic(6,"button",19),l.dc(7,"clr-icon",20),l.hc(),l.ic(8,"vdr-dropdown-menu",21),l.ic(9,"button",22),l.pc("click",(function(){l.Mc(c);var e=l.rc().$implicit;return l.rc().updateNote.emit(e)})),l.sc(10,"hasPermission"),l.dc(11,"clr-icon",23),l.Xc(12),l.sc(13,"translate"),l.hc(),l.dc(14,"div",24),l.ic(15,"button",22),l.pc("click",(function(){l.Mc(c);var e=l.rc().$implicit;return l.rc().deleteNote.emit(e)})),l.sc(16,"hasPermission"),l.dc(17,"clr-icon",25),l.Xc(18),l.sc(19,"translate"),l.hc(),l.hc(),l.hc(),l.hc(),l.fc()}if(2&e){var r=l.rc().$implicit;l.Rb(3),l.Zc(" ",r.data.note," "),l.Rb(6),l.yc("disabled",!l.tc(10,5,"UpdateOrder")),l.Rb(3),l.Zc(" ",l.tc(13,7,"common.edit")," "),l.Rb(3),l.yc("disabled",!l.tc(16,9,"UpdateOrder")),l.Rb(3),l.Zc(" ",l.tc(19,11,"common.delete")," ")}}function ut(e,t){if(1&e&&(l.ic(0,"vdr-timeline-entry",7),l.gc(1,8),l.Vc(2,We,7,5,"ng-container",9),l.Vc(3,qe,7,5,"ng-container",9),l.Vc(4,Je,6,4,"ng-container",9),l.Vc(5,Qe,3,6,"ng-container",9),l.Vc(6,ze,3,6,"ng-container",9),l.Vc(7,et,6,4,"ng-container",9),l.Vc(8,tt,8,5,"ng-container",9),l.Vc(9,ct,5,4,"ng-container",9),l.Vc(10,rt,3,3,"ng-container",9),l.Vc(11,nt,3,3,"ng-container",9),l.Vc(12,it,3,3,"ng-container",9),l.Vc(13,st,11,11,"ng-container",9),l.Vc(14,ot,11,11,"ng-container",9),l.Vc(15,at,20,13,"ng-container",9),l.fc(),l.hc()),2&e){var c=t.$implicit,r=l.rc();l.yc("displayType",r.getDisplayType(c))("iconShape",r.getTimelineIcon(c))("createdAt",c.createdAt)("name",r.getName(c))("featured",r.isFeatured(c)),l.Rb(1),l.yc("ngSwitch",c.type),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_REGISTERED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_VERIFIED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_DETAIL_UPDATED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_ADDED_TO_GROUP),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_REMOVED_FROM_GROUP),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_ADDRESS_CREATED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_ADDRESS_UPDATED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_ADDRESS_DELETED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_PASSWORD_UPDATED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_PASSWORD_RESET_REQUESTED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_PASSWORD_RESET_VERIFIED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_EMAIL_UPDATE_REQUESTED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_EMAIL_UPDATE_VERIFIED),l.Rb(1),l.yc("ngSwitchCase",r.type.CUSTOMER_NOTE)}}var lt=function(){return["./create"]};function dt(e,t){1&e&&(l.ic(0,"a",5),l.dc(1,"clr-icon",6),l.Xc(2),l.sc(3,"translate"),l.hc()),2&e&&(l.yc("routerLink",l.Cc(4,lt)),l.Rb(2),l.Zc(" ",l.tc(3,2,"customer.create-new-customer")," "))}function mt(e,t){if(1&e){var c=l.jc();l.ic(0,"td",7),l.Xc(1),l.hc(),l.ic(2,"td",7),l.Xc(3),l.hc(),l.ic(4,"td",7),l.dc(5,"vdr-customer-status-label",8),l.hc(),l.ic(6,"td",9),l.dc(7,"vdr-table-row-action",10),l.sc(8,"translate"),l.hc(),l.ic(9,"td"),l.ic(10,"vdr-dropdown"),l.ic(11,"button",11),l.Xc(12),l.sc(13,"translate"),l.dc(14,"clr-icon",12),l.hc(),l.ic(15,"vdr-dropdown-menu",13),l.ic(16,"button",14),l.pc("click",(function(){l.Mc(c);var e=t.item;return l.rc().deleteCustomer(e)})),l.sc(17,"hasPermission"),l.dc(18,"clr-icon",15),l.Xc(19),l.sc(20,"translate"),l.hc(),l.hc(),l.hc(),l.hc()}if(2&e){var r=t.item;l.Rb(1),l.bd(" ",r.title," ",r.firstName," ",r.lastName," "),l.Rb(2),l.Yc(r.emailAddress),l.Rb(2),l.yc("customer",r),l.Rb(2),l.yc("label",l.tc(8,10,"common.edit"))("linkTo",l.Dc(18,$e,r.id)),l.Rb(5),l.Zc(" ",l.tc(13,12,"common.actions")," "),l.Rb(4),l.yc("disabled",!l.tc(17,14,"DeleteCustomer")),l.Rb(3),l.Zc(" ",l.tc(20,16,"common.delete")," ")}}function pt(e,t){1&e&&(l.gc(0),l.dc(1,"clr-icon",1),l.Xc(2),l.sc(3,"translate"),l.fc()),2&e&&(l.Rb(2),l.Zc(" ",l.tc(3,1,"customer.verified")," "))}function ft(e,t){1&e&&(l.gc(0),l.dc(1,"clr-icon",2),l.Xc(2),l.sc(3,"translate"),l.fc()),2&e&&(l.Rb(2),l.Zc(" ",l.tc(3,1,"customer.registered")," "))}function bt(e,t){if(1&e&&(l.ic(0,"vdr-chip"),l.Vc(1,pt,4,3,"ng-container",0),l.Vc(2,ft,4,3,"ng-container",0),l.hc()),2&e){var c=l.rc();l.Rb(1),l.yc("ngIf",null==c.customer.user?null:c.customer.user.verified),l.Rb(1),l.yc("ngIf",!(null!=c.customer.user&&c.customer.user.verified))}}function ht(e,t){1&e&&(l.ic(0,"vdr-chip"),l.Xc(1),l.sc(2,"translate"),l.hc()),2&e&&(l.Rb(1),l.Yc(l.tc(2,1,"customer.guest")))}var gt=function(){function e(t){p(this,e),this.dataService=t,this.selectedCustomerIds=[],this.fetchGroupMembers$=new h.a({skip:0,take:10,filterTerm:""})}return b(e,[{key:"ngOnInit",value:function(){var e=this,t=this.fetchGroupMembers$.pipe(Object(S.a)((function(t){var c=t.skip,r=t.take,n=t.filterTerm;return e.dataService.customer.getCustomerList(r,c,n).mapStream((function(e){return e.customers}))})));this.customers$=t.pipe(Object(I.a)((function(e){return e.items}))),this.customersTotal$=t.pipe(Object(I.a)((function(e){return e.totalItems})))}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedCustomerIds)}}]),e}();gt.\u0275fac=function(e){return new(e||gt)(l.cc(f.K))},gt.\u0275cmp=l.Wb({type:gt,selectors:[["vdr-add-customer-to-group-dialog"]],decls:5,vars:8,consts:[["vdrDialogTitle",""],[3,"members","totalItems","route","selectedMemberIds","fetchParamsChange","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(l.Vc(0,K,2,6,"ng-template",0),l.ic(1,"vdr-customer-group-member-list",1),l.pc("fetchParamsChange",(function(e){return t.fetchGroupMembers$.next(e)}))("selectionChange",(function(e){return t.selectedCustomerIds=e})),l.sc(2,"async"),l.sc(3,"async"),l.hc(),l.Vc(4,q,6,10,"ng-template",2)),2&e&&(l.Rb(1),l.yc("members",l.tc(2,4,t.customers$))("totalItems",l.tc(3,6,t.customersTotal$))("route",t.route)("selectedMemberIds",t.selectedCustomerIds))},directives:function(){return[f.Q,It,f.P]},pipes:function(){return[Z.b,Y.d]},styles:[""],changeDetection:0}),gt.ctorParameters=function(){return[{type:f.K}]};var vt=function(){function e(t){p(this,e),this.changeDetector=t,this.availableCountries=[]}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.addressForm.valueChanges.subscribe((function(){return e.changeDetector.markForCheck()}))}},{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.addressForm)}}]),e}();vt.\u0275fac=function(e){return new(e||vt)(l.cc(l.k))},vt.\u0275cmp=l.Wb({type:vt,selectors:[["vdr-address-detail-dialog"]],decls:54,vars:27,consts:[["vdrDialogTitle",""],[3,"formGroup"],["formControlName","fullName","type","text","clrInput",""],[1,"clr-row"],[1,"clr-col-md-4"],["formControlName","streetLine1","type","text","clrInput",""],["formControlName","streetLine2","type","text","clrInput",""],["formControlName","city","type","text","clrInput",""],["formControlName","province","type","text","clrInput",""],["formControlName","postalCode","type","text","clrInput",""],["name","countryCode","formControlName","countryCode","clrInput","","clrSelect",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","phoneNumber","type","text","clrInput",""],["formGroupName","customFields",4,"ngIf"],["vdrDialogButtons",""],[4,"ngIf"],[3,"value"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Facet",3,"customFieldsFormGroup","customField"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(l.Vc(0,z,2,2,"ng-template",0),l.ic(1,"form",1),l.ic(2,"clr-input-container"),l.ic(3,"label"),l.Xc(4),l.sc(5,"translate"),l.hc(),l.dc(6,"input",2),l.hc(),l.ic(7,"div",3),l.ic(8,"div",4),l.ic(9,"clr-input-container"),l.ic(10,"label"),l.Xc(11),l.sc(12,"translate"),l.hc(),l.dc(13,"input",5),l.hc(),l.hc(),l.ic(14,"div",4),l.ic(15,"clr-input-container"),l.ic(16,"label"),l.Xc(17),l.sc(18,"translate"),l.hc(),l.dc(19,"input",6),l.hc(),l.hc(),l.hc(),l.ic(20,"div",3),l.ic(21,"div",4),l.ic(22,"clr-input-container"),l.ic(23,"label"),l.Xc(24),l.sc(25,"translate"),l.hc(),l.dc(26,"input",7),l.hc(),l.hc(),l.ic(27,"div",4),l.ic(28,"clr-input-container"),l.ic(29,"label"),l.Xc(30),l.sc(31,"translate"),l.hc(),l.dc(32,"input",8),l.hc(),l.hc(),l.hc(),l.ic(33,"div",3),l.ic(34,"div",4),l.ic(35,"clr-input-container"),l.ic(36,"label"),l.Xc(37),l.sc(38,"translate"),l.hc(),l.dc(39,"input",9),l.hc(),l.hc(),l.ic(40,"div",4),l.ic(41,"clr-input-container"),l.ic(42,"label"),l.Xc(43),l.sc(44,"translate"),l.hc(),l.ic(45,"select",10),l.Vc(46,ee,2,2,"option",11),l.hc(),l.hc(),l.hc(),l.hc(),l.ic(47,"clr-input-container"),l.ic(48,"label"),l.Xc(49),l.sc(50,"translate"),l.hc(),l.dc(51,"input",12),l.hc(),l.Vc(52,ce,5,4,"section",13),l.hc(),l.Vc(53,re,6,7,"ng-template",14)),2&e&&(l.Rb(1),l.yc("formGroup",t.addressForm),l.Rb(3),l.Yc(l.tc(5,11,"customer.full-name")),l.Rb(7),l.Yc(l.tc(12,13,"customer.street-line-1")),l.Rb(6),l.Yc(l.tc(18,15,"customer.street-line-2")),l.Rb(7),l.Yc(l.tc(25,17,"customer.city")),l.Rb(6),l.Yc(l.tc(31,19,"customer.province")),l.Rb(7),l.Yc(l.tc(38,21,"customer.postal-code")),l.Rb(6),l.Yc(l.tc(44,23,"customer.country")),l.Rb(3),l.yc("ngForOf",t.availableCountries),l.Rb(3),l.Yc(l.tc(50,25,"customer.phone-number")),l.Rb(3),l.yc("ngIf",t.addressForm.get("customFields")))},directives:[f.Q,$.E,$.q,$.j,B.t,B.u,f.eb,$.b,$.p,$.h,B.s,$.A,B.A,Z.o,Z.p,f.P,$.u,$.D,$.k,f.H],pipes:[Y.d],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),vt.ctorParameters=function(){return[{type:l.k}]};var yt=function(){function e(t,c){p(this,e),this.modalService=t,this.changeDetector=c,this.availableCountries=[],this.setAsDefaultShipping=new l.u,this.setAsDefaultBilling=new l.u,this.dataDependenciesPopulated=new h.a(!1)}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.addressForm.get("streetLine1").value||this.dataDependenciesPopulated.pipe(Object(P.a)((function(e){return e})),Object(D.a)(1)).subscribe((function(){e.editAddress()}))}},{key:"ngOnChanges",value:function(e){null!=this.customFields&&null!=this.availableCountries&&this.dataDependenciesPopulated.next(!0)}},{key:"getCountryName",value:function(e){if(!this.availableCountries)return"";var t=this.availableCountries.find((function(t){return t.code===e}));return t?t.name:""}},{key:"setAsDefaultBillingAddress",value:function(){this.setAsDefaultBilling.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}},{key:"setAsDefaultShippingAddress",value:function(){this.setAsDefaultShipping.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}},{key:"editAddress",value:function(){var e=this;this.modalService.fromComponent(vt,{locals:{addressForm:this.addressForm,customFields:this.customFields,availableCountries:this.availableCountries},size:"md",closable:!0}).subscribe((function(){e.changeDetector.markForCheck()}))}}]),e}();yt.\u0275fac=function(e){return new(e||yt)(l.cc(f.Ab),l.cc(l.k))},yt.\u0275cmp=l.Wb({type:yt,selectors:[["vdr-address-card"]],inputs:{availableCountries:"availableCountries",addressForm:"addressForm",customFields:"customFields",isDefaultBilling:"isDefaultBilling",isDefaultShipping:"isDefaultShipping"},outputs:{setAsDefaultShipping:"setAsDefaultShipping",setAsDefaultBilling:"setAsDefaultBilling"},features:[l.Pb],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"address-title"],["class","street-line",4,"ngIf"],[1,"default-controls"],["class","is-default p8",4,"ngIf"],[1,"card-block"],[1,"card-text"],[3,"address"],[1,"card-footer"],[3,"entity"],[1,"btn","btn-sm","btn-link",3,"click"],["type","button","vdrDropdownTrigger","",1,"btn","btn-sm","btn-link"],["shape","caret down"],["vdrDropdownItem","",1,"button",3,"disabled","click"],[1,"street-line"],[1,"is-default","p8"],["shape","truck"],["shape","credit-card"]],template:function(e,t){1&e&&l.Vc(0,oe,28,20,"div",0),2&e&&l.yc("ngIf",t.addressForm.value)},directives:[Z.p,f.gb,f.ab,f.S,f.V,B.o,f.U,f.T,f.B],pipes:[Y.d],styles:["[_nghost-%COMP%]{display:block;max-width:360px}clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}.defaul-controls[_ngcontent-%COMP%]{display:flex}.is-default[_ngcontent-%COMP%]{color:#308300;margin:0}"],changeDetection:0}),yt.ctorParameters=function(){return[{type:f.Ab},{type:l.k}]},yt.propDecorators={addressForm:[{type:l.D}],customFields:[{type:l.D}],availableCountries:[{type:l.D}],isDefaultBilling:[{type:l.D}],isDefaultShipping:[{type:l.D}],setAsDefaultShipping:[{type:l.O}],setAsDefaultBilling:[{type:l.O}]};var Ct=function(){function e(t){p(this,e),this.dataService=t,this.selectedGroupIds=[]}return b(e,[{key:"ngOnInit",value:function(){this.groups$=this.dataService.customer.getCustomerGroupList().mapStream((function(e){return e.customerGroups.items}))}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedGroupIds)}}]),e}();Ct.\u0275fac=function(e){return new(e||Ct)(l.cc(f.K))},Ct.\u0275cmp=l.Wb({type:Ct,selectors:[["vdr-select-customer-group-dialog"]],decls:6,vars:8,consts:[["vdrDialogTitle",""],["appendTo","body","bindValue","id",3,"items","addTag","multiple","ngModel","clearable","searchable","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],["vdrDialogButtons",""],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[3,"colorFrom"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(l.Vc(0,ae,2,3,"ng-template",0),l.ic(1,"ng-select",1),l.pc("ngModelChange",(function(e){return t.selectedGroupIds=e})),l.sc(2,"async"),l.Vc(3,ue,4,2,"ng-template",2),l.Vc(4,le,2,2,"ng-template",3),l.hc(),l.Vc(5,de,6,10,"ng-template",4)),2&e&&(l.Rb(1),l.yc("items",l.tc(2,6,t.groups$))("addTag",!1)("multiple",!0)("ngModel",t.selectedGroupIds)("clearable",!0)("searchable",!1))},directives:[f.Q,L.a,$.p,$.s,L.e,L.d,f.P,f.B],pipes:[Z.b,Y.d],styles:[""],changeDetection:0}),Ct.ctorParameters=function(){return[{type:f.K}]};var Rt=function(e){o(c,e);var t=u(c);function c(e,r,n,i,o,a,u,l){var d;return p(this,c),(d=t.call(this,e,r,n,a)).changeDetector=i,d.formBuilder=o,d.dataService=a,d.modalService=u,d.notificationService=l,d.fetchHistory=new g.a,d.addressDefaultsUpdated=!1,d.ordersPerPage=10,d.currentOrdersPage=1,d.orderListUpdates$=new g.a,d.customFields=d.getCustomFieldConfig("Customer"),d.addressCustomFields=d.getCustomFieldConfig("Address"),d.detailForm=d.formBuilder.group({customer:d.formBuilder.group({title:"",firstName:["",$.C.required],lastName:["",$.C.required],phoneNumber:"",emailAddress:["",[$.C.required,$.C.email]],password:"",customFields:d.formBuilder.group(d.customFields.reduce((function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))}),{}))}),addresses:new $.c([])}),d}return b(c,[{key:"ngOnInit",value:function(){var e=this;this.init(),this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle((function(e){return e.countries.items})).pipe(Object(k.a)(1));var t=this.entity$.pipe(function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return function(e){return e.lift.call(Object(w.a).apply(void 0,[e].concat(t)))}}(this.orderListUpdates$));this.orders$=t.pipe(Object(I.a)((function(e){return e.orders.items}))),this.ordersCount$=this.entity$.pipe(Object(I.a)((function(e){return e.orders.totalItems}))),this.history$=this.fetchHistory.pipe(Object(F.a)(null),Object(S.a)((function(){return e.dataService.customer.getCustomerHistory(e.id,{sort:{createdAt:f.Lb.DESC}}).mapStream((function(e){var t;return null===(t=e.customer)||void 0===t?void 0:t.history.items}))})))}},{key:"ngOnDestroy",value:function(){this.destroy(),this.orderListUpdates$.complete()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customer","customFields",e])}},{key:"getAddressFormControls",value:function(){return this.detailForm.get(["addresses"]).controls}},{key:"setDefaultBillingAddressId",value:function(e){this.defaultBillingAddressId=e,this.addressDefaultsUpdated=!0}},{key:"setDefaultShippingAddressId",value:function(e){this.defaultShippingAddressId=e,this.addressDefaultsUpdated=!0}},{key:"addAddress",value:function(){var e=this.detailForm.get("addresses"),t=this.formBuilder.group({fullName:"",company:"",streetLine1:["",$.C.required],streetLine2:"",city:"",province:"",postalCode:"",countryCode:["",$.C.required],phoneNumber:"",defaultShippingAddress:!1,defaultBillingAddress:!1});if(this.addressCustomFields.length){var c,n=this.formBuilder.group({}),i=r(this.addressCustomFields);try{for(i.s();!(c=i.n()).done;){var s=c.value;n.addControl(s.name,new $.f(""))}}catch(o){i.e(o)}finally{i.f()}t.addControl("customFields",n)}e.push(t)}},{key:"setOrderItemsPerPage",value:function(e){this.ordersPerPage=+e,this.fetchOrdersList()}},{key:"setOrderCurrentPage",value:function(e){this.currentOrdersPage=+e,this.fetchOrdersList()}},{key:"create",value:function(){var e,t=this,c=this.detailForm.get("customer");if(c){var r=c.value,n=null===(e=c.get("customFields"))||void 0===e?void 0:e.value,i={title:r.title,emailAddress:r.emailAddress,firstName:r.firstName,lastName:r.lastName,phoneNumber:r.phoneNumber,customFields:n};this.dataService.customer.createCustomer(i,r.password).subscribe((function(e){var c=e.createCustomer;switch(c.__typename){case"Customer":t.notificationService.success(Object(x.a)("common.notify-create-success"),{entity:"Customer"}),c.emailAddress&&!r.password&&t.notificationService.notify({message:Object(x.a)("customer.email-verification-sent"),translationVars:{emailAddress:r.emailAddress},type:"info",duration:1e4}),t.detailForm.markAsPristine(),t.addressDefaultsUpdated=!1,t.changeDetector.markForCheck(),t.router.navigate(["../",c.id],{relativeTo:t.route});break;case"EmailAddressConflictError":t.notificationService.error(c.message)}}))}}},{key:"save",value:function(){var e=this;this.entity$.pipe(Object(D.a)(1),Object(M.a)((function(t){var c,n=t.id,i=[],s=e.detailForm.get("customer");if(s&&s.dirty){var o=s.value,a=null===(c=s.get("customFields"))||void 0===c?void 0:c.value,u={id:n,title:o.title,emailAddress:o.emailAddress,firstName:o.firstName,lastName:o.lastName,phoneNumber:o.phoneNumber,customFields:a};i.push(e.dataService.customer.updateCustomer(u).pipe(Object(I.a)((function(e){return e.updateCustomer}))))}var l=e.detailForm.get("addresses");if(l&&l.dirty||e.addressDefaultsUpdated){var d,m=r(l.controls);try{for(m.s();!(d=m.n()).done;){var p=d.value;if(p.dirty||e.addressDefaultsUpdated){var f=p.value,b={fullName:f.fullName,company:f.company,streetLine1:f.streetLine1,streetLine2:f.streetLine2,city:f.city,province:f.province,postalCode:f.postalCode,countryCode:f.countryCode,phoneNumber:f.phoneNumber,defaultShippingAddress:e.defaultShippingAddressId===f.id,defaultBillingAddress:e.defaultBillingAddressId===f.id,customFields:f.customFields};f.id?i.push(e.dataService.customer.updateCustomerAddress(Object.assign(Object.assign({},b),{id:f.id})).pipe(Object(I.a)((function(e){return e.updateCustomerAddress})))):i.push(e.dataService.customer.createCustomerAddress(n,b).pipe(Object(I.a)((function(e){return e.createCustomerAddress}))))}}}catch(h){m.e(h)}finally{m.f()}}return Object(v.a)(i)}))).subscribe((function(t){var c,n=r(t);try{for(n.s();!(c=n.n()).done;){var i=c.value;switch(i.__typename){case"Customer":case"Address":e.notificationService.success(Object(x.a)("common.notify-update-success"),{entity:"Customer"}),e.detailForm.markAsPristine(),e.addressDefaultsUpdated=!1,e.changeDetector.markForCheck(),e.fetchHistory.next();break;case"EmailAddressConflictError":e.notificationService.error(i.message)}}}catch(s){n.e(s)}finally{n.f()}}),(function(t){e.notificationService.error(Object(x.a)("common.notify-update-error"),{entity:"Customer"})}))}},{key:"addToGroup",value:function(){var e=this;this.modalService.fromComponent(Ct,{size:"md"}).pipe(Object(S.a)((function(e){return e?Object(y.a)(e):C.a})),Object(j.a)((function(t){return e.dataService.customer.addCustomersToGroup(t,[e.id])}))).subscribe({next:function(t){e.notificationService.success(Object(x.a)("customer.add-customers-to-group-success"),{customerCount:1,groupName:t.addCustomersToGroup.name})},complete:function(){e.dataService.customer.getCustomer(e.id,{take:0}).single$.subscribe(),e.fetchHistory.next()}})}},{key:"removeFromGroup",value:function(e){var t=this;this.modalService.dialog({title:Object(x.a)("customer.confirm-remove-customer-from-group"),buttons:[{type:"secondary",label:Object(x.a)("common.cancel")},{type:"danger",label:Object(x.a)("common.delete"),returnValue:!0}]}).pipe(Object(S.a)((function(c){return c?t.dataService.customer.removeCustomersFromGroup(e.id,[t.id]):C.a})),Object(S.a)((function(){return t.dataService.customer.getCustomer(t.id,{take:0}).single$}))).subscribe((function(c){t.notificationService.success(Object(x.a)("customer.remove-customers-from-group-success"),{customerCount:1,groupName:e.name}),t.fetchHistory.next()}))}},{key:"addNoteToCustomer",value:function(e){var t=this,c=e.note;this.dataService.customer.addNoteToCustomer(this.id,c).subscribe((function(){t.fetchHistory.next(),t.notificationService.success(Object(x.a)("common.notify-create-success"),{entity:"Note"})}))}},{key:"updateNote",value:function(e){var t=this;this.modalService.fromComponent(f.Y,{closable:!0,locals:{displayPrivacyControls:!1,note:e.data.note}}).pipe(Object(S.a)((function(c){return c?t.dataService.customer.updateCustomerNote({noteId:e.id,note:c.note}):C.a}))).subscribe((function(e){t.fetchHistory.next(),t.notificationService.success(Object(x.a)("common.notify-update-success"),{entity:"Note"})}))}},{key:"deleteNote",value:function(e){var t=this;return this.modalService.dialog({title:Object(x.a)("common.confirm-delete-note"),body:e.data.note,buttons:[{type:"secondary",label:Object(x.a)("common.cancel")},{type:"danger",label:Object(x.a)("common.delete"),returnValue:!0}]}).pipe(Object(S.a)((function(c){return c?t.dataService.customer.deleteCustomerNote(e.id):C.a}))).subscribe((function(){t.fetchHistory.next(),t.notificationService.success(Object(x.a)("common.notify-delete-success"),{entity:"Note"})}))}},{key:"setFormValues",value:function(e){var t,c,n=this.detailForm.get("customer");if(n&&n.patchValue({title:e.title,firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber,emailAddress:e.emailAddress}),e.addresses){var i,s=new $.c([]),o=r(e.addresses);try{for(o.s();!(i=o.n()).done;){var a=i.value,u=a,l=(u.customFields,Object(_.b)(u,["customFields"])),d=this.formBuilder.group(Object.assign(Object.assign({},l),{countryCode:a.country.code}));if(s.push(d),a.defaultShippingAddress&&(this.defaultShippingAddressId=a.id),a.defaultBillingAddress&&(this.defaultBillingAddressId=a.id),this.addressCustomFields.length){var m,p=this.formBuilder.group({}),f=r(this.addressCustomFields);try{for(f.s();!(m=f.n()).done;){var b=m.value.name,h=null===(t=a.customFields)||void 0===t?void 0:t[b],g=new $.f(h);p.addControl(b,g)}}catch(I){f.e(I)}finally{f.f()}d.addControl("customFields",p)}}}catch(I){o.e(I)}finally{o.f()}this.detailForm.setControl("addresses",s)}if(this.customFields.length){var v,y=this.detailForm.get(["customer","customFields"]),C=r(this.customFields);try{for(C.s();!(v=C.n()).done;){var R=v.value.name,O=null===(c=e.customFields)||void 0===c?void 0:c[R],S=y.get(R);S&&S.patchValue(O)}}catch(I){C.e(I)}finally{C.f()}}this.changeDetector.markForCheck()}},{key:"fetchOrdersList",value:function(){var e=this;this.dataService.customer.getCustomer(this.id,{take:this.ordersPerPage,skip:(this.currentOrdersPage-1)*this.ordersPerPage}).single$.pipe(Object(I.a)((function(e){return e.customer})),Object(P.a)(G.notNullOrUndefined)).subscribe((function(t){return e.orderListUpdates$.next(t)}))}}]),c}(f.u);Rt.\u0275fac=function(e){return new(e||Rt)(l.cc(V.a),l.cc(V.e),l.cc(f.Jb),l.cc(l.k),l.cc($.e),l.cc(f.K),l.cc(f.Ab),l.cc(f.Bb))},Rt.\u0275cmp=l.Wb({type:Rt,selectors:[["vdr-customer-detail"]],features:[l.Ob],decls:45,vars:57,consts:[[1,"flex","clr-align-items-center"],[3,"entity"],[3,"customer"],["class","last-login",3,"title",4,"ngIf"],["locationId","customer-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","title",3,"label","readOnlyToggle"],["id","title","type","text","formControlName","title"],["for","firstName",3,"label","readOnlyToggle"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label","readOnlyToggle"],["id","lastName","type","text","formControlName","lastName"],["for","emailAddress",3,"label","readOnlyToggle"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","phoneNumber",3,"label","readOnlyToggle"],["id","phoneNumber","type","text","formControlName","phoneNumber"],["for","password",3,"label",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],["class","groups",4,"ngIf"],["class","clr-row",4,"ngIf"],[1,"last-login",3,"title"],[1,"btn","btn-primary",3,"disabled","click"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Customer",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","Customer",3,"customFieldsFormGroup","customField"],[1,"groups"],[1,"clr-control-label"],[4,"ngIf","ngIfElse"],["noGroups",""],[1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],["icon","times",3,"colorFrom","iconClick",4,"ngFor","ngForOf"],["icon","times",3,"colorFrom","iconClick"],[1,"clr-row"],[1,"clr-col-md-4"],[3,"availableCountries","isDefaultBilling","isDefaultShipping","addressForm","customFields","setAsDefaultBilling","setAsDefaultShipping",4,"ngFor","ngForOf"],[1,"btn","btn-secondary",3,"click"],[1,"clr-col-md-8"],[3,"items","itemsPerPage","totalItems","currentPage","emptyStateLabel","itemsPerPageChange","pageChange"],[3,"availableCountries","isDefaultBilling","isDefaultShipping","addressForm","customFields","setAsDefaultBilling","setAsDefaultShipping"],[1,"left"],[1,"right"],["iconShape","shopping-cart",3,"label","linkTo"],[1,"clr-col-md-6"],[3,"customer","history","addNote","updateNote","deleteNote"]],template:function(e,t){if(1&e&&(l.ic(0,"vdr-action-bar"),l.ic(1,"vdr-ab-left"),l.ic(2,"div",0),l.dc(3,"vdr-entity-info",1),l.sc(4,"async"),l.dc(5,"vdr-customer-status-label",2),l.sc(6,"async"),l.Vc(7,me,5,10,"div",3),l.sc(8,"async"),l.hc(),l.hc(),l.ic(9,"vdr-ab-right"),l.dc(10,"vdr-action-bar-items",4),l.Vc(11,pe,3,4,"button",5),l.sc(12,"async"),l.Vc(13,fe,3,4,"ng-template",null,6,l.Wc),l.hc(),l.hc(),l.ic(15,"form",7),l.ic(16,"vdr-form-field",8),l.sc(17,"translate"),l.sc(18,"async"),l.dc(19,"input",9),l.hc(),l.ic(20,"vdr-form-field",10),l.sc(21,"translate"),l.sc(22,"async"),l.dc(23,"input",11),l.hc(),l.ic(24,"vdr-form-field",12),l.sc(25,"translate"),l.sc(26,"async"),l.dc(27,"input",13),l.hc(),l.ic(28,"vdr-form-field",14),l.sc(29,"translate"),l.sc(30,"async"),l.dc(31,"input",15),l.hc(),l.ic(32,"vdr-form-field",16),l.sc(33,"translate"),l.sc(34,"async"),l.dc(35,"input",17),l.hc(),l.Vc(36,be,3,3,"vdr-form-field",18),l.sc(37,"async"),l.Vc(38,ye,5,4,"section",19),l.hc(),l.Vc(39,Se,12,8,"div",20),l.sc(40,"async"),l.Vc(41,ke,32,33,"div",21),l.sc(42,"async"),l.Vc(43,we,5,6,"div",21),l.sc(44,"async")),2&e){var c,r,n=l.Jc(14);l.Rb(3),l.yc("entity",l.tc(4,21,t.entity$)),l.Rb(2),l.yc("customer",l.tc(6,23,t.entity$)),l.Rb(2),l.yc("ngIf",null==(c=l.tc(8,25,t.entity$))||null==c.user?null:c.user.lastLogin),l.Rb(4),l.yc("ngIf",l.tc(12,27,t.isNew$))("ngIfElse",n),l.Rb(4),l.yc("formGroup",t.detailForm.get("customer")),l.Rb(1),l.yc("label",l.tc(17,29,"customer.title"))("readOnlyToggle",!l.tc(18,31,t.isNew$)),l.Rb(4),l.yc("label",l.tc(21,33,"customer.first-name"))("readOnlyToggle",!l.tc(22,35,t.isNew$)),l.Rb(4),l.yc("label",l.tc(25,37,"customer.last-name"))("readOnlyToggle",!l.tc(26,39,t.isNew$)),l.Rb(4),l.yc("label",l.tc(29,41,"customer.email-address"))("readOnlyToggle",!l.tc(30,43,t.isNew$)),l.Rb(4),l.yc("label",l.tc(33,45,"customer.phone-number"))("readOnlyToggle",!l.tc(34,47,t.isNew$)),l.Rb(4),l.yc("ngIf",l.tc(37,49,t.isNew$)),l.Rb(2),l.yc("ngIf",t.customFields.length),l.Rb(1),l.yc("ngIf",null==(r=l.tc(40,51,t.entity$))?null:r.groups),l.Rb(2),l.yc("ngIf",!l.tc(42,53,t.isNew$)),l.Rb(2),l.yc("ngIf",!l.tc(44,55,t.isNew$))}},directives:function(){return[f.c,f.e,f.ab,kt,Z.p,f.f,f.d,$.E,$.q,$.j,f.db,f.eb,$.b,$.p,$.h,$.k,B.u,Z.o,f.H,B.o,f.B,f.M,f.L,yt,f.Pb,Pt]},pipes:function(){return[Z.b,Y.d,Z.f,f.Qb,Z.d]},styles:[".last-login[_ngcontent-%COMP%]{color:#525456;margin-left:6px}"],changeDetection:0}),Rt.ctorParameters=function(){return[{type:V.a},{type:V.e},{type:f.Jb},{type:l.k},{type:$.e},{type:f.K},{type:f.Ab},{type:f.Bb}]};var Ot=function(){function e(){p(this,e)}return b(e,[{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.group.name)}}]),e}();Ot.\u0275fac=function(e){return new(e||Ot)},Ot.\u0275cmp=l.Wb({type:Ot,selectors:[["vdr-customer-group-detail-dialog"]],decls:6,vars:7,consts:[["vdrDialogTitle",""],["for","name",3,"label"],["id","name","type","text",3,"ngModel","readonly","ngModelChange"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(l.Vc(0,je,2,2,"ng-template",0),l.ic(1,"vdr-form-field",1),l.sc(2,"translate"),l.ic(3,"input",2),l.pc("ngModelChange",(function(e){return t.group.name=e})),l.sc(4,"hasPermission"),l.hc(),l.hc(),l.Vc(5,Te,6,6,"ng-template",3)),2&e&&(l.Rb(1),l.yc("label",l.tc(2,3,"common.name")),l.Rb(2),l.yc("ngModel",t.group.name)("readonly",!l.tc(4,5,"UpdateCustomer")))},directives:[f.Q,f.db,f.eb,$.b,$.p,$.s,f.P,Z.p],pipes:[Y.d,f.ib],styles:[""],changeDetection:0});var St=function(){function e(t,c,r,n,i){p(this,e),this.dataService=t,this.notificationService=c,this.modalService=r,this.route=n,this.router=i,this.selectedCustomerIds=[],this.fetchGroupMembers$=new h.a({skip:0,take:0,filterTerm:""}),this.refreshActiveGroupMembers$=new h.a(void 0)}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.groups$=this.dataService.customer.getCustomerGroupList().mapStream((function(e){return e.customerGroups.items}));var t=this.route.paramMap.pipe(Object(I.a)((function(e){return e.get("contents")})),Object(A.a)(),Object(N.a)((function(){return e.selectedCustomerIds=[]})));this.listIsEmpty$=this.groups$.pipe(Object(I.a)((function(e){return 0===e.length}))),this.activeGroup$=Object(R.a)(this.groups$,t).pipe(Object(I.a)((function(e){var t=c(e,2),r=t[0],n=t[1];if(n)return r.find((function(e){return e.id===n}))})));var r=Object(R.a)(this.activeGroup$,this.fetchGroupMembers$,this.refreshActiveGroupMembers$).pipe(Object(S.a)((function(t){var r=c(t,2),n=r[0],i=r[1],s=i.skip,o=i.take,a=i.filterTerm;return n?e.dataService.customer.getCustomerGroupWithCustomers(n.id,{skip:s,take:o,filter:{emailAddress:{contains:a}}}).mapStream((function(e){var t;return null===(t=e.customerGroup)||void 0===t?void 0:t.customers})):Object(O.a)(void 0)})));this.members$=r.pipe(Object(I.a)((function(e){var t;return null!==(t=null==e?void 0:e.items)&&void 0!==t?t:[]}))),this.membersTotal$=r.pipe(Object(I.a)((function(e){var t;return null!==(t=null==e?void 0:e.totalItems)&&void 0!==t?t:0})))}},{key:"create",value:function(){var e=this;this.modalService.fromComponent(Ot,{locals:{group:{name:""}}}).pipe(Object(S.a)((function(t){return t?e.dataService.customer.createCustomerGroup({name:t,customerIds:[]}):C.a})),Object(S.a)((function(){return e.dataService.customer.getCustomerGroupList().single$}))).subscribe((function(){e.notificationService.success(Object(x.a)("common.notify-create-success"),{entity:"CustomerGroup"})}),(function(t){e.notificationService.error(Object(x.a)("common.notify-create-error"),{entity:"CustomerGroup"})}))}},{key:"delete",value:function(e){var t=this;this.modalService.dialog({title:Object(x.a)("customer.confirm-delete-customer-group"),buttons:[{type:"secondary",label:Object(x.a)("common.cancel")},{type:"danger",label:Object(x.a)("common.delete"),returnValue:!0}]}).pipe(Object(S.a)((function(c){return c?t.dataService.customer.deleteCustomerGroup(e):C.a})),Object(S.a)((function(e){return e.deleteCustomerGroup.result===f.O.DELETED?t.dataService.customer.getCustomerGroupList().mapSingle((function(){return{errorMessage:!1}})):Object(O.a)({errorMessage:e.deleteCustomerGroup.message})}))).subscribe((function(e){"string"==typeof e.errorMessage?t.notificationService.error(e.errorMessage):t.notificationService.success(Object(x.a)("common.notify-delete-success"),{entity:"CustomerGroup"})}),(function(e){t.notificationService.error(Object(x.a)("common.notify-delete-error"),{entity:"CustomerGroup"})}))}},{key:"update",value:function(e){var t=this;this.modalService.fromComponent(Ot,{locals:{group:e}}).pipe(Object(S.a)((function(c){return c?t.dataService.customer.updateCustomerGroup({id:e.id,name:c}):C.a}))).subscribe((function(){t.notificationService.success(Object(x.a)("common.notify-update-success"),{entity:"CustomerGroup"})}),(function(e){t.notificationService.error(Object(x.a)("common.notify-update-error"),{entity:"CustomerGroup"})}))}},{key:"closeMembers",value:function(){var e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}},{key:"addToGroup",value:function(e){var t=this;this.modalService.fromComponent(gt,{locals:{group:e,route:this.route},size:"md",verticalAlign:"top"}).pipe(Object(S.a)((function(c){return c?t.dataService.customer.addCustomersToGroup(e.id,c).pipe(Object(T.a)(c)):C.a}))).subscribe({next:function(c){t.notificationService.success(Object(x.a)("customer.add-customers-to-group-success"),{customerCount:c.length,groupName:e.name}),t.refreshActiveGroupMembers$.next(),t.selectedCustomerIds=[]}})}},{key:"removeFromGroup",value:function(e,t){var c=this;this.dataService.customer.removeCustomersFromGroup(e.id,t).subscribe({complete:function(){c.notificationService.success(Object(x.a)("customer.remove-customers-from-group-success"),{customerCount:t.length,groupName:e.name}),c.refreshActiveGroupMembers$.next(),c.selectedCustomerIds=[]}})}}]),e}();St.\u0275fac=function(e){return new(e||St)(l.cc(f.K),l.cc(f.Bb),l.cc(f.Ab),l.cc(V.a),l.cc(V.e))},St.\u0275cmp=l.Wb({type:St,selectors:[["vdr-customer-group-list"]],decls:14,vars:12,consts:[["locationId","customer-group-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"group-wrapper"],["class","table group-list",3,"expanded",4,"ngIf","ngIfElse"],["emptyPlaceholder",""],[1,"group-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"table","group-list"],[3,"active",4,"ngFor","ngForOf"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],[1,"text-right","align-middle"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[3,"members","route","totalItems","selectedMemberIds","selectionChange","fetchParamsChange"]],template:function(e,t){if(1&e&&(l.ic(0,"vdr-action-bar"),l.dc(1,"vdr-ab-left"),l.ic(2,"vdr-ab-right"),l.dc(3,"vdr-action-bar-items",0),l.Vc(4,Ee,4,3,"button",1),l.hc(),l.hc(),l.ic(5,"div",2),l.Vc(6,Ve,5,7,"table",3),l.sc(7,"async"),l.Vc(8,xe,1,0,"ng-template",null,4,l.Wc),l.ic(10,"div",5),l.sc(11,"async"),l.Vc(12,Ge,26,28,"ng-container",6),l.sc(13,"async"),l.hc(),l.hc()),2&e){var c=l.Jc(9);l.Rb(4),l.yc("vdrIfPermissions","CreateCustomer"),l.Rb(2),l.yc("ngIf",!l.tc(7,6,t.listIsEmpty$))("ngIfElse",c),l.Rb(4),l.Ub("expanded",l.tc(11,8,t.activeGroup$)),l.Rb(2),l.yc("ngIf",l.tc(13,10,t.activeGroup$))}},directives:function(){return[f.c,f.e,f.f,f.d,f.rb,Z.p,B.o,Z.o,f.ab,f.B,V.h,f.S,f.V,f.U,f.T,f.Z,It]},pipes:function(){return[Z.b,Y.d,f.ib]},styles:[".group-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.group-wrapper[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{flex:1;margin-top:0;overflow:auto}.group-wrapper[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:#f2f3f5}.group-wrapper[_ngcontent-%COMP%]   .group-list.expanded[_ngcontent-%COMP%]{width:calc(100% - 40vw)}.group-members[_ngcontent-%COMP%]{height:100%;opacity:0;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s;visibility:hidden;width:0}.group-members.expanded[_ngcontent-%COMP%]{opacity:1;padding-left:12px;visibility:visible;width:40vw}.group-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;margin:0}.group-members[_ngcontent-%COMP%]     table.table{margin-top:0}.group-members[_ngcontent-%COMP%]     table.table th{top:0}.group-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}vdr-empty-placeholder[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),St.ctorParameters=function(){return[{type:f.K},{type:f.Bb},{type:f.Ab},{type:V.a},{type:V.e}]};var It=function(){function e(t,c){var r=this;p(this,e),this.router=t,this.dataService=c,this.selectedMemberIds=[],this.selectionChange=new l.u,this.fetchParamsChange=new l.u,this.filterTermControl=new $.f(""),this.refresh$=new h.a(!0),this.destroy$=new g.a,this.isMemberSelected=function(e){return-1<r.selectedMemberIds.indexOf(e.id)}}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.membersCurrentPage$=this.route.paramMap.pipe(Object(I.a)((function(e){return e.get("membersPage")})),Object(I.a)((function(e){return e?+e:1})),Object(F.a)(1),Object(A.a)()),this.membersItemsPerPage$=this.route.paramMap.pipe(Object(I.a)((function(e){return e.get("membersPerPage")})),Object(I.a)((function(e){return e?+e:10})),Object(F.a)(10),Object(A.a)());var t=this.filterTermControl.valueChanges.pipe(Object(E.a)(250),Object(N.a)((function(){return e.setContentsPageNumber(1)})),Object(F.a)(""));Object(R.a)(this.membersCurrentPage$,this.membersItemsPerPage$,t,this.refresh$).pipe(Object(X.a)(this.destroy$)).subscribe((function(t){var r=c(t,3),n=r[0],i=r[1],s=r[2],o=i,a=(n-1)*i;e.fetchParamsChange.emit({filterTerm:s,skip:a,take:o})}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"setContentsPageNumber",value:function(e){this.setParam("membersPage",e)}},{key:"setContentsItemsPerPage",value:function(e){this.setParam("membersPerPage",e)}},{key:"refresh",value:function(){this.refresh$.next(!0)}},{key:"setParam",value:function(e,t){this.router.navigate(["./",Object.assign(Object.assign({},this.route.snapshot.params),s({},e,t))],{relativeTo:this.route,queryParamsHandling:"merge"})}},{key:"areAllSelected",value:function(){return!!this.members&&this.selectedMemberIds.length===this.members.length}},{key:"toggleSelectAll",value:function(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map((function(e){return e.id})))}},{key:"toggleSelectMember",value:function(e){this.selectedMemberIds.includes(e.id)?this.selectionChange.emit(this.selectedMemberIds.filter((function(t){return t!==e.id}))):this.selectionChange.emit([].concat(t(this.selectedMemberIds),[e.id]))}}]),e}();It.\u0275fac=function(e){return new(e||It)(l.cc(V.e),l.cc(f.K))},It.\u0275cmp=l.Wb({type:It,selectors:[["vdr-customer-group-member-list"]],inputs:{selectedMemberIds:"selectedMemberIds",members:"members",totalItems:"totalItems",route:"route"},outputs:{selectionChange:"selectionChange",fetchParamsChange:"fetchParamsChange"},decls:14,vars:24,consts:[["type","text","name","searchTerm",1,"clr-input","search-input",3,"formControl","placeholder"],[3,"items","itemsPerPage","totalItems","currentPage","allSelected","isRowSelectedFn","pageChange","itemsPerPageChange","rowSelectChange","allSelectChange"],[3,"expand"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(l.dc(0,"input",0),l.sc(1,"translate"),l.ic(2,"vdr-data-table",1),l.pc("pageChange",(function(e){return t.setContentsPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setContentsItemsPerPage(e)}))("rowSelectChange",(function(e){return t.toggleSelectMember(e)}))("allSelectChange",(function(){return t.toggleSelectAll()})),l.sc(3,"async"),l.sc(4,"async"),l.sc(5,"hasPermission"),l.ic(6,"vdr-dt-column",2),l.Xc(7),l.sc(8,"translate"),l.hc(),l.ic(9,"vdr-dt-column",2),l.Xc(10),l.sc(11,"translate"),l.hc(),l.dc(12,"vdr-dt-column"),l.Vc(13,Ze,7,10,"ng-template"),l.hc()),2&e&&(l.yc("formControl",t.filterTermControl)("placeholder",l.tc(1,12,"customer.search-customers-by-email")),l.Rb(2),l.yc("items",t.members)("itemsPerPage",l.tc(3,14,t.membersItemsPerPage$))("totalItems",t.totalItems)("currentPage",l.tc(4,16,t.membersCurrentPage$))("allSelected",t.areAllSelected())("isRowSelectedFn",l.tc(5,18,"UpdateCustomer")&&t.isMemberSelected),l.Rb(4),l.yc("expand",!0),l.Rb(1),l.Yc(l.tc(8,20,"customer.name")),l.Rb(2),l.yc("expand",!0),l.Rb(1),l.Yc(l.tc(11,22,"customer.email-address")))},directives:[f.eb,$.b,$.p,$.g,f.M,f.L,f.Pb],pipes:[Y.d,Z.b,f.ib],styles:[""],changeDetection:0}),It.ctorParameters=function(){return[{type:V.e},{type:f.K}]},It.propDecorators={members:[{type:l.D}],totalItems:[{type:l.D}],route:[{type:l.D}],selectedMemberIds:[{type:l.D}],selectionChange:[{type:l.O}],fetchParamsChange:[{type:l.O}]};var Pt=function(){function e(){p(this,e),this.addNote=new l.u,this.updateNote=new l.u,this.deleteNote=new l.u,this.note="",this.type=f.mb}return b(e,[{key:"getDisplayType",value:function(e){switch(e.type){case f.mb.CUSTOMER_VERIFIED:case f.mb.CUSTOMER_EMAIL_UPDATE_VERIFIED:case f.mb.CUSTOMER_PASSWORD_RESET_VERIFIED:return"success";case f.mb.CUSTOMER_REGISTERED:return"muted";case f.mb.CUSTOMER_REMOVED_FROM_GROUP:return"error";default:return"default"}}},{key:"getTimelineIcon",value:function(e){switch(e.type){case f.mb.CUSTOMER_REGISTERED:return"user";case f.mb.CUSTOMER_VERIFIED:return["assign-user","is-solid"];case f.mb.CUSTOMER_NOTE:return"note";case f.mb.CUSTOMER_ADDED_TO_GROUP:case f.mb.CUSTOMER_REMOVED_FROM_GROUP:return"users"}}},{key:"isFeatured",value:function(e){switch(e.type){case f.mb.CUSTOMER_REGISTERED:case f.mb.CUSTOMER_VERIFIED:return!0;default:return!1}}},{key:"getName",value:function(e){var t=e.administrator;return t?"".concat(t.firstName," ").concat(t.lastName):"".concat(this.customer.firstName," ").concat(this.customer.lastName)}},{key:"addNoteToCustomer",value:function(){this.addNote.emit({note:this.note}),this.note=""}}]),e}();Pt.\u0275fac=function(e){return new(e||Pt)},Pt.\u0275cmp=l.Wb({type:Pt,selectors:[["vdr-customer-history"]],inputs:{customer:"customer",history:"history"},outputs:{addNote:"addNote",updateNote:"updateNote",deleteNote:"deleteNote"},decls:12,vars:10,consts:[[1,"entry-list"],["iconShape","note","displayType","muted"],[1,"note-entry"],["name","note",1,"note",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary",3,"disabled","click"],[3,"displayType","iconShape","createdAt","name","featured",4,"ngFor","ngForOf"],[3,"isLast"],[3,"displayType","iconShape","createdAt","name","featured"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"title"],[4,"ngIf","ngIfElse"],["namedStrategy",""],[1,"flex"],[3,"value"],[1,"address-string"],[3,"label"],[1,"note-text"],[1,"flex-spacer"],["vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","edit"],[1,"dropdown-divider"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(l.ic(0,"h4"),l.Xc(1),l.sc(2,"translate"),l.hc(),l.ic(3,"div",0),l.ic(4,"vdr-timeline-entry",1),l.ic(5,"div",2),l.ic(6,"textarea",3),l.pc("ngModelChange",(function(e){return t.note=e})),l.hc(),l.ic(7,"button",4),l.pc("click",(function(){return t.addNoteToCustomer()})),l.Xc(8),l.sc(9,"translate"),l.hc(),l.hc(),l.hc(),l.Vc(10,ut,16,20,"vdr-timeline-entry",5),l.dc(11,"vdr-timeline-entry",6),l.hc()),2&e&&(l.Rb(1),l.Yc(l.tc(2,6,"customer.customer-history")),l.Rb(5),l.yc("ngModel",t.note),l.Rb(1),l.yc("disabled",!t.note),l.Rb(1),l.Zc(" ",l.tc(9,8,"order.add-note")," "),l.Rb(2),l.yc("ngForOf",t.history),l.Rb(1),l.yc("isLast",!0))},directives:[f.Rb,f.eb,$.b,$.p,$.s,Z.o,Z.r,Z.s,Z.p,f.lb,f.Cb,f.vb,f.S,f.V,B.o,f.U,f.T],pipes:[Y.d,f.ib],styles:[".entry-list[_ngcontent-%COMP%]{margin-left:24px;margin-right:12px;margin-top:24px}.note-entry[_ngcontent-%COMP%]{align-items:center;display:flex}.note-entry[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{flex:1}.note-entry[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}textarea.note[_ngcontent-%COMP%]{border-radius:3px;flex:1;height:36px;margin-right:6px}.note-text[_ngcontent-%COMP%]{color:#202223;white-space:pre-wrap}.address-string[_ngcontent-%COMP%]{color:#525456;font-size:smaller}"],changeDetection:0}),Pt.propDecorators={customer:[{type:l.D}],history:[{type:l.D}],addNote:[{type:l.O}],updateNote:[{type:l.O}],deleteNote:[{type:l.O}]};var Dt=function(t){o(r,t);var c=u(r);function r(t,n,i,s,o){var a,u;return p(this,r),(u=c.call(this,n,i)).dataService=t,u.modalService=s,u.notificationService=o,u.searchTerm=new $.f(""),e((a=d(u),m(r.prototype)),"setQueryFn",a).call(a,(function(){var e;return(e=u.dataService.customer).getCustomerList.apply(e,arguments).refetchOnChannelChange()}),(function(e){return e.customers}),(function(e,t){return{options:{skip:e,take:t,filter:{emailAddress:{contains:u.searchTerm.value}},sort:{createdAt:U.SortOrder.DESC}}}})),u}return b(r,[{key:"ngOnInit",value:function(){var t=this;e(m(r.prototype),"ngOnInit",this).call(this),this.searchTerm.valueChanges.pipe(Object(E.a)(250),Object(X.a)(this.destroy$)).subscribe((function(){return t.refresh()}))}},{key:"deleteCustomer",value:function(e){var t=this;return this.modalService.dialog({title:Object(x.a)("catalog.confirm-delete-customer"),body:"".concat(e.firstName," ").concat(e.lastName),buttons:[{type:"secondary",label:Object(x.a)("common.cancel")},{type:"danger",label:Object(x.a)("common.delete"),returnValue:!0}]}).pipe(Object(S.a)((function(c){return c?t.dataService.customer.deleteCustomer(e.id):C.a}))).subscribe((function(){t.notificationService.success(Object(x.a)("common.notify-delete-success"),{entity:"Customer"}),t.refresh()}),(function(e){t.notificationService.error(Object(x.a)("common.notify-delete-error"),{entity:"Customer"})}))}}]),r}(f.w);Dt.\u0275fac=function(e){return new(e||Dt)(l.cc(f.K),l.cc(V.e),l.cc(V.a),l.cc(f.Ab),l.cc(f.Bb))},Dt.\u0275cmp=l.Wb({type:Dt,selectors:[["vdr-customer-list"]],features:[l.Ob],decls:24,vars:28,consts:[["type","text","name","searchTerm",1,"clr-input","search-input",3,"formControl","placeholder"],["locationId","customer-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"customer"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(l.ic(0,"vdr-action-bar"),l.ic(1,"vdr-ab-left"),l.dc(2,"input",0),l.sc(3,"translate"),l.hc(),l.ic(4,"vdr-ab-right"),l.dc(5,"vdr-action-bar-items",1),l.Vc(6,dt,4,5,"a",2),l.hc(),l.hc(),l.ic(7,"vdr-data-table",3),l.pc("pageChange",(function(e){return t.setPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setItemsPerPage(e)})),l.sc(8,"async"),l.sc(9,"async"),l.sc(10,"async"),l.sc(11,"async"),l.ic(12,"vdr-dt-column",4),l.Xc(13),l.sc(14,"translate"),l.hc(),l.ic(15,"vdr-dt-column",4),l.Xc(16),l.sc(17,"translate"),l.hc(),l.ic(18,"vdr-dt-column"),l.Xc(19),l.sc(20,"translate"),l.hc(),l.dc(21,"vdr-dt-column"),l.dc(22,"vdr-dt-column"),l.Vc(23,mt,21,20,"ng-template"),l.hc()),2&e&&(l.Rb(2),l.yc("formControl",t.searchTerm)("placeholder",l.tc(3,12,"customer.search-customers-by-email")),l.Rb(4),l.yc("vdrIfPermissions","CreateCustomer"),l.Rb(1),l.yc("items",l.tc(8,14,t.items$))("itemsPerPage",l.tc(9,16,t.itemsPerPage$))("totalItems",l.tc(10,18,t.totalItems$))("currentPage",l.tc(11,20,t.currentPage$)),l.Rb(5),l.yc("expand",!0),l.Rb(1),l.Yc(l.tc(14,22,"customer.name")),l.Rb(2),l.yc("expand",!0),l.Rb(1),l.Yc(l.tc(17,24,"customer.email-address")),l.Rb(3),l.Yc(l.tc(20,26,"customer.customer-type")))},directives:function(){return[f.c,f.e,f.eb,$.b,$.p,$.g,f.f,f.d,f.rb,f.M,f.L,V.h,B.o,kt,f.Pb,f.S,f.V,f.U,f.T]},pipes:function(){return[Y.d,Z.b,f.ib]},styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"]}),Dt.ctorParameters=function(){return[{type:f.K},{type:V.e},{type:V.a},{type:f.Ab},{type:f.Bb}]};var kt=function e(){p(this,e)};kt.\u0275fac=function(e){return new(e||kt)},kt.\u0275cmp=l.Wb({type:kt,selectors:[["vdr-customer-status-label"]],inputs:{customer:"customer"},decls:2,vars:2,consts:[[4,"ngIf"],["shape","check-circle",1,"verified-user-icon"],["shape","check-circle",1,"registered-user-icon"]],template:function(e,t){1&e&&(l.Vc(0,bt,3,2,"vdr-chip",0),l.Vc(1,ht,3,3,"vdr-chip",0)),2&e&&(l.yc("ngIf",null==t.customer.user?null:t.customer.user.id),l.Rb(1),l.yc("ngIf",!(null!=t.customer.user&&t.customer.user.id)))},directives:[Z.p,f.B,B.o],pipes:[Y.d],styles:[".registered-user-icon[_ngcontent-%COMP%]{color:#bfc3cc}.verified-user-icon[_ngcontent-%COMP%]{color:#308300}"],changeDetection:0}),kt.propDecorators={customer:[{type:l.D}]};var wt=function(e){o(c,e);var t=u(c);function c(e,r){return p(this,c),t.call(this,e,{__typename:"Customer",id:"",createdAt:"",updatedAt:"",title:"",firstName:"",lastName:"",emailAddress:"",phoneNumber:null,addresses:null,user:null},(function(e){return r.customer.getCustomer(e).mapStream((function(e){return e.customer}))}))}return c}(f.v);wt.\u0275fac=function(e){return new(e||wt)(l.mc(V.e),l.mc(f.K))},wt.\u0275prov=Object(l.Yb)({factory:function(){return new wt(Object(l.mc)(V.e),Object(l.mc)(f.K))},token:wt,providedIn:"root"}),wt.ctorParameters=function(){return[{type:V.e},{type:f.K}]};var Ft={breadcrumb:Object(x.a)("breadcrumb.customers")},Mt={breadcrumb:Nt},jt={breadcrumb:Object(x.a)("breadcrumb.customer-groups")},At=[{path:"customers",component:Dt,pathMatch:"",data:Ft},{path:"customers/:id",component:Rt,resolve:Object(f.Vb)(wt),canDeactivate:[f.x],data:Mt},{path:"groups",component:St,data:jt}];function Nt(e,t){return Object(f.Xb)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.customers",getName:function(e){return"".concat(e.firstName," ").concat(e.lastName)},route:"customers"})}var Tt=function e(){p(this,e)};Tt.\u0275mod=l.ac({type:Tt}),Tt.\u0275inj=l.Zb({factory:function(e){return new(e||Tt)},imports:[[f.Kb,V.i.forChild(At)]]})}}])}();