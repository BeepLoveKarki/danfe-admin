function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,r=new Array(t);c<t;c++)r[c]=e[c];return r}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var r=t[c];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var c,r=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;c=Reflect.construct(r,arguments,n)}else c=r.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _get(e,t,c){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,c){var r=_superPropBase(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(c):n.value}})(e,t,c||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{tB2i:function(e,t,c){"use strict";c.r(t),c.d(t,"HealthCheckComponent",(function(){return T})),c.d(t,"JobListComponent",(function(){return A})),c.d(t,"JobStateLabelComponent",(function(){return R})),c.d(t,"SystemModule",(function(){return F})),c.d(t,"systemRoutes",(function(){return Y})),c.d(t,"\u02750",(function(){return E})),c.d(t,"\u02751",(function(){return N}));var r=c("D57K"),n=c("EM62"),a=c("ixhn"),o=c("nIj0"),s=c("sEIs"),l=c("8lHc"),i=c("kuMc"),u=c("xVbo"),d=c("YtkY"),b=c("OxKu"),f=c("2kYt"),m=c("Kej3"),p=c("s2Ay"),y=c("jY47");function h(e,t){1&e&&(n.kc(0),n.ad(1),n.xc(2,"translate"),n.jc()),2&e&&(n.Ub(1),n.cd(" ",n.yc(2,1,"system.health-all-systems-up")," "))}function g(e,t){1&e&&(n.ad(0),n.xc(1,"translate")),2&e&&n.cd(" ",n.yc(1,1,"system.health-error")," ")}var v=function(e,t){return{"is-success":e,"is-danger":t}};function j(e,t){if(1&e&&(n.mc(0,"div",7),n.mc(1,"div",8),n.hc(2,"clr-icon",9),n.lc(),n.mc(3,"div",10),n.Yc(4,h,3,3,"ng-container",11),n.Yc(5,g,2,3,"ng-template",null,12,n.Zc),n.mc(7,"div",13),n.ad(8),n.xc(9,"translate"),n.xc(10,"date"),n.xc(11,"async"),n.lc(),n.lc(),n.lc()),2&e){var c=t.ngIf,r=n.Oc(6),a=n.wc();n.Ub(2),n.Dc("ngClass",n.Jc(13,v,"ok"===c,"ok"!==c)),n.Vb("shape","ok"===c?"check-circle":"exclamation-circle"),n.Ub(2),n.Dc("ngIf","ok"===c)("ngIfElse",r),n.Ub(4),n.dd(" ",n.yc(9,6,"system.health-last-checked"),": ",n.zc(10,8,n.yc(11,11,a.healthCheckService.lastCheck$),"mediumTime")," ")}}function _(e,t){1&e&&(n.kc(0),n.hc(1,"clr-icon",17),n.ad(2),n.xc(3,"translate"),n.jc()),2&e&&(n.Ub(2),n.cd(" ",n.yc(3,1,"system.health-status-up")," "))}function O(e,t){1&e&&(n.hc(0,"clr-icon",18),n.ad(1),n.xc(2,"translate")),2&e&&(n.Ub(1),n.cd(" ",n.yc(2,1,"system.health-status-down")," "))}function k(e,t){if(1&e&&(n.mc(0,"tr"),n.mc(1,"td",14),n.ad(2),n.lc(),n.mc(3,"td",14),n.mc(4,"vdr-chip",15),n.Yc(5,_,4,3,"ng-container",11),n.Yc(6,O,3,3,"ng-template",null,16,n.Zc),n.lc(),n.lc(),n.mc(8,"td",14),n.ad(9),n.lc(),n.lc()),2&e){var c=t.$implicit,r=n.Oc(7);n.Ub(2),n.bd(c.key),n.Ub(2),n.Dc("colorType","up"===c.result.status?"success":"error"),n.Ub(1),n.Dc("ngIf","up"===c.result.status)("ngIfElse",r),n.Ub(4),n.bd(c.result.message)}}function w(e,t){1&e&&(n.kc(0),n.ad(1),n.xc(2,"translate"),n.jc()),2&e&&(n.Ub(1),n.cd(" ",n.yc(2,1,"system.all-job-queues")," "))}function x(e,t){if(1&e&&(n.mc(0,"vdr-chip",8),n.ad(1),n.lc()),2&e){var c=n.wc().item;n.Dc("colorFrom",c.name),n.Ub(1),n.bd(c.name)}}function C(e,t){if(1&e&&(n.Yc(0,w,3,3,"ng-container",6),n.Yc(1,x,2,2,"ng-template",null,7,n.Zc)),2&e){var c=t.item,r=n.Oc(2);n.Dc("ngIf","all"===c.name)("ngIfElse",r)}}function U(e,t){if(1&e&&(n.mc(0,"vdr-dropdown"),n.mc(1,"button",13),n.xc(2,"translate"),n.hc(3,"clr-icon",14),n.lc(),n.mc(4,"vdr-dropdown-menu"),n.mc(5,"div",15),n.hc(6,"vdr-object-tree",16),n.lc(),n.lc(),n.lc()),2&e){var c=n.wc().item;n.Ub(1),n.Dc("title",n.yc(2,2,"system.job-data")),n.Ub(5),n.Dc("value",c.data)}}function P(e,t){if(1&e&&(n.mc(0,"vdr-dropdown"),n.mc(1,"button",17),n.hc(2,"clr-icon",14),n.ad(3),n.xc(4,"translate"),n.lc(),n.mc(5,"vdr-dropdown-menu"),n.mc(6,"div",15),n.hc(7,"vdr-object-tree",16),n.lc(),n.lc(),n.lc()),2&e){var c=n.wc().item;n.Ub(3),n.cd(" ",n.yc(4,2,"system.job-result")," "),n.Ub(4),n.Dc("value",c.result)}}function I(e,t){if(1&e&&(n.mc(0,"vdr-dropdown"),n.mc(1,"button",17),n.hc(2,"clr-icon",18),n.ad(3),n.xc(4,"translate"),n.lc(),n.mc(5,"vdr-dropdown-menu"),n.mc(6,"div",15),n.ad(7),n.lc(),n.lc(),n.lc()),2&e){var c=n.wc().item;n.Ub(3),n.cd(" ",n.yc(4,2,"system.job-error")," "),n.Ub(4),n.cd(" ",c.error," ")}}function D(e,t){if(1&e&&(n.mc(0,"td",9),n.hc(1,"vdr-entity-info",10),n.lc(),n.mc(2,"td",9),n.Yc(3,U,7,4,"vdr-dropdown",11),n.mc(4,"vdr-chip",8),n.ad(5),n.lc(),n.lc(),n.mc(6,"td",9),n.ad(7),n.xc(8,"timeAgo"),n.lc(),n.mc(9,"td",9),n.hc(10,"vdr-job-state-label",12),n.lc(),n.mc(11,"td",9),n.ad(12),n.xc(13,"duration"),n.lc(),n.mc(14,"td",9),n.Yc(15,P,8,4,"vdr-dropdown",11),n.Yc(16,I,8,4,"vdr-dropdown",11),n.lc()),2&e){var c=t.item,r=n.wc();n.Ub(1),n.Dc("entity",c),n.Ub(2),n.Dc("ngIf",c.data),n.Ub(1),n.Dc("colorFrom",c.queueName),n.Ub(1),n.bd(c.queueName),n.Ub(2),n.bd(n.yc(8,9,c.createdAt)),n.Ub(3),n.Dc("job",c),n.Ub(2),n.bd(n.yc(13,11,c.duration)),n.Ub(3),n.Dc("ngIf",r.hasResult(c)),n.Ub(1),n.Dc("ngIf",c.error)}}function S(e,t){if(1&e&&(n.mc(0,"span",2),n.ad(1),n.xc(2,"percent"),n.lc()),2&e){var c=n.wc();n.Ub(1),n.cd(" ",n.yc(2,1,c.job.progress/100)," ")}}var T=function e(t){_classCallCheck(this,e),this.healthCheckService=t};T.\u0275fac=function(e){return new(e||T)(n.gc(a.hb))},T.\u0275cmp=n.ac({type:T,selectors:[["vdr-health-check"]],decls:25,vars:18,consts:[["class","system-status-header",4,"ngIf"],["locationId","system-status"],[1,"btn","btn-secondary",3,"click"],["shape","refresh"],[1,"table"],[1,"left"],[4,"ngFor","ngForOf"],[1,"system-status-header"],[1,"status-icon"],["size","48",3,"ngClass"],[1,"status-detail"],[4,"ngIf","ngIfElse"],["error",""],[1,"last-checked"],[1,"align-middle","left"],[3,"colorType"],["down",""],["shape","check-circle"],["shape","exclamation-circle"]],template:function(e,t){1&e&&(n.mc(0,"vdr-action-bar"),n.mc(1,"vdr-ab-left"),n.Yc(2,j,12,16,"div",0),n.xc(3,"async"),n.lc(),n.mc(4,"vdr-ab-right"),n.hc(5,"vdr-action-bar-items",1),n.mc(6,"button",2),n.uc("click",(function(){return t.healthCheckService.refresh()})),n.hc(7,"clr-icon",3),n.ad(8),n.xc(9,"translate"),n.lc(),n.lc(),n.lc(),n.mc(10,"table",4),n.mc(11,"thead"),n.mc(12,"tr"),n.mc(13,"th",5),n.ad(14),n.xc(15,"translate"),n.lc(),n.mc(16,"th",5),n.ad(17),n.xc(18,"translate"),n.lc(),n.mc(19,"th",5),n.ad(20),n.xc(21,"translate"),n.lc(),n.lc(),n.lc(),n.mc(22,"tbody"),n.Yc(23,k,10,5,"tr",6),n.xc(24,"async"),n.lc(),n.lc()),2&e&&(n.Ub(2),n.Dc("ngIf",n.yc(3,6,t.healthCheckService.status$)),n.Ub(6),n.cd(" ",n.yc(9,8,"system.health-refresh")," "),n.Ub(6),n.cd(" ",n.yc(15,10,"common.name")," "),n.Ub(3),n.cd(" ",n.yc(18,12,"system.health-status")," "),n.Ub(3),n.cd(" ",n.yc(21,14,"system.health-message")," "),n.Ub(3),n.Dc("ngForOf",n.yc(24,16,t.healthCheckService.details$)))},directives:[a.c,a.e,f.p,a.f,a.d,m.o,f.o,f.n,a.B],pipes:[f.b,p.d,f.f],styles:[".system-status-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.system-status-header[_ngcontent-%COMP%]   .status-detail[_ngcontent-%COMP%]{font-weight:700}.system-status-header[_ngcontent-%COMP%]   .last-checked[_ngcontent-%COMP%]{font-weight:400;color:#525456}"],changeDetection:0}),T.ctorParameters=function(){return[{type:a.hb}]},T=Object(r.c)([Object(r.f)("design:paramtypes",[a.hb])],T);var A=function(e){_inherits(c,e);var t=_createSuper(c);function c(e,r,n,s,l){var i,u;return _classCallCheck(this,c),(u=t.call(this,s,l)).dataService=e,u.modalService=r,u.notificationService=n,u.liveUpdate=new o.f(!0),u.hideSettled=new o.f(!0),u.queueFilter=new o.f("all"),_get((i=_assertThisInitialized(u),_getPrototypeOf(c.prototype)),"setQueryFn",i).call(i,(function(){var e;return(e=u.dataService.settings).getAllJobs.apply(e,arguments)}),(function(e){return e.jobs}),(function(e,t){var c="all"===u.queueFilter.value?null:{queueName:{eq:u.queueFilter.value}},r=u.hideSettled.value;return{options:{skip:e,take:t,filter:Object.assign(Object.assign({},c),r?{isSettled:{eq:!1}}:{}),sort:{createdAt:a.Hb.DESC}}}})),u}return _createClass(c,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(c.prototype),"ngOnInit",this).call(this),Object(l.a)(5e3,2e3).pipe(Object(i.a)(this.destroy$),Object(u.a)((function(){return e.liveUpdate.value}))).subscribe((function(){e.refresh()})),this.queues$=this.dataService.settings.getJobQueues().mapStream((function(e){return e.jobQueues})).pipe(Object(d.a)((function(e){return[{name:"all",running:!0}].concat(_toConsumableArray(e))})))}},{key:"hasResult",value:function(e){var t=e.result;return null!=t&&("object"!=typeof t||Object.keys(t).length>0)}}]),c}(a.w);A.\u0275fac=function(e){return new(e||A)(n.gc(a.K),n.gc(a.xb),n.gc(a.yb),n.gc(s.e),n.gc(s.a))},A.\u0275cmp=n.ac({type:A,selectors:[["vdr-job-list"]],features:[n.Rb],decls:40,vars:45,consts:[["type","checkbox","clrCheckbox","","name","live-update",3,"formControl"],["type","checkbox","clrCheckbox","","name","hide-settled",3,"formControl","change"],["bindValue","name",3,"addTag","items","hideSelected","multiple","markFirst","clearable","searchable","formControl","change"],["ng-label-tmp","","ng-option-tmp",""],["locationId","job-list"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[4,"ngIf","ngIfElse"],["others",""],[3,"colorFrom"],[1,"left","align-middle"],[3,"entity"],[4,"ngIf"],[3,"job"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-icon",3,"title"],["shape","details"],[1,"result-detail"],[3,"value"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-sm","details-button"],["shape","exclamation-circle"]],template:function(e,t){1&e&&(n.mc(0,"vdr-action-bar"),n.mc(1,"vdr-ab-left"),n.mc(2,"clr-checkbox-container"),n.mc(3,"clr-checkbox-wrapper"),n.hc(4,"input",0),n.mc(5,"label"),n.ad(6),n.xc(7,"translate"),n.lc(),n.lc(),n.mc(8,"clr-checkbox-wrapper"),n.mc(9,"input",1),n.uc("change",(function(){return t.refresh()})),n.lc(),n.mc(10,"label"),n.ad(11),n.xc(12,"translate"),n.lc(),n.lc(),n.lc(),n.lc(),n.mc(13,"vdr-ab-right"),n.mc(14,"ng-select",2),n.uc("change",(function(){return t.refresh()})),n.xc(15,"async"),n.Yc(16,C,3,2,"ng-template",3),n.lc(),n.hc(17,"vdr-action-bar-items",4),n.lc(),n.lc(),n.mc(18,"vdr-data-table",5),n.uc("pageChange",(function(e){return t.setPageNumber(e)}))("itemsPerPageChange",(function(e){return t.setItemsPerPage(e)})),n.xc(19,"async"),n.xc(20,"async"),n.xc(21,"async"),n.xc(22,"async"),n.hc(23,"vdr-dt-column"),n.mc(24,"vdr-dt-column"),n.ad(25),n.xc(26,"translate"),n.lc(),n.mc(27,"vdr-dt-column"),n.ad(28),n.xc(29,"translate"),n.lc(),n.mc(30,"vdr-dt-column"),n.ad(31),n.xc(32,"translate"),n.lc(),n.mc(33,"vdr-dt-column"),n.ad(34),n.xc(35,"translate"),n.lc(),n.mc(36,"vdr-dt-column"),n.ad(37),n.xc(38,"translate"),n.lc(),n.Yc(39,D,17,13,"ng-template"),n.lc()),2&e&&(n.Ub(4),n.Dc("formControl",t.liveUpdate),n.Ub(2),n.bd(n.yc(7,21,"common.live-update")),n.Ub(3),n.Dc("formControl",t.hideSettled),n.Ub(2),n.bd(n.yc(12,23,"system.hide-settled-jobs")),n.Ub(3),n.Dc("addTag",!1)("items",n.yc(15,25,t.queues$))("hideSelected",!0)("multiple",!1)("markFirst",!1)("clearable",!1)("searchable",!1)("formControl",t.queueFilter),n.Ub(4),n.Dc("items",n.yc(19,27,t.items$))("itemsPerPage",n.yc(20,29,t.itemsPerPage$))("totalItems",n.yc(21,31,t.totalItems$))("currentPage",n.yc(22,33,t.currentPage$)),n.Ub(7),n.bd(n.yc(26,35,"system.job-queue-name")),n.Ub(3),n.bd(n.yc(29,37,"common.created-at")),n.Ub(3),n.bd(n.yc(32,39,"system.job-state")),n.Ub(3),n.bd(n.yc(35,41,"system.job-duration")),n.Ub(3),n.bd(n.yc(38,43,"system.job-result")))},directives:function(){return[a.c,a.e,m.j,m.k,a.db,o.a,m.i,o.p,o.g,m.t,a.f,y.a,y.e,y.d,a.d,a.M,a.L,f.p,a.B,a.Z,R,a.S,a.V,m.o,a.U,a.zb]},pipes:function(){return[p.d,f.b,a.Lb,a.W]},styles:[".result-detail[_ngcontent-%COMP%]{margin:0 12px}"],changeDetection:0}),A.ctorParameters=function(){return[{type:a.K},{type:a.xb},{type:a.yb},{type:s.e},{type:s.a}]},A=Object(r.c)([Object(r.f)("design:paramtypes",[a.K,a.xb,a.yb,s.e,s.a])],A);var R=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"iconShape",get:function(){switch(this.job.state){case a.rb.COMPLETED:return"check-circle";case a.rb.FAILED:return"exclamation-circle";case a.rb.PENDING:case a.rb.RETRYING:return"hourglass";case a.rb.RUNNING:return"sync"}}},{key:"colorType",get:function(){switch(this.job.state){case a.rb.COMPLETED:return"success";case a.rb.FAILED:return"error";case a.rb.PENDING:case a.rb.RETRYING:return"";case a.rb.RUNNING:return"warning"}}}]),e}();R.\u0275fac=function(e){return new(e||R)},R.\u0275cmp=n.ac({type:R,selectors:[["vdr-job-state-label"]],inputs:{job:"job"},decls:5,vars:6,consts:[[3,"colorType"],["class","progress",4,"ngIf"],[1,"progress"]],template:function(e,t){1&e&&(n.mc(0,"vdr-chip",0),n.hc(1,"clr-icon"),n.ad(2),n.xc(3,"titlecase"),n.Yc(4,S,3,3,"span",1),n.lc()),2&e&&(n.Dc("colorType",t.colorType),n.Ub(1),n.Vb("shape",t.iconShape),n.Ub(1),n.cd(" ",n.yc(3,4,t.job.state)," "),n.Ub(2),n.Dc("ngIf","RUNNING"===t.job.state))},directives:[a.B,m.o,f.p],pipes:[f.z,f.w],styles:[".progress[_ngcontent-%COMP%]{margin-left:3px}clr-icon[_ngcontent-%COMP%]{min-width:12px}"],changeDetection:0}),Object(r.c)([Object(n.D)(),Object(r.f)("design:type",Object)],R.prototype,"job",void 0);var E={breadcrumb:Object(b.a)("breadcrumb.job-queue")},N={breadcrumb:Object(b.a)("breadcrumb.system-status")},Y=[{path:"jobs",component:A,data:E},{path:"system-status",component:T,data:N}],F=function e(){_classCallCheck(this,e)};F.\u0275mod=n.ec({type:F}),F.\u0275inj=n.dc({factory:function(e){return new(e||F)},imports:[[a.Gb,s.i.forChild(Y)]]})}}]);
//# sourceMappingURL=18-es5.80139fdac7163c92051c.js.map