(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{tB2i:function(e,c,t){"use strict";t.r(c),t.d(c,"HealthCheckComponent",(function(){return N})),t.d(c,"JobListComponent",(function(){return E})),t.d(c,"JobStateLabelComponent",(function(){return F})),t.d(c,"SystemModule",(function(){return R})),t.d(c,"systemRoutes",(function(){return M})),t.d(c,"\u02750",(function(){return T})),t.d(c,"\u02751",(function(){return q}));var n=t("D57K"),s=t("EM62"),a=t("ixhn"),r=t("nIj0"),l=t("sEIs"),o=t("8lHc"),i=t("kuMc"),d=t("xVbo"),b=t("YtkY"),m=t("OxKu"),u=t("2kYt"),h=t("Kej3"),p=t("s2Ay"),g=t("jY47");function y(e,c){1&e&&(s.kc(0),s.ad(1),s.xc(2,"translate"),s.jc()),2&e&&(s.Ub(1),s.cd(" ",s.yc(2,1,"system.health-all-systems-up")," "))}function f(e,c){1&e&&(s.ad(0),s.xc(1,"translate")),2&e&&s.cd(" ",s.yc(1,1,"system.health-error")," ")}const v=function(e,c){return{"is-success":e,"is-danger":c}};function j(e,c){if(1&e&&(s.mc(0,"div",7),s.mc(1,"div",8),s.hc(2,"clr-icon",9),s.lc(),s.mc(3,"div",10),s.Yc(4,y,3,3,"ng-container",11),s.Yc(5,f,2,3,"ng-template",null,12,s.Zc),s.mc(7,"div",13),s.ad(8),s.xc(9,"translate"),s.xc(10,"date"),s.xc(11,"async"),s.lc(),s.lc(),s.lc()),2&e){const e=c.ngIf,t=s.Oc(6),n=s.wc();s.Ub(2),s.Dc("ngClass",s.Jc(13,v,"ok"===e,"ok"!==e)),s.Vb("shape","ok"===e?"check-circle":"exclamation-circle"),s.Ub(2),s.Dc("ngIf","ok"===e)("ngIfElse",t),s.Ub(4),s.dd(" ",s.yc(9,6,"system.health-last-checked"),": ",s.zc(10,8,s.yc(11,11,n.healthCheckService.lastCheck$),"mediumTime")," ")}}function x(e,c){1&e&&(s.kc(0),s.hc(1,"clr-icon",17),s.ad(2),s.xc(3,"translate"),s.jc()),2&e&&(s.Ub(2),s.cd(" ",s.yc(3,1,"system.health-status-up")," "))}function U(e,c){1&e&&(s.hc(0,"clr-icon",18),s.ad(1),s.xc(2,"translate")),2&e&&(s.Ub(1),s.cd(" ",s.yc(2,1,"system.health-status-down")," "))}function k(e,c){if(1&e&&(s.mc(0,"tr"),s.mc(1,"td",14),s.ad(2),s.lc(),s.mc(3,"td",14),s.mc(4,"vdr-chip",15),s.Yc(5,x,4,3,"ng-container",11),s.Yc(6,U,3,3,"ng-template",null,16,s.Zc),s.lc(),s.lc(),s.mc(8,"td",14),s.ad(9),s.lc(),s.lc()),2&e){const e=c.$implicit,t=s.Oc(7);s.Ub(2),s.bd(e.key),s.Ub(2),s.Dc("colorType","up"===e.result.status?"success":"error"),s.Ub(1),s.Dc("ngIf","up"===e.result.status)("ngIfElse",t),s.Ub(4),s.bd(e.result.message)}}function w(e,c){1&e&&(s.kc(0),s.ad(1),s.xc(2,"translate"),s.jc()),2&e&&(s.Ub(1),s.cd(" ",s.yc(2,1,"system.all-job-queues")," "))}function I(e,c){if(1&e&&(s.mc(0,"vdr-chip",8),s.ad(1),s.lc()),2&e){const e=s.wc().item;s.Dc("colorFrom",e.name),s.Ub(1),s.bd(e.name)}}function D(e,c){if(1&e&&(s.Yc(0,w,3,3,"ng-container",6),s.Yc(1,I,2,2,"ng-template",null,7,s.Zc)),2&e){const e=c.item,t=s.Oc(2);s.Dc("ngIf","all"===e.name)("ngIfElse",t)}}function C(e,c){if(1&e&&(s.mc(0,"vdr-dropdown"),s.mc(1,"button",13),s.xc(2,"translate"),s.hc(3,"clr-icon",14),s.lc(),s.mc(4,"vdr-dropdown-menu"),s.mc(5,"div",15),s.hc(6,"vdr-object-tree",16),s.lc(),s.lc(),s.lc()),2&e){const e=s.wc().item;s.Ub(1),s.Dc("title",s.yc(2,2,"system.job-data")),s.Ub(5),s.Dc("value",e.data)}}function O(e,c){if(1&e&&(s.mc(0,"vdr-dropdown"),s.mc(1,"button",17),s.hc(2,"clr-icon",14),s.ad(3),s.xc(4,"translate"),s.lc(),s.mc(5,"vdr-dropdown-menu"),s.mc(6,"div",15),s.hc(7,"vdr-object-tree",16),s.lc(),s.lc(),s.lc()),2&e){const e=s.wc().item;s.Ub(3),s.cd(" ",s.yc(4,2,"system.job-result")," "),s.Ub(4),s.Dc("value",e.result)}}function P(e,c){if(1&e&&(s.mc(0,"vdr-dropdown"),s.mc(1,"button",17),s.hc(2,"clr-icon",18),s.ad(3),s.xc(4,"translate"),s.lc(),s.mc(5,"vdr-dropdown-menu"),s.mc(6,"div",15),s.ad(7),s.lc(),s.lc(),s.lc()),2&e){const e=s.wc().item;s.Ub(3),s.cd(" ",s.yc(4,2,"system.job-error")," "),s.Ub(4),s.cd(" ",e.error," ")}}function S(e,c){if(1&e&&(s.mc(0,"td",9),s.hc(1,"vdr-entity-info",10),s.lc(),s.mc(2,"td",9),s.Yc(3,C,7,4,"vdr-dropdown",11),s.mc(4,"vdr-chip",8),s.ad(5),s.lc(),s.lc(),s.mc(6,"td",9),s.ad(7),s.xc(8,"timeAgo"),s.lc(),s.mc(9,"td",9),s.hc(10,"vdr-job-state-label",12),s.lc(),s.mc(11,"td",9),s.ad(12),s.xc(13,"duration"),s.lc(),s.mc(14,"td",9),s.Yc(15,O,8,4,"vdr-dropdown",11),s.Yc(16,P,8,4,"vdr-dropdown",11),s.lc()),2&e){const e=c.item,t=s.wc();s.Ub(1),s.Dc("entity",e),s.Ub(2),s.Dc("ngIf",e.data),s.Ub(1),s.Dc("colorFrom",e.queueName),s.Ub(1),s.bd(e.queueName),s.Ub(2),s.bd(s.yc(8,9,e.createdAt)),s.Ub(3),s.Dc("job",e),s.Ub(2),s.bd(s.yc(13,11,e.duration)),s.Ub(3),s.Dc("ngIf",t.hasResult(e)),s.Ub(1),s.Dc("ngIf",e.error)}}function Y(e,c){if(1&e&&(s.mc(0,"span",2),s.ad(1),s.xc(2,"percent"),s.lc()),2&e){const e=s.wc();s.Ub(1),s.cd(" ",s.yc(2,1,e.job.progress/100)," ")}}let N=class{constructor(e){this.healthCheckService=e}};N.\u0275fac=function(e){return new(e||N)(s.gc(a.hb))},N.\u0275cmp=s.ac({type:N,selectors:[["vdr-health-check"]],decls:25,vars:18,consts:[["class","system-status-header",4,"ngIf"],["locationId","system-status"],[1,"btn","btn-secondary",3,"click"],["shape","refresh"],[1,"table"],[1,"left"],[4,"ngFor","ngForOf"],[1,"system-status-header"],[1,"status-icon"],["size","48",3,"ngClass"],[1,"status-detail"],[4,"ngIf","ngIfElse"],["error",""],[1,"last-checked"],[1,"align-middle","left"],[3,"colorType"],["down",""],["shape","check-circle"],["shape","exclamation-circle"]],template:function(e,c){1&e&&(s.mc(0,"vdr-action-bar"),s.mc(1,"vdr-ab-left"),s.Yc(2,j,12,16,"div",0),s.xc(3,"async"),s.lc(),s.mc(4,"vdr-ab-right"),s.hc(5,"vdr-action-bar-items",1),s.mc(6,"button",2),s.uc("click",(function(){return c.healthCheckService.refresh()})),s.hc(7,"clr-icon",3),s.ad(8),s.xc(9,"translate"),s.lc(),s.lc(),s.lc(),s.mc(10,"table",4),s.mc(11,"thead"),s.mc(12,"tr"),s.mc(13,"th",5),s.ad(14),s.xc(15,"translate"),s.lc(),s.mc(16,"th",5),s.ad(17),s.xc(18,"translate"),s.lc(),s.mc(19,"th",5),s.ad(20),s.xc(21,"translate"),s.lc(),s.lc(),s.lc(),s.mc(22,"tbody"),s.Yc(23,k,10,5,"tr",6),s.xc(24,"async"),s.lc(),s.lc()),2&e&&(s.Ub(2),s.Dc("ngIf",s.yc(3,6,c.healthCheckService.status$)),s.Ub(6),s.cd(" ",s.yc(9,8,"system.health-refresh")," "),s.Ub(6),s.cd(" ",s.yc(15,10,"common.name")," "),s.Ub(3),s.cd(" ",s.yc(18,12,"system.health-status")," "),s.Ub(3),s.cd(" ",s.yc(21,14,"system.health-message")," "),s.Ub(3),s.Dc("ngForOf",s.yc(24,16,c.healthCheckService.details$)))},directives:[a.c,a.e,u.p,a.f,a.d,h.o,u.o,u.n,a.B],pipes:[u.b,p.d,u.f],styles:[".system-status-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.system-status-header[_ngcontent-%COMP%]   .status-detail[_ngcontent-%COMP%]{font-weight:700}.system-status-header[_ngcontent-%COMP%]   .last-checked[_ngcontent-%COMP%]{font-weight:400;color:#525456}"],changeDetection:0}),N.ctorParameters=()=>[{type:a.hb}],N=Object(n.c)([Object(n.f)("design:paramtypes",[a.hb])],N);let E=class extends a.w{constructor(e,c,t,n,s){super(n,s),this.dataService=e,this.modalService=c,this.notificationService=t,this.liveUpdate=new r.f(!0),this.hideSettled=new r.f(!0),this.queueFilter=new r.f("all"),super.setQueryFn((...e)=>this.dataService.settings.getAllJobs(...e),e=>e.jobs,(e,c)=>{const t="all"===this.queueFilter.value?null:{queueName:{eq:this.queueFilter.value}},n=this.hideSettled.value;return{options:{skip:e,take:c,filter:Object.assign(Object.assign({},t),n?{isSettled:{eq:!1}}:{}),sort:{createdAt:a.Hb.DESC}}}})}ngOnInit(){super.ngOnInit(),Object(o.a)(5e3,2e3).pipe(Object(i.a)(this.destroy$),Object(d.a)(()=>this.liveUpdate.value)).subscribe(()=>{this.refresh()}),this.queues$=this.dataService.settings.getJobQueues().mapStream(e=>e.jobQueues).pipe(Object(b.a)(e=>[{name:"all",running:!0},...e]))}hasResult(e){const c=e.result;return null!=c&&("object"!=typeof c||Object.keys(c).length>0)}};E.\u0275fac=function(e){return new(e||E)(s.gc(a.K),s.gc(a.xb),s.gc(a.yb),s.gc(l.e),s.gc(l.a))},E.\u0275cmp=s.ac({type:E,selectors:[["vdr-job-list"]],features:[s.Rb],decls:40,vars:45,consts:[["type","checkbox","clrCheckbox","","name","live-update",3,"formControl"],["type","checkbox","clrCheckbox","","name","hide-settled",3,"formControl","change"],["bindValue","name",3,"addTag","items","hideSelected","multiple","markFirst","clearable","searchable","formControl","change"],["ng-label-tmp","","ng-option-tmp",""],["locationId","job-list"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[4,"ngIf","ngIfElse"],["others",""],[3,"colorFrom"],[1,"left","align-middle"],[3,"entity"],[4,"ngIf"],[3,"job"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-icon",3,"title"],["shape","details"],[1,"result-detail"],[3,"value"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-sm","details-button"],["shape","exclamation-circle"]],template:function(e,c){1&e&&(s.mc(0,"vdr-action-bar"),s.mc(1,"vdr-ab-left"),s.mc(2,"clr-checkbox-container"),s.mc(3,"clr-checkbox-wrapper"),s.hc(4,"input",0),s.mc(5,"label"),s.ad(6),s.xc(7,"translate"),s.lc(),s.lc(),s.mc(8,"clr-checkbox-wrapper"),s.mc(9,"input",1),s.uc("change",(function(){return c.refresh()})),s.lc(),s.mc(10,"label"),s.ad(11),s.xc(12,"translate"),s.lc(),s.lc(),s.lc(),s.lc(),s.mc(13,"vdr-ab-right"),s.mc(14,"ng-select",2),s.uc("change",(function(){return c.refresh()})),s.xc(15,"async"),s.Yc(16,D,3,2,"ng-template",3),s.lc(),s.hc(17,"vdr-action-bar-items",4),s.lc(),s.lc(),s.mc(18,"vdr-data-table",5),s.uc("pageChange",(function(e){return c.setPageNumber(e)}))("itemsPerPageChange",(function(e){return c.setItemsPerPage(e)})),s.xc(19,"async"),s.xc(20,"async"),s.xc(21,"async"),s.xc(22,"async"),s.hc(23,"vdr-dt-column"),s.mc(24,"vdr-dt-column"),s.ad(25),s.xc(26,"translate"),s.lc(),s.mc(27,"vdr-dt-column"),s.ad(28),s.xc(29,"translate"),s.lc(),s.mc(30,"vdr-dt-column"),s.ad(31),s.xc(32,"translate"),s.lc(),s.mc(33,"vdr-dt-column"),s.ad(34),s.xc(35,"translate"),s.lc(),s.mc(36,"vdr-dt-column"),s.ad(37),s.xc(38,"translate"),s.lc(),s.Yc(39,S,17,13,"ng-template"),s.lc()),2&e&&(s.Ub(4),s.Dc("formControl",c.liveUpdate),s.Ub(2),s.bd(s.yc(7,21,"common.live-update")),s.Ub(3),s.Dc("formControl",c.hideSettled),s.Ub(2),s.bd(s.yc(12,23,"system.hide-settled-jobs")),s.Ub(3),s.Dc("addTag",!1)("items",s.yc(15,25,c.queues$))("hideSelected",!0)("multiple",!1)("markFirst",!1)("clearable",!1)("searchable",!1)("formControl",c.queueFilter),s.Ub(4),s.Dc("items",s.yc(19,27,c.items$))("itemsPerPage",s.yc(20,29,c.itemsPerPage$))("totalItems",s.yc(21,31,c.totalItems$))("currentPage",s.yc(22,33,c.currentPage$)),s.Ub(7),s.bd(s.yc(26,35,"system.job-queue-name")),s.Ub(3),s.bd(s.yc(29,37,"common.created-at")),s.Ub(3),s.bd(s.yc(32,39,"system.job-state")),s.Ub(3),s.bd(s.yc(35,41,"system.job-duration")),s.Ub(3),s.bd(s.yc(38,43,"system.job-result")))},directives:function(){return[a.c,a.e,h.j,h.k,a.db,r.a,h.i,r.p,r.g,h.t,a.f,g.a,g.e,g.d,a.d,a.M,a.L,u.p,a.B,a.Z,F,a.S,a.V,h.o,a.U,a.zb]},pipes:function(){return[p.d,u.b,a.Lb,a.W]},styles:[".result-detail[_ngcontent-%COMP%]{margin:0 12px}"],changeDetection:0}),E.ctorParameters=()=>[{type:a.K},{type:a.xb},{type:a.yb},{type:l.e},{type:l.a}],E=Object(n.c)([Object(n.f)("design:paramtypes",[a.K,a.xb,a.yb,l.e,l.a])],E);let F=class{get iconShape(){switch(this.job.state){case a.rb.COMPLETED:return"check-circle";case a.rb.FAILED:return"exclamation-circle";case a.rb.PENDING:case a.rb.RETRYING:return"hourglass";case a.rb.RUNNING:return"sync"}}get colorType(){switch(this.job.state){case a.rb.COMPLETED:return"success";case a.rb.FAILED:return"error";case a.rb.PENDING:case a.rb.RETRYING:return"";case a.rb.RUNNING:return"warning"}}};F.\u0275fac=function(e){return new(e||F)},F.\u0275cmp=s.ac({type:F,selectors:[["vdr-job-state-label"]],inputs:{job:"job"},decls:5,vars:6,consts:[[3,"colorType"],["class","progress",4,"ngIf"],[1,"progress"]],template:function(e,c){1&e&&(s.mc(0,"vdr-chip",0),s.hc(1,"clr-icon"),s.ad(2),s.xc(3,"titlecase"),s.Yc(4,Y,3,3,"span",1),s.lc()),2&e&&(s.Dc("colorType",c.colorType),s.Ub(1),s.Vb("shape",c.iconShape),s.Ub(1),s.cd(" ",s.yc(3,4,c.job.state)," "),s.Ub(2),s.Dc("ngIf","RUNNING"===c.job.state))},directives:[a.B,h.o,u.p],pipes:[u.z,u.w],styles:[".progress[_ngcontent-%COMP%]{margin-left:3px}clr-icon[_ngcontent-%COMP%]{min-width:12px}"],changeDetection:0}),Object(n.c)([Object(s.D)(),Object(n.f)("design:type",Object)],F.prototype,"job",void 0);const T={breadcrumb:Object(m.a)("breadcrumb.job-queue")},q={breadcrumb:Object(m.a)("breadcrumb.system-status")},M=[{path:"jobs",component:E,data:T},{path:"system-status",component:N,data:q}];let R=class{};R.\u0275mod=s.ec({type:R}),R.\u0275inj=s.dc({factory:function(e){return new(e||R)},imports:[[a.Gb,l.i.forChild(M)]]})}}]);
//# sourceMappingURL=18-es2015.80139fdac7163c92051c.js.map