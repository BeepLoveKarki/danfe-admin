(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"2VDt":function(t,e,c){"use strict";c.r(e),c.d(e,"CancelOrderDialogComponent",(function(){return Be})),c.d(e,"FulfillOrderDialogComponent",(function(){return He})),c.d(e,"FulfillmentCardComponent",(function(){return ze})),c.d(e,"FulfillmentDetailComponent",(function(){return Je})),c.d(e,"FulfillmentStateLabelComponent",(function(){return Ke})),c.d(e,"LineFulfillmentComponent",(function(){return Ge})),c.d(e,"LineRefundsComponent",(function(){return tc})),c.d(e,"NODE_HEIGHT",(function(){return lc})),c.d(e,"OrderCustomFieldsCardComponent",(function(){return ec})),c.d(e,"OrderDetailComponent",(function(){return rc})),c.d(e,"OrderHistoryComponent",(function(){return oc})),c.d(e,"OrderListComponent",(function(){return sc})),c.d(e,"OrderModule",(function(){return Cc})),c.d(e,"OrderPaymentCardComponent",(function(){return ac})),c.d(e,"OrderProcessEdgeComponent",(function(){return uc})),c.d(e,"OrderProcessGraphComponent",(function(){return fc})),c.d(e,"OrderProcessGraphDialogComponent",(function(){return cc})),c.d(e,"OrderProcessNodeComponent",(function(){return dc})),c.d(e,"OrderResolver",(function(){return bc})),c.d(e,"PaymentDetailComponent",(function(){return pc})),c.d(e,"PaymentStateLabelComponent",(function(){return mc})),c.d(e,"RefundOrderDialogComponent",(function(){return nc})),c.d(e,"RefundStateLabelComponent",(function(){return hc})),c.d(e,"SettleRefundDialogComponent",(function(){return ic})),c.d(e,"SimpleItemListComponent",(function(){return gc})),c.d(e,"orderBreadcrumb",(function(){return Rc})),c.d(e,"orderRoutes",(function(){return Oc})),c.d(e,"\u02750",(function(){return yc})),c.d(e,"\u02751",(function(){return vc}));var n=c("EM62"),i=c("OxKu"),r=c("ixhn"),o=c("nIj0"),s=c("sEIs"),a=c("yPeg"),l=c("ZTXN"),d=c("ROBh"),u=c("6Oco"),f=c("g6G6"),p=c("C05f"),m=c("jIqt"),h=c("TLy2"),g=c("YtkY"),b=c("J+dc"),y=c("7SLS"),v=c("Ohay"),O=c("mWib"),R=c("kuMc"),C=c("8j5Y"),P=c("2kYt"),M=c("Kej3"),I=c("iysP"),S=c("s2Ay"),x=c("E5oP");function w(t,e){1&t&&(n.Xc(0),n.sc(1,"translate")),2&t&&n.Yc(n.tc(1,1,"order.cancel-order"))}function _(t,e){if(1&t){const t=n.jc();n.ic(0,"input",18),n.pc("ngModelChange",(function(e){n.Mc(t);const c=n.rc().$implicit;return n.rc().lineQuantities[c.id]=e})),n.hc()}if(2&t){const t=n.rc().$implicit,e=n.rc();n.yc("ngModel",e.lineQuantities[t.id])("max",t.quantity)}}function F(t,e){if(1&t&&n.Xc(0),2&t){const t=n.rc().$implicit;n.Yc(t.quantity)}}function k(t,e){if(1&t&&(n.ic(0,"tr",9),n.ic(1,"td",10),n.dc(2,"img",11),n.sc(3,"assetPreview"),n.hc(),n.ic(4,"td",12),n.Xc(5),n.hc(),n.ic(6,"td",13),n.Xc(7),n.hc(),n.ic(8,"td",14),n.Xc(9),n.hc(),n.ic(10,"td",14),n.Xc(11),n.sc(12,"currency"),n.hc(),n.ic(13,"td",15),n.Vc(14,_,1,2,"input",16),n.Vc(15,F,1,1,"ng-template",null,17,n.Wc),n.hc(),n.hc()),2&t){const t=e.$implicit,c=n.Jc(16),i=n.rc();n.Ub("is-cancelled",0===t.quantity),n.Rb(2),n.yc("src",n.uc(3,9,t.featuredAsset,"tiny"),n.Oc),n.Rb(3),n.Yc(t.productVariant.name),n.Rb(2),n.Yc(t.productVariant.sku),n.Rb(2),n.Yc(t.quantity),n.Rb(2),n.Zc(" ",n.uc(12,12,t.unitPriceWithTax/100,i.order.currencyCode)," "),n.Rb(3),n.yc("ngIf",t.quantity>0&&!i.order.active)("ngIfElse",c)}}function X(t,e){1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.fc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.cancel-selected-items")," "))}function D(t,e){1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.fc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.cancel-order")," "))}function V(t,e){if(1&t){const t=n.jc();n.ic(0,"button",19),n.pc("click",(function(){n.Mc(t);return n.rc().cancel()})),n.Xc(1),n.sc(2,"translate"),n.hc(),n.ic(3,"button",20),n.pc("click",(function(){n.Mc(t);return n.rc().select()})),n.Vc(4,X,3,3,"ng-container",21),n.Vc(5,D,3,3,"ng-container",21),n.hc()}if(2&t){const t=n.rc();n.Rb(1),n.Yc(n.tc(2,4,"common.cancel")),n.Rb(2),n.yc("disabled",!t.reason||!t.order.active&&0===t.selectionCount),n.Rb(1),n.yc("ngIf",!t.order.active),n.Rb(1),n.yc("ngIf",t.order.active)}}function T(t,e){1&t&&(n.Xc(0),n.sc(1,"translate")),2&t&&n.Yc(n.tc(1,1,"order.fulfill-order"))}function j(t,e){if(1&t&&(n.dc(0,"img",18),n.sc(1,"assetPreview")),2&t){const t=n.rc().$implicit;n.yc("src",n.uc(1,1,t.featuredAsset,"tiny"),n.Oc)}}function N(t,e){if(1&t){const t=n.jc();n.ic(0,"input",19),n.pc("ngModelChange",(function(e){n.Mc(t);const c=n.rc().$implicit;return n.rc().fulfillmentQuantities[c.id].fulfillCount=e})),n.hc()}if(2&t){const t=n.rc().$implicit,e=n.rc();n.yc("disabled",0===e.getUnfulfilledCount(t))("ngModel",e.fulfillmentQuantities[t.id].fulfillCount)("max",e.fulfillmentQuantities[t.id].max)}}function E(t,e){if(1&t&&(n.ic(0,"tr",10),n.ic(1,"td",11),n.Vc(2,j,2,4,"img",12),n.hc(),n.ic(3,"td",13),n.Xc(4),n.hc(),n.ic(5,"td",14),n.Xc(6),n.hc(),n.ic(7,"td",15),n.Xc(8),n.hc(),n.ic(9,"td",15),n.Xc(10),n.hc(),n.ic(11,"td",16),n.Vc(12,N,1,3,"input",17),n.hc(),n.hc()),2&t){const t=e.$implicit,c=n.rc();n.Ub("ignore",0===c.getUnfulfilledCount(t)),n.Rb(2),n.yc("ngIf",t.featuredAsset),n.Rb(2),n.Yc(t.productVariant.name),n.Rb(2),n.Yc(t.productVariant.sku),n.Rb(2),n.Yc(c.getUnfulfilledCount(t)),n.Rb(2),n.Yc(t.productVariant.stockOnHand),n.Rb(2),n.yc("ngIf",c.fulfillmentQuantities[t.id])}}function $(t,e){if(1&t){const t=n.jc();n.ic(0,"button",20),n.pc("click",(function(){n.Mc(t);return n.rc().cancel()})),n.Xc(1),n.sc(2,"translate"),n.hc(),n.ic(3,"button",21),n.pc("click",(function(){n.Mc(t);return n.rc().select()})),n.Xc(4),n.sc(5,"translate"),n.hc()}if(2&t){const t=n.rc();n.Rb(1),n.Yc(n.tc(2,3,"common.cancel")),n.Rb(2),n.yc("disabled",!t.method),n.Rb(1),n.Zc(" ",n.tc(5,5,"order.create-fulfillment")," ")}}function A(t,e){if(1&t&&n.dc(0,"vdr-fulfillment-detail",12),2&t){const t=n.rc();n.yc("fulfillmentId",null==t.fulfillment?null:t.fulfillment.id)("order",t.order)}}const L=function(t){return{state:t}};function Y(t,e){if(1&t){const t=n.jc();n.gc(0),n.ic(1,"button",13),n.pc("click",(function(){n.Mc(t);const c=e.ngIf;return n.rc().transitionState.emit(c)})),n.Xc(2),n.sc(3,"translate"),n.sc(4,"translate"),n.sc(5,"stateI18nToken"),n.hc(),n.fc()}if(2&t){const t=e.ngIf;n.Rb(2),n.Zc(" ",n.uc(3,1,"order.set-fulfillment-state",n.Dc(8,L,n.tc(4,4,n.tc(5,6,t))))," ")}}function Z(t,e){if(1&t&&(n.gc(0),n.dc(1,"clr-icon",17),n.Xc(2),n.sc(3,"translate"),n.sc(4,"translate"),n.sc(5,"stateI18nToken"),n.fc()),2&t){const t=n.rc().$implicit;n.Rb(2),n.Zc(" ",n.uc(3,1,"order.transition-to-state",n.Dc(8,L,n.tc(4,4,n.tc(5,6,t))))," ")}}function q(t,e){1&t&&(n.dc(0,"clr-icon",18),n.Xc(1),n.sc(2,"translate")),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.cancel-fulfillment")," "))}function W(t,e){if(1&t){const t=n.jc();n.gc(0),n.ic(1,"button",14),n.pc("click",(function(){n.Mc(t);const c=e.$implicit;return n.rc().transitionState.emit(c)})),n.Vc(2,Z,6,10,"ng-container",15),n.Vc(3,q,3,3,"ng-template",null,16,n.Wc),n.hc(),n.fc()}if(2&t){const t=e.$implicit,c=n.Jc(4);n.Rb(2),n.yc("ngIf","Cancelled"!==t)("ngIfElse",c)}}function Q(t,e){if(1&t&&(n.ic(0,"vdr-labeled-data",0),n.sc(1,"translate"),n.Xc(2),n.hc()),2&t){const t=n.rc();n.yc("label",n.tc(1,2,"order.tracking-code")),n.Rb(2),n.Zc(" ",null==t.fulfillment?null:t.fulfillment.trackingCode,"\n")}}function U(t,e){if(1&t&&(n.gc(0),n.ic(1,"vdr-labeled-data",0),n.Xc(2),n.hc(),n.fc()),2&t){const t=e.$implicit;n.Rb(1),n.yc("label",t.key),n.Rb(1),n.Yc(t.value)}}function B(t,e){1&t&&n.dc(0,"clr-icon",2)}function H(t,e){1&t&&n.dc(0,"clr-icon",9)}function z(t,e){1&t&&n.dc(0,"clr-icon",10)}function J(t,e){1&t&&n.dc(0,"clr-icon",11)}function K(t,e){1&t&&(n.ic(0,"label",12),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.line-fulfillment-all")," "))}const G=function(t,e){return{total:t,count:e}};function tt(t,e){if(1&t&&(n.ic(0,"label",12),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t){const t=n.rc(2);n.Rb(1),n.Zc(" ",n.uc(2,1,"order.line-fulfillment-partial",n.Ec(4,G,t.line.quantity,t.fulfilledCount))," ")}}function et(t,e){1&t&&(n.ic(0,"label",12),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.line-fulfillment-none")," "))}function ct(t,e){if(1&t&&(n.ic(0,"vdr-labeled-data",15),n.sc(1,"translate"),n.Xc(2),n.hc()),2&t){const t=n.rc().$implicit;n.yc("label",n.tc(1,2,"order.tracking-code")),n.Rb(2),n.Zc(" ",t.fulfillment.trackingCode," ")}}const nt=function(t){return{count:t}};function it(t,e){if(1&t&&(n.ic(0,"div",13),n.ic(1,"div",14),n.Xc(2),n.sc(3,"translate"),n.sc(4,"translate"),n.hc(),n.ic(5,"vdr-labeled-data",15),n.sc(6,"translate"),n.Xc(7),n.sc(8,"date"),n.hc(),n.ic(9,"vdr-labeled-data",15),n.sc(10,"translate"),n.Xc(11),n.hc(),n.Vc(12,ct,3,4,"vdr-labeled-data",16),n.hc()),2&t){const t=e.$implicit;n.Rb(2),n.bd(" ",n.tc(3,8,"order.fulfillment")," #",t.fulfillment.id," (",n.uc(4,10,"order.item-count",n.Dc(20,nt,t.count)),") "),n.Rb(3),n.yc("label",n.tc(6,13,"common.created-at")),n.Rb(2),n.Zc(" ",n.uc(8,15,t.fulfillment.createdAt,"medium")," "),n.Rb(2),n.yc("label",n.tc(10,18,"order.fulfillment-method")),n.Rb(2),n.Zc(" ",t.fulfillment.method," "),n.Rb(1),n.yc("ngIf",t.fulfillment.trackingCode)}}function rt(t,e){if(1&t&&(n.ic(0,"vdr-dropdown",1),n.ic(1,"button",2),n.Vc(2,H,1,0,"clr-icon",3),n.Vc(3,z,1,0,"clr-icon",4),n.Vc(4,J,1,0,"clr-icon",5),n.hc(),n.ic(5,"vdr-dropdown-menu",6),n.Vc(6,K,3,3,"label",7),n.Vc(7,tt,3,7,"label",7),n.Vc(8,et,3,3,"label",7),n.Vc(9,it,13,22,"div",8),n.hc(),n.hc()),2&t){const t=n.rc();n.Rb(2),n.yc("ngIf","full"===t.fulfillmentStatus),n.Rb(1),n.yc("ngIf","partial"===t.fulfillmentStatus),n.Rb(1),n.yc("ngIf","none"===t.fulfillmentStatus),n.Rb(2),n.yc("ngIf","full"===t.fulfillmentStatus),n.Rb(1),n.yc("ngIf","partial"===t.fulfillmentStatus),n.Rb(1),n.yc("ngIf","none"===t.fulfillmentStatus),n.Rb(1),n.yc("ngForOf",t.fulfillments)}}function ot(t,e){if(1&t&&(n.ic(0,"span",1),n.sc(1,"translate"),n.dc(2,"clr-icon",2),n.hc()),2&t){const t=n.rc();n.yc("title",n.uc(1,1,"order.refunded-count",n.Dc(4,nt,t.getRefundedCount())))}}function st(t,e){if(1&t&&(n.gc(0),n.dc(1,"vdr-custom-field-control",9),n.fc()),2&t){const t=e.$implicit,c=n.rc(2);n.Rb(1),n.yc("customFieldsFormGroup",c.customFieldForm)("compact",!0)("readonly",t.readonly||!c.editable)("customField",t)}}function at(t,e){if(1&t){const t=n.jc();n.ic(0,"button",10),n.pc("click",(function(){n.Mc(t);return n.rc(2).editable=!0})),n.dc(1,"clr-icon",11),n.Xc(2),n.sc(3,"translate"),n.hc()}2&t&&(n.Rb(2),n.Zc(" ",n.tc(3,1,"common.edit")," "))}function lt(t,e){if(1&t){const t=n.jc();n.ic(0,"button",12),n.pc("click",(function(){n.Mc(t);return n.rc(2).onUpdateClick()})),n.dc(1,"clr-icon",13),n.Xc(2),n.sc(3,"translate"),n.hc()}if(2&t){const t=n.rc(2);n.yc("disabled",t.customFieldForm.pristine||t.customFieldForm.invalid),n.Rb(2),n.Zc(" ",n.tc(3,2,"common.update")," ")}}function dt(t,e){if(1&t&&(n.ic(0,"div",1),n.ic(1,"div",2),n.Xc(2),n.sc(3,"translate"),n.hc(),n.ic(4,"div",3),n.ic(5,"div",4),n.Vc(6,st,2,4,"ng-container",5),n.hc(),n.hc(),n.ic(7,"div",6),n.Vc(8,at,4,3,"button",7),n.Vc(9,lt,4,4,"button",8),n.hc(),n.hc()),2&t){const t=n.rc();n.Rb(2),n.Zc(" ",n.tc(3,6,"common.custom-fields")," "),n.Rb(3),n.Ub("editable",t.editable),n.Rb(1),n.yc("ngForOf",t.customFieldsConfig),n.Rb(2),n.yc("ngIf",!t.editable),n.Rb(1),n.yc("ngIf",t.editable)}}function ut(t,e){1&t&&(n.Xc(0),n.sc(1,"translate")),2&t&&n.Yc(n.tc(1,1,"order.order-state-diagram"))}function ft(t,e){1&t&&(n.Xc(0),n.sc(1,"translate")),2&t&&n.Yc(n.tc(1,1,"order.refund-order"))}function pt(t,e){if(1&t){const t=n.jc();n.ic(0,"input",29),n.pc("ngModelChange",(function(e){n.Mc(t);const c=n.rc().$implicit;return n.rc().lineQuantities[c.id].quantity=e})),n.hc()}if(2&t){const t=n.rc().$implicit,e=n.rc();n.yc("ngModel",e.lineQuantities[t.id].quantity)("max",t.quantity)}}function mt(t,e){if(1&t){const t=n.jc();n.ic(0,"input",30),n.pc("ngModelChange",(function(e){n.Mc(t);const c=n.rc().$implicit;return n.rc().lineQuantities[c.id].cancel=e})),n.hc()}if(2&t){const t=n.rc().$implicit,e=n.rc();n.yc("disabled",0===e.lineQuantities[t.id].quantity)("ngModel",e.lineQuantities[t.id].cancel)}}function ht(t,e){if(1&t&&(n.ic(0,"tr",17),n.ic(1,"td",18),n.dc(2,"img",19),n.sc(3,"assetPreview"),n.hc(),n.ic(4,"td",20),n.Xc(5),n.hc(),n.ic(6,"td",21),n.Xc(7),n.hc(),n.ic(8,"td",22),n.Xc(9),n.dc(10,"vdr-line-refunds",23),n.hc(),n.ic(11,"td",22),n.Xc(12),n.sc(13,"currency"),n.hc(),n.ic(14,"td",24),n.Vc(15,pt,1,2,"input",25),n.hc(),n.ic(16,"td",26),n.ic(17,"div",27),n.Vc(18,mt,1,2,"input",28),n.hc(),n.hc(),n.hc()),2&t){const t=e.$implicit,c=n.rc();n.Rb(2),n.yc("src",n.uc(3,8,t.featuredAsset,"tiny"),n.Oc),n.Rb(3),n.Yc(t.productVariant.name),n.Rb(2),n.Yc(t.productVariant.sku),n.Rb(2),n.Zc(" ",t.quantity," "),n.Rb(1),n.yc("line",t),n.Rb(2),n.Zc(" ",n.uc(13,11,t.unitPriceWithTax/100,c.order.currencyCode)," "),n.Rb(3),n.yc("ngIf",c.lineCanBeRefunded(t)),n.Rb(3),n.yc("ngIf",c.lineCanBeRefunded(t))}}function gt(t,e){if(1&t&&(n.ic(0,"option",31),n.Xc(1),n.sc(2,"currency"),n.hc()),2&t){const t=e.$implicit,c=n.rc();n.yc("ngValue",t)("disabled","Settled"!==t.state),n.Rb(1),n.bd(" #",t.id," ",t.method,": ",n.uc(2,5,t.amount/100,c.order.currencyCode)," ")}}const bt=function(t,e){return{min:t,max:e}};function yt(t,e){if(1&t&&(n.ic(0,"div",32),n.Xc(1),n.sc(2,"translate"),n.sc(3,"currency"),n.sc(4,"currency"),n.hc()),2&t){const t=n.rc();n.Rb(1),n.Zc(" ",n.uc(2,1,"order.refund-total-error",n.Ec(10,bt,n.uc(3,4,0,t.order.currencyCode),n.uc(4,7,t.selectedPayment.amount/100,t.order.currencyCode)))," ")}}const vt=function(t){return{amount:t}};function Ot(t,e){if(1&t){const t=n.jc();n.ic(0,"button",33),n.pc("click",(function(){n.Mc(t);return n.rc().cancel()})),n.Xc(1),n.sc(2,"translate"),n.hc(),n.ic(3,"button",34),n.pc("click",(function(){n.Mc(t);return n.rc().select()})),n.Xc(4),n.sc(5,"translate"),n.sc(6,"currency"),n.hc()}if(2&t){const t=n.rc();n.Rb(1),n.Yc(n.tc(2,3,"common.cancel")),n.Rb(2),n.yc("disabled",!t.selectedPayment||!t.reason||0===t.refundTotal||t.refundTotal>t.selectedPayment.amount),n.Rb(1),n.Zc(" ",n.uc(5,5,"order.refund-with-amount",n.Dc(11,vt,n.uc(6,8,t.refundTotal/100,t.order.currencyCode)))," ")}}function Rt(t,e){1&t&&(n.Xc(0),n.sc(1,"translate")),2&t&&n.Yc(n.tc(1,1,"order.settle-refund"))}function Ct(t,e){if(1&t){const t=n.jc();n.ic(0,"button",4),n.pc("click",(function(){n.Mc(t);return n.rc().cancel()})),n.Xc(1),n.sc(2,"translate"),n.hc(),n.ic(3,"button",5),n.pc("click",(function(){n.Mc(t);return n.rc().submit()})),n.Xc(4),n.sc(5,"translate"),n.hc()}if(2&t){const t=n.rc();n.Rb(1),n.Yc(n.tc(2,3,"common.cancel")),n.Rb(2),n.yc("disabled",!t.transactionId),n.Rb(1),n.Zc(" ",n.tc(5,5,"order.settle-refund")," ")}}const Pt=function(t){return{method:t}};function Mt(t,e){1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.fc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.refund-and-cancel-order")," "))}function It(t,e){1&t&&(n.Xc(0),n.sc(1,"translate")),2&t&&n.Zc(" ",n.tc(1,1,"order.cancel-order")," ")}function St(t,e){if(1&t){const t=n.jc();n.ic(0,"button",13),n.pc("click",(function(){n.Mc(t);const e=n.rc().ngIf;return n.rc().cancelOrRefund(e)})),n.dc(1,"clr-icon",14),n.Vc(2,Mt,3,3,"ng-container",15),n.Vc(3,It,2,3,"ng-template",null,16,n.Wc),n.hc()}if(2&t){const t=n.Jc(4),e=n.rc().ngIf,c=n.rc();n.Rb(2),n.yc("ngIf",c.orderHasSettledPayments(e))("ngIfElse",t)}}function xt(t,e){if(1&t){const t=n.jc();n.gc(0),n.dc(1,"div",17),n.ic(2,"button",13),n.pc("click",(function(){n.Mc(t);const c=e.$implicit;return n.rc(2).transitionToState(c)})),n.dc(3,"clr-icon",18),n.Xc(4),n.sc(5,"translate"),n.sc(6,"translate"),n.sc(7,"stateI18nToken"),n.hc(),n.fc()}if(2&t){const t=e.$implicit;n.Rb(4),n.Zc(" ",n.uc(5,1,"order.transition-to-state",n.Dc(8,L,n.tc(6,4,n.tc(7,6,t))))," ")}}function wt(t,e){if(1&t){const t=n.jc();n.ic(0,"vdr-action-bar"),n.ic(1,"vdr-ab-left"),n.ic(2,"div",1),n.dc(3,"vdr-entity-info",2),n.sc(4,"async"),n.ic(5,"vdr-order-state-label",3),n.ic(6,"button",4),n.pc("click",(function(){n.Mc(t);return n.rc().openStateDiagram()})),n.sc(7,"translate"),n.dc(8,"clr-icon",5),n.hc(),n.hc(),n.hc(),n.hc(),n.ic(9,"vdr-ab-right"),n.dc(10,"vdr-action-bar-items",6),n.ic(11,"button",7),n.pc("click",(function(){n.Mc(t);return n.rc().fulfillOrder()})),n.Xc(12),n.sc(13,"translate"),n.hc(),n.ic(14,"vdr-dropdown"),n.ic(15,"button",8),n.dc(16,"clr-icon",9),n.hc(),n.ic(17,"vdr-dropdown-menu",10),n.Vc(18,St,5,2,"button",11),n.Vc(19,xt,8,10,"ng-container",12),n.sc(20,"async"),n.hc(),n.hc(),n.hc(),n.hc()}if(2&t){const t=e.ngIf,c=n.rc();n.Rb(3),n.yc("entity",n.tc(4,7,c.entity$)),n.Rb(2),n.yc("state",t.state),n.Rb(1),n.yc("title",n.tc(7,9,"order.order-state-diagram")),n.Rb(5),n.yc("disabled",!c.canAddFulfillment(t)),n.Rb(1),n.Zc(" ",n.tc(13,11,"order.fulfill-order")," "),n.Rb(6),n.yc("ngIf",t.nextStates.includes("Cancelled")),n.Rb(1),n.yc("ngForOf",n.tc(20,13,c.nextStates$))}}function _t(t,e){if(1&t){const t=n.jc();n.gc(0),n.ic(1,"th",39),n.ic(2,"button",40),n.pc("click",(function(){n.Mc(t);return n.rc(2).toggleOrderLineCustomFields()})),n.sc(3,"translate"),n.Xc(4),n.sc(5,"customFieldLabel"),n.hc(),n.hc(),n.fc()}if(2&t){const t=e.$implicit;n.Rb(2),n.yc("title",n.tc(3,2,"common.hide-custom-fields")),n.Rb(2),n.Zc(" ",n.tc(5,4,t)," ")}}function Ft(t,e){if(1&t){const t=n.jc();n.gc(0),n.ic(1,"th"),n.ic(2,"button",40),n.pc("click",(function(){n.Mc(t);return n.rc(2).toggleOrderLineCustomFields()})),n.sc(3,"translate"),n.dc(4,"clr-icon",41),n.hc(),n.hc(),n.fc()}2&t&&(n.Rb(2),n.yc("title",n.tc(3,1,"common.display-custom-fields")))}function kt(t,e){if(1&t&&(n.dc(0,"img",52),n.sc(1,"assetPreview")),2&t){const t=n.rc().$implicit;n.yc("src",n.uc(1,1,t.featuredAsset,"tiny"),n.Oc)}}function Xt(t,e){if(1&t&&(n.ic(0,"span",57),n.Xc(1),n.sc(2,"date"),n.hc()),2&t){const t=n.rc().$implicit,e=n.rc().$implicit;n.yc("title",e.customFields[t.name]),n.Rb(1),n.Yc(n.uc(2,2,e.customFields[t.name],"short"))}}function Dt(t,e){1&t&&n.dc(0,"clr-icon",59)}function Vt(t,e){1&t&&n.dc(0,"clr-icon",60)}function Tt(t,e){if(1&t&&(n.Vc(0,Dt,1,0,"ng-template",58),n.Vc(1,Vt,1,0,"ng-template",58)),2&t){const t=n.rc().$implicit,e=n.rc().$implicit;n.yc("ngIf",!0===e.customFields[t.name]),n.Rb(1),n.yc("ngIf",!1===e.customFields[t.name])}}function jt(t,e){if(1&t&&n.Xc(0),2&t){const t=n.rc().$implicit,e=n.rc().$implicit;n.Zc(" ",e.customFields[t.name]," ")}}function Nt(t,e){if(1&t&&(n.gc(0),n.ic(1,"td",53),n.gc(2,54),n.Vc(3,Xt,3,5,"ng-template",55),n.Vc(4,Tt,2,2,"ng-template",55),n.Vc(5,jt,1,1,"ng-template",56),n.fc(),n.hc(),n.fc()),2&t){const t=e.$implicit;n.Rb(2),n.yc("ngSwitch",t.type),n.Rb(1),n.yc("ngSwitchCase","datetime"),n.Rb(1),n.yc("ngSwitchCase","boolean")}}function Et(t,e){1&t&&(n.gc(0),n.ic(1,"td",53),n.dc(2,"clr-icon",41),n.hc(),n.fc())}function $t(t,e){if(1&t&&(n.ic(0,"div",63),n.ic(1,"a",64),n.Xc(2),n.hc(),n.ic(3,"div",65),n.Xc(4),n.sc(5,"currency"),n.hc(),n.hc()),2&t){const t=e.$implicit,c=n.rc(4).ngIf,i=n.rc();n.Rb(1),n.yc("routerLink",i.getPromotionLink(t)),n.Rb(1),n.Yc(t.description),n.Rb(2),n.Zc(" ",n.uc(5,3,t.amount/100,c.currencyCode)," ")}}function At(t,e){if(1&t&&(n.ic(0,"vdr-dropdown"),n.ic(1,"div",61),n.Xc(2),n.sc(3,"translate"),n.hc(),n.ic(4,"vdr-dropdown-menu"),n.Vc(5,$t,6,6,"div",62),n.hc(),n.hc()),2&t){const t=n.rc(2).$implicit,e=n.rc(2);n.Rb(2),n.Zc(" ",n.tc(3,2,"order.promotions-applied")," "),n.Rb(3),n.yc("ngForOf",e.getLinePromotions(t))}}function Lt(t,e){if(1&t&&(n.gc(0),n.Vc(1,At,6,4,"vdr-dropdown",0),n.fc()),2&t){const t=e.ngIf;n.Rb(1),n.yc("ngIf",t.length)}}function Yt(t,e){if(1&t&&(n.ic(0,"tr",42),n.ic(1,"td",43),n.Vc(2,kt,2,4,"img",44),n.hc(),n.ic(3,"td",45),n.Xc(4),n.hc(),n.ic(5,"td",46),n.Xc(6),n.hc(),n.ic(7,"td",47),n.Xc(8),n.sc(9,"currency"),n.ic(10,"div",26),n.sc(11,"translate"),n.Xc(12),n.sc(13,"currency"),n.hc(),n.hc(),n.ic(14,"td",48),n.Xc(15),n.dc(16,"vdr-line-refunds",49),n.dc(17,"vdr-line-fulfillment",50),n.hc(),n.Vc(18,Nt,6,3,"ng-container",12),n.Vc(19,Et,3,0,"ng-container",0),n.ic(20,"td",51),n.Xc(21),n.sc(22,"currency"),n.ic(23,"div",26),n.sc(24,"translate"),n.Xc(25),n.sc(26,"currency"),n.hc(),n.Vc(27,Lt,2,1,"ng-container",0),n.hc(),n.hc()),2&t){const t=e.$implicit,c=n.rc().ngIf,i=n.rc();n.Ub("is-cancelled",0===t.quantity),n.Rb(2),n.yc("ngIf",t.featuredAsset),n.Rb(2),n.Yc(t.productVariant.name),n.Rb(2),n.Yc(t.productVariant.sku),n.Rb(2),n.Zc(" ",n.uc(9,18,t.unitPriceWithTax/100,c.currencyCode)," "),n.Rb(2),n.yc("title",n.tc(11,21,"order.net-price")),n.Rb(2),n.Zc(" ",n.uc(13,23,t.unitPrice/100,c.currencyCode)," "),n.Rb(3),n.Zc(" ",t.quantity," "),n.Rb(1),n.yc("line",t),n.Rb(1),n.yc("line",t)("orderState",c.state),n.Rb(1),n.yc("ngForOf",i.visibleOrderLineCustomFields),n.Rb(1),n.yc("ngIf",i.showElided),n.Rb(2),n.Zc(" ",n.uc(22,26,t.linePriceWithTax/100,c.currencyCode)," "),n.Rb(2),n.yc("title",n.tc(24,29,"order.net-price")),n.Rb(2),n.Zc(" ",n.uc(26,31,t.linePrice/100,c.currencyCode)," "),n.Rb(2),n.yc("ngIf",i.getLinePromotions(t))}}function Zt(t,e){1&t&&(n.gc(0),n.dc(1,"td"),n.fc())}function qt(t,e){if(1&t&&(n.ic(0,"vdr-chip"),n.Xc(1),n.hc()),2&t){const t=e.ngIf;n.Rb(1),n.Yc(t)}}function Wt(t,e){1&t&&(n.gc(0),n.dc(1,"td"),n.fc())}function Qt(t,e){if(1&t&&(n.ic(0,"tr",66),n.ic(1,"td",24),n.ic(2,"a",67),n.Xc(3),n.hc(),n.Vc(4,qt,2,1,"vdr-chip",0),n.hc(),n.Vc(5,Wt,2,0,"ng-container",0),n.ic(6,"td",25),n.Xc(7),n.sc(8,"currency"),n.hc(),n.hc()),2&t){const t=e.$implicit,c=n.rc().ngIf,i=n.rc();n.Rb(1),n.Sb("colspan",5+i.visibleOrderLineCustomFields.length),n.Rb(1),n.yc("routerLink",i.getPromotionLink(t)),n.Rb(1),n.Yc(t.description),n.Rb(1),n.yc("ngIf",i.getCouponCodeForAdjustment(c,t)),n.Rb(1),n.yc("ngIf",i.showElided),n.Rb(2),n.Zc(" ",n.uc(8,6,t.amount/100,c.currencyCode)," ")}}function Ut(t,e){1&t&&(n.gc(0),n.dc(1,"td"),n.fc())}function Bt(t,e){1&t&&(n.gc(0),n.dc(1,"td"),n.fc())}function Ht(t,e){1&t&&(n.ic(0,"h6"),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.shipping-address")," "))}function zt(t,e){1&t&&(n.ic(0,"h6"),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.billing-address")," "))}function Jt(t,e){if(1&t){const t=n.jc();n.ic(0,"vdr-order-payment-card",69),n.pc("settlePayment",(function(e){n.Mc(t);return n.rc(3).settlePayment(e)}))("settleRefund",(function(e){n.Mc(t);return n.rc(3).settleRefund(e)})),n.hc()}if(2&t){const t=e.$implicit,c=n.rc(2).ngIf;n.yc("currencyCode",c.currencyCode)("payment",t)}}function Kt(t,e){if(1&t&&(n.gc(0),n.Vc(1,Jt,1,2,"vdr-order-payment-card",68),n.fc()),2&t){const t=n.rc().ngIf;n.Rb(1),n.yc("ngForOf",t.payments)}}function Gt(t,e){if(1&t){const t=n.jc();n.gc(0),n.ic(1,"vdr-fulfillment-card",70),n.pc("transitionState",(function(c){n.Mc(t);const i=e.$implicit;return n.rc(2).transitionFulfillment(i.id,c)})),n.hc(),n.fc()}if(2&t){const t=e.$implicit,c=n.rc().ngIf;n.Rb(1),n.yc("fulfillment",t)("order",c)}}function te(t,e){if(1&t){const t=n.jc();n.ic(0,"div"),n.ic(1,"div",19),n.ic(2,"div",20),n.ic(3,"table",21),n.ic(4,"thead"),n.ic(5,"tr"),n.dc(6,"th"),n.ic(7,"th"),n.Xc(8),n.sc(9,"translate"),n.hc(),n.ic(10,"th"),n.Xc(11),n.sc(12,"translate"),n.hc(),n.ic(13,"th"),n.Xc(14),n.sc(15,"translate"),n.hc(),n.ic(16,"th"),n.Xc(17),n.sc(18,"translate"),n.hc(),n.Vc(19,_t,6,6,"ng-container",12),n.Vc(20,Ft,5,3,"ng-container",0),n.ic(21,"th"),n.Xc(22),n.sc(23,"translate"),n.hc(),n.hc(),n.hc(),n.Vc(24,Yt,28,34,"tr",22),n.ic(25,"tr",23),n.ic(26,"td",24),n.Xc(27),n.sc(28,"translate"),n.hc(),n.dc(29,"td"),n.dc(30,"td"),n.Vc(31,Zt,2,0,"ng-container",0),n.ic(32,"td",25),n.Xc(33),n.sc(34,"currency"),n.ic(35,"div",26),n.sc(36,"translate"),n.Xc(37),n.sc(38,"currency"),n.hc(),n.hc(),n.hc(),n.Vc(39,Qt,9,9,"tr",27),n.ic(40,"tr",28),n.ic(41,"td",24),n.Xc(42),n.sc(43,"translate"),n.hc(),n.ic(44,"td",25),n.Xc(45),n.hc(),n.dc(46,"td"),n.Vc(47,Ut,2,0,"ng-container",0),n.ic(48,"td",25),n.Xc(49),n.sc(50,"currency"),n.ic(51,"div",26),n.sc(52,"translate"),n.Xc(53),n.sc(54,"currency"),n.hc(),n.hc(),n.hc(),n.ic(55,"tr",29),n.ic(56,"td",24),n.Xc(57),n.sc(58,"translate"),n.hc(),n.dc(59,"td"),n.dc(60,"td"),n.Vc(61,Bt,2,0,"ng-container",0),n.ic(62,"td",25),n.Xc(63),n.sc(64,"currency"),n.ic(65,"div",26),n.sc(66,"translate"),n.Xc(67),n.sc(68,"currency"),n.hc(),n.hc(),n.hc(),n.hc(),n.ic(69,"vdr-order-history",30),n.pc("addNote",(function(e){n.Mc(t);return n.rc().addNote(e)}))("updateNote",(function(e){n.Mc(t);return n.rc().updateNote(e)}))("deleteNote",(function(e){n.Mc(t);return n.rc().deleteNote(e)})),n.sc(70,"async"),n.hc(),n.hc(),n.ic(71,"div",31),n.ic(72,"vdr-order-custom-fields-card",32),n.pc("updateClick",(function(e){n.Mc(t);return n.rc().updateCustomFields(e)})),n.hc(),n.ic(73,"div",33),n.ic(74,"div",34),n.Xc(75),n.sc(76,"translate"),n.hc(),n.ic(77,"div",35),n.ic(78,"div",36),n.dc(79,"vdr-customer-label",37),n.Vc(80,Ht,3,3,"h6",0),n.dc(81,"vdr-formatted-address",38),n.Vc(82,zt,3,3,"h6",0),n.dc(83,"vdr-formatted-address",38),n.hc(),n.hc(),n.hc(),n.Vc(84,Kt,2,1,"ng-container",0),n.Vc(85,Gt,2,2,"ng-container",12),n.hc(),n.hc(),n.hc()}if(2&t){const t=e.ngIf,c=n.rc();n.Rb(8),n.Yc(n.tc(9,40,"order.product-name")),n.Rb(3),n.Yc(n.tc(12,42,"order.product-sku")),n.Rb(3),n.Yc(n.tc(15,44,"order.unit-price")),n.Rb(3),n.Yc(n.tc(18,46,"order.quantity")),n.Rb(2),n.yc("ngForOf",c.visibleOrderLineCustomFields),n.Rb(1),n.yc("ngIf",c.showElided),n.Rb(2),n.Yc(n.tc(23,48,"order.total")),n.Rb(2),n.yc("ngForOf",t.lines),n.Rb(3),n.Yc(n.tc(28,50,"order.sub-total")),n.Rb(3),n.Sb("colspan",3+c.visibleOrderLineCustomFields.length),n.Rb(1),n.yc("ngIf",c.showElided),n.Rb(2),n.Zc(" ",n.uc(34,52,t.subTotal/100,t.currencyCode)," "),n.Rb(2),n.yc("title",n.tc(36,55,"order.net-price")),n.Rb(2),n.Zc(" ",n.uc(38,57,t.subTotalBeforeTax/100,t.currencyCode)," "),n.Rb(2),n.yc("ngForOf",t.adjustments),n.Rb(3),n.Yc(n.tc(43,60,"order.shipping")),n.Rb(3),n.Yc(null==t.shippingMethod?null:t.shippingMethod.description),n.Rb(1),n.Sb("colspan",3+c.visibleOrderLineCustomFields.length),n.Rb(1),n.yc("ngIf",c.showElided),n.Rb(2),n.Zc(" ",n.uc(50,62,t.shippingWithTax/100,t.currencyCode)," "),n.Rb(2),n.yc("title",n.tc(52,65,"order.net-price")),n.Rb(2),n.Zc(" ",n.uc(54,67,t.shipping/100,t.currencyCode)," "),n.Rb(4),n.Yc(n.tc(58,70,"order.total")),n.Rb(3),n.Sb("colspan",3+c.visibleOrderLineCustomFields.length),n.Rb(1),n.yc("ngIf",c.showElided),n.Rb(2),n.Zc(" ",n.uc(64,72,t.total/100,t.currencyCode)," "),n.Rb(2),n.yc("title",n.tc(66,75,"order.net-price")),n.Rb(2),n.Zc(" ",n.uc(68,77,t.totalBeforeTax/100,t.currencyCode)," "),n.Rb(2),n.yc("order",t)("history",n.tc(70,80,c.history$)),n.Rb(3),n.yc("customFieldsConfig",c.customFields)("customFieldValues",t.customFields),n.Rb(3),n.Zc(" ",n.tc(76,82,"order.customer")," "),n.Rb(4),n.yc("customer",t.customer),n.Rb(1),n.yc("ngIf",c.getOrderAddressLines(t.shippingAddress).length),n.Rb(1),n.yc("address",t.shippingAddress),n.Rb(1),n.yc("ngIf",c.getOrderAddressLines(t.billingAddress).length),n.Rb(1),n.yc("address",t.billingAddress),n.Rb(1),n.yc("ngIf",t.payments&&t.payments.length),n.Rb(1),n.yc("ngForOf",t.fulfillments)}}function ee(t,e){1&t&&(n.ic(0,"span",12),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.note-only-visible-to-administrators")," "))}function ce(t,e){1&t&&(n.ic(0,"span",13),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.note-visible-to-customer")," "))}function ne(t,e){1&t&&(n.ic(0,"div",11),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.history-order-fulfilled")," "))}function ie(t,e){1&t&&(n.ic(0,"div",11),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Zc(" ",n.tc(2,1,"order.history-order-cancelled")," "))}const re=function(t,e){return{from:t,to:e}};function oe(t,e){if(1&t&&(n.Xc(0),n.sc(1,"translate")),2&t){const t=n.rc(2).$implicit;n.Zc(" ",n.uc(1,1,"order.history-order-transition",n.Ec(4,re,t.data.from,t.data.to))," ")}}function se(t,e){if(1&t&&(n.gc(0),n.Vc(1,ne,3,3,"div",17),n.Vc(2,ie,3,3,"div",17),n.Vc(3,oe,2,7,"ng-template",18),n.fc()),2&t){const t=n.rc().$implicit;n.Rb(1),n.yc("ngIf","Delivered"===t.data.to),n.Rb(1),n.yc("ngIf","Cancelled"===t.data.to),n.Rb(1),n.yc("ngIf","Cancelled"!==t.data.to&&"Delivered"!==t.data.to)}}function ae(t,e){if(1&t&&(n.ic(0,"vdr-history-entry-detail"),n.dc(1,"vdr-payment-detail",22),n.hc()),2&t){const t=e.ngIf,c=n.rc(4);n.Rb(1),n.yc("payment",t)("currencyCode",c.order.currencyCode)}}function le(t,e){if(1&t&&(n.gc(0),n.ic(1,"div",11),n.Xc(2),n.sc(3,"translate"),n.hc(),n.Xc(4),n.sc(5,"translate"),n.Vc(6,ae,2,2,"vdr-history-entry-detail",21),n.fc()),2&t){const t=n.rc(2).$implicit,e=n.rc();var c;n.Rb(2),n.Zc(" ",n.tc(3,4,"order.history-payment-settled")," "),n.Rb(2),n.ad(" ",n.tc(5,6,"order.transaction-id"),": ",null==(c=e.getPayment(t))?null:c.transactionId," "),n.Rb(2),n.yc("ngIf",e.getPayment(t))}}const de=function(t,e,c){return{from:t,to:e,id:c}};function ue(t,e){if(1&t&&(n.Xc(0),n.sc(1,"translate")),2&t){const t=n.rc(2).$implicit,e=n.rc();var c;n.Zc(" ",n.uc(1,1,"order.history-payment-transition",n.Fc(4,de,t.data.from,t.data.to,null==(c=e.getPayment(t))?null:c.transactionId))," ")}}function fe(t,e){if(1&t&&(n.gc(0),n.Vc(1,le,7,8,"ng-container",19),n.Vc(2,ue,2,8,"ng-template",null,20,n.Wc),n.fc()),2&t){const t=n.Jc(3),e=n.rc().$implicit;n.Rb(1),n.yc("ngIf","Settled"===e.data.to)("ngIfElse",t)}}function pe(t,e){if(1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.fc()),2&t){const t=n.rc().$implicit;n.Rb(1),n.Zc(" ",n.uc(2,1,"order.history-refund-transition",n.Fc(4,de,t.data.from,t.data.to,t.data.refundId))," ")}}function me(t,e){if(1&t&&(n.ic(0,"vdr-history-entry-detail"),n.ic(1,"vdr-labeled-data",23),n.sc(2,"translate"),n.Xc(3),n.hc(),n.ic(4,"vdr-labeled-data",23),n.sc(5,"translate"),n.dc(6,"vdr-simple-item-list",24),n.hc(),n.hc()),2&t){const t=e.ngIf,c=n.rc(2).$implicit;n.Rb(1),n.yc("label",n.tc(2,4,"order.cancellation-reason")),n.Rb(2),n.Zc(" ",c.data.reason," "),n.Rb(1),n.yc("label",n.tc(5,6,"order.contents")),n.Rb(2),n.yc("items",t)}}function he(t,e){if(1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.Vc(3,me,7,8,"vdr-history-entry-detail",21),n.fc()),2&t){const t=n.rc().$implicit,e=n.rc();n.Rb(1),n.Zc(" ",n.uc(2,2,"order.history-items-cancelled",n.Dc(5,nt,t.data.orderItemIds.length))," "),n.Rb(2),n.yc("ngIf",e.getCancelledItems(t))}}function ge(t,e){if(1&t&&(n.ic(0,"vdr-history-entry-detail"),n.dc(1,"vdr-fulfillment-detail",25),n.hc()),2&t){const t=e.ngIf,c=n.rc(3);n.Rb(1),n.yc("fulfillmentId",t.id)("order",c.order)}}function be(t,e){if(1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.Vc(3,ge,2,2,"vdr-history-entry-detail",21),n.fc()),2&t){const t=n.rc().$implicit,e=n.rc();n.Rb(1),n.Zc(" ",n.tc(2,2,"order.history-fulfillment-created")," "),n.Rb(2),n.yc("ngIf",e.getFulfillment(t))}}function ye(t,e){if(1&t&&(n.gc(0),n.ic(1,"div",11),n.Xc(2),n.sc(3,"translate"),n.hc(),n.Xc(4),n.sc(5,"translate"),n.fc()),2&t){const t=n.rc(2).$implicit,e=n.rc();var c;n.Rb(2),n.Zc(" ",n.tc(3,3,"order.history-fulfillment-delivered")," "),n.Rb(2),n.ad(" ",n.tc(5,5,"order.tracking-code"),": ",null==(c=e.getFulfillment(t))?null:c.trackingCode," ")}}function ve(t,e){if(1&t&&(n.gc(0),n.ic(1,"div",11),n.Xc(2),n.sc(3,"translate"),n.hc(),n.Xc(4),n.sc(5,"translate"),n.fc()),2&t){const t=n.rc(2).$implicit,e=n.rc();var c;n.Rb(2),n.Zc(" ",n.tc(3,3,"order.history-fulfillment-shipped")," "),n.Rb(2),n.ad(" ",n.tc(5,5,"order.tracking-code"),": ",null==(c=e.getFulfillment(t))?null:c.trackingCode," ")}}function Oe(t,e){if(1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.fc()),2&t){const t=n.rc(2).$implicit;n.Rb(1),n.Zc(" ",n.uc(2,1,"order.history-fulfillment-transition",n.Ec(4,re,t.data.from,t.data.to))," ")}}function Re(t,e){if(1&t&&(n.ic(0,"vdr-history-entry-detail"),n.dc(1,"vdr-fulfillment-detail",25),n.hc()),2&t){const t=e.ngIf,c=n.rc(3);n.Rb(1),n.yc("fulfillmentId",t.id)("order",c.order)}}function Ce(t,e){if(1&t&&(n.gc(0),n.Vc(1,ye,6,7,"ng-container",21),n.Vc(2,ve,6,7,"ng-container",21),n.Vc(3,Oe,3,7,"ng-container",21),n.Vc(4,Re,2,2,"vdr-history-entry-detail",21),n.fc()),2&t){const t=n.rc().$implicit,e=n.rc();n.Rb(1),n.yc("ngIf","Delivered"===t.data.to),n.Rb(1),n.yc("ngIf","Shipped"===t.data.to),n.Rb(1),n.yc("ngIf","Delivered"!==t.data.to&&"Shipped"!==t.data.to),n.Rb(1),n.yc("ngIf",e.getFulfillment(t))}}function Pe(t,e){1&t&&(n.ic(0,"span",38),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Yc(n.tc(2,1,"common.public")))}function Me(t,e){1&t&&(n.ic(0,"span",39),n.Xc(1),n.sc(2,"translate"),n.hc()),2&t&&(n.Rb(1),n.Yc(n.tc(2,1,"common.private")))}function Ie(t,e){if(1&t){const t=n.jc();n.gc(0),n.ic(1,"div",26),n.ic(2,"div",27),n.Vc(3,Pe,3,3,"span",28),n.Vc(4,Me,3,3,"span",29),n.Xc(5),n.hc(),n.dc(6,"div",30),n.ic(7,"vdr-dropdown"),n.ic(8,"button",31),n.dc(9,"clr-icon",32),n.hc(),n.ic(10,"vdr-dropdown-menu",33),n.ic(11,"button",34),n.pc("click",(function(){n.Mc(t);const e=n.rc().$implicit;return n.rc().updateNote.emit(e)})),n.sc(12,"hasPermission"),n.dc(13,"clr-icon",35),n.Xc(14),n.sc(15,"translate"),n.hc(),n.dc(16,"div",36),n.ic(17,"button",34),n.pc("click",(function(){n.Mc(t);const e=n.rc().$implicit;return n.rc().deleteNote.emit(e)})),n.sc(18,"hasPermission"),n.dc(19,"clr-icon",37),n.Xc(20),n.sc(21,"translate"),n.hc(),n.hc(),n.hc(),n.hc(),n.fc()}if(2&t){const t=n.rc().$implicit;n.Rb(3),n.yc("ngIf",t.isPublic),n.Rb(1),n.yc("ngIf",!t.isPublic),n.Rb(1),n.Zc(" ",t.data.note," "),n.Rb(6),n.yc("disabled",!n.tc(12,7,"UpdateOrder")),n.Rb(3),n.Zc(" ",n.tc(15,9,"common.edit")," "),n.Rb(3),n.yc("disabled",!n.tc(18,11,"UpdateOrder")),n.Rb(3),n.Zc(" ",n.tc(21,13,"common.delete")," ")}}const Se=function(t){return["/marketing","promotions",t]};function xe(t,e){if(1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.ic(3,"vdr-chip"),n.ic(4,"a",40),n.Xc(5),n.hc(),n.hc(),n.fc()),2&t){const t=n.rc().$implicit;n.Rb(1),n.Zc(" ",n.tc(2,3,"order.history-coupon-code-applied"),": "),n.Rb(3),n.yc("routerLink",n.Dc(5,Se,t.data.promotionId)),n.Rb(1),n.Yc(t.data.couponCode)}}function we(t,e){if(1&t&&(n.gc(0),n.Xc(1),n.sc(2,"translate"),n.ic(3,"vdr-chip"),n.ic(4,"span",41),n.Xc(5),n.hc(),n.hc(),n.fc()),2&t){const t=n.rc().$implicit;n.Rb(1),n.Zc(" ",n.tc(2,2,"order.history-coupon-code-removed"),": "),n.Rb(4),n.Yc(t.data.couponCode)}}function _e(t,e){if(1&t){const t=n.jc();n.ic(0,"vdr-timeline-entry",14),n.pc("expandClick",(function(){n.Mc(t);const e=n.rc();return e.expanded=!e.expanded})),n.gc(1,15),n.Vc(2,se,4,3,"ng-container",16),n.Vc(3,fe,4,2,"ng-container",16),n.Vc(4,pe,3,8,"ng-container",16),n.Vc(5,he,4,7,"ng-container",16),n.Vc(6,be,4,4,"ng-container",16),n.Vc(7,Ce,5,4,"ng-container",16),n.Vc(8,Ie,22,15,"ng-container",16),n.Vc(9,xe,6,7,"ng-container",16),n.Vc(10,we,6,4,"ng-container",16),n.fc(),n.hc()}if(2&t){const t=e.$implicit,c=n.rc();n.yc("displayType",c.getDisplayType(t))("iconShape",c.getTimelineIcon(t))("createdAt",t.createdAt)("name",c.getName(t))("featured",c.isFeatured(t))("collapsed",!c.expanded&&!c.isFeatured(t)),n.Rb(1),n.yc("ngSwitch",t.type),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_STATE_TRANSITION),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_PAYMENT_TRANSITION),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_REFUND_TRANSITION),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_CANCELLATION),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_FULFILLMENT),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_FULFILLMENT_TRANSITION),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_NOTE),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_COUPON_APPLIED),n.Rb(1),n.yc("ngSwitchCase",c.type.ORDER_COUPON_REMOVED)}}function Fe(t,e){if(1&t){const t=n.jc();n.ic(0,"button",18),n.pc("click",(function(){n.Mc(t);const c=e.$implicit;return n.rc(2).selectFilterPreset(c.name)})),n.Xc(1),n.sc(2,"translate"),n.hc()}if(2&t){const t=e.$implicit,c=n.rc().ngIf;n.Ub("btn-primary",c===t.name),n.Rb(1),n.Zc(" ",n.tc(2,3,t.label)," ")}}function ke(t,e){if(1&t){const t=n.jc();n.ic(0,"div",16),n.Vc(1,Fe,3,5,"button",17),n.ic(2,"button",18),n.pc("click",(function(){n.Mc(t);return n.rc().selectFilterPreset("custom")})),n.Xc(3),n.sc(4,"translate"),n.dc(5,"clr-icon",19),n.hc(),n.hc()}if(2&t){const t=e.ngIf,c=n.rc();n.Rb(1),n.yc("ngForOf",c.filterPresets),n.Rb(1),n.Ub("btn-primary","custom"===t),n.Rb(1),n.Zc(" ",n.tc(4,4,"order.filter-custom")," ")}}function Xe(t,e){if(1&t&&(n.Xc(0),n.sc(1,"translate"),n.sc(2,"stateI18nToken")),2&t){const t=e.item;n.Yc(n.tc(1,1,n.tc(2,3,t)))}}function De(t,e){if(1&t&&(n.ic(0,"span",20),n.Xc(1),n.sc(2,"translate"),n.sc(3,"stateI18nToken"),n.hc(),n.ic(4,"span",21),n.pc("click",(function(){const t=e.item;return(0,e.clear)(t)})),n.Xc(5,"\xd7"),n.hc()),2&t){const t=e.item;n.Rb(1),n.Zc(" ",n.tc(2,1,n.tc(3,3,t)),"")}}const Ve=function(t){return["./",t]};function Te(t,e){if(1&t&&(n.ic(0,"td",22),n.Xc(1),n.hc(),n.ic(2,"td",22),n.dc(3,"vdr-customer-label",23),n.hc(),n.ic(4,"td",22),n.dc(5,"vdr-order-state-label",24),n.hc(),n.ic(6,"td",22),n.Xc(7),n.sc(8,"currency"),n.hc(),n.ic(9,"td",22),n.Xc(10),n.sc(11,"timeAgo"),n.hc(),n.ic(12,"td",22),n.Xc(13),n.sc(14,"date"),n.hc(),n.ic(15,"td",25),n.dc(16,"vdr-table-row-action",26),n.sc(17,"translate"),n.hc()),2&t){const t=e.item;n.Rb(1),n.Yc(t.code),n.Rb(2),n.yc("customer",t.customer),n.Rb(2),n.yc("state",t.state),n.Rb(2),n.Yc(n.uc(8,8,t.total/100,t.currencyCode)),n.Rb(3),n.Yc(n.tc(11,11,t.updatedAt)),n.Rb(3),n.Yc(n.uc(14,13,t.orderPlacedAt,"medium")),n.Rb(3),n.yc("label",n.tc(17,16,"common.open"))("linkTo",n.Dc(18,Ve,t.id))}}function je(t,e){if(1&t&&(n.ic(0,"vdr-labeled-data",10),n.sc(1,"translate"),n.Xc(2),n.hc()),2&t){const t=n.rc().$implicit;n.yc("label",n.tc(1,2,"order.transaction-id")),n.Rb(2),n.Zc(" ",t.transactionId," ")}}function Ne(t,e){if(1&t&&(n.ic(0,"vdr-labeled-data",10),n.sc(1,"translate"),n.Xc(2),n.hc()),2&t){const t=n.rc().$implicit;n.yc("label",n.tc(1,2,"order.refund-reason")),n.Rb(2),n.Zc(" ",t.reason," ")}}function Ee(t,e){if(1&t&&(n.ic(0,"vdr-labeled-data",10),n.sc(1,"translate"),n.dc(2,"vdr-object-tree",12),n.hc()),2&t){const t=n.rc().$implicit;n.yc("label",n.tc(1,2,"order.refund-metadata")),n.Rb(2),n.yc("value",t.metadata)}}function $e(t,e){if(1&t){const t=n.jc();n.ic(0,"div",13),n.ic(1,"button",14),n.pc("click",(function(){n.Mc(t);const e=n.rc().$implicit;return n.rc().settleRefund.emit(e)})),n.Xc(2),n.sc(3,"translate"),n.hc(),n.hc()}2&t&&(n.Rb(2),n.Zc(" ",n.tc(3,1,"order.settle-refund")," "))}function Ae(t,e){if(1&t&&(n.gc(0),n.ic(1,"div",1),n.dc(2,"clr-icon",8),n.Xc(3),n.sc(4,"translate"),n.dc(5,"div",9),n.dc(6,"vdr-refund-state-label",3),n.hc(),n.ic(7,"div",4),n.ic(8,"vdr-labeled-data",10),n.sc(9,"translate"),n.Xc(10),n.sc(11,"date"),n.hc(),n.ic(12,"vdr-labeled-data",10),n.sc(13,"translate"),n.Xc(14),n.sc(15,"currency"),n.hc(),n.Vc(16,je,3,4,"vdr-labeled-data",11),n.Vc(17,Ne,3,4,"vdr-labeled-data",11),n.Vc(18,Ee,3,4,"vdr-labeled-data",11),n.hc(),n.Vc(19,$e,4,3,"div",7),n.fc()),2&t){const t=e.$implicit,c=n.rc();n.Rb(3),n.ad(" ",n.tc(4,11,"order.refund")," #",t.id," "),n.Rb(3),n.yc("state",t.state),n.Rb(2),n.yc("label",n.tc(9,13,"common.created-at")),n.Rb(2),n.Zc(" ",n.uc(11,15,t.createdAt,"medium")," "),n.Rb(2),n.yc("label",n.tc(13,18,"order.refund-total")),n.Rb(2),n.Zc(" ",n.uc(15,20,t.total/100,c.currencyCode)," "),n.Rb(2),n.yc("ngIf",t.transactionId),n.Rb(1),n.yc("ngIf",t.reason),n.Rb(1),n.yc("ngIf",c.refundHasMetadata(t)),n.Rb(1),n.yc("ngIf","Pending"===t.state)}}function Le(t,e){if(1&t){const t=n.jc();n.ic(0,"div",13),n.ic(1,"button",14),n.pc("click",(function(){n.Mc(t);const e=n.rc();return e.settlePayment.emit(e.payment)})),n.Xc(2),n.sc(3,"translate"),n.hc(),n.hc()}2&t&&(n.Rb(2),n.Zc(" ",n.tc(3,1,"order.settle-payment")," "))}function Ye(t,e){if(1&t&&(n.ic(0,"div",3),n.dc(1,"div",4),n.dc(2,"clr-icon",5),n.ic(3,"div",6),n.Xc(4),n.sc(5,"translate"),n.sc(6,"stateI18nToken"),n.hc(),n.hc()),2&t){const t=n.rc();n.Rb(4),n.Zc(" ",n.tc(5,1,n.tc(6,3,t.cancelledState))," ")}}function Ze(t,e){if(1&t){const t=n.jc();n.gc(0),n.ic(1,"vdr-order-process-node",1),n.pc("mouseenter",(function(){n.Mc(t);const c=e.$implicit;return n.rc().onMouseOver(c.name)}))("mouseleave",(function(){n.Mc(t);return n.rc().onMouseOut()})),n.sc(2,"async"),n.hc(),n.fc()}if(2&t){const t=e.$implicit,c=e.index,i=n.rc();n.Rb(1),n.yc("node",t)("index",c)("active",n.tc(2,3,i.activeState$)===t.name)}}function qe(t,e){if(1&t&&(n.gc(0),n.dc(1,"vdr-order-process-edge",2),n.fc()),2&t){const t=e.$implicit;n.Rb(1),n.yc("from",t.from)("to",t.to)("index",t.index)}}function We(t,e){1&t&&n.dc(0,"clr-icon",2)}function Qe(t,e){1&t&&n.dc(0,"clr-icon",2)}function Ue(t,e){if(1&t&&(n.ic(0,"li",2),n.ic(1,"div",3),n.Xc(2),n.hc(),n.dc(3,"clr-icon",4),n.Xc(4),n.hc()),2&t){const t=e.$implicit;n.yc("title",t.name),n.Rb(2),n.Yc(t.quantity),n.Rb(2),n.Zc(" ",t.name," ")}}class Be{constructor(t){this.i18nService=t,this.lineQuantities={},this.reasons=[Object(i.a)("order.cancel-reason-customer-request"),Object(i.a)("order.cancel-reason-not-available")],this.reasons=this.reasons.map(t=>this.i18nService.translate(t))}get selectionCount(){return Object.values(this.lineQuantities).reduce((t,e)=>t+e,0)}ngOnInit(){this.lineQuantities=this.order.lines.reduce((t,e)=>Object.assign(Object.assign({},t),{[e.id]:0}),{})}select(){this.resolveWith({orderId:this.order.id,lines:this.getLineInputs(),reason:this.reason})}cancel(){this.resolveWith()}getLineInputs(){if(!this.order.active)return Object.entries(this.lineQuantities).map(([t,e])=>({orderLineId:t,quantity:e})).filter(t=>0<t.quantity)}}Be.\u0275fac=function(t){return new(t||Be)(n.cc(r.nb))},Be.\u0275cmp=n.Wb({type:Be,selectors:[["vdr-cancel-order-dialog"]],decls:29,vars:22,consts:[["vdrDialogTitle",""],[1,"fulfillment-wrapper"],[1,"order-lines"],[1,"table"],["class","order-line",3,"is-cancelled",4,"ngFor","ngForOf"],[1,"cancellation-details"],[1,"clr-control-label"],["bindLabel","name","autofocus","","bindValue","id",3,"items","addTag","ngModel","ngModelChange"],["vdrDialogButtons",""],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","quantity"],[1,"align-middle","fulfil"],["type","number","min","0",3,"ngModel","max","ngModelChange",4,"ngIf","ngIfElse"],["nonEditable",""],["type","number","min","0",3,"ngModel","max","ngModelChange"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"]],template:function(t,e){1&t&&(n.Vc(0,w,2,3,"ng-template",0),n.ic(1,"div",1),n.ic(2,"div",2),n.ic(3,"table",3),n.ic(4,"thead"),n.ic(5,"tr"),n.dc(6,"th"),n.ic(7,"th"),n.Xc(8),n.sc(9,"translate"),n.hc(),n.ic(10,"th"),n.Xc(11),n.sc(12,"translate"),n.hc(),n.ic(13,"th"),n.Xc(14),n.sc(15,"translate"),n.hc(),n.ic(16,"th"),n.Xc(17),n.sc(18,"translate"),n.hc(),n.ic(19,"th"),n.Xc(20),n.sc(21,"translate"),n.hc(),n.hc(),n.hc(),n.Vc(22,k,17,15,"tr",4),n.hc(),n.hc(),n.ic(23,"div",5),n.ic(24,"label",6),n.Xc(25),n.sc(26,"translate"),n.hc(),n.ic(27,"ng-select",7),n.pc("ngModelChange",(function(t){return e.reason=t})),n.hc(),n.hc(),n.hc(),n.Vc(28,V,6,6,"ng-template",8)),2&t&&(n.Rb(8),n.Yc(n.tc(9,10,"order.product-name")),n.Rb(3),n.Yc(n.tc(12,12,"order.product-sku")),n.Rb(3),n.Yc(n.tc(15,14,"order.quantity")),n.Rb(3),n.Yc(n.tc(18,16,"order.unit-price")),n.Rb(3),n.Yc(n.tc(21,18,"order.cancel")),n.Rb(2),n.yc("ngForOf",e.order.lines),n.Rb(3),n.Yc(n.tc(26,20,"order.cancellation-reason")),n.Rb(2),n.yc("items",e.reasons)("addTag",!0)("ngModel",e.reason))},directives:[r.Q,P.o,M.u,I.a,o.p,o.s,r.P,P.p,r.eb,o.v,o.b],pipes:[S.d,r.q,P.d],styles:["[_nghost-%COMP%]{display:flex;height:100%;min-height:64vh}.fulfillment-wrapper[_ngcontent-%COMP%]{flex:1}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]   .cancellation-details[_ngcontent-%COMP%]{margin-left:24px;margin-top:0;width:250px}}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.fulfillment-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:#bfc3cc}.fulfillment-wrapper[_ngcontent-%COMP%]   .is-cancelled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f2f3f5;text-decoration:line-through}"],changeDetection:0}),Be.ctorParameters=()=>[{type:r.nb}];class He{constructor(t,e){this.dataService=t,this.changeDetector=e,this.method="",this.trackingCode="",this.fulfillmentQuantities={}}ngOnInit(){this.dataService.settings.getGlobalSettings().single$.subscribe(({globalSettings:t})=>{this.fulfillmentQuantities=this.order.lines.reduce((e,c)=>{const n=this.getFulfillableCount(c,t.trackInventory);return Object.assign(Object.assign({},e),{[c.id]:{fulfillCount:n,max:n}})},{}),this.changeDetector.markForCheck()}),this.order.shippingMethod&&(this.method=this.order.shippingMethod.name)}getFulfillableCount(t,e){const{trackInventory:c,stockOnHand:n}=t.productVariant,i=c===r.hb.INHERIT?e:c===r.hb.TRUE,o=this.getUnfulfilledCount(t);return i?Math.min(o,n):o}getUnfulfilledCount(t){const e=t.items.reduce((t,e)=>t+(e.fulfillment?1:0),0);return t.quantity-e}select(){const t=Object.entries(this.fulfillmentQuantities).map(([t,{fulfillCount:e}])=>({orderLineId:t,quantity:e}));this.resolveWith({lines:t,trackingCode:this.trackingCode,method:this.method})}cancel(){this.resolveWith()}}He.\u0275fac=function(t){return new(t||He)(n.cc(r.K),n.cc(n.k))},He.\u0275cmp=n.Wb({type:He,selectors:[["vdr-fulfill-order-dialog"]],decls:43,vars:33,consts:[["vdrDialogTitle",""],[1,"fulfillment-wrapper"],[1,"order-lines"],[1,"table"],["class","order-line",3,"ignore",4,"ngFor","ngForOf"],[1,"shipping-details"],[3,"address"],["clrInput","","placeholder","","name","method","required","",3,"ngModel","ngModelChange"],["clrInput","","placeholder","","name","trackingCode",3,"ngModel","ngModelChange"],["vdrDialogButtons",""],[1,"order-line"],[1,"align-middle","thumb"],[3,"src",4,"ngIf"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","quantity"],[1,"align-middle","fulfil"],["type","number","min","0",3,"disabled","ngModel","max","ngModelChange",4,"ngIf"],[3,"src"],["type","number","min","0",3,"disabled","ngModel","max","ngModelChange"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(n.Vc(0,T,2,3,"ng-template",0),n.ic(1,"div",1),n.ic(2,"div",2),n.ic(3,"table",3),n.ic(4,"thead"),n.ic(5,"tr"),n.dc(6,"th"),n.ic(7,"th"),n.Xc(8),n.sc(9,"translate"),n.hc(),n.ic(10,"th"),n.Xc(11),n.sc(12,"translate"),n.hc(),n.ic(13,"th"),n.Xc(14),n.sc(15,"translate"),n.hc(),n.ic(16,"th"),n.Xc(17),n.sc(18,"translate"),n.hc(),n.ic(19,"th"),n.Xc(20),n.sc(21,"translate"),n.hc(),n.hc(),n.hc(),n.Vc(22,E,13,8,"tr",4),n.hc(),n.hc(),n.ic(23,"div",5),n.dc(24,"vdr-formatted-address",6),n.ic(25,"h6"),n.Xc(26),n.sc(27,"translate"),n.hc(),n.Xc(28),n.ic(29,"strong"),n.Xc(30),n.sc(31,"currency"),n.hc(),n.ic(32,"clr-input-container"),n.ic(33,"label"),n.Xc(34),n.sc(35,"translate"),n.hc(),n.ic(36,"input",7),n.pc("ngModelChange",(function(t){return e.method=t})),n.hc(),n.hc(),n.ic(37,"clr-input-container"),n.ic(38,"label"),n.Xc(39),n.sc(40,"translate"),n.hc(),n.ic(41,"input",8),n.pc("ngModelChange",(function(t){return e.trackingCode=t})),n.hc(),n.hc(),n.hc(),n.hc(),n.Vc(42,$,6,7,"ng-template",9)),2&t&&(n.Rb(8),n.Yc(n.tc(9,14,"order.product-name")),n.Rb(3),n.Yc(n.tc(12,16,"order.product-sku")),n.Rb(3),n.Yc(n.tc(15,18,"order.unfulfilled")),n.Rb(3),n.Yc(n.tc(18,20,"catalog.stock-on-hand")),n.Rb(3),n.Yc(n.tc(21,22,"order.fulfill")),n.Rb(2),n.yc("ngForOf",e.order.lines),n.Rb(2),n.yc("address",e.order.shippingAddress),n.Rb(2),n.Yc(n.tc(27,24,"order.shipping-method")),n.Rb(2),n.Zc(" ",null==e.order.shippingMethod?null:e.order.shippingMethod.name," "),n.Rb(2),n.Yc(n.uc(31,26,e.order.shipping/100,e.order.currencyCode)),n.Rb(4),n.Yc(n.tc(35,29,"order.fulfillment-method")),n.Rb(2),n.yc("ngModel",e.method),n.Rb(3),n.Yc(n.tc(40,31,"order.tracking-code")),n.Rb(2),n.yc("ngModel",e.trackingCode))},directives:[r.Q,P.o,r.gb,M.t,M.u,r.eb,o.b,M.s,o.z,o.p,o.s,r.P,P.p,o.v],pipes:[S.d,P.d,r.q],styles:["[_nghost-%COMP%]{display:flex;height:100%;min-height:64vh}.fulfillment-wrapper[_ngcontent-%COMP%]{flex:1}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]{margin-top:24px}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]{margin-left:24px;margin-top:0;width:250px}}.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]   clr-input-container[_ngcontent-%COMP%]{margin-top:24px}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.fulfillment-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:#bfc3cc}"],changeDetection:0}),He.ctorParameters=()=>[{type:r.K},{type:n.k}];class ze{constructor(){this.transitionState=new n.u}nextSuggestedState(){var t;if(!this.fulfillment)return;const{nextStates:e}=this.fulfillment,c=t=>e.includes(t)?t:e[0];switch(null===(t=this.fulfillment)||void 0===t?void 0:t.state){case"Pending":return c("Shipped");case"Shipped":return c("Delivered");default:return e.find(t=>"Cancelled"!==t)}}nextOtherStates(){if(!this.fulfillment)return[];const t=this.nextSuggestedState();return this.fulfillment.nextStates.filter(e=>e!==t)}}ze.\u0275fac=function(t){return new(t||ze)},ze.\u0275cmp=n.Wb({type:ze,selectors:[["vdr-fulfillment-card"]],inputs:{fulfillment:"fulfillment",order:"order"},outputs:{transitionState:"transitionState"},decls:16,vars:7,consts:[[1,"card"],[1,"card-header","fulfillment-header"],[1,"fulfillment-state"],[3,"state"],[1,"card-block"],[3,"fulfillmentId","order",4,"ngIf"],[1,"card-footer"],[4,"ngIf"],["vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],[4,"ngFor","ngForOf"],[3,"fulfillmentId","order"],[1,"btn","btn-sm","btn-primary",3,"click"],["type","button","vdrDropdownItem","",1,"btn",3,"click"],[4,"ngIf","ngIfElse"],["cancel",""],["shape","step-forward-2"],["shape","error-standard",1,"is-error"]],template:function(t,e){1&t&&(n.ic(0,"div",0),n.ic(1,"div",1),n.ic(2,"div"),n.Xc(3),n.sc(4,"translate"),n.hc(),n.ic(5,"div",2),n.dc(6,"vdr-fulfillment-state-label",3),n.hc(),n.hc(),n.ic(7,"div",4),n.Vc(8,A,1,2,"vdr-fulfillment-detail",5),n.hc(),n.ic(9,"div",6),n.Vc(10,Y,6,10,"ng-container",7),n.ic(11,"vdr-dropdown"),n.ic(12,"button",8),n.dc(13,"clr-icon",9),n.hc(),n.ic(14,"vdr-dropdown-menu",10),n.Vc(15,W,5,2,"ng-container",11),n.hc(),n.hc(),n.hc(),n.hc()),2&t&&(n.Rb(3),n.Yc(n.tc(4,5,"order.fulfillment")),n.Rb(3),n.yc("state",null==e.fulfillment?null:e.fulfillment.state),n.Rb(2),n.yc("ngIf",!!e.fulfillment),n.Rb(2),n.yc("ngIf",e.nextSuggestedState()),n.Rb(5),n.yc("ngForOf",e.nextOtherStates()))},directives:function(){return[Ke,P.p,r.S,r.V,M.o,r.U,P.o,Je,r.T]},pipes:function(){return[S.d,r.Nb]},styles:[".fulfillment-header[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between}.card-footer[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:flex-end}"],changeDetection:0}),ze.propDecorators={fulfillment:[{type:n.D}],order:[{type:n.D}],transitionState:[{type:n.O}]};class Je{get fulfillment(){return this.order.fulfillments&&this.order.fulfillments.find(t=>t.id===this.fulfillmentId)}get items(){const t=new Map;for(const e of this.order.lines)for(const c of e.items)if(c.fulfillment&&c.fulfillment.id===this.fulfillmentId){const c=t.get(e.productVariant.name);null!=c?t.set(e.productVariant.name,c+1):t.set(e.productVariant.name,1)}return Array.from(t.entries()).map(([t,e])=>({name:t,quantity:e}))}getCustomFields(){const t=this.fulfillment.customFields;return t?Object.entries(t).filter(([t])=>"__typename"!==t).map(([t,e])=>{var c,n;return{key:t,value:null!==(n=null===(c=e)||void 0===c?void 0:c.toString())&&void 0!==n?n:"-"}}):[]}}Je.\u0275fac=function(t){return new(t||Je)},Je.\u0275cmp=n.Wb({type:Je,selectors:[["vdr-fulfillment-detail"]],inputs:{fulfillmentId:"fulfillmentId",order:"order"},decls:12,vars:17,consts:[[3,"label"],[3,"label",4,"ngIf"],[3,"items"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(n.ic(0,"vdr-labeled-data",0),n.sc(1,"translate"),n.Xc(2),n.sc(3,"date"),n.hc(),n.ic(4,"vdr-labeled-data",0),n.sc(5,"translate"),n.Xc(6),n.hc(),n.Vc(7,Q,3,4,"vdr-labeled-data",1),n.ic(8,"vdr-labeled-data",0),n.sc(9,"translate"),n.dc(10,"vdr-simple-item-list",2),n.hc(),n.Vc(11,U,3,2,"ng-container",3)),2&t&&(n.yc("label",n.tc(1,8,"common.created-at")),n.Rb(2),n.Zc(" ",n.uc(3,10,null==e.fulfillment?null:e.fulfillment.createdAt,"medium"),"\n"),n.Rb(2),n.yc("label",n.tc(5,13,"order.fulfillment-method")),n.Rb(2),n.Zc(" ",null==e.fulfillment?null:e.fulfillment.method,"\n"),n.Rb(1),n.yc("ngIf",null==e.fulfillment?null:e.fulfillment.trackingCode),n.Rb(1),n.yc("label",n.tc(9,15,"order.contents")),n.Rb(2),n.yc("items",e.items),n.Rb(1),n.yc("ngForOf",e.getCustomFields()))},directives:function(){return[r.vb,P.p,gc,P.o]},pipes:function(){return[S.d,P.f]},styles:[""],changeDetection:0}),Je.propDecorators={fulfillmentId:[{type:n.D}],order:[{type:n.D}]};class Ke{get chipColorType(){switch(this.state){case"Pending":case"Shipped":return"warning";case"Delivered":return"success";case"Cancelled":return"error"}}}Ke.\u0275fac=function(t){return new(t||Ke)},Ke.\u0275cmp=n.Wb({type:Ke,selectors:[["vdr-fulfillment-state-label"]],inputs:{state:"state"},decls:6,vars:10,consts:[[3,"title","colorType"],["shape","check-circle",4,"ngIf"],["shape","check-circle"]],template:function(t,e){1&t&&(n.ic(0,"vdr-chip",0),n.sc(1,"translate"),n.Vc(2,B,1,0,"clr-icon",1),n.Xc(3),n.sc(4,"translate"),n.sc(5,"stateI18nToken"),n.hc()),2&t&&(n.yc("title",n.tc(1,4,"order.payment-state"))("colorType",e.chipColorType),n.Rb(2),n.yc("ngIf","Delivered"===e.state),n.Rb(1),n.Zc(" ",n.tc(4,6,n.tc(5,8,e.state)),"\n"))},directives:[r.B,P.p,M.o],pipes:[S.d,r.Nb],styles:["[_nghost-%COMP%]{font-size:14px}"],changeDetection:0}),Ke.propDecorators={state:[{type:n.D}]};class Ge{constructor(){this.fulfilledCount=0,this.fulfillments=[]}ngOnChanges(t){this.line&&(this.fulfilledCount=this.getDeliveredCount(this.line),this.fulfillmentStatus=this.getFulfillmentStatus(this.fulfilledCount,this.line.items.length),this.fulfillments=this.getFulfillments(this.line))}getDeliveredCount(t){return t.items.reduce((t,e)=>t+(e.fulfillment?1:0),0)}getFulfillmentStatus(t,e){return t===e?"full":0<t&&t<e?"partial":"none"}getFulfillments(t){const e={};for(const n of t.items)n.fulfillment&&(void 0===e[n.fulfillment.id]?e[n.fulfillment.id]=1:e[n.fulfillment.id]++);const c=t.items.reduce((t,e)=>e.fulfillment?[...t,e.fulfillment]:t,[]);return Object.entries(e).map(([t,e])=>({count:e,fulfillment:c.find(e=>e.id===t)}))}}Ge.\u0275fac=function(t){return new(t||Ge)},Ge.\u0275cmp=n.Wb({type:Ge,selectors:[["vdr-line-fulfillment"]],inputs:{line:"line",orderState:"orderState"},features:[n.Pb],decls:1,vars:1,consts:[["class","search-settings-menu",4,"ngIf"],[1,"search-settings-menu"],["type","button","vdrDropdownTrigger","",1,"icon-button"],["class","item-fulfilled","shape","check-circle",4,"ngIf"],["class","item-partially-fulfilled","shape","check-circle",4,"ngIf"],["class","item-not-fulfilled","shape","exclamation-circle",4,"ngIf"],["vdrPosition","bottom-right"],["class","dropdown-header",4,"ngIf"],["class","fulfillment-detail",4,"ngFor","ngForOf"],["shape","check-circle",1,"item-fulfilled"],["shape","check-circle",1,"item-partially-fulfilled"],["shape","exclamation-circle",1,"item-not-fulfilled"],[1,"dropdown-header"],[1,"fulfillment-detail"],[1,"fulfillment-title"],[3,"label"],[3,"label",4,"ngIf"]],template:function(t,e){1&t&&n.Vc(0,rt,10,7,"vdr-dropdown",0),2&t&&n.yc("ngIf",e.fulfilledCount||"PartiallyDelivered"===e.orderState)},directives:[P.p,r.S,r.V,r.U,P.o,M.o,M.u,r.vb],pipes:[S.d,P.f],styles:[".item-fulfilled[_ngcontent-%COMP%]{color:#308300}.item-partially-fulfilled[_ngcontent-%COMP%]{color:#ff9f07}.item-not-fulfilled[_ngcontent-%COMP%]{color:#c92100}.fulfillment-detail[_ngcontent-%COMP%]{margin:6px 12px}.fulfillment-detail[_ngcontent-%COMP%]:not(:last-of-type){border-bottom:1px dashed #bfc3cc}"],changeDetection:0}),Ge.propDecorators={line:[{type:n.D}],orderState:[{type:n.D}]};class tc{getRefundedCount(){return this.line.items.filter(t=>null!=t.refundId&&!t.cancelled).length}}tc.\u0275fac=function(t){return new(t||tc)},tc.\u0275cmp=n.Wb({type:tc,selectors:[["vdr-line-refunds"]],inputs:{line:"line"},decls:1,vars:1,consts:[[3,"title",4,"ngIf"],[3,"title"],["shape","redo","dir","down",1,"is-solid"]],template:function(t,e){1&t&&n.Vc(0,ot,3,6,"span",0),2&t&&n.yc("ngIf",e.getRefundedCount())},directives:[P.p,M.o,x.b],pipes:[S.d],styles:["[_nghost-%COMP%]{color:#c92100}"],changeDetection:0}),tc.propDecorators={line:[{type:n.D}]};class ec{constructor(t){this.formBuilder=t,this.customFieldsConfig=[],this.customFieldValues={},this.updateClick=new n.u,this.editable=!1}ngOnInit(){this.customFieldForm=this.formBuilder.group({});for(const t of this.customFieldsConfig)this.customFieldForm.addControl(t.name,this.formBuilder.control(this.customFieldValues[t.name]))}onUpdateClick(){this.updateClick.emit(this.customFieldForm.value),this.customFieldForm.markAsPristine(),this.editable=!1}}ec.\u0275fac=function(t){return new(t||ec)(n.cc(o.e))},ec.\u0275cmp=n.Wb({type:ec,selectors:[["vdr-order-custom-fields-card"]],inputs:{customFieldsConfig:"customFieldsConfig",customFieldValues:"customFieldValues"},outputs:{updateClick:"updateClick"},decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-block"],[1,"card-text","custom-field-form"],[4,"ngFor","ngForOf"],[1,"card-footer"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary",3,"disabled","click",4,"ngIf"],["entityName","Order",3,"customFieldsFormGroup","compact","readonly","customField"],[1,"btn","btn-sm","btn-secondary",3,"click"],["shape","pencil"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],["shape","check"]],template:function(t,e){1&t&&n.Vc(0,dt,10,8,"div",0),2&t&&n.yc("ngIf",e.customFieldsConfig.length)},directives:[P.p,P.o,r.H,M.o],pipes:[S.d],styles:["vdr-custom-field-control[_ngcontent-%COMP%]{display:block;margin-bottom:6px}.custom-field-form[_ngcontent-%COMP%]     .clr-control-label{color:#97979a}.custom-field-form.editable[_ngcontent-%COMP%]     .clr-control-label{color:inherit}"],changeDetection:0}),ec.ctorParameters=()=>[{type:o.e}],ec.propDecorators={customFieldsConfig:[{type:n.D}],customFieldValues:[{type:n.D}],updateClick:[{type:n.O}]};class cc{constructor(t){this.serverConfigService=t,this.states=[]}ngOnInit(){this.states=this.serverConfigService.getOrderProcessStates()}}cc.\u0275fac=function(t){return new(t||cc)(n.cc(r.Jb))},cc.\u0275cmp=n.Wb({type:cc,selectors:[["vdr-order-process-graph-dialog"]],decls:2,vars:2,consts:[["vdrDialogTitle",""],[3,"states","initialState"]],template:function(t,e){1&t&&(n.Vc(0,ut,2,3,"ng-template",0),n.dc(1,"vdr-order-process-graph",1)),2&t&&(n.Rb(1),n.yc("states",e.states)("initialState",e.activeState))},directives:function(){return[r.Q,fc]},pipes:function(){return[S.d]},styles:[""],changeDetection:0}),cc.ctorParameters=()=>[{type:r.Jb}];class nc{constructor(t){this.i18nService=t,this.lineQuantities={},this.refundShipping=!1,this.adjustment=0,this.reasons=[Object(i.a)("order.refund-reason-customer-request"),Object(i.a)("order.refund-reason-not-available")],this.reasons=this.reasons.map(t=>this.i18nService.translate(t))}get refundTotal(){return this.order.lines.reduce((t,e)=>t+e.unitPriceWithTax*(this.lineQuantities[e.id].quantity||0),0)+(this.refundShipping?this.order.shipping:0)+this.adjustment}lineCanBeRefunded(t){return 0<t.items.filter(t=>null==t.refundId&&!t.cancelled).length}ngOnInit(){this.lineQuantities=this.order.lines.reduce((t,e)=>Object.assign(Object.assign({},t),{[e.id]:{quantity:0,cancel:!1}}),{}),this.settledPayments=(this.order.payments||[]).filter(t=>"Settled"===t.state),this.settledPayments.length&&(this.selectedPayment=this.settledPayments[0])}select(){const t=this.selectedPayment;if(t){const e=Object.entries(this.lineQuantities).map(([t,e])=>({orderLineId:t,quantity:e.quantity})).filter(t=>0<t.quantity),c=Object.entries(this.lineQuantities).filter(([t,e])=>e.cancel).map(([t,e])=>({orderLineId:t,quantity:e.quantity}));this.resolveWith({lines:e,cancel:c,reason:this.reason,shipping:this.refundShipping?this.order.shipping:0,adjustment:this.adjustment,paymentId:t.id})}}cancel(){this.resolveWith()}}nc.\u0275fac=function(t){return new(t||nc)(n.cc(r.nb))},nc.\u0275cmp=n.Wb({type:nc,selectors:[["vdr-refund-order-dialog"]],decls:60,vars:61,consts:[["vdrDialogTitle",""],[1,"fulfillment-wrapper"],[1,"order-lines"],[1,"table"],["class","order-line",4,"ngFor","ngForOf"],[1,"refund-details"],[1,"clr-control-label"],["bindLabel","name","autofocus","","bindValue","id",3,"items","placeholder","addTag","ngModel","ngModelChange"],["clrSelect","","name","options",3,"ngModel","ngModelChange"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],["type","checkbox","clrCheckbox","",3,"ngModel","ngModelChange"],["clrInput","",3,"currencyCode","ngModel","ngModelChange"],[1,"totals"],[1,"order-total"],[1,"refund-total"],["class","refund-total-error",4,"ngIf"],["vdrDialogButtons",""],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","quantity"],[3,"line"],[1,"align-middle","fulfil"],["type","number","min","0",3,"ngModel","max","ngModelChange",4,"ngIf"],[1,"align-middle"],[1,"cancel-checkbox-wrapper"],["type","checkbox","clrCheckbox","",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["type","number","min","0",3,"ngModel","max","ngModelChange"],["type","checkbox","clrCheckbox","",3,"disabled","ngModel","ngModelChange"],[3,"ngValue","disabled"],[1,"refund-total-error"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(n.Vc(0,ft,2,3,"ng-template",0),n.ic(1,"div",1),n.ic(2,"div",2),n.ic(3,"table",3),n.ic(4,"thead"),n.ic(5,"tr"),n.dc(6,"th"),n.ic(7,"th"),n.Xc(8),n.sc(9,"translate"),n.hc(),n.ic(10,"th"),n.Xc(11),n.sc(12,"translate"),n.hc(),n.ic(13,"th"),n.Xc(14),n.sc(15,"translate"),n.hc(),n.ic(16,"th"),n.Xc(17),n.sc(18,"translate"),n.hc(),n.ic(19,"th"),n.Xc(20),n.sc(21,"translate"),n.hc(),n.ic(22,"th"),n.Xc(23),n.sc(24,"translate"),n.hc(),n.hc(),n.hc(),n.Vc(25,ht,19,14,"tr",4),n.hc(),n.hc(),n.ic(26,"div",5),n.ic(27,"label",6),n.Xc(28),n.sc(29,"translate"),n.hc(),n.ic(30,"ng-select",7),n.pc("ngModelChange",(function(t){return e.reason=t})),n.sc(31,"translate"),n.hc(),n.ic(32,"clr-select-container"),n.ic(33,"label"),n.Xc(34),n.sc(35,"translate"),n.hc(),n.ic(36,"select",8),n.pc("ngModelChange",(function(t){return e.selectedPayment=t})),n.Vc(37,gt,3,8,"option",9),n.hc(),n.hc(),n.ic(38,"clr-checkbox-wrapper"),n.ic(39,"input",10),n.pc("ngModelChange",(function(t){return e.refundShipping=t})),n.hc(),n.ic(40,"label"),n.Xc(41),n.sc(42,"translate"),n.sc(43,"currency"),n.hc(),n.hc(),n.ic(44,"clr-input-container"),n.ic(45,"label"),n.Xc(46),n.sc(47,"translate"),n.hc(),n.ic(48,"vdr-currency-input",11),n.pc("ngModelChange",(function(t){return e.adjustment=t})),n.hc(),n.hc(),n.ic(49,"div",12),n.ic(50,"div",13),n.Xc(51),n.sc(52,"translate"),n.sc(53,"currency"),n.hc(),n.ic(54,"div",14),n.Xc(55),n.sc(56,"translate"),n.sc(57,"currency"),n.hc(),n.Vc(58,yt,5,13,"div",15),n.hc(),n.hc(),n.hc(),n.Vc(59,Ot,7,13,"ng-template",16)),2&t&&(n.Rb(8),n.Yc(n.tc(9,26,"order.product-name")),n.Rb(3),n.Yc(n.tc(12,28,"order.product-sku")),n.Rb(3),n.Yc(n.tc(15,30,"order.quantity")),n.Rb(3),n.Yc(n.tc(18,32,"order.unit-price")),n.Rb(3),n.Yc(n.tc(21,34,"order.refund")),n.Rb(3),n.Yc(n.tc(24,36,"order.return-to-stock")),n.Rb(2),n.yc("ngForOf",e.order.lines),n.Rb(3),n.Yc(n.tc(29,38,"order.refund-reason")),n.Rb(2),n.yc("items",e.reasons)("placeholder",n.tc(31,40,"order.refund-reason-required"))("addTag",!0)("ngModel",e.reason),n.Rb(4),n.Yc(n.tc(35,42,"order.payment-to-refund")),n.Rb(2),n.yc("ngModel",e.selectedPayment),n.Rb(1),n.yc("ngForOf",e.settledPayments),n.Rb(2),n.yc("ngModel",e.refundShipping),n.Rb(2),n.ad(" ",n.tc(42,44,"order.refund-shipping")," (",n.uc(43,46,e.order.shipping/100,e.order.currencyCode),") "),n.Rb(5),n.Yc(n.tc(47,49,"order.refund-adjustment")),n.Rb(2),n.yc("currencyCode",e.order.currencyCode)("ngModel",e.adjustment),n.Rb(3),n.ad(" ",n.tc(52,51,"order.payment-amount"),": ",n.uc(53,53,e.selectedPayment.amount/100,e.order.currencyCode)," "),n.Rb(4),n.ad(" ",n.tc(56,56,"order.refund-total"),": ",n.uc(57,58,e.refundTotal/100,e.order.currencyCode)," "),n.Rb(3),n.yc("ngIf",e.refundTotal<0||e.selectedPayment.amount<e.refundTotal))},directives:[r.Q,P.o,M.u,I.a,o.p,o.s,M.B,r.eb,o.A,M.A,M.k,o.a,M.i,M.t,r.F,M.s,P.p,r.P,tc,o.v,o.b,o.u,o.D],pipes:[S.d,P.d,r.q],styles:["[_nghost-%COMP%]{display:flex;height:100%;min-height:64vh}.fulfillment-wrapper[_ngcontent-%COMP%]{flex:1}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]   .refund-details[_ngcontent-%COMP%]{margin-left:24px;margin-top:0;width:250px}}.fulfillment-wrapper[_ngcontent-%COMP%]   .refund-details[_ngcontent-%COMP%]   clr-select-container[_ngcontent-%COMP%]{margin:12px 0}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.fulfillment-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:#bfc3cc}.cancel-checkbox-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center}clr-checkbox-wrapper[_ngcontent-%COMP%]{display:block;margin-bottom:12px;margin-top:12px}.totals[_ngcontent-%COMP%]{margin-top:48px}.totals[_ngcontent-%COMP%]   .refund-total[_ngcontent-%COMP%]{font-size:18px}.totals[_ngcontent-%COMP%]   .refund-total-error[_ngcontent-%COMP%]{color:#c92100}"],changeDetection:0}),nc.ctorParameters=()=>[{type:r.nb}];class ic{constructor(){this.transactionId=""}submit(){this.resolveWith(this.transactionId)}cancel(){this.resolveWith()}}ic.\u0275fac=function(t){return new(t||ic)},ic.\u0275cmp=n.Wb({type:ic,selectors:[["vdr-settle-refund-dialog"]],decls:10,vars:10,consts:[["vdrDialogTitle",""],[1,"instruction"],["clrInput","","name","transactionId",3,"ngModel","ngModelChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(n.Vc(0,Rt,2,3,"ng-template",0),n.ic(1,"p",1),n.Xc(2),n.sc(3,"translate"),n.hc(),n.ic(4,"clr-input-container"),n.ic(5,"label"),n.Xc(6),n.sc(7,"translate"),n.hc(),n.ic(8,"input",2),n.pc("ngModelChange",(function(t){return e.transactionId=t})),n.hc(),n.hc(),n.Vc(9,Ct,6,7,"ng-template",3)),2&t&&(n.Rb(2),n.Zc(" ",n.uc(3,3,"order.settle-refund-manual-instructions",n.Dc(8,Pt,e.refund.method)),"\n"),n.Rb(4),n.Yc(n.tc(7,6,"order.transaction-id")),n.Rb(2),n.yc("ngModel",e.transactionId))},directives:[r.Q,M.t,M.u,r.eb,o.b,M.s,o.p,o.s,r.P],pipes:[S.d],styles:["[_nghost-%COMP%]{padding-bottom:32px}.instruction[_ngcontent-%COMP%]{margin-bottom:24px;margin-top:0}"],changeDetection:0});class rc extends r.u{constructor(t,e,c,n,i,r,s){super(e,t,c,i),this.changeDetector=n,this.dataService=i,this.notificationService=r,this.modalService=s,this.detailForm=new o.i({}),this.fetchHistory=new l.a,this.orderLineCustomFieldsVisible=!1,this.defaultStates=["AddingItems","ArrangingPayment","PaymentAuthorized","PaymentSettled","PartiallyDelivered","Delivered","Cancelled"]}get visibleOrderLineCustomFields(){return this.orderLineCustomFieldsVisible?this.orderLineCustomFields:[]}get showElided(){return!this.orderLineCustomFieldsVisible&&0<this.orderLineCustomFields.length}ngOnInit(){this.init(),this.customFields=this.getCustomFieldConfig("Order"),this.orderLineCustomFields=this.getCustomFieldConfig("OrderLine"),this.orderLineCustomFieldsVisible=this.orderLineCustomFields.length<2,this.history$=this.fetchHistory.pipe(Object(m.a)(null),Object(h.a)(()=>this.dataService.order.getOrderHistory(this.id,{sort:{createdAt:r.Lb.DESC}}).mapStream(t=>{var e;return null===(e=t.order)||void 0===e?void 0:e.history.items}))),this.nextStates$=this.entity$.pipe(Object(g.a)(t=>!this.defaultStates.includes(t.state)?t.nextStates:t.nextStates.filter(t=>!this.defaultStates.includes(t))))}ngOnDestroy(){this.destroy()}toggleOrderLineCustomFields(){this.orderLineCustomFieldsVisible=!this.orderLineCustomFieldsVisible}getLinePromotions(t){return t.adjustments.filter(t=>t.type===r.g.PROMOTION)}getPromotionLink(t){return["/marketing","promotions",t.adjustmentSource.split(":")[1]]}openStateDiagram(){this.entity$.pipe(Object(b.a)(1),Object(h.a)(t=>this.modalService.fromComponent(cc,{closable:!0,locals:{activeState:t.state}}))).subscribe()}transitionToState(t){this.dataService.order.transitionToState(this.id,t).subscribe(({transitionOrderToState:e})=>{switch(null==e?void 0:e.__typename){case"Order":this.notificationService.success(Object(i.a)("order.transitioned-to-state-success"),{state:t}),this.fetchHistory.next();break;case"OrderStateTransitionError":this.notificationService.error(e.transitionError)}})}updateCustomFields(t){this.dataService.order.updateOrderCustomFields({id:this.id,customFields:t}).subscribe(()=>{this.notificationService.success(Object(i.a)("common.notify-update-success"),{entity:"Order"})})}getCouponCodeForAdjustment(t,e){const c=e.adjustmentSource.split(":")[1],n=t.promotions.find(t=>t.id===c);if(n)return n.couponCode||void 0}getOrderAddressLines(t){return t?Object.values(t).filter(t=>"OrderAddress"!==t).filter(t=>!!t):[]}settlePayment(t){this.dataService.order.settlePayment(t.id).subscribe(({settlePayment:t})=>{switch(t.__typename){case"Payment":"Settled"===t.state?this.notificationService.success(Object(i.a)("order.settle-payment-success")):this.notificationService.error(Object(i.a)("order.settle-payment-error")),this.dataService.order.getOrder(this.id).single$.subscribe(),this.fetchHistory.next();break;case"OrderStateTransitionError":case"PaymentStateTransitionError":case"SettlePaymentError":this.notificationService.error(t.message)}})}canAddFulfillment(t){return!t.lines.reduce((t,e)=>[...t,...e.items],[]).every(t=>!!t.fulfillment)&&(t.nextStates.includes("Shipped")||t.nextStates.includes("PartiallyShipped")||t.nextStates.includes("Delivered"))}fulfillOrder(){this.entity$.pipe(Object(b.a)(1),Object(h.a)(t=>this.modalService.fromComponent(He,{size:"xl",locals:{order:t}})),Object(h.a)(t=>t?this.dataService.order.createFulfillment(t):Object(d.a)(void 0)),Object(h.a)(t=>this.refetchOrder(t).pipe(Object(y.a)(t)))).subscribe(t=>{if(t)switch(t.addFulfillmentToOrder.__typename){case"Fulfillment":this.notificationService.success(Object(i.a)("order.create-fulfillment-success"));break;case"EmptyOrderLineSelectionError":case"InsufficientStockOnHandError":case"ItemsAlreadyFulfilledError":this.notificationService.error(t.addFulfillmentToOrder.message)}})}transitionFulfillment(t,e){this.dataService.order.transitionFulfillmentToState(t,e).pipe(Object(h.a)(t=>this.refetchOrder(t))).subscribe(()=>{this.notificationService.success(Object(i.a)("order.successfully-updated-fulfillment"))})}cancelOrRefund(t){const e=this.orderHasSettledPayments(t);"PaymentAuthorized"!==t.state&&!0!==t.active&&e?this.refundOrder(t):this.cancelOrder(t)}settleRefund(t){this.modalService.fromComponent(ic,{size:"md",locals:{refund:t}}).pipe(Object(h.a)(e=>e?this.dataService.order.settleRefund({transactionId:e,id:t.id},this.id):Object(d.a)(void 0))).subscribe(t=>{t&&this.notificationService.success(Object(i.a)("order.settle-refund-success"))})}addNote(t){const{note:e,isPublic:c}=t;this.dataService.order.addNoteToOrder({id:this.id,note:e,isPublic:c}).pipe(Object(h.a)(t=>this.refetchOrder(t))).subscribe(t=>{this.notificationService.success(Object(i.a)("common.notify-create-success"),{entity:"Note"})})}updateNote(t){this.modalService.fromComponent(r.Y,{closable:!0,locals:{displayPrivacyControls:!0,note:t.data.note,noteIsPrivate:!t.isPublic}}).pipe(Object(h.a)(e=>e?this.dataService.order.updateOrderNote({noteId:t.id,isPublic:!e.isPrivate,note:e.note}):u.a)).subscribe(t=>{this.fetchHistory.next(),this.notificationService.success(Object(i.a)("common.notify-update-success"),{entity:"Note"})})}deleteNote(t){return this.modalService.dialog({title:Object(i.a)("common.confirm-delete-note"),body:t.data.note,buttons:[{type:"secondary",label:Object(i.a)("common.cancel")},{type:"danger",label:Object(i.a)("common.delete"),returnValue:!0}]}).pipe(Object(h.a)(e=>e?this.dataService.order.deleteOrderNote(t.id):u.a)).subscribe(()=>{this.fetchHistory.next(),this.notificationService.success(Object(i.a)("common.notify-delete-success"),{entity:"Note"})})}orderHasSettledPayments(t){var e;return!!(null===(e=t.payments)||void 0===e?void 0:e.find(t=>"Settled"===t.state))}cancelOrder(t){this.modalService.fromComponent(Be,{size:"xl",locals:{order:t}}).pipe(Object(h.a)(t=>t?this.dataService.order.cancelOrder(t):Object(d.a)(void 0)),Object(h.a)(t=>this.refetchOrder(t))).subscribe(t=>{t&&this.notificationService.success(Object(i.a)("order.cancelled-order-success"))})}refundOrder(t){this.modalService.fromComponent(nc,{size:"xl",locals:{order:t}}).pipe(Object(h.a)(t=>t?this.dataService.order.refundOrder(Object(a.omit)(t,["cancel"])).pipe(Object(h.a)(({refundOrder:e})=>{switch(e.__typename){case"Refund":return t.cancel.length?this.dataService.order.cancelOrder({orderId:this.id,lines:t.cancel,reason:t.reason}).pipe(Object(g.a)(({cancelOrder:t})=>t)):Object(d.a)(e);case"AlreadyRefundedError":case"OrderStateTransitionError":case"MultipleOrderError":case"NothingToRefundError":case"PaymentOrderMismatchError":case"QuantityTooGreatError":case"RefundOrderStateError":case"RefundStateTransitionError":this.notificationService.error(e.message);default:return Object(d.a)(void 0)}})):Object(d.a)(void 0))).subscribe(t=>{if(t)switch(t.__typename){case"Order":case"Refund":this.refetchOrder(t).subscribe(),this.notificationService.success(Object(i.a)("order.refund-order-success"));break;case"QuantityTooGreatError":case"MultipleOrderError":case"OrderStateTransitionError":case"CancelActiveOrderError":case"EmptyOrderLineSelectionError":this.notificationService.error(t.message)}})}refetchOrder(t){return this.fetchHistory.next(),t?this.dataService.order.getOrder(this.id).single$:Object(d.a)(void 0)}setFormValues(t){}}rc.\u0275fac=function(t){return new(t||rc)(n.cc(s.e),n.cc(s.a),n.cc(r.Jb),n.cc(n.k),n.cc(r.K),n.cc(r.Bb),n.cc(r.Ab))},rc.\u0275cmp=n.Wb({type:rc,selectors:[["vdr-order-detail"]],features:[n.Ob],decls:4,vars:6,consts:[[4,"ngIf"],[1,"flex","clr-align-items-center"],[3,"entity"],[3,"state"],[1,"icon-button",3,"title","click"],["shape","list"],["locationId","order-detail"],[1,"btn","btn-primary",3,"disabled","click"],["vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["type","button","class","btn","vdrDropdownItem","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",1,"btn",3,"click"],["shape","error-standard",1,"is-error"],[4,"ngIf","ngIfElse"],["cancelOnly",""],[1,"dropdown-divider"],["shape","step-forward-2"],[1,"clr-row"],[1,"clr-col-lg-8"],[1,"order-lines","table"],["class","order-line",3,"is-cancelled",4,"ngFor","ngForOf"],[1,"sub-total"],[1,"left","clr-align-middle"],[1,"clr-align-middle"],[1,"net-price",3,"title"],["class","order-ajustment",4,"ngFor","ngForOf"],[1,"shipping"],[1,"total"],[3,"order","history","addNote","updateNote","deleteNote"],[1,"clr-col-lg-4","order-cards"],[3,"customFieldsConfig","customFieldValues","updateClick"],[1,"card"],[1,"card-header"],[1,"card-block"],[1,"card-text"],[3,"customer"],[3,"address"],[1,"order-line-custom-field"],[1,"custom-field-header-button",3,"title","click"],["shape","ellipsis-horizontal",1,"custom-field-ellipsis"],[1,"order-line"],[1,"align-middle","thumb"],[3,"src",4,"ngIf"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","unit-price"],[1,"align-middle","quantity"],[3,"line"],[3,"line","orderState"],[1,"align-middle","total"],[3,"src"],[1,"order-line-custom-field","align-middle"],[3,"ngSwitch"],[3,"ngSwitchCase"],["ngSwitchDefault",""],[3,"title"],[3,"ngIf"],["shape","check"],["shape","times"],["vdrDropdownTrigger","",1,"promotions-label"],["class","line-promotion",4,"ngFor","ngForOf"],[1,"line-promotion"],[1,"promotion-name",3,"routerLink"],[1,"promotion-amount"],[1,"order-ajustment"],[3,"routerLink"],[3,"currencyCode","payment","settlePayment","settleRefund",4,"ngFor","ngForOf"],[3,"currencyCode","payment","settlePayment","settleRefund"],[3,"fulfillment","order","transitionState"]],template:function(t,e){1&t&&(n.Vc(0,wt,21,15,"vdr-action-bar",0),n.sc(1,"async"),n.Vc(2,te,86,84,"div",0),n.sc(3,"async")),2&t&&(n.yc("ngIf",n.tc(1,2,e.entity$)),n.Rb(2),n.yc("ngIf",n.tc(3,4,e.entity$)))},directives:function(){return[P.p,r.c,r.e,r.ab,r.Db,M.o,r.f,r.d,r.S,r.V,r.U,P.o,r.T,oc,ec,r.J,r.gb,tc,Ge,P.r,P.s,P.t,s.h,r.B,ac,ze]},pipes:function(){return[P.b,S.d,r.Nb,P.d,r.I,r.q,P.f]},styles:[".shipping-address[_ngcontent-%COMP%]{line-height:1.3em;list-style-type:none}.order-lines[_ngcontent-%COMP%]   .is-cancelled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f2f3f5;text-decoration:line-through}.order-lines[_ngcontent-%COMP%]   .sub-total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .order-lines[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px dashed #bfc3cc}.order-lines[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}.custom-field-header-button[_ngcontent-%COMP%]{background:none;border:none;color:#137fac;cursor:pointer;margin:0;padding:0}.order-line-custom-field[_ngcontent-%COMP%]{background-color:#fafafa}.order-line-custom-field[_ngcontent-%COMP%]   .custom-field-ellipsis[_ngcontent-%COMP%]{color:#bfc3cc}.net-price[_ngcontent-%COMP%]{color:#97979a;font-size:11px}.promotions-label[_ngcontent-%COMP%]{-webkit-text-decoration:underline dotted #bfc3cc;cursor:pointer;font-size:11px;margin-top:6px;text-decoration:underline dotted #bfc3cc;text-transform:lowercase}.line-promotion[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 12px}.line-promotion[_ngcontent-%COMP%]   .promotion-amount[_ngcontent-%COMP%]{margin-left:12px}.order-cards[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#525456;margin-top:6px}"],changeDetection:0}),rc.ctorParameters=()=>[{type:s.e},{type:s.a},{type:r.Jb},{type:n.k},{type:r.K},{type:r.Bb},{type:r.Ab}];class oc{constructor(){this.addNote=new n.u,this.updateNote=new n.u,this.deleteNote=new n.u,this.note="",this.noteIsPrivate=!0,this.expanded=!1,this.type=r.mb}getDisplayType(t){if(t.type===r.mb.ORDER_STATE_TRANSITION){if("Delivered"===t.data.to)return"success";if("Cancelled"===t.data.to)return"error"}return t.type===r.mb.ORDER_FULFILLMENT_TRANSITION&&"Delivered"===t.data.to?"success":t.type===r.mb.ORDER_PAYMENT_TRANSITION&&"Declined"===t.data.to||t.type===r.mb.ORDER_CANCELLATION?"error":t.type===r.mb.ORDER_REFUND_TRANSITION?"warning":"default"}getTimelineIcon(t){if(t.type===r.mb.ORDER_STATE_TRANSITION){if("Delivered"===t.data.to)return["success-standard","is-solid"];if("Cancelled"===t.data.to)return"ban"}if(t.type===r.mb.ORDER_PAYMENT_TRANSITION&&"Settled"===t.data.to)return"credit-card";if(t.type===r.mb.ORDER_NOTE)return"note";if(t.type===r.mb.ORDER_FULFILLMENT_TRANSITION){if("Shipped"===t.data.to)return"truck";if("Delivered"===t.data.to)return"truck"}}isFeatured(t){switch(t.type){case r.mb.ORDER_STATE_TRANSITION:return"Delivered"===t.data.to||"Cancelled"===t.data.to||"Settled"===t.data.to;case r.mb.ORDER_PAYMENT_TRANSITION:return"Settled"===t.data.to;case r.mb.ORDER_FULFILLMENT_TRANSITION:return"Delivered"===t.data.to||"Shipped"===t.data.to;case r.mb.ORDER_NOTE:return!0;default:return!1}}getFulfillment(t){if((t.type===r.mb.ORDER_FULFILLMENT||t.type===r.mb.ORDER_FULFILLMENT_TRANSITION)&&this.order.fulfillments)return this.order.fulfillments.find(e=>e.id===t.data.fulfillmentId)}getPayment(t){if(t.type===r.mb.ORDER_PAYMENT_TRANSITION&&this.order.payments)return this.order.payments.find(e=>e.id===t.data.paymentId)}getCancelledItems(t){const e=new Map,c=t.data.orderItemIds;for(const n of this.order.lines)for(const t of n.items)if(c.includes(t.id)){const t=e.get(n.productVariant.name);null!=t?e.set(n.productVariant.name,t+1):e.set(n.productVariant.name,1)}return Array.from(e.entries()).map(([t,e])=>({name:t,quantity:e}))}getName(t){const{administrator:e}=t;if(e)return`${e.firstName} ${e.lastName}`;{const t=this.order.customer;if(t)return`${t.firstName} ${t.lastName}`}return""}addNoteToOrder(){this.addNote.emit({note:this.note,isPublic:!this.noteIsPrivate}),this.note="",this.noteIsPrivate=!0}}oc.\u0275fac=function(t){return new(t||oc)},oc.\u0275cmp=n.Wb({type:oc,selectors:[["vdr-order-history"]],inputs:{order:"order",history:"history"},outputs:{addNote:"addNote",updateNote:"updateNote",deleteNote:"deleteNote"},decls:23,vars:24,consts:[[1,"entry-list"],["iconShape","note","displayType","muted",3,"featured"],[1,"note-entry"],["name","note",1,"note",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"visibility-select"],["type","checkbox","clrCheckbox","",3,"ngModel","ngModelChange"],["class","private",4,"ngIf"],["class","public",4,"ngIf"],[3,"displayType","iconShape","createdAt","name","featured","collapsed","expandClick",4,"ngFor","ngForOf"],[3,"isLast","createdAt","featured"],[1,"title"],[1,"private"],[1,"public"],[3,"displayType","iconShape","createdAt","name","featured","collapsed","expandClick"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","title",4,"ngIf"],[3,"ngIf"],[4,"ngIf","ngIfElse"],["regularPaymentTransition",""],[4,"ngIf"],[3,"payment","currencyCode"],[3,"label"],[3,"items"],[3,"fulfillmentId","order"],[1,"flex"],[1,"note-text"],["class","note-visibility public",4,"ngIf"],["class","note-visibility private",4,"ngIf"],[1,"flex-spacer"],["vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","edit"],[1,"dropdown-divider"],["shape","trash",1,"is-danger"],[1,"note-visibility","public"],[1,"note-visibility","private"],[3,"routerLink"],[1,"cancelled-coupon-code"]],template:function(t,e){1&t&&(n.ic(0,"h4"),n.Xc(1),n.sc(2,"translate"),n.hc(),n.ic(3,"div",0),n.ic(4,"vdr-timeline-entry",1),n.ic(5,"div",2),n.ic(6,"textarea",3),n.pc("ngModelChange",(function(t){return e.note=t})),n.hc(),n.ic(7,"button",4),n.pc("click",(function(){return e.addNoteToOrder()})),n.Xc(8),n.sc(9,"translate"),n.hc(),n.hc(),n.ic(10,"div",5),n.ic(11,"clr-checkbox-wrapper"),n.ic(12,"input",6),n.pc("ngModelChange",(function(t){return e.noteIsPrivate=t})),n.hc(),n.ic(13,"label"),n.Xc(14),n.sc(15,"translate"),n.hc(),n.hc(),n.Vc(16,ee,3,3,"span",7),n.Vc(17,ce,3,3,"span",8),n.hc(),n.hc(),n.Vc(18,_e,11,16,"vdr-timeline-entry",9),n.ic(19,"vdr-timeline-entry",10),n.ic(20,"div",11),n.Xc(21),n.sc(22,"translate"),n.hc(),n.hc(),n.hc()),2&t&&(n.Rb(1),n.Yc(n.tc(2,16,"order.order-history")),n.Rb(2),n.Ub("expanded",e.expanded),n.Rb(1),n.yc("featured",!0),n.Rb(2),n.yc("ngModel",e.note),n.Rb(1),n.yc("disabled",!e.note),n.Rb(1),n.Zc(" ",n.tc(9,18,"common.add-note")," "),n.Rb(4),n.yc("ngModel",e.noteIsPrivate),n.Rb(2),n.Yc(n.tc(15,20,"order.note-is-private")),n.Rb(2),n.yc("ngIf",e.noteIsPrivate),n.Rb(1),n.yc("ngIf",!e.noteIsPrivate),n.Rb(1),n.yc("ngForOf",e.history),n.Rb(1),n.yc("isLast",!0)("createdAt",e.order.createdAt)("featured",!0),n.Rb(2),n.Zc(" ",n.tc(22,22,"order.history-order-created")," "))},directives:function(){return[r.Rb,r.eb,o.b,o.p,o.s,M.k,o.a,M.i,M.u,P.p,P.o,P.r,P.s,r.lb,pc,r.vb,gc,Je,r.S,r.V,M.o,r.U,r.T,r.B,s.h]},pipes:function(){return[S.d,r.ib]},styles:["[_nghost-%COMP%]{display:block;margin-top:48px}.entry-list[_ngcontent-%COMP%]{margin-left:24px;margin-right:12px;margin-top:24px}.note-entry[_ngcontent-%COMP%]{align-items:center;display:flex}.note-entry[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{flex:1}.note-entry[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.visibility-select[_ngcontent-%COMP%]{align-items:baseline;display:flex;justify-content:space-between}.visibility-select[_ngcontent-%COMP%]   .public[_ngcontent-%COMP%]{color:#ff9f07}.visibility-select[_ngcontent-%COMP%]   .private[_ngcontent-%COMP%]{color:#308300}textarea.note[_ngcontent-%COMP%]{border-radius:3px;flex:1;height:36px;margin-right:6px}.note-text[_ngcontent-%COMP%]{color:#202223;white-space:pre-wrap}.cancelled-coupon-code[_ngcontent-%COMP%]{text-decoration:line-through}.note-visibility[_ngcontent-%COMP%]{text-transform:lowercase}.note-visibility.public[_ngcontent-%COMP%]{color:#ff9f07}.note-visibility.private[_ngcontent-%COMP%]{color:#308300}"],changeDetection:0}),oc.propDecorators={order:[{type:n.D}],history:[{type:n.D}],addNote:[{type:n.O}],updateNote:[{type:n.O}],deleteNote:[{type:n.O}]};class sc extends r.w{constructor(t,e,c,n,r){super(n,r),this.serverConfigService=t,this.dataService=e,this.localStorageService=c,this.searchTerm=new o.f(""),this.orderStates=this.serverConfigService.getOrderProcessStates().map(t=>t.name),this.filterPresets=[{name:"open",label:Object(i.a)("order.filter-preset-open"),config:{active:!1,states:this.orderStates.filter(t=>"Delivered"!==t&&"Cancelled"!==t&&"Shipped"!==t)}},{name:"shipped",label:Object(i.a)("order.filter-preset-shipped"),config:{active:!1,states:["Shipped"]}},{name:"completed",label:Object(i.a)("order.filter-preset-completed"),config:{active:!1,states:["Delivered","Cancelled"]}},{name:"active",label:Object(i.a)("order.filter-preset-active"),config:{active:!0}}],super.setQueryFn((...t)=>this.dataService.order.getOrders(...t).refetchOnChannelChange(),t=>t.orders,(t,e)=>this.createQueryOptions(t,e,this.searchTerm.value,this.route.snapshot.queryParamMap.get("filter")||"open"));const s=this.localStorageService.get("orderListLastCustomFilters");s&&this.setQueryParam(s,{replaceUrl:!0})}ngOnInit(){var t;super.ngOnInit(),this.activePreset$=this.route.queryParamMap.pipe(Object(g.a)(t=>t.get("filter")||"open"),Object(v.a)()),Object(f.a)(this.searchTerm.valueChanges.pipe(Object(O.a)(250)),this.route.queryParamMap).pipe(Object(R.a)(this.destroy$)).subscribe(t=>{this.refresh()});const e=this.route.snapshot.queryParamMap;this.customFilterForm=new o.i({states:new o.f(null!==(t=e.getAll("states"))&&void 0!==t?t:[]),placedAtStart:new o.f(e.get("placedAtStart")),placedAtEnd:new o.f(e.get("placedAtEnd"))})}selectFilterPreset(t){var e;const c=null!==(e=this.localStorageService.get("orderListLastCustomFilters"))&&void 0!==e?e:{},n="custom"===t?c:{states:void 0,placedAtStart:void 0,placedAtEnd:void 0};this.setQueryParam(Object.assign({filter:t,page:1},n),{replaceUrl:!0})}applyCustomFilters(){const t=this.customFilterForm.value,e={states:t.states,placedAtStart:t.placedAtStart,placedAtEnd:t.placedAtEnd};this.setQueryParam(Object.assign({filter:"custom"},e)),this.customFilterForm.markAsPristine(),this.localStorageService.set("orderListLastCustomFilters",e)}createQueryOptions(t,e,c,n){var i;const o=this.filterPresets.find(t=>t.name===n),s={};if(o)null!=o.config.active&&(s.active={eq:o.config.active}),o.config.states&&(s.state={in:o.config.states});else if("custom"===n){const t=this.route.snapshot.queryParamMap,e=null!==(i=t.getAll("states"))&&void 0!==i?i:[],c=t.get("placedAtStart"),n=t.get("placedAtEnd");e.length&&(s.state={in:e}),c&&n?s.orderPlacedAt={between:{start:c,end:n}}:c?s.orderPlacedAt={after:c}:n&&(s.orderPlacedAt={before:n})}return{options:{skip:t,take:e,filter:Object.assign(Object.assign({},null!=s?s:{}),{code:{contains:c}}),sort:{updatedAt:r.Lb.DESC}}}}}sc.\u0275fac=function(t){return new(t||sc)(n.cc(r.Jb),n.cc(r.K),n.cc(r.yb),n.cc(s.e),n.cc(s.a))},sc.\u0275cmp=n.Wb({type:sc,selectors:[["vdr-order-list"]],features:[n.Ob],decls:57,vars:60,consts:[[1,"search-form"],["class","btn-group btn-outline-primary",4,"ngIf"],["type","text","name","searchTerm",1,"clr-input","search-input",3,"formControl","placeholder"],[1,"custom-filters"],[3,"formGroup"],[1,"flex","align-center"],["appendTo","body","formControlName","states",3,"items","addTag","multiple","placeholder","clearable","searchable"],["ng-option-tmp",""],["ng-label-tmp",""],[1,"btn","btn-secondary",3,"disabled","click"],["shape","filter"],[1,"flex"],["formControlName","placedAtStart"],["formControlName","placedAtEnd"],["locationId","order-list"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn-group","btn-outline-primary"],["class","btn",3,"btn-primary","click",4,"ngFor","ngForOf"],[1,"btn",3,"click"],["shape","angle down"],[1,"ng-value-label"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],[1,"left","align-middle"],[3,"customer"],[3,"state"],[1,"right","align-middle"],["iconShape","shopping-cart",3,"label","linkTo"]],template:function(t,e){1&t&&(n.ic(0,"vdr-action-bar"),n.ic(1,"vdr-ab-left"),n.ic(2,"div",0),n.Vc(3,ke,6,6,"div",1),n.sc(4,"async"),n.dc(5,"input",2),n.sc(6,"translate"),n.hc(),n.ic(7,"div",3),n.sc(8,"async"),n.ic(9,"form",4),n.ic(10,"div",5),n.ic(11,"ng-select",6),n.sc(12,"translate"),n.Vc(13,Xe,3,5,"ng-template",7),n.Vc(14,De,6,5,"ng-template",8),n.hc(),n.ic(15,"button",9),n.pc("click",(function(){return e.applyCustomFilters()})),n.Xc(16),n.sc(17,"translate"),n.dc(18,"clr-icon",10),n.hc(),n.hc(),n.ic(19,"div",11),n.ic(20,"div"),n.ic(21,"label"),n.Xc(22),n.sc(23,"translate"),n.hc(),n.dc(24,"vdr-datetime-picker",12),n.hc(),n.ic(25,"div"),n.ic(26,"label"),n.Xc(27),n.sc(28,"translate"),n.hc(),n.dc(29,"vdr-datetime-picker",13),n.hc(),n.hc(),n.hc(),n.hc(),n.hc(),n.ic(30,"vdr-ab-right"),n.dc(31,"vdr-action-bar-items",14),n.hc(),n.hc(),n.ic(32,"vdr-data-table",15),n.pc("pageChange",(function(t){return e.setPageNumber(t)}))("itemsPerPageChange",(function(t){return e.setItemsPerPage(t)})),n.sc(33,"async"),n.sc(34,"async"),n.sc(35,"async"),n.sc(36,"async"),n.ic(37,"vdr-dt-column"),n.Xc(38),n.sc(39,"translate"),n.hc(),n.ic(40,"vdr-dt-column"),n.Xc(41),n.sc(42,"translate"),n.hc(),n.ic(43,"vdr-dt-column"),n.Xc(44),n.sc(45,"translate"),n.hc(),n.ic(46,"vdr-dt-column"),n.Xc(47),n.sc(48,"translate"),n.hc(),n.ic(49,"vdr-dt-column"),n.Xc(50),n.sc(51,"translate"),n.hc(),n.ic(52,"vdr-dt-column"),n.Xc(53),n.sc(54,"translate"),n.hc(),n.dc(55,"vdr-dt-column"),n.Vc(56,Te,18,20,"ng-template"),n.hc()),2&t&&(n.Rb(3),n.yc("ngIf",n.tc(4,26,e.activePreset$)),n.Rb(2),n.yc("formControl",e.searchTerm)("placeholder",n.tc(6,28,"order.search-by-order-code")),n.Rb(2),n.Ub("expanded","custom"===n.tc(8,30,e.activePreset$)),n.Rb(2),n.yc("formGroup",e.customFilterForm),n.Rb(2),n.yc("items",e.orderStates)("addTag",!1)("multiple",!0)("placeholder",n.tc(12,32,"state.all-orders"))("clearable",!0)("searchable",!1),n.Rb(4),n.yc("disabled",e.customFilterForm.pristine),n.Rb(1),n.Zc(" ",n.tc(17,34,"order.apply-filters")," "),n.Rb(6),n.Yc(n.tc(23,36,"order.placed-at-start")),n.Rb(5),n.Yc(n.tc(28,38,"order.placed-at-end")),n.Rb(5),n.yc("items",n.tc(33,40,e.items$))("itemsPerPage",n.tc(34,42,e.itemsPerPage$))("totalItems",n.tc(35,44,e.totalItems$))("currentPage",n.tc(36,46,e.currentPage$)),n.Rb(6),n.Yc(n.tc(39,48,"common.code")),n.Rb(3),n.Yc(n.tc(42,50,"order.customer")),n.Rb(3),n.Yc(n.tc(45,52,"order.state")),n.Rb(3),n.Yc(n.tc(48,54,"order.total")),n.Rb(3),n.Yc(n.tc(51,56,"common.updated-at")),n.Rb(3),n.Yc(n.tc(54,58,"order.placed-at")))},directives:[r.c,r.e,P.p,r.eb,o.b,o.p,o.g,o.E,o.q,o.j,I.a,o.h,I.d,I.e,M.o,M.u,r.N,r.f,r.d,r.M,r.L,P.o,r.J,r.Db,r.Pb],pipes:[P.b,S.d,r.Nb,P.d,r.Qb,P.f],styles:[".search-form[_ngcontent-%COMP%]{align-items:baseline;display:flex;flex-direction:column;margin-bottom:6px;width:100%}@media screen and (min-width:768px){.search-form[_ngcontent-%COMP%]{flex-direction:row}}.search-input[_ngcontent-%COMP%]{margin-left:6px;margin-top:6px;min-width:300px}.custom-filters[_ngcontent-%COMP%]{max-height:0;overflow:hidden;padding-bottom:6px}.custom-filters.expanded[_ngcontent-%COMP%]{max-height:none}.custom-filters[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column}.custom-filters[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}ng-select[_ngcontent-%COMP%]{flex:1;min-width:200px}ng-select[_ngcontent-%COMP%], ng-select[_ngcontent-%COMP%]     .ng-select-container{height:36px}"],changeDetection:0}),sc.ctorParameters=()=>[{type:r.Jb},{type:r.K},{type:r.yb},{type:s.e},{type:s.a}];class ac{constructor(){this.settlePayment=new n.u,this.settleRefund=new n.u}refundHasMetadata(t){return!!t&&Object.keys(t).length<0}}ac.\u0275fac=function(t){return new(t||ac)},ac.\u0275cmp=n.Wb({type:ac,selectors:[["vdr-order-payment-card"]],inputs:{payment:"payment",currencyCode:"currencyCode"},outputs:{settlePayment:"settlePayment",settleRefund:"settleRefund"},decls:11,vars:9,consts:[[1,"card"],[1,"card-header","payment-header"],[1,"payment-state"],[3,"state"],[1,"card-block"],[3,"payment","currencyCode"],[4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],["shape","redo","dir","down",1,"refund-icon"],[1,"clr-flex-fill"],[3,"label"],[3,"label",4,"ngIf"],[3,"value"],[1,"card-footer"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.ic(0,"div",0),n.ic(1,"div",1),n.ic(2,"div"),n.Xc(3),n.sc(4,"translate"),n.hc(),n.ic(5,"div",2),n.dc(6,"vdr-payment-state-label",3),n.hc(),n.hc(),n.ic(7,"div",4),n.dc(8,"vdr-payment-detail",5),n.hc(),n.Vc(9,Ae,20,23,"ng-container",6),n.Vc(10,Le,4,3,"div",7),n.hc()),2&t&&(n.Rb(3),n.ad("",n.tc(4,7,"order.payment")," #",e.payment.transactionId,""),n.Rb(3),n.yc("state",e.payment.state),n.Rb(2),n.yc("payment",e.payment)("currencyCode",e.currencyCode),n.Rb(1),n.yc("ngForOf",e.payment.refunds),n.Rb(1),n.yc("ngIf","Authorized"===e.payment.state))},directives:function(){return[mc,pc,P.o,P.p,M.o,x.b,hc,r.vb,r.Cb]},pipes:function(){return[S.d,P.f,P.d]},styles:[".payment-header[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between}.refund-icon[_ngcontent-%COMP%]{color:#97979a;margin-right:6px}"],changeDetection:0}),ac.propDecorators={payment:[{type:n.D}],currencyCode:[{type:n.D}],settlePayment:[{type:n.O}],settleRefund:[{type:n.O}]};const lc=72;class dc{constructor(t){this.elementRef=t,this.active$=new p.a(!1),this.activeTarget$=new p.a(!1),this.isCancellable=!1,this.cancelledState="Cancelled"}ngOnChanges(t){this.isCancellable=!!this.node.to.find(t=>"Cancelled"===t.name),t.active&&this.active$.next(this.active)}getPos(t="top"){var e,c;this.elementRef.nativeElement.getBoundingClientRect();const n=null!==(c=null===(e=this.elementRef.nativeElement.querySelector(".node"))||void 0===e?void 0:e.getBoundingClientRect().height)&&void 0!==c?c:0;return{x:10,y:this.index*lc+("bottom"===t?n:0)}}getStyle(){const t=this.getPos();return{"top.px":t.y,"left.px":t.x}}}dc.\u0275fac=function(t){return new(t||dc)(n.cc(n.s))},dc.\u0275cmp=n.Wb({type:dc,selectors:[["vdr-order-process-node"]],inputs:{node:"node",index:"index",active:"active"},features:[n.Pb],decls:8,vars:15,consts:[[1,"node-wrapper",3,"ngStyle"],[1,"node"],["class","cancelled-wrapper",4,"ngIf"],[1,"cancelled-wrapper"],[1,"cancelled-edge"],["shape","dot-circle"],[1,"cancelled-node"]],template:function(t,e){1&t&&(n.ic(0,"div",0),n.sc(1,"async"),n.ic(2,"div",1),n.sc(3,"async"),n.Xc(4),n.sc(5,"translate"),n.sc(6,"stateI18nToken"),n.hc(),n.Vc(7,Ye,7,5,"div",2),n.hc()),2&t&&(n.Ub("active",n.tc(1,7,e.active$)),n.yc("ngStyle",e.getStyle()),n.Rb(2),n.Ub("active-target",n.tc(3,9,e.activeTarget$)),n.Rb(2),n.Zc(" ",n.tc(5,11,n.tc(6,13,e.node.name))," "),n.Rb(3),n.yc("ngIf",e.isCancellable))},directives:[P.q,P.p,M.o],pipes:[P.b,S.d,r.Nb],styles:["[_nghost-%COMP%]{display:block}.node-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;position:absolute;z-index:1}.node[_ngcontent-%COMP%]{background-color:#fafafa;border:2px solid #bfc3cc;border-radius:3px;cursor:default;display:inline-block;opacity:.7;padding:3px 6px;transition:opacity .2s,background-color .2s,color .2s;z-index:1}.node.active-target[_ngcontent-%COMP%]{border-color:#13b7f3;opacity:.9}.cancelled-wrapper[_ngcontent-%COMP%]{align-items:center;color:#bfc3cc;display:flex;opacity:.7;transition:color .2s,opacity .2s}.cancelled-edge[_ngcontent-%COMP%]{background-color:#bfc3cc;height:2px;transition:background-color .2s;width:48px}clr-icon[_ngcontent-%COMP%]{margin-left:-1px}.cancelled-node[_ngcontent-%COMP%]{margin-left:6px}.active[_ngcontent-%COMP%]   .cancelled-wrapper[_ngcontent-%COMP%]{opacity:1}.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#137fac;border-color:#137fac;color:#e3f6fc;opacity:1}.active[_ngcontent-%COMP%]   .cancelled-wrapper[_ngcontent-%COMP%]{color:#c92100}.active[_ngcontent-%COMP%]   .cancelled-edge[_ngcontent-%COMP%]{background-color:#c92100}"],changeDetection:0}),dc.ctorParameters=()=>[{type:n.s}],dc.propDecorators={node:[{type:n.D}],index:[{type:n.D}],active:[{type:n.D}]};class uc{ngOnInit(){this.active$=this.from.active$.asObservable().pipe(Object(C.a)(t=>this.to.activeTarget$.next(t)))}getStyle(){const t=this.from.index<this.to.index?"down":"up",e=this.from.getPos("down"===t?"bottom":"top"),c=this.to.getPos("down"===t?"top":"bottom"),n=Math.abs(e.x-c.x),i=Math.abs(e.y-c.y),r=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));return Object.assign({"top.px":e.y,"left.px":e.x+("down"===t?10:40)+12*this.index,"height.px":r,"width.px":1},"up"===t?{transform:"rotateZ(180deg)","transform-origin":"top"}:{})}}uc.\u0275fac=function(t){return new(t||uc)},uc.\u0275cmp=n.Wb({type:uc,selectors:[["vdr-order-process-edge"]],inputs:{from:"from",to:"to",index:"index"},decls:3,vars:7,consts:[[1,"edge",3,"ngStyle"],["shape","arrow","flip","vertical",1,"arrow"]],template:function(t,e){1&t&&(n.ic(0,"div",0),n.sc(1,"async"),n.dc(2,"clr-icon",1),n.hc()),2&t&&(n.Ub("active",n.tc(1,5,e.active$)),n.yc("ngStyle",e.getStyle()),n.Sb("data-from",e.from.node.name)("data-to",e.to.node.name))},directives:[P.q,M.o],pipes:[P.b],styles:[".edge[_ngcontent-%COMP%]{background-color:#bfc3cc;border:1px solid #bfc3cc;opacity:.3;position:absolute;transition:border .2s,opacity .2s,background-color .2s}.edge.active[_ngcontent-%COMP%]{background-color:#13b7f3;border-color:#13b7f3;opacity:1}.edge.active[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{color:#13b7f3}.edge[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{bottom:-4px;color:#bfc3cc;left:-8px;position:absolute}"],changeDetection:0}),uc.propDecorators={from:[{type:n.D}],to:[{type:n.D}],index:[{type:n.D}]};class fc{constructor(t){this.changeDetector=t,this.setActiveState$=new p.a(void 0),this.nodes=[],this.edges=[]}get outerHeight(){return this.nodes.length*lc}ngOnInit(){this.setActiveState$.next(this.initialState),this.activeState$=this.setActiveState$.pipe(Object(O.a)(150))}ngOnChanges(t){this.populateNodes()}ngAfterViewInit(){setTimeout(()=>this.populateEdges())}onMouseOver(t){this.setActiveState$.next(t)}onMouseOut(){this.setActiveState$.next(this.initialState)}getNodeFor(t){if(this.nodeComponents)return this.nodeComponents.find(e=>e.node.name===t)}populateNodes(){var t,e;const c=new Map;for(const n of this.states)c.set(n.name,{name:n.name,to:[]});for(const[n,i]of c.entries()){const r=null!==(e=null===(t=this.states.find(t=>t.name===n))||void 0===t?void 0:t.to)&&void 0!==e?e:[];for(const t of r){const e=c.get(t);e&&i.to.push(e)}}this.nodes=[...c.values()].filter(t=>"Cancelled"!==t.name)}populateEdges(){for(const t of this.nodes){const e=this.getNodeFor(t.name);let c=0;for(const n of t.to){const t=this.getNodeFor(n.name);e&&t&&e!==t&&(this.edges.push({to:t,from:e,index:c}),c++)}}this.edges=[...this.edges],this.changeDetector.markForCheck()}}fc.\u0275fac=function(t){return new(t||fc)(n.cc(n.k))},fc.\u0275cmp=n.Wb({type:fc,selectors:[["vdr-order-process-graph"]],viewQuery:function(t,e){var c;(1&t&&n.cd(dc,!0),2&t)&&(n.Ic(c=n.qc())&&(e.nodeComponents=c))},hostVars:2,hostBindings:function(t,e){2&t&&n.Sc("height",e.outerHeight,"px")},inputs:{states:"states",initialState:"initialState"},features:[n.Pb],decls:2,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"node","index","active","mouseenter","mouseleave"],[3,"from","to","index"]],template:function(t,e){1&t&&(n.Vc(0,Ze,3,5,"ng-container",0),n.Vc(1,qe,2,3,"ng-container",0)),2&t&&(n.yc("ngForOf",e.nodes),n.Rb(1),n.yc("ngForOf",e.edges))},directives:[P.o,dc,uc],pipes:[P.b],styles:["[_nghost-%COMP%]{border:1px #ff69b4;display:block;margin:20px;padding:12px;position:relative}.state-row[_ngcontent-%COMP%]{display:flex}"],changeDetection:0}),fc.ctorParameters=()=>[{type:n.k}],fc.propDecorators={states:[{type:n.D}],initialState:[{type:n.D}],nodeComponents:[{type:n.fb,args:[dc]}],outerHeight:[{type:n.w,args:["style.height.px"]}]};class pc{}pc.\u0275fac=function(t){return new(t||pc)},pc.\u0275cmp=n.Wb({type:pc,selectors:[["vdr-payment-detail"]],inputs:{payment:"payment",currencyCode:"currencyCode"},decls:13,vars:19,consts:[[3,"label"],[3,"value"]],template:function(t,e){1&t&&(n.ic(0,"vdr-labeled-data",0),n.sc(1,"translate"),n.Xc(2),n.hc(),n.ic(3,"vdr-labeled-data",0),n.sc(4,"translate"),n.Xc(5),n.sc(6,"currency"),n.hc(),n.ic(7,"vdr-labeled-data",0),n.sc(8,"translate"),n.Xc(9),n.hc(),n.ic(10,"vdr-labeled-data",0),n.sc(11,"translate"),n.dc(12,"vdr-object-tree",1),n.hc()),2&t&&(n.yc("label",n.tc(1,8,"order.payment-method")),n.Rb(2),n.Zc(" ",e.payment.method,"\n"),n.Rb(1),n.yc("label",n.tc(4,10,"order.amount")),n.Rb(2),n.Zc(" ",n.uc(6,12,e.payment.amount/100,e.currencyCode),"\n"),n.Rb(2),n.yc("label",n.tc(8,15,"order.transaction-id")),n.Rb(2),n.Zc(" ",e.payment.transactionId,"\n"),n.Rb(1),n.yc("label",n.tc(11,17,"order.payment-metadata")),n.Rb(2),n.yc("value",e.payment.metadata))},directives:[r.vb,r.Cb],pipes:[S.d,P.d],styles:[""],changeDetection:0}),pc.propDecorators={payment:[{type:n.D}],currencyCode:[{type:n.D}]};class mc{get chipColorType(){switch(this.state){case"Authorized":return"warning";case"Settled":return"success";case"Declined":return"error"}}}mc.\u0275fac=function(t){return new(t||mc)},mc.\u0275cmp=n.Wb({type:mc,selectors:[["vdr-payment-state-label"]],inputs:{state:"state"},decls:6,vars:10,consts:[[3,"title","colorType"],["shape","check-circle",4,"ngIf"],["shape","check-circle"]],template:function(t,e){1&t&&(n.ic(0,"vdr-chip",0),n.sc(1,"translate"),n.Vc(2,We,1,0,"clr-icon",1),n.Xc(3),n.sc(4,"translate"),n.sc(5,"stateI18nToken"),n.hc()),2&t&&(n.yc("title",n.tc(1,4,"order.payment-state"))("colorType",e.chipColorType),n.Rb(2),n.yc("ngIf","Settled"===e.state),n.Rb(1),n.Zc(" ",n.tc(4,6,n.tc(5,8,e.state)),"\n"))},directives:[r.B,P.p,M.o],pipes:[S.d,r.Nb],styles:["[_nghost-%COMP%]{font-size:14px}"],changeDetection:0}),mc.propDecorators={state:[{type:n.D}]};class hc{get chipColorType(){switch(this.state){case"Pending":return"warning";case"Settled":return"success";case"Failed":return"error"}}}hc.\u0275fac=function(t){return new(t||hc)},hc.\u0275cmp=n.Wb({type:hc,selectors:[["vdr-refund-state-label"]],inputs:{state:"state"},decls:6,vars:10,consts:[[3,"title","colorType"],["shape","check-circle",4,"ngIf"],["shape","check-circle"]],template:function(t,e){1&t&&(n.ic(0,"vdr-chip",0),n.sc(1,"translate"),n.Vc(2,Qe,1,0,"clr-icon",1),n.Xc(3),n.sc(4,"translate"),n.sc(5,"stateI18nToken"),n.hc()),2&t&&(n.yc("title",n.tc(1,4,"order.payment-state"))("colorType",e.chipColorType),n.Rb(2),n.yc("ngIf","Settled"===e.state),n.Rb(1),n.Zc(" ",n.tc(4,6,n.tc(5,8,e.state)),"\n"))},directives:[r.B,P.p,M.o],pipes:[S.d,r.Nb],styles:["[_nghost-%COMP%]{font-size:14px}"],changeDetection:0}),hc.propDecorators={state:[{type:n.D}]};class gc{}gc.\u0275fac=function(t){return new(t||gc)},gc.\u0275cmp=n.Wb({type:gc,selectors:[["vdr-simple-item-list"]],inputs:{items:"items"},decls:3,vars:1,consts:[[1,"items-list"],[3,"title",4,"ngFor","ngForOf"],[3,"title"],[1,"quantity"],["shape","times","size","12"]],template:function(t,e){1&t&&(n.ic(0,"div",0),n.ic(1,"ul"),n.Vc(2,Ue,5,3,"li",1),n.hc(),n.hc()),2&t&&(n.Rb(2),n.yc("ngForOf",e.items))},directives:[P.o,M.o],styles:[".items-list[_ngcontent-%COMP%]{font-size:12px}.items-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin-left:2px;margin-top:6px}.items-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:14px;overflow:hidden;text-overflow:ellipsis}.items-list[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{display:inline-block;min-width:16px}"],changeDetection:0}),gc.propDecorators={items:[{type:n.D}]};class bc extends r.v{constructor(t,e){super(t,{__typename:"Order",id:"",code:"",createdAt:"",updatedAt:"",total:0},t=>e.order.getOrder(t).mapStream(t=>t.order))}}bc.\u0275fac=function(t){return new(t||bc)(n.mc(s.e),n.mc(r.K))},bc.\u0275prov=Object(n.Yb)({factory:function(){return new bc(Object(n.mc)(s.e),Object(n.mc)(r.K))},token:bc,providedIn:"root"}),bc.ctorParameters=()=>[{type:s.e},{type:r.K}];const yc={breadcrumb:Object(i.a)("breadcrumb.orders")},vc={breadcrumb:Rc},Oc=[{path:"",component:sc,data:yc},{path:":id",component:rc,resolve:Object(r.Vb)(bc),canDeactivate:[r.x],data:vc}];function Rc(t,e){return Object(r.Xb)({entity:t.entity,id:e.id,breadcrumbKey:"breadcrumb.orders",getName:t=>t.code,route:""})}class Cc{}Cc.\u0275mod=n.ac({type:Cc}),Cc.\u0275inj=n.Zb({factory:function(t){return new(t||Cc)},imports:[[r.Kb,s.i.forChild(Oc)]]})}}]);