{"version":3,"sources":["webpack:///C:/Users/bipla/OneDrive/Documents/SanitizeBack/danfe/node_modules/rxjs/_esm2015/internal/operators/withLatestFrom.js","webpack:///C:/Users/bipla/OneDrive/Documents/SanitizeBack/danfe/node_modules/rxjs/_esm2015/internal/operators/delay.js","webpack:///C:/Users/bipla/OneDrive/Documents/SanitizeBack/danfe/node_modules/@vendure/admin-ui/__ivy_ngcc__/fesm2015/vendure-admin-ui-catalog.js","webpack:///C:/Users/bipla/OneDrive/Documents/SanitizeBack/danfe/node_modules/rxjs/_esm2015/internal/util/isDate.js","webpack:///C:/Users/bipla/OneDrive/Documents/SanitizeBack/danfe/node_modules/@vendure/common/lib/unique.js"],"names":["withLatestFrom","args","source","project","length","pop","observables","lift","WithLatestFromOperator","this","subscriber","subscribe","destination","super","toRespond","len","values","Array","i","push","observable","add","subscribeToResult","outerValue","innerValue","outerIndex","innerIndex","innerSub","found","indexOf","splice","value","_tryProject","next","result","apply","err","error","OuterSubscriber","DelayOperator","delay","scheduler","queue","active","errored","schedule","dispatch","notification","message","DelayMessage","now","_schedule","scheduleNotification","Notification","createNext","unsubscribe","createComplete","state","time","shift","observe","Math","max","Subscriber","AssetDetailComponent_button_6_Template","rf","ctx","_r2","save","ctx_r0","detailForm","invalid","pristine","_c0","CollectionContentsComponent_ng_container_2_Template","_c1","tab","_c2","a1","a2","CollectionContentsComponent_ng_template_11_Template","variant_r2","item","name","productId","_c3","a0","$implicit","_c4","CollectionDetailComponent_button_10_Template","_r5","create","CollectionDetailComponent_ng_template_12_button_0_Template","_r8","ctx_r6","assetsChanged","CollectionDetailComponent_ng_template_12_Template","CollectionDetailComponent_form_14_ng_container_9_Template","CollectionDetailComponent_form_14_ng_template_10_Template","_c5","CollectionDetailComponent_form_14_section_24_ng_container_4_vdr_custom_field_control_1_Template","customField_r19","ctx_r20","get","CollectionDetailComponent_form_14_section_24_ng_container_4_Template","ctx_r18","customFieldIsSet","CollectionDetailComponent_form_14_section_24_Template","ctx_r13","customFields","CollectionDetailComponent_form_14_ng_container_32_Template","_r25","$event","removeFilter","filter_r22","i_r23","index","ctx_r14","facets$","getFilterDefinition","activeChannel$","CollectionDetailComponent_form_14_div_33_button_7_Template","_r29","filter_r27","addFilter","description","CollectionDetailComponent_form_14_div_33_Template","ctx_r15","allFilters","_c6","count","CollectionDetailComponent_form_14_ng_template_37_Template","count_r30","_c7","pattern","CollectionDetailComponent_form_14_Template","_r32","updateSlug","target","assetChanges","category_r9","ngIf","_r11","ctx_r3","visible","assets","featuredAsset","filters","id","_c8","CollectionListComponent_a_9_Template","CollectionListComponent_ng_template_18_Template","_r4","closeContents","count_r2","ctx_r1","activeCollectionTitle$","FacetDetailComponent_button_10_Template","FacetDetailComponent_ng_template_12_button_0_Template","FacetDetailComponent_ng_template_12_Template","FacetDetailComponent_form_14_ng_container_8_Template","FacetDetailComponent_form_14_ng_template_9_Template","_c9","FacetDetailComponent_form_14_section_20_ng_container_4_vdr_custom_field_control_1_Template","customField_r16","ctx_r17","FacetDetailComponent_form_14_section_20_ng_container_4_Template","FacetDetailComponent_form_14_section_20_Template","FacetDetailComponent_form_14_section_21_table_4_ng_container_10_Template","customField_r23","_c10","FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_vdr_custom_field_control_2_Template","customField_r27","i_r25","ctx_r28","FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_Template","ctx_r26","customValueFieldIsSet","FacetDetailComponent_form_14_section_21_table_4_tr_13_Template","_r34","facet_r9","updateValueCode","code","deleteFacetValue","value_r24","ctx_r22","customValueFields","FacetDetailComponent_form_14_section_21_table_4_Template","ctx_r19","FacetDetailComponent_form_14_section_21_button_6_Template","_r38","addFacetValue","FacetDetailComponent_form_14_section_21_Template","getValuesFormArray","FacetDetailComponent_form_14_Template","_r40","updateCode","facet","isNew$","FacetListComponent_a_3_Template","FacetListComponent_ng_template_23_vdr_facet_value_chip_5_Template","value_r8","FacetListComponent_ng_template_23_button_7_ng_container_1_Template","facet_r2","ctx_r9","initialLimit","FacetListComponent_ng_template_23_button_7_ng_template_2_Template","FacetListComponent_ng_template_23_button_7_Template","_r15","toggleDisplayLimit","_r10","ctx_r4","displayLimit","FacetListComponent_ng_template_23_ng_container_10_Template","FacetListComponent_ng_template_23_ng_template_11_Template","_c11","FacetListComponent_ng_template_23_Template","_r18","deleteFacet","_r6","isPrivate","ApplyFacetDialogComponent_ng_template_0_Template","ApplyFacetDialogComponent_ng_template_2_Template","_r3","cancel","selectValues","selectedValues","AssignProductsToChannelDialogComponent_ng_template_0_Template","_c12","channel","AssignProductsToChannelDialogComponent_ng_template_29_Template","selectedChannel","AssignProductsToChannelDialogComponent_ng_template_30_Template","AssignProductsToChannelDialogComponent_tr_33_ng_template_7_Template","row_r6","ctx_r7","pricePreview","currencyCode","AssignProductsToChannelDialogComponent_tr_33_ng_template_8_Template","AssignProductsToChannelDialogComponent_tr_33_Template","price","currentChannel","_c13","channelCode","AssignProductsToChannelDialogComponent_ng_template_35_ng_template_4_Template","ctx_r11","AssignProductsToChannelDialogComponent_ng_template_35_ng_template_5_Template","AssignProductsToChannelDialogComponent_ng_template_35_Template","assign","_r12","ctx_r5","_c14","ProductDetailComponent_clr_toggle_wrapper_5_Template","ProductDetailComponent_button_12_Template","variantsToCreateAreValid","ProductDetailComponent_ng_template_14_button_0_Template","_r9","variantAssetsChanged","ProductDetailComponent_ng_template_14_Template","ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_ng_container_4_vdr_chip_1_Template","_r24","channel_r20","removeFromChannel","ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_ng_container_4_Template","isDefaultChannel","ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_Template","_r27","assignToChannel","productChannels$","ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_Template","_c15","ProductDetailComponent_form_16_clr_tab_content_6_section_17_ng_container_4_vdr_custom_field_control_1_Template","customField_r29","ctx_r30","ProductDetailComponent_form_16_clr_tab_content_6_section_17_ng_container_4_Template","ProductDetailComponent_form_16_clr_tab_content_6_section_17_Template","ProductDetailComponent_form_16_clr_tab_content_6_vdr_facet_value_chip_19_Template","facetValue_r32","removeProductFacetValue","ProductDetailComponent_form_16_clr_tab_content_6_button_21_Template","_r36","selectProductFacetValue","ProductDetailComponent_form_16_clr_tab_content_6_div_24_Template","createVariantsConfig","ProductDetailComponent_form_16_clr_tab_content_6_Template","product_r10","facetValues$","_c16","ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_a_13_Template","ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_table_14_Template","ctx_r45","variants$","optionGroups","ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_list_15_Template","_r49","variantAssetChange","updateProductOption","selectedVariantIds","selectVariantFacetValue","ctx_r46","taxCategories$","customVariantFields","customOptionFields","languageCode$","ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_Template","_r55","variantDisplayMode","ctx_r43","ProductDetailComponent_form_16_clr_tab_8_Template","_r58","navigateToTab","ctx_r12","activeTab$","ProductDetailComponent_form_16_Template","_r60","preventDefault","_c17","ProductSearchInputComponent_ng_template_3_div_0_Template","selectTag","_r0","isSearchHeaderSelected","searchTerm","ProductSearchInputComponent_ng_template_3_Template","ProductSearchInputComponent_ng_template_4_ng_container_0_Template","_r13","item_r7","clear","facetValue","ProductSearchInputComponent_ng_template_4_ng_container_1_Template","_r17","ctx_r16","label","ProductSearchInputComponent_ng_template_4_Template","ProductSearchInputComponent_ng_template_5_ng_container_0_Template","item_r19","ProductSearchInputComponent_ng_template_5_Template","_c18","ProductListComponent_a_21_Template","ProductListComponent_ng_template_27_img_2_Template","asset_r8","ProductListComponent_ng_template_27_ng_template_3_Template","ProductListComponent_ng_template_27_vdr_chip_8_Template","ProductListComponent_ng_template_27_Template","result_r3","deleteProduct","ctx_r2","enabled","groupByProduct","productAsset","productVariantAsset","productName","productVariantName","ProductVariantsEditorComponent_div_5_Template","generateVariants","group_r3","isNew","ProductVariantsEditorComponent_button_6_Template","addOption","ProductVariantsEditorComponent_tr_27_input_2_Template","_r21","variant_r11","variantFormValues","formValueChanged","ProductVariantsEditorComponent_tr_27_clr_input_container_6_Template","_r26","sku","onFormChanged","ProductVariantsEditorComponent_tr_27_span_7_Template","ProductVariantsEditorComponent_tr_27_clr_input_container_9_Template","_r33","ctx_r35","ProductVariantsEditorComponent_tr_27_span_10_Template","ProductVariantsEditorComponent_tr_27_clr_input_container_12_Template","stock","ctx_r42","ProductVariantsEditorComponent_tr_27_span_13_Template","ProductVariantsEditorComponent_tr_27_vdr_dropdown_15_Template","_r48","productVariantId_r46","deleteVariant","ProductVariantsEditorComponent_tr_27_Template","existing","getVariantName","productVariantId","CollectionTreeComponent_vdr_collection_tree_node_0_Template","expandAll","collectionTree","activeCollectionId","CollectionTreeNodeComponent_div_3_button_3_clr_icon_1_Template","CollectionTreeNodeComponent_div_3_button_3_clr_icon_2_Template","CollectionTreeNodeComponent_div_3_button_3_Template","_r16","collection_r2","expanded","CollectionTreeNodeComponent_div_3_ng_template_4_Template","CollectionTreeNodeComponent_div_3_vdr_chip_8_Template","CollectionTreeNodeComponent_div_3_div_17_Template","_c19","parentId","_c20","CollectionTreeNodeComponent_div_3_a_22_Template","CollectionTreeNodeComponent_div_3_button_37_Template","_r22","move","ctx_r10","hasUpdatePermission$","path","CollectionTreeNodeComponent_div_3_vdr_collection_tree_node_44_Template","_c21","contents","_c22","CollectionTreeNodeComponent_div_3_Template","i_r3","moveUp","moveDown","depth","children","getMoveListItems","hasDeletePermission$","GenerateProductVariantsComponent_div_0_Template","_r7","handleEnter","group_r4","removeOption","GenerateProductVariantsComponent_th_9_Template","GenerateProductVariantsComponent_th_10_Template","GenerateProductVariantsComponent_tr_20_td_1_Template","onFormChange","variant_r12","GenerateProductVariantsComponent_tr_20_td_2_Template","join","GenerateProductVariantsComponent_tr_20_Template","variants","_c23","OptionValueInputComponent_div_1_vdr_chip_1_Template","option_r3","isLast_r4","last","lastSelected","locked","groupName","OptionValueInputComponent_div_1_Template","options","_c24","_c25","ProductAssetsComponent_div_0_img_3_Template","previewAsset","ProductAssetsComponent_div_0_div_4_Template","ProductAssetsComponent_div_0_ng_container_6_Template","ProductAssetsComponent_div_0_div_7_Template","selectAssets","ProductAssetsComponent_div_0_Template","ProductAssetsComponent_ng_template_1_img_1_Template","ProductAssetsComponent_ng_template_1_div_2_Template","ProductAssetsComponent_ng_template_1_ng_container_3_Template","ProductAssetsComponent_ng_template_1_button_4_Template","_r20","ProductAssetsComponent_ng_template_1_Template","ProductAssetsComponent_ng_template_3_div_5_Template","dropListDropped","dragMoved","asset_r24","setAsFeatured","removeAsset","ctx_r23","dropListEnterPredicate","isFeatured","ProductAssetsComponent_ng_template_3_Template","compact","UpdateProductOptionDialogComponent_ng_template_0_Template","UpdateProductOptionDialogComponent_section_9_ng_container_4_vdr_custom_field_control_1_Template","customField_r6","customFieldsForm","UpdateProductOptionDialogComponent_section_9_ng_container_4_Template","UpdateProductOptionDialogComponent_section_9_Template","UpdateProductOptionDialogComponent_ng_template_10_Template","update","_r1","ProductVariantsListComponent_div_1_ng_container_1_clr_toggle_wrapper_16_Template","ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_option_5_Template","taxCategory_r14","ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_Template","taxCategories","ProductVariantsListComponent_div_1_ng_container_1_ng_template_26_Template","i_r2","getTaxCategoryName","ProductVariantsListComponent_div_1_ng_container_1_section_51_ng_container_1_vdr_custom_field_control_1_Template","customField_r17","formArray","at","ProductVariantsListComponent_div_1_ng_container_1_section_51_ng_container_1_Template","ProductVariantsListComponent_div_1_ng_container_1_section_51_Template","ctx_r8","ProductVariantsListComponent_div_1_ng_container_1_div_55_vdr_chip_2_Template","option_r23","editOption","optionGroupName","groupId","optionName","ProductVariantsListComponent_div_1_ng_container_1_div_55_Template","variant_r1","ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_58_Template","_r30","facetValue_r27","removeFacetValue","ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_59_Template","facetValue_r31","ProductVariantsListComponent_div_1_ng_container_1_button_60_Template","_r37","selectFacetValueClick","emit","_c26","_c27","ProductVariantsListComponent_div_1_ng_container_1_Template","onAssetChange","ctx_r41","priceIncludesTax","existingFacetValues","pendingFacetValues","_c28","ProductVariantsListComponent_div_1_Template","tmp_0_0","currVal_0","ProductVariantsTableComponent_ng_container_8_Template","optionGroup_r2","ProductVariantsTableComponent_ng_template_19_img_4_Template","variant_r3","ProductVariantsTableComponent_ng_template_19_div_5_Template","ProductVariantsTableComponent_ng_template_19_ng_container_16_Template","option_r9","i_r4","ProductVariantsTableComponent_ng_template_19_Template","_c29","rate","VariantPriceDetailComponent_div_3_Template","taxRate$","_c30","VariantPriceDetailComponent_div_4_Template","grossPrice$","router","route","serverConfigService","notificationService","dataService","formBuilder","init","destroy","event","setValue","markAsDirty","product","updateAsset","success","entity","languageCode","ɵfac","t","ɵcmp","type","selectors","features","decls","vars","consts","template","entity$","directives","pipes","styles","changeDetection","ctorParameters","modalService","uploading","getAssetList","data","skip","take","filter","contains","sort","createdAt","SortOrder","DESC","paginationConfig$","combineLatest","itemsPerPage$","currentPage$","totalItems$","pipe","map","itemsPerPage","currentPage","totalItems","valueChanges","debounceTime","takeUntil","destroy$","refresh","files","createAssets","finalize","res","asset","showModalAndDelete","switchMap","response","DELETED","r","assetId","dialog","title","body","buttons","returnValue","deleteAsset","filesSelected","setItemsPerPage","setPageNumber","items$","filterTermControl","collectionIdChange$","BehaviorSubject","refresh$","Subject","contentsCurrentPage$","paramMap","qpm","page","startWith","distinctUntilChanged","contentsItemsPerPage$","perPage","filterTerm$","tap","setContentsPageNumber","collection$","filterTerm","collection","getCollectionContents","mapSingle","of","contents$","productVariants","items","contentsTotalItems$","changes","collectionId","currentValue","complete","setParam","key","navigate","Object","snapshot","params","relativeTo","queryParamsHandling","contentQueries","dirIndex","_t","headerTemplate","first","inputs","setContentsItemsPerPage","String","prototype","static","changeDetector","getCustomFieldConfig","group","required","slug","array","reduce","hash","field","getAllFacets","facets","shareReplay","getCollectionFilters","single$","collectionFilters","settings","getActiveChannel","mapStream","activeChannel","find","f","nameValue","slugControl","normalizeString","collectionFilter","filtersArray","findIndex","o","argsHash","output","arg","control","removeAt","dirty","mergeMap","category","input","getUpdatedCollection","createCollection","markAsPristine","markForCheck","updateCollection","contentsComponent","assetIds","featuredAssetId","currentTranslation","translations","patchValue","forEach","customFieldsGroup","fieldDef","form","updatedCategory","translatable","updatedFields","customFieldConfig","defaultTranslation","mapOperationsToInputs","operations","formValueOperations","arguments","j","toString","viewQuery","setLanguage","availableLanguages$","queryResult","getCollections","refetchOnChannelChange","collections","activeCollectionId$","pm","match","c","moveCollection","parent","hasChildren","deleteCollection","ref","refetch","onRearrange","currentCode","codeControl","valuesFormArray","insert","facetForm","newFacet","getUpdatedFacet","createFacet","mapTo","facetGroup","updateOperations","updateFacet","valuesArray","newValues","controls","facetId","createFacetValues","getFacet","updatedValues","getUpdatedFacetValues","updateFacetValues","forkJoin","facetValueId","deleted","deleteFacetValues","currentValuesFormArray","valueTranslation","customValueFieldsGroup","addControl","fieldValue","facetFormGroup","dirtyValues","v","formRow","dirtyValueValues","Error","notNullOrUndefined","getFacets","getTaxCategories","createProduct$","createProduct","nonEmptyOptionGroups","groups","g","createOptionGroups$","createProductOptionGroups","optionGroup","addOptionGroupToProduct","optionGroupId","optionIds","optionValues","option","og","flat","createProductVariants","createProductOptionGroup","variantData","stockOnHand","productInput","variantInput","updateProduct","updateProductVariants","deleteProductVariant","getProduct","throwError","ɵprov","factory","token","providedIn","ApplyFacetDialogComponent","setTimeout","selector","focus","resolveWith","priceFactorControl","selectedChannelIdControl","activeChannelId$","client","userStatus","activeChannelId","allChannels$","getChannels","channels","availableChannels","ids","selectChannel","variantsPreview$","from","getTopVariants","factor","channelIds","assignProductsToChannel","channelId","productIds","priceFactor","toPromise","slice","productDetailService","location","variantAssetChanges","customOptionGroupFields","facetValueIds","product$","productFacetValues$","facetValues","allFacetValues$","formFacetValueIdChanges$","getProductFormGroup","val","formChangeFacetValues$","allFacetValues","productFacetValues","combined","fv","merge","p","tabName","DEFAULT_CHANNEL_CODE","fromComponent","size","locals","removeProductsFromChannel","keys","variantId","displayFacetValueModal","productGroup","currentFacetValueIds","unique","variant","existingFacetValueIds","variantFormGroup","every","closable","newProduct","getUpdatedProduct","createProductWithVariants","console","variantsInput","variantsArray","getUpdatedProductVariants","updateSlugAfterSave","cfCurrentTranslation","cfProduct","variantsFormArray","variantTranslation","priceWithTax","taxCategoryId","taxCategory","trackInventory","productFormGroup","updatedProduct","dirtyVariants","dirtyVariantValues","formValue","results","firstResult","hasOwnProperty","emitEvent","ProductVariantsTableComponent","ProductSearchSelectionModel","_selected","multiple","groupAsModel","selected","isSearchTerm","concat","x","keepDisabled","disabled","ProductSearchSelectionModelFactory","ɵ0","searchTermChange","facetValueChange","lastTerm","lastFacetValueIds","filterFacetResults","term","isFacetValueItem","toLowerCase","startsWith","groupByFacet","selectComponent","select","currentTerm","selectedItems","unselect","includes","isArray","searchTermItem","itemsList","markedIndex","facetValueResults","outputs","provide","useValue","onSelectChange","O","jobQueueService","searchProducts","search","facetValueOperator","AND","result$","queryParamMap","productSearchInput","setSearchTerm","fvids$","getAll","setFacetValues","a","delayFor","Date","isNaN","abs","setQueryParam","q","fvids","reindex","info","addJob","job","COMPLETED","Intl","NumberFormat","format","duration","indexedItemCount","setFacetValueIds","rebuildSearchIndex","initOptionsAndVariants","variantInfo","previousVariants","generateAllCombinations","isDefault","getVariantPrototype","variantsWithSimilarOptions","reFetchProduct","newOptionGroups","confirmDeletionOfDefault","createdOptionGroups","addOptionGroupsToProduct","addNewOptionsToGroups","groupsIds","fetchOptionGroups","createNewProductVariants","deleteDefaultVariant","newOptions","createdGroup","cog","productOptionGroupId","allGroupIds","addOptionToGroup","getProductOptionGroup","productOptionGroup","getExistingVariants","all","getVariantsToAdd","__typename","updatedAt","IMAGE","fileSize","mimeType","width","height","preview","focalPoint","getAsset","getCollection","getProductVariantsOptions","ɵ0$1","breadcrumb","ɵ1","productBreadcrumb","ɵ2","productVariantEditorBreadcrumb","ɵ3","ɵ4","facetBreadcrumb","ɵ5","ɵ6","collectionBreadcrumb","ɵ7","ɵ8","assetBreadcrumb","catalogRoutes","component","resolve","canDeactivate","breadcrumbKey","getName","link","arrayToTree","nodes","topLevelNodes","mappedArr","node","n","mappedElem","rearrange","newParentId","container","currentIndex","root","parentName","permissions$","permissions","perms","UpdateCatalog","DeleteCatalog","visit","parentPath","child","onMove","previousIndex","onDrop","onDelete","drop","trackByFn","decorators","variantsChange","sum","copyFromDefault","optionValueInputComponent","stopPropagation","variantsToCreate","prop","OPTION_VALUE_INPUT_VALUE_ACCESSOR","useExisting","multi","isFocussed","fn","onChangeFn","onTouchFn","isDisabled","obj","textArea","nativeElement","addOptionValue","removeLastOption","parseInputIntoOptions","split","s","trim","handleKey","handleBlur","viewportRuler","change","drag","placeholder","activeContainer","phElement","element","sourceElement","dropContainer","dropElement","parentElement","dragIndex","__indexOf","dropIndex","sourceIndex","style","clientWidth","clientHeight","removeChild","targetIndex","display","insertBefore","nextSibling","enter","offsetLeft","offsetTop","emitChangeEvent","e","point","getPointerPositionOnPage","listGroup","_items","dropList","y","getBoundingClientRect","top","bottom","left","right","appendChild","touches","changedTouches","scrollPosition","getViewportScrollPosition","pageX","pageY","call","hostVars","hostBindings","read","codeInputTouched","_a","productOption","activeLanguage","assetChange","selectionChange","formSubscription","areAllSelected","formFacetValueIds","getFacetValueIds","variantFacetValueIds","formGroup","newValue","priceChange$","taxCategoryIdChange$","taxRates$","getTaxRates","taxRates","defaultTaxZone","applicableRate","taxRate","zone","round","Boolean","Number","CatalogModule","ɵmod","ɵinj","imports","forChild","defineProperty","exports","arr","byKey","self"],"mappings":"2xJAEO,SAASA,IAAuBC,2BAALA,EAAKA,yBAALA,EAAKA,gBACnC,OAAQC,YACJ,IAAIC,EACiC,mBAA1BF,EAAKA,EAAKG,OAAS,KAC1BD,EAAUF,EAAKI,OAEnB,IAAMC,EAAcL,EACpB,OAAOC,EAAOK,KAAK,IAAIC,EAAuBF,EAAaH,K,IAG7DK,E,WACF,WAAYF,EAAaH,GAAQA,wBAC7BM,KAAKH,YAAcA,EACnBG,KAAKN,QAAUA,E,kDAEdO,EAAYR,GACb,OAAOA,EAAOS,UAAU,IAAI,EAAyBD,EAAYD,KAAKH,YAAaG,KAAKN,c,KAG1F,E,iDACF,WAAYS,EAAaN,EAAaH,GAAQA,+BAC1CU,cAAMD,IACDN,YAAcA,EACnBG,EAAKN,QAAUA,EACfM,EAAKK,UAAY,GACjB,IAAMC,EAAMT,EAAYF,OACxBK,EAAKO,OAAS,IAAIC,MAAMF,GACxB,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAAKG,IACrBT,EAAKK,UAAUK,KAAKD,GAExB,IAAK,IAAIA,EAAI,EAAGA,EAAIH,EAAKG,IAAK,CAC1B,IAAIE,EAAad,EAAYY,GAC7BT,EAAKY,IAAI,OAAAC,EAAA,6BAAwBF,EAAYA,EAAYF,IAZnBf,S,wDAenCoB,EAAYC,EAAYC,EAAYC,EAAYC,GACvDlB,KAAKO,OAAOS,GAAcD,EAC1B,IAAMV,EAAYL,KAAKK,UACvB,GAAIA,EAAUV,OAAS,EAAG,CACtB,IAAMwB,EAAQd,EAAUe,QAAQJ,IACjB,IAAXG,GACAd,EAAUgB,OAAOF,EAAO,M,sEAM9BG,GACF,GAA8B,IAA1BtB,KAAKK,UAAUV,OAAc,CAC7B,IAAMH,EAAIA,CAAI8B,GAAJ9B,0BAAcQ,KAAKO,SACzBP,KAAKN,QACLM,KAAKuB,YAAY/B,GAGjBQ,KAAKG,YAAYqB,KAAKhC,M,kCAItBA,GACR,IAAIiC,EACJ,IACIA,EAASzB,KAAKN,QAAQgC,MAAM1B,KAAMR,GAEtC,MAAOmC,GAEH,YADA3B,KAAKG,YAAYyB,MAAMD,GAG3B3B,KAAKG,YAAYqB,KAAKC,O,GAhDSI,EAAA,G,wCCZjCC,E,WACF,WAAYC,EAAOC,GAAUA,wBACzBhC,KAAK+B,MAAQA,EACb/B,KAAKgC,UAAYA,E,kDAEhB/B,EAAYR,GACb,OAAOA,EAAOS,UAAU,IAAI,EAAgBD,EAAYD,KAAK+B,MAAO/B,KAAKgC,gB,KAG3E,E,iDACF,WAAY7B,EAAa4B,EAAOC,GAAUA,sCACtC5B,cAAMD,IACD4B,MAAQA,EACb/B,EAAKgC,UAAYA,EACjBhC,EAAKiC,MAAQ,GACbjC,EAAKkC,UACLlC,EAAKmC,WANiCH,E,uDAyBhCA,GACNhC,KAAKkC,UACelC,KAAKG,YACbS,IAAIoB,EAAUI,SAAS,EAAgBC,SAAUrC,KAAK+B,MAAO,CACrEtC,OAAQO,KAAMG,YAAaH,KAAKG,YAAa6B,UAAWA,O,2CAG3CM,GACjB,QAAItC,KAAKmC,QAAT,CAGA,IAAMH,EAAYhC,KAAKgC,UACjBO,EAAU,IAAIC,EAAaR,EAAUS,MAAQzC,KAAK+B,MAAOO,GAC/DtC,KAAKiC,MAAMvB,KAAK6B,QACZvC,KAAKkC,QACLlC,KAAK0C,UAAUV,M,4BAGjBV,GACFtB,KAAK2C,qBAAqBC,EAAA,EAAaC,WAAWvB,M,6BAE/CK,GACH3B,KAAKmC,WACLnC,KAAKiC,MAAQ,GACbjC,KAAKG,YAAYyB,MAAMD,GACvB3B,KAAK8C,gB,kCAGL9C,KAAK2C,qBAAqBC,EAAA,EAAaG,kBACvC/C,KAAK8C,iB,gCA9COE,GAKZ,IAJA,IAAMvD,EAASuD,EAAMvD,OACfwC,EAAQxC,EAAOwC,MACfD,EAAYgB,EAAMhB,UAClB7B,EAAc6C,EAAM7C,YACnB8B,EAAMtC,OAAS,GAAMsC,EAAM,GAAGgB,KAAOjB,EAAUS,OAAU,GAC5DR,EAAMiB,QAAQZ,aAAaa,QAAQhD,GAEvC,GAAI8B,EAAMtC,OAAS,EAAG,CAClB,IAAMoC,EAAQqB,KAAKC,IAAI,EAAGpB,EAAM,GAAGgB,KAAOjB,EAAUS,OACpDzC,KAAKoC,SAASY,EAAOjB,QAGrB/B,KAAK8C,cACLrD,EAAOyC,c,GAvBWoB,EAAA,GA0DxBd,EACF,WAAYS,EAAMX,GAAaA,wBAC3BtC,KAAKiD,KAAOA,EACZjD,KAAKsC,aAAeA,G,oRCjD5B,SAASiB,GAAuCC,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACnE,IAAME,EAAM,OACZ,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAA8I,OAAlE,KAAqBA,GAAqB,OAAsCC,UACvL,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAALH,EAAQ,CACV,IAAMI,EAAS,OACf,KAAkB,WAAYA,EAAOC,WAAWC,SAAWF,EAAOC,WAAWE,UAC7E,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iBAAkB,MAzC9E,yhFA2CA,IAAMC,GAAM,WAAc,MAAO,IACjC,SAASC,GAAoDT,EAAIC,GAAgB,EAALD,GACxE,KAA0B,GAE9B,IAAMU,GAAM,WAAc,MAAO,CAAEC,IAAK,aAClCC,GAAM,SAAUC,EAAIC,GAAM,MAAO,CAAC,oBAAqBD,EAAIC,IACjE,SAASC,GAAoDf,EAAIC,GAQ/D,GAR+E,EAALD,IACxE,KAAsB,EAAG,KAAM,GAC/B,KAAc,GACd,OACA,KAAsB,EAAG,KAAM,GAC/B,KAAiB,EAAG,uBAAwB,GAC5C,KAAc,EAAG,aACjB,QACO,EAALA,EAAQ,CACV,IAAMgB,EAAaf,EAAIgB,KACvB,KAAiB,GACjB,KAAyBD,EAAWE,MACpC,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,EAAG,eAApD,CAAoE,SAAU,KAAuB,EAAGN,GAAKI,EAAWG,UAAW,KAAuB,EAAGT,OAEjK,IAAMU,GAAM,SAAUC,GAAM,MAAO,CAAEC,UAAWD,IAC1CE,GAAM,CAAC,sBACb,SAASC,GAA6CxB,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACzE,IAAMyB,EAAM,OACZ,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAAoJ,OAAlE,KAAqBA,GAAqB,OAAsCC,YAC7L,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAAL1B,EAAQ,CACV,IAAMI,EAAS,OACf,KAAkB,WAAYA,EAAOC,WAAWC,SAAWF,EAAOC,WAAWE,UAC7E,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iBAAkB,MAE9E,SAASoB,GAA2D3B,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACvF,IAAM4B,EAAM,OACZ,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAAmK,OAAnE,KAAqBA,GAAqB,KAAqB,GAAkBzB,UAC5M,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAALH,EAAQ,CACV,IAAM6B,EAAS,KAAqB,GACpC,KAAkB,YAAaA,EAAOxB,WAAWC,SAAWuB,EAAOxB,WAAWE,YAAcsB,EAAOC,iBACnG,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iBAAkB,MAE9E,SAASC,GAAkD/B,EAAIC,GAAgB,EAALD,GACtE,KAAkB,EAAG2B,GAA4D,EAAG,EAAG,SAAU,GAC1F,EAAL3B,GACF,KAAkB,mBAAoB,iBAE1C,SAASgC,GAA0DhC,EAAIC,GAAgB,EAALD,IAC9E,KAA+B,GAC/B,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,oBAEtD,SAASiC,GAA0DjC,EAAIC,GAAgB,EAALD,IAC9E,KAAc,GACd,KAAc,EAAG,cACV,EAALA,GACF,KAAyB,KAAmB,EAAG,EAAG,oBAEtD,IAAMkC,GAAM,WAAc,MAAO,CAAC,iBAClC,SAASC,GAAgGnC,EAAIC,GAE3G,GAF2H,EAALD,GACpH,KAAiB,EAAG,2BAA4B,IACzC,EAALA,EAAQ,CACV,IAAMoC,EAAkB,OAAuBd,UACzCe,EAAU,KAAqB,GACrC,KAAkB,wBAAyBA,EAAQhC,WAAWiC,IAAI,KAAuB,EAAGJ,KAA5F,CAAmG,cAAeE,IAEtH,SAASG,GAAqEvC,EAAIC,GAIhF,GAJgG,EAALD,IACzF,KAA+B,GAC/B,KAAkB,EAAGmC,GAAiG,EAAG,EAAG,2BAA4B,IACxJ,QACO,EAALnC,EAAQ,CACV,IAAMoC,EAAkBnC,EAAIqB,UACtBkB,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAkB,OAAQA,EAAQC,iBAAiBL,EAAgBlB,QAEvE,SAASwB,GAAsD1C,EAAIC,GAQjE,GARiF,EAALD,IAC1E,KAAsB,EAAG,UAAW,IACpC,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAGuC,GAAsE,EAAG,EAAG,eAAgB,IACjH,QACO,EAALvC,EAAQ,CACV,IAAM2C,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,yBAClD,KAAiB,GACjB,KAAkB,UAAWA,EAAQC,eAEzC,SAASC,GAA2D7C,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACvF,IAAM8C,EAAO,OACb,KAA+B,GAC/B,KAAsB,EAAG,yBAA0B,IACnD,KAAkB,UAAU,SAA6GC,GAA+E,OAArE,KAAqBD,GAAuB,KAAqB,GAAmBE,aAAaD,MACpP,KAAc,EAAG,SACjB,KAAc,EAAG,iBACjB,KAAc,EAAG,SACjB,OACA,OACF,GAAS,EAAL/C,EAAQ,CACV,IAAMiD,EAAahD,EAAIqB,UACjB4B,EAAQjD,EAAIkD,MACZC,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAkB,SAAU,KAAmB,EAAG,EAAGA,EAAQC,SAA7D,CAAuE,YAAaJ,EAApF,CAAgG,sBAAuBG,EAAQE,oBAAoBL,GAAnJ,CAAgK,kBAAmBC,EAAnL,CAA0L,YAAa,KAAmB,EAAG,EAAG,iBAAhO,CAAkP,gBAAiB,KAAmB,EAAG,GAAIE,EAAQG,kBAEzS,SAASC,GAA2DxD,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACvF,IAAMyD,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAgG,KAAqBA,GAAO,IAAMC,EAAazD,EAAIqB,UAAoD,OAAzB,KAAqB,GAAmBqC,UAAUD,MAC3P,KAAc,GACd,OACF,GAAS,EAAL1D,EAAQ,CACV,IAAM0D,EAAazD,EAAIqB,UACvB,KAAiB,GACjB,KAA0B,IAAKoC,EAAWE,YAAa,MAE3D,SAASC,GAAkD7D,EAAIC,GAa7D,GAb6E,EAALD,IACtE,KAAsB,EAAG,OACzB,KAAsB,EAAG,gBACzB,KAAsB,EAAG,SAAU,IACnC,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,oBAAqB,IAC9C,KAAkB,EAAGwD,GAA4D,EAAG,EAAG,SAAU,IACjG,OACA,OACA,QACO,EAALxD,EAAQ,CACV,IAAM8D,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,2BAA4B,KACpF,KAAiB,GACjB,KAAkB,UAAWA,EAAQC,aAEzC,IAAMC,GAAM,SAAU3C,GAAM,MAAO,CAAE4C,MAAO5C,IAC5C,SAAS6C,GAA0DlE,EAAIC,GAMrE,GANqF,EAALD,IAC9E,KAAsB,EAAG,MAAO,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,KAAc,EAAG,aACjB,QACO,EAALA,EAAQ,CACV,IAAMmE,EAAYlE,EAAIqB,UACtB,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,+BAAgC,KAAM,KAAmB,EAAG,EAAG,uBAAwB,KAAuB,EAAG0C,GAAKG,IAAa,OAE/L,IAAMC,GAAM,SAAU/C,GAAM,MAAO,CAAEgD,QAAShD,IAC9C,SAASiD,GAA2CtE,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACvE,IAAMuE,EAAO,OACb,KAAsB,EAAG,OAAQ,GACjC,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,IAChC,KAAsB,EAAG,iBAAkB,IAC3C,KAAc,EAAG,aACjB,KAAsB,EAAG,sBACzB,KAAiB,EAAG,QAAS,IAC7B,KAAc,EAAG,iBACjB,KAAsB,EAAG,QAAS,IAClC,KAAkB,EAAGvC,GAA2D,EAAG,EAAG,eAAgB,IACtG,KAAkB,GAAIC,GAA2D,EAAG,EAAG,cAAe,KAAM,GAAI,MAChH,OACA,OACA,OACA,KAAsB,GAAI,iBAAkB,IAC5C,KAAc,GAAI,aAClB,KAAsB,GAAI,QAAS,IACnC,KAAkB,SAAS,SAA4Ec,GAA8E,OAApE,KAAqBwB,GAAuB,OAAuCC,WAAWzB,EAAO0B,OAAO3G,UAC7N,KAAc,GAAI,iBAClB,OACA,OACA,KAAsB,GAAI,iBAAkB,IAC5C,KAAc,GAAI,aAClB,KAAc,GAAI,aAClB,KAAiB,GAAI,QAAS,IAC9B,KAAc,GAAI,iBAClB,OACA,KAAiB,GAAI,uBAAwB,IAC7C,KAAc,GAAI,iBAClB,KAAc,GAAI,aAClB,KAAkB,GAAI4E,GAAuD,EAAG,EAAG,UAAW,IAC9F,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,qBAAsB,IAChD,KAAkB,UAAU,SAA0FK,GAA8E,OAApE,KAAqBwB,GAAuB,OAAuCG,aAAe3B,KAClO,OACA,OACA,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,SAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAkB,GAAIF,GAA4D,EAAG,GAAI,eAAgB,IACzG,KAAkB,GAAIgB,GAAmD,EAAG,EAAG,MAAO,IACtF,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,0BAA2B,GAAI,IACzD,KAAkB,GAAIK,GAA2D,EAAG,EAAG,eACvF,OACA,OACA,OACA,OACF,GAAS,EAALlE,EAAQ,CACV,IAAM2E,EAAc1E,EAAI2E,KAClBC,EAAO,KAAmB,IAC1BC,EAAS,OACf,KAAkB,YAAaA,EAAOzE,YACtC,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,GAAI,uBACrD,KAAiB,GACjB,KAAkB,eAAgB,KAAmB,EAAG,GAAI,kBAC5D,KAAiB,GACjB,KAAkB,OAAQyE,EAAOzE,WAAWvC,MAAMiH,QAAlD,CAA2D,WAAYF,GACvE,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI,gBACtD,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI,gBAAtD,CAAuE,SAAU,KAAuB,GAAIT,GAAK,KAAmB,GAAI,GAAI,gCAC5I,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,iBAA1D,CAA4E,QAAS,KAAmB,GAAI,GAAI,uBAChH,KAAiB,GACjB,KAAkB,OAAQU,EAAOlC,aAAazG,QAC9C,KAAiB,GACjB,KAAkB,SAAUwI,EAAYK,OAAxC,CAAgD,gBAAiBL,EAAYM,eAC7E,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,oBACpD,KAAiB,GACjB,KAAkB,UAAWH,EAAOI,SACpC,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,eAAgBJ,EAAOK,KAE7C,IAAMC,GAAM,WAAc,MAAO,CAAC,aAClC,SAASC,GAAqCrF,EAAIC,GAAgB,EAALD,IACzD,KAAsB,EAAG,IAAK,GAC9B,KAAiB,EAAG,WAAY,GAChC,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAkB,aAAc,KAAuB,EAAGoF,KAC1D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iCAAkC,MAE9F,SAASE,GAAgDtF,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC5E,IAAMuF,EAAM,OACZ,KAAsB,EAAG,MAAO,IAChC,KAAc,GACd,KAAc,EAAG,SACjB,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAuJ,OAAlE,KAAqBA,GAAqB,OAAsCC,mBAChM,KAAiB,EAAG,WAAY,IAChC,OACF,GAAS,EAALxF,EAAQ,CACV,IAAMyF,EAAWxF,EAAIqB,UACfoE,EAAS,OACf,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAGA,EAAOC,wBAAyB,KAAM,KAAmB,EAAG,EAAG,uBAAwB,KAAuB,EAAG3B,GAAKyB,IAAY,OAE9L,SAASG,GAAwC5F,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACpE,IAAMyB,EAAM,OACZ,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAA+I,OAAlE,KAAqBA,GAAqB,OAAsCC,YACxL,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAAL1B,EAAQ,CACV,IAAMI,EAAS,OACf,KAAkB,WAAYA,EAAOC,WAAWC,SAAWF,EAAOC,WAAWE,UAC7E,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iBAAkB,MAE9E,SAASsF,GAAsD7F,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAClF,IAAM4B,EAAM,OACZ,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAA8J,OAAnE,KAAqBA,GAAqB,KAAqB,GAAkBzB,UACvM,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAALH,EAAQ,CACV,IAAM6B,EAAS,KAAqB,GACpC,KAAkB,WAAYA,EAAOxB,WAAWC,SAAWuB,EAAOxB,WAAWE,UAC7E,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iBAAkB,MAE9E,SAASuF,GAA6C9F,EAAIC,GAAgB,EAALD,GACjE,KAAkB,EAAG6F,GAAuD,EAAG,EAAG,SAAU,GACrF,EAAL7F,GACF,KAAkB,mBAAoB,iBAE1C,SAAS+F,GAAqD/F,EAAIC,GAAgB,EAALD,IACzE,KAA+B,GAC/B,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,oBAEtD,SAASgG,GAAoDhG,EAAIC,GAAgB,EAALD,IACxE,KAAc,GACd,KAAc,EAAG,cACV,EAALA,GACF,KAAyB,KAAmB,EAAG,EAAG,oBAEtD,IAAMiG,GAAM,WAAc,MAAO,CAAC,QAAS,iBAC3C,SAASC,GAA2FlG,EAAIC,GAEtG,GAFsH,EAALD,GAC/G,KAAiB,EAAG,2BAA4B,IACzC,EAALA,EAAQ,CACV,IAAMmG,EAAkB,OAAuB7E,UACzC8E,EAAU,KAAqB,GACrC,KAAkB,wBAAyBA,EAAQ/F,WAAWiC,IAAI,KAAuB,EAAG2D,KAA5F,CAAmG,cAAeE,IAEtH,SAASE,GAAgErG,EAAIC,GAI3E,GAJ2F,EAALD,IACpF,KAA+B,GAC/B,KAAkB,EAAGkG,GAA4F,EAAG,EAAG,2BAA4B,IACnJ,QACO,EAALlG,EAAQ,CACV,IAAMmG,EAAkBlG,EAAIqB,UACtBwC,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAkB,OAAQA,EAAQrB,iBAAiB0D,EAAgBjF,QAEvE,SAASoF,GAAiDtG,EAAIC,GAQ5D,GAR4E,EAALD,IACrE,KAAsB,EAAG,UAAW,IACpC,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAGqG,GAAiE,EAAG,EAAG,eAAgB,IAC5G,QACO,EAALrG,EAAQ,CACV,IAAM2C,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,yBAClD,KAAiB,GACjB,KAAkB,UAAWA,EAAQC,eAEzC,SAAS2D,GAAyEvG,EAAIC,GAMpF,GANoG,EAALD,IAC7F,KAA+B,GAC/B,KAAsB,EAAG,MACzB,KAAc,GACd,OACA,QACO,EAALA,EAAQ,CACV,IAAMwG,EAAkBvG,EAAIqB,UAC5B,KAAiB,GACjB,KAAyBkF,EAAgBtF,OAE7C,IAAMuF,GAAO,SAAU5F,GAAM,MAAO,CAAC,SAAUA,EAAI,iBACnD,SAAS6F,GAAyG1G,EAAIC,GAEpH,GAFoI,EAALD,GAC7H,KAAiB,EAAG,2BAA4B,IACzC,EAALA,EAAQ,CACV,IAAM2G,EAAkB,OAAuBrF,UACzCsF,EAAQ,OAAuBzD,MAC/B0D,EAAU,KAAqB,GACrC,KAAkB,aAAY,EAA9B,CAAsC,wBAAyBA,EAAQxG,WAAWiC,IAAI,KAAuB,EAAGmE,GAAMG,IAAtH,CAA+H,cAAeD,IAElJ,SAASG,GAA8E9G,EAAIC,GAMzF,GANyG,EAALD,IAClG,KAA+B,GAC/B,KAAsB,EAAG,KAAM,IAC/B,KAAkB,EAAG0G,GAA0G,EAAG,EAAG,2BAA4B,IACjK,OACA,QACO,EAAL1G,EAAQ,CACV,IAAM2G,EAAkB1G,EAAIqB,UACtBsF,EAAQ,OAAuBzD,MAC/B4D,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAkB,OAAQA,EAAQC,sBAAsBJ,EAAOD,EAAgBzF,QAEnF,SAAS+F,GAA+DjH,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC3F,IAAMkH,EAAO,OACb,KAAsB,EAAG,KAAM,IAC/B,KAAsB,EAAG,KAAM,IAC/B,KAAiB,EAAG,kBAAmB,GACvC,OACA,KAAsB,EAAG,KAAM,IAC/B,KAAsB,EAAG,QAAS,IAClC,KAAkB,SAAS,SAA+FnE,GAAU,KAAqBmE,GAAO,IAAMN,EAAQ3G,EAAIkD,MAAagE,EAAW,KAAqB,GAAGvC,KAA8C,OAAxB,OAAuCwC,gBAA0C,MAA1BD,EAASpK,OAAO6J,GAAiB,KAAOO,EAASpK,OAAO6J,GAAOS,KAAMtE,EAAO0B,OAAO3G,MAAO8I,MACzY,KAAc,EAAG,iBACjB,OACA,OACA,KAAsB,EAAG,KAAM,IAC/B,KAAiB,EAAG,QAAS,IAC7B,OACA,KAAkB,EAAGE,GAA+E,EAAG,EAAG,eAAgB,IAC1H,KAAsB,EAAG,KAAM,IAC/B,KAAsB,GAAI,gBAC1B,KAAsB,GAAI,SAAU,IACpC,KAAc,IACd,KAAc,GAAI,aAClB,KAAiB,GAAI,WAAY,IACjC,OACA,KAAsB,GAAI,oBAAqB,IAC/C,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAAqG,KAAqBI,GAAO,IAAMN,EAAQ3G,EAAIkD,MAAagE,EAAW,KAAqB,GAAGvC,KAA8C,OAAxB,OAAuC0C,iBAA2C,MAA1BH,EAASpK,OAAO6J,GAAiB,KAAOO,EAASpK,OAAO6J,GAAOzB,GAAIyB,MAC/W,KAAc,GAAI,iBAClB,KAAiB,GAAI,WAAY,IACjC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,OACA,OACF,GAAS,EAAL5G,EAAQ,CACV,IAAMuH,EAAYtH,EAAIqB,UAChBsF,EAAQ3G,EAAIkD,MACZqE,EAAU,KAAqB,GACrC,KAAkB,gBAAiBZ,GACnC,KAAiB,GACjB,KAAkB,SAAUW,GAC5B,KAAiB,GACjB,KAAkB,YAAa,KAAmB,EAAG,EAAG,kBACxD,KAAiB,GACjB,KAAkB,UAAWC,EAAQC,mBACrC,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,EAAG,kBAAmB,KAC5E,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,iBAAkB,MAEhF,SAASC,GAAyD1H,EAAIC,GAqBpE,GArBoF,EAALD,IAC7E,KAAsB,EAAG,QAAS,IAClC,KAAsB,EAAG,SACzB,KAAsB,EAAG,MACzB,KAAiB,EAAG,MACpB,KAAsB,EAAG,MACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,MACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,GAAIuG,GAA0E,EAAG,EAAG,eAAgB,IACtH,KAAiB,GAAI,MACrB,OACA,OACA,KAAsB,GAAI,SAC1B,KAAkB,GAAIU,GAAgE,GAAI,GAAI,KAAM,IACpG,OACA,QACO,EAALjH,EAAQ,CACV,IAAM2H,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,gBAClD,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,gBAClD,KAAiB,GACjB,KAAkB,UAAWA,EAAQF,mBACrC,KAAiB,GACjB,KAAkB,UAAWE,EAAQ5K,SAEzC,SAAS6K,GAA0D5H,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACtF,IAAM6H,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAoK,OAArE,KAAqBA,GAAuB,KAAqB,GAAmBC,mBAC9M,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACO,EAAL9H,IACF,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,2BAA4B,MAExF,SAAS+H,GAAiD/H,EAAIC,GAW5D,GAX4E,EAALD,IACrE,KAAsB,EAAG,UAAW,IACpC,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAG0H,GAA0D,GAAI,EAAG,QAAS,IAC/F,KAAsB,EAAG,OACzB,KAAkB,EAAGE,GAA2D,EAAG,EAAG,SAAU,IAChG,OACA,QACO,EAAL5H,EAAQ,CACV,IAAMoD,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,yBAClD,KAAiB,GACjB,KAAkB,OAAQ,EAAIA,EAAQ4E,qBAAqB7L,QAC3D,KAAiB,GACjB,KAAkB,mBAAoB,kBAE1C,SAAS8L,GAAsCjI,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAClE,IAAMkI,EAAO,OACb,KAAsB,EAAG,OAAQ,GACjC,KAAsB,EAAG,UAAW,GACpC,KAAsB,EAAG,iBAAkB,IAC3C,KAAc,EAAG,aACjB,KAAsB,EAAG,sBACzB,KAAiB,EAAG,QAAS,IAC7B,KAAc,EAAG,iBACjB,KAAsB,EAAG,QAAS,IAClC,KAAkB,EAAGnC,GAAsD,EAAG,EAAG,eAAgB,IACjG,KAAkB,EAAGC,GAAqD,EAAG,EAAG,cAAe,KAAM,GAAI,MACzG,OACA,OACA,OACA,KAAsB,GAAI,iBAAkB,IAC5C,KAAc,GAAI,aAClB,KAAsB,GAAI,QAAS,IACnC,KAAkB,SAAS,SAAuEjD,GAAU,KAAqBmF,GAAO,IAAMf,EAAWlH,EAAI2E,KAA8C,OAAxB,OAAuCuD,WAAWhB,EAASE,KAAMtE,EAAO0B,OAAO3G,UAClQ,KAAc,GAAI,iBAClB,OACA,OACA,KAAsB,GAAI,iBAAkB,IAC5C,KAAc,GAAI,aAClB,KAAc,GAAI,iBAClB,KAAiB,GAAI,QAAS,IAC9B,KAAc,GAAI,iBAClB,OACA,KAAkB,GAAIwI,GAAkD,EAAG,EAAG,UAAW,IACzF,OACA,KAAkB,GAAIyB,GAAkD,EAAG,EAAG,UAAW,IACzF,KAAc,GAAI,SAClB,OACF,GAAS,EAAL/H,EAAQ,CACV,IAAM6E,EAAO,KAAmB,IAC1BC,EAAS,OACf,KAAkB,YAAaA,EAAOzE,YACtC,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,GAAI,uBACrD,KAAiB,GACjB,KAAkB,eAAgB,KAAmB,EAAG,GAAI,kBAC5D,KAAiB,GACjB,KAAkB,OAAQyE,EAAOzE,WAAWvC,MAAMsK,MAAMrD,QAAxD,CAAiE,WAAYF,GAC7E,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI,gBACtD,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI,eAAtD,CAAsE,iBAAkB,KAAmB,GAAI,GAAI,kBACnH,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAAkB,OAAQC,EAAOlC,aAAazG,QAC9C,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI2I,EAAOuD,UAEjE,SAASC,GAAgCtI,EAAIC,GAAgB,EAALD,IACpD,KAAsB,EAAG,IAAK,GAC9B,KAAiB,EAAG,WAAY,GAChC,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAkB,aAAc,KAAuB,EAAGoF,KAC1D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,4BAA6B,MAEzF,SAASmD,GAAkEvI,EAAIC,GAE7E,GAF6F,EAALD,GACtF,KAAiB,EAAG,uBAAwB,IACrC,EAALA,EAAQ,CACV,IAAMwI,EAAWvI,EAAIqB,UACrB,KAAkB,aAAckH,EAAhC,CAA0C,aAAY,EAAtD,CAA8D,oBAAmB,IAErF,SAASC,GAAmEzI,EAAIC,GAK9E,GAL8F,EAALD,IACvF,KAA+B,GAC/B,KAAiB,EAAG,WAAY,GAChC,KAAc,GACd,QACO,EAALA,EAAQ,CACV,IAAM0I,EAAW,KAAqB,GAAGzH,KACnC0H,EAAS,OACf,KAAiB,GACjB,KAA0B,IAAKD,EAAS3L,OAAOZ,OAASwM,EAAOC,aAAc,MAEjF,SAASC,GAAkE7I,EAAIC,GAAgB,EAALD,GACtF,KAAiB,EAAG,WAAY,IAEpC,SAAS8I,GAAoD9I,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChF,IAAM+I,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAyF,KAAqBA,GAAO,IAAML,EAAW,OAAuBzH,KAA8C,OAAxB,OAAuC+H,mBAAmBN,MACxQ,KAAkB,EAAGD,GAAoE,EAAG,EAAG,eAAgB,GAC/G,KAAkB,EAAGI,GAAmE,EAAG,EAAG,cAAe,KAAM,GAAI,MACvH,OACF,GAAS,EAAL7I,EAAQ,CACV,IAAMiJ,EAAO,KAAmB,GAC1BP,EAAW,OAAuBzH,KAClCiI,EAAS,OACf,KAAiB,GACjB,KAAkB,QAASA,EAAOC,aAAaT,EAASvD,KAAO,GAAKuD,EAAS3L,OAAOZ,OAApF,CAA4F,WAAY8M,IAE5G,SAASG,GAA2DpJ,EAAIC,GAAgB,EAALD,IAC/E,KAA+B,GAC/B,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,oBAEtD,SAASqJ,GAA0DrJ,EAAIC,GAAgB,EAALD,IAC9E,KAAc,GACd,KAAc,EAAG,cACV,EAALA,GACF,KAAyB,KAAmB,EAAG,EAAG,oBAEtD,IAAMsJ,GAAO,SAAUzI,GAAM,MAAO,CAAC,KAAMA,IAC3C,SAAS0I,GAA2CvJ,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACvE,IAAMwJ,EAAO,OACb,KAAsB,EAAG,KAAM,GAC/B,KAAc,GACd,OACA,KAAsB,EAAG,KAAM,GAC/B,KAAc,GACd,OACA,KAAsB,EAAG,KAAM,GAC/B,KAAkB,EAAGjB,GAAmE,EAAG,EAAG,uBAAwB,GACtH,KAAc,EAAG,SACjB,KAAkB,EAAGO,GAAqD,EAAG,EAAG,SAAU,GAC1F,OACA,KAAsB,EAAG,KAAM,GAC/B,KAAsB,EAAG,YACzB,KAAkB,GAAIM,GAA4D,EAAG,EAAG,eAAgB,GACxG,KAAkB,GAAIC,GAA2D,EAAG,EAAG,cAAe,KAAM,GAAI,MAChH,OACA,OACA,KAAsB,GAAI,KAAM,IAChC,KAAiB,GAAI,uBAAwB,IAC7C,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,KAAM,IAChC,KAAsB,GAAI,gBAC1B,KAAsB,GAAI,SAAU,IACpC,KAAc,IACd,KAAc,GAAI,aAClB,KAAiB,GAAI,WAAY,IACjC,OACA,KAAsB,GAAI,oBAAqB,IAC/C,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAAiF,KAAqBG,GAAO,IAAMd,EAAWzI,EAAIgB,KAA8C,OAAxB,OAAuCwI,YAAYf,EAASvD,OAC/O,KAAc,GAAI,iBAClB,KAAiB,GAAI,WAAY,IACjC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,OACF,GAAS,EAALnF,EAAQ,CACV,IAAM0I,EAAWzI,EAAIgB,KACfyI,EAAM,KAAmB,IACzBhE,EAAS,OACf,KAAmB,UAAWgD,EAASiB,WACvC,KAAiB,GACjB,KAAyBjB,EAASrB,MAClC,KAAiB,GACjB,KAAmB,UAAWqB,EAASiB,WACvC,KAAiB,GACjB,KAAyBjB,EAASxH,MAClC,KAAiB,GACjB,KAAmB,UAAWwH,EAASiB,WACvC,KAAiB,GACjB,KAAkB,UAAW,KAAmB,EAAG,GAAIjB,EAAS3L,OAAQ,EAAG2I,EAAOyD,aAAaT,EAASvD,KAAO,IAC/G,KAAiB,GACjB,KAAkB,OAAQuD,EAAS3L,OAAOZ,OAASuJ,EAAOkD,cAC1D,KAAiB,GACjB,KAAmB,UAAWF,EAASiB,WACvC,KAAiB,GACjB,KAAkB,QAASjB,EAASiB,UAApC,CAA+C,WAAYD,GAC3D,KAAiB,GACjB,KAAmB,UAAWhB,EAASiB,WACvC,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI,eAAtD,CAAsE,SAAU,KAAuB,GAAIL,GAAMZ,EAASvD,KAC1H,KAAiB,GACjB,KAAmB,UAAWuD,EAASiB,WACvC,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,kBAAmB,KAC7E,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,iBAAkB,MAEhF,SAASC,GAAiD5J,EAAIC,GAAgB,EAALD,IACrE,KAAc,GACd,KAAc,EAAG,cACV,EAALA,GACF,KAAyB,KAAmB,EAAG,EAAG,uBAEtD,SAAS6J,GAAiD7J,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC7E,IAAM8J,EAAM,OACZ,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAAwJ,OAAlE,KAAqBA,GAAqB,OAAsCC,YACjM,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAAwJ,OAAlE,KAAqBD,GAAqB,OAAsCE,kBACjM,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAALhK,EAAQ,CACV,IAAM0F,EAAS,OACf,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,kBAClD,KAAiB,GACjB,KAAkB,WAA6C,IAAjCA,EAAOuE,eAAe9N,QACpD,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,sBAAuB,MAEnF,SAAS+N,GAA8DlK,EAAIC,GAAgB,EAALD,IAClF,KAAc,GACd,KAAc,EAAG,cACV,EAALA,GACF,KAAyB,KAAmB,EAAG,EAAG,uCAEtD,IAAMmK,GAAO,SAAU9I,GAAM,MAAO,CAAE+I,QAAS/I,IAC/C,SAASgJ,GAA+DrK,EAAIC,GAG1E,GAH0F,EAALD,IACnF,KAAc,GACd,KAAc,EAAG,cACV,EAALA,EAAQ,CACV,IAAM0F,EAAS,OACf,KAA0B,IAAK,KAAmB,EAAG,EAAG,2BAA4B,KAAuB,EAAGyE,GAAgC,MAA1BzE,EAAO4E,gBAA0B,KAAO5E,EAAO4E,gBAAgBjD,OAAQ,MAE/L,SAASkD,GAA+DvK,EAAIC,GAAgB,EAALD,IACnF,KAAc,GACd,KAAc,EAAG,cACV,EAALA,GACF,KAA0B,IAAK,KAAmB,EAAG,EAAG,+BAAgC,KAE5F,SAASwK,GAAoExK,EAAIC,GAG/E,GAH+F,EAALD,IACxF,KAAc,GACd,KAAc,EAAG,aACV,EAALA,EAAQ,CACV,IAAMyK,EAAS,OAAuBnJ,UAChCoJ,EAAS,OACf,KAA0B,IAAK,KAAmB,EAAG,EAAGD,EAAOE,aAAe,IAA+B,MAA1BD,EAAOJ,gBAA0B,KAAOI,EAAOJ,gBAAgBM,cAAe,MAErK,SAASC,GAAoE7K,EAAIC,GAAgB,EAALD,GACxF,KAAc,EAAG,OAErB,SAAS8K,GAAsD9K,EAAIC,GAcjE,GAdiF,EAALD,IAC1E,KAAsB,EAAG,MACzB,KAAsB,EAAG,MACzB,KAAc,GACd,OACA,KAAsB,EAAG,MACzB,KAAc,GACd,KAAc,EAAG,YACjB,OACA,KAAsB,EAAG,MACzB,KAAkB,EAAGwK,GAAqE,EAAG,EAAG,cAAe,GAC/G,KAAkB,EAAGK,GAAqE,EAAG,EAAG,cAAe,KAAM,GAAI,MACzH,OACA,QACO,EAAL7K,EAAQ,CACV,IAAMyK,EAASxK,EAAIqB,UACbM,EAAM,KAAmB,GACzBsH,EAAS,OACf,KAAiB,GACjB,KAAyBuB,EAAOvJ,MAChC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAGuJ,EAAOM,MAAQ,IAA8B,MAAzB7B,EAAO8B,eAAyB,KAAO9B,EAAO8B,eAAeJ,eACnI,KAAiB,GACjB,KAAkB,OAAQ1B,EAAOoB,gBAAjC,CAAkD,WAAY1I,IAElE,IAAMqJ,GAAO,SAAU5J,GAAM,MAAO,CAAE6J,YAAa7J,IACnD,SAAS8J,GAA6EnL,EAAIC,GAGxF,GAHwG,EAALD,IACjG,KAAc,GACd,KAAc,EAAG,cACV,EAALA,EAAQ,CACV,IAAMoL,EAAU,KAAqB,GACrC,KAA0B,IAAK,KAAmB,EAAG,EAAG,kCAAmC,KAAuB,EAAGH,GAAiC,MAA3BG,EAAQd,gBAA0B,KAAOc,EAAQd,gBAAgBjD,OAAQ,MAExM,SAASgE,GAA6ErL,EAAIC,GAAgB,EAALD,IACjG,KAAc,GACd,KAAc,EAAG,cACV,EAALA,GACF,KAA0B,IAAK,KAAmB,EAAG,EAAG,+BAAgC,KAE5F,SAASsL,GAA+DtL,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC3F,IAAM+I,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAwK,OAApE,KAAqBA,GAAuB,OAAuCgB,YAClN,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAwK,OAApE,KAAqBhB,GAAuB,OAAuCwC,YAClN,KAAkB,EAAGJ,GAA8E,EAAG,EAAG,cAAe,GACxH,KAAkB,EAAGE,GAA8E,EAAG,EAAG,cAAe,KAAM,EAAG,MACjI,OACF,GAAS,EAALrL,EAAQ,CACV,IAAMwL,EAAO,KAAmB,GAC1BC,EAAS,OACf,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,kBAClD,KAAiB,GACjB,KAAkB,YAAaA,EAAOnB,iBACtC,KAAiB,GACjB,KAAkB,OAAQmB,EAAOnB,gBAAjC,CAAkD,WAAYkB,IAElE,IAAME,GAAO,WAAc,MAAO,CAAC,UAAW,YAC9C,SAASC,GAAqD3L,EAAIC,GAQhE,GARgF,EAALD,IACzE,KAAsB,EAAG,sBACzB,KAAiB,EAAG,QAAS,GAC7B,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,QACO,EAALA,EAAQ,CACV,IAAMI,EAAS,OACf,KAAiB,GACjB,KAAkB,cAAeA,EAAOC,WAAWiC,IAAI,KAAuB,EAAGoJ,MACjF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,oBAEtD,SAASE,GAA0C5L,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACtE,IAAM0J,EAAM,OACZ,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAAiJ,OAAlE,KAAqBA,GAAqB,OAAsChI,YAC1L,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAAL1B,EAAQ,CACV,IAAM0F,EAAS,OACf,KAAkB,WAAYA,EAAOrF,WAAWC,SAAWoF,EAAOrF,WAAWE,WAAamF,EAAOmG,4BACjG,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iBAAkB,MAE9E,SAASC,GAAwD9L,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACpF,IAAM+L,EAAM,OACZ,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAAgK,OAAnE,KAAqBA,GAAqB,KAAqB,GAAkB5L,UACzM,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAALH,EAAQ,CACV,IAAM0K,EAAS,KAAqB,GACpC,KAAkB,YAAaA,EAAOrK,WAAWC,SAAWoK,EAAOrK,WAAWE,YAAcmK,EAAO5I,kBAAoB4I,EAAOsB,wBAC9H,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iBAAkB,MAE9E,SAASC,GAA+CjM,EAAIC,GAAgB,EAALD,GACnE,KAAkB,EAAG8L,GAAyD,EAAG,EAAG,SAAU,IACvF,EAAL9L,GACF,KAAkB,mBAAoB,iBAE1C,SAASkM,GAAmHlM,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC/I,IAAMmM,EAAO,OACb,KAAsB,EAAG,WAAY,IACrC,KAAkB,aAAa,WAA8J,KAAqBA,GAAO,IAAMC,EAAc,OAAuB9K,UAAoD,OAAzB,KAAqB,GAAmB+K,kBAAkBD,EAAYjH,OACrW,KAAiB,EAAG,oBAAqB,IACzC,KAAc,GACd,KAAc,EAAG,sBACjB,OACF,GAAS,EAALnF,EAAQ,CACV,IAAMoM,EAAc,OAAuB9K,UAC3C,KAAiB,GACjB,KAAkB,cAAe8K,EAAY/E,MAC7C,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG+E,EAAY/E,MAAO,MAE/E,SAASiF,GAAwGtM,EAAIC,GAInH,GAJmI,EAALD,IAC5H,KAA+B,GAC/B,KAAkB,EAAGkM,GAAoH,EAAG,EAAG,WAAY,IAC3J,QACO,EAALlM,EAAQ,CACV,IAAMoM,EAAcnM,EAAIqB,UAClBqG,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAkB,QAASA,EAAQ4E,iBAAiBH,EAAY/E,QAEpE,SAASmF,GAAyFxM,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACrH,IAAMyM,EAAO,OACb,KAAsB,EAAG,gBAAiB,IAC1C,KAAc,EAAG,aACjB,KAAsB,EAAG,MAAO,IAChC,KAAsB,EAAG,MAAO,IAChC,KAAkB,EAAGH,GAAyG,EAAG,EAAG,eAAgB,IACpJ,KAAc,EAAG,SACjB,OACA,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAmM,OAArE,KAAqBG,GAAuB,KAAqB,GAAmBC,qBAC7O,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,OACA,OACF,GAAS,EAAL1M,EAAQ,CACV,IAAMwC,EAAU,KAAqB,GACrC,KAAkB,QAAS,KAAmB,EAAG,EAAG,oBACpD,KAAiB,GACjB,KAAkB,UAAW,KAAmB,EAAG,EAAGA,EAAQmK,mBAC9D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,6BAA8B,MAE1F,SAASC,GAAyE5M,EAAIC,GAAgB,EAALD,IAC7F,KAA+B,GAC/B,KAAkB,EAAGwM,GAA0F,GAAI,EAAG,gBAAiB,IACvI,QAEJ,IAAMK,GAAO,WAAc,MAAO,CAAC,UAAW,iBAC9C,SAASC,GAA+G9M,EAAIC,GAG1H,GAH0I,EAALD,IACnI,KAAiB,EAAG,2BAA4B,IAChD,KAAc,EAAG,kBACV,EAALA,EAAQ,CACV,IAAM+M,EAAkB,OAAuBzL,UACzC0L,EAAU,KAAqB,GACrC,KAAkB,wBAAyBA,EAAQ3M,WAAWiC,IAAI,KAAuB,EAAGuK,KAA5F,CAAoG,cAAeE,EAAnH,CAAoI,YAAa,KAAmB,EAAG,EAAG,mBAE9K,SAASE,GAAoFjN,EAAIC,GAI/F,GAJ+G,EAALD,IACxG,KAA+B,GAC/B,KAAkB,EAAG8M,GAAgH,EAAG,EAAG,2BAA4B,IACvK,QACO,EAAL9M,EAAQ,CACV,IAAM+M,EAAkB9M,EAAIqB,UACtBuF,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAkB,OAAQA,EAAQpE,iBAAiBsK,EAAgB7L,QAEvE,SAASgM,GAAqElN,EAAIC,GAQhF,GARgG,EAALD,IACzF,KAAsB,EAAG,UAAW,IACpC,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAGiN,GAAqF,EAAG,EAAG,eAAgB,IAChI,QACO,EAALjN,EAAQ,CACV,IAAMoD,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,yBAClD,KAAiB,GACjB,KAAkB,UAAWA,EAAQR,eAEzC,SAASuK,GAAkFnN,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC9G,IAAMkH,EAAO,OACb,KAAsB,EAAG,uBAAwB,IACjD,KAAkB,UAAU,WAAsI,KAAqBA,GAAO,IAAMkG,EAAiBnN,EAAIqB,UAAoD,OAAzB,KAAqB,GAAmB+L,wBAAwBD,EAAejI,OACnU,KAAc,EAAG,iBACjB,OACF,GAAS,EAALnF,EAAQ,CACV,IAAMoN,EAAiBnN,EAAIqB,UAC3B,KAAkB,aAAc8L,EAAhC,CAAgD,YAAa,KAAmB,EAAG,EAAG,mBAE1F,SAASE,GAAoEtN,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChG,IAAMuN,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAA8K,OAArE,KAAqBA,GAAuB,KAAqB,GAAmBC,6BACxN,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACO,EAALxN,IACF,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,sBAAuB,MAEnF,SAASyN,GAAiEzN,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC7F,IAAM6H,EAAO,OACb,KAAsB,EAAG,OACzB,KAAsB,EAAG,MACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,gCAAiC,IAC1D,KAAkB,kBAAkB,SAAkI9E,GAA+E,OAArE,KAAqB8E,GAAuB,KAAqB,GAAmB6F,qBAAuB3K,KAC3R,OACA,OACO,EAAL/C,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,8BAEtD,SAAS2N,GAA0D3N,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACtF,IAAMkI,EAAO,OACb,KAAsB,EAAG,mBACzB,KAAsB,EAAG,MAAO,IAChC,KAAsB,EAAG,MAAO,IAChC,KAAsB,EAAG,UAAW,IACpC,KAAkB,EAAG0E,GAA0E,EAAG,EAAG,eAAgB,IACrH,KAAsB,EAAG,iBAAkB,IAC3C,KAAc,EAAG,aACjB,KAAsB,EAAG,QAAS,IAClC,KAAkB,SAAS,SAA0F7J,GAA+E,OAArE,KAAqBmF,GAAuB,KAAqB,GAAmB1D,WAAWzB,EAAO0B,OAAO3G,UAC5O,KAAc,EAAG,iBACjB,OACA,OACA,KAAsB,EAAG,iBAAkB,IAC3C,KAAc,GAAI,aAClB,KAAc,GAAI,aAClB,KAAiB,GAAI,QAAS,IAC9B,KAAc,GAAI,iBAClB,OACA,KAAiB,GAAI,uBAAwB,IAC7C,KAAc,GAAI,iBAClB,KAAc,GAAI,aAClB,KAAkB,GAAIoP,GAAsE,EAAG,EAAG,UAAW,IAC7G,KAAsB,GAAI,MAAO,IACjC,KAAkB,GAAIC,GAAmF,EAAG,EAAG,uBAAwB,IACvI,KAAc,GAAI,SAClB,KAAkB,GAAIG,GAAqE,EAAG,EAAG,SAAU,IAC3G,OACA,OACA,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,qBAAsB,IAChD,KAAkB,UAAU,SAAyGvK,GAA+E,OAArE,KAAqBmF,GAAuB,KAAqB,GAAmBxD,aAAe3B,KAClP,OACA,OACA,OACA,KAAkB,GAAI0K,GAAkE,EAAG,EAAG,MAAO,IACrG,KAAc,GAAI,SAClB,OACF,GAAS,EAALzN,EAAQ,CACV,IAAM4N,EAAc,OAAuBhJ,KACrCwG,EAAU,OAChB,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,GAAI,yBACrD,KAAiB,GACjB,KAAkB,YAAa,KAAmB,EAAG,GAAI,kBACzD,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI,gBAAtD,CAAuE,SAAU,KAAuB,GAAIhH,GAAK,KAAmB,GAAI,GAAI,gCAC5I,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,iBAA1D,CAA4E,QAAS,KAAmB,GAAI,GAAI,uBAChH,KAAiB,GACjB,KAAkB,OAAQgH,EAAQxI,aAAazG,QAC/C,KAAiB,GACjB,KAAkB,UAAW,KAAmB,GAAI,GAAIiP,EAAQyC,eAChE,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,SAAUD,EAAY5I,OAAxC,CAAgD,gBAAiB4I,EAAY3I,eAC7E,KAAiB,GACjB,KAAkB,OAAQ,KAAmB,GAAI,GAAImG,EAAQ/C,UAEjE,IAAMyF,GAAO,WAAc,MAAO,CAAC,KAAM,oBACzC,SAASC,GAAyE/N,EAAIC,GAAgB,EAALD,IAC7F,KAAsB,EAAG,IAAK,IAC9B,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAkB,aAAc,KAAuB,EAAG8N,KAC1D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,2BAA4B,MAExF,SAASE,GAAkGhO,EAAIC,GAG7G,GAH6H,EAALD,IACtH,KAAiB,EAAG,6BAA8B,IAClD,KAAc,EAAG,UACV,EAALA,EAAQ,CACV,IAAM4N,EAAc,KAAqB,GAAGhJ,KACtCqJ,EAAU,OAChB,KAAkB,WAAY,KAAmB,EAAG,EAAGA,EAAQC,WAA/D,CAA2E,eAAgBN,EAAYO,aAAvG,CAAqH,2BAA4BF,EAAQ5N,WAAWiC,IAAI,cAE5K,SAAS8L,GAAiGpO,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC7H,IAAMqO,EAAO,OACb,KAAsB,EAAG,4BAA6B,IACtD,KAAkB,eAAe,SAA2JtL,GAA+E,OAArE,KAAqBsL,GAAuB,KAAqB,GAAmBC,mBAAmBvL,KAA7S,CAAyT,uBAAuB,SAAmKA,GAA+E,OAArE,KAAqBsL,GAAuB,KAAqB,GAAmBE,oBAAoBxL,KAArmB,CAAinB,mBAAmB,SAA+JA,GAA+E,OAArE,KAAqBsL,GAAuB,KAAqB,GAAmBG,mBAAqBzL,IAAt5B,CAAi6B,yBAAyB,SAAqKA,GAA+E,OAArE,KAAqBsL,GAAuB,KAAqB,GAAmBI,wBAAwB1L,MACrtC,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,OACF,GAAS,EAAL/C,EAAQ,CACV,IAAM4N,EAAc,KAAqB,GAAGhJ,KACtC8J,EAAU,OAChB,KAAkB,WAAY,KAAmB,EAAG,EAAGA,EAAQR,WAA/D,CAA2E,SAAU,KAAmB,EAAG,GAAIQ,EAAQrL,SAAvH,CAAiI,eAAgBuK,EAAYO,aAA7J,CAA2K,2BAA4BO,EAAQrO,WAAWiC,IAAI,YAA9N,CAA2O,gBAAiB,KAAmB,EAAG,GAAIoM,EAAQC,gBAA9R,CAA+S,eAAgBD,EAAQE,oBAAvU,CAA4V,qBAAsBF,EAAQG,mBAA1X,CAA8Y,iBAAkB,KAAmB,EAAG,GAAIH,EAAQI,iBAEtc,SAASC,GAAoE/O,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChG,IAAMgP,EAAO,OACb,KAAsB,EAAG,mBACzB,KAAsB,EAAG,UAAW,IACpC,KAAsB,EAAG,MAAO,IAChC,KAAsB,EAAG,MAAO,IAChC,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAA8K,OAArE,KAAqBA,GAAuB,KAAqB,GAAmBC,mBAAqB,UAC7O,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAA8K,OAArE,KAAqBD,GAAuB,KAAqB,GAAmBC,mBAAqB,WAC7O,KAAiB,EAAG,WAAY,IAChC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,KAAiB,GAAI,MAAO,IAC5B,KAAkB,GAAIlB,GAA0E,EAAG,EAAG,IAAK,IAC3G,OACA,KAAkB,GAAIC,GAAmG,EAAG,EAAG,6BAA8B,IAC7J,KAAkB,GAAII,GAAkG,EAAG,GAAI,4BAA6B,IAC5J,OACA,OACF,GAAS,EAALpO,EAAQ,CACV,IAAMkP,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAAmB,cAA8C,SAA/BA,EAAQD,oBAC1C,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iCAAkC,KAC1F,KAAiB,GACjB,KAAmB,cAA8C,UAA/BC,EAAQD,oBAC1C,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,iCAAkC,KAC5F,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,OAAuC,UAA/BC,EAAQD,oBAClC,KAAiB,GACjB,KAAkB,OAAuC,SAA/BC,EAAQD,qBAEtC,SAASE,GAAkDnP,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC9E,IAAMoP,EAAO,OACb,KAAsB,EAAG,WACzB,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAA4J,OAArE,KAAqBA,GAAuB,KAAqB,GAAmBC,cAAc,eACpN,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAGN,GAAqE,GAAI,GAAI,kBAAmB,IACrH,KAAc,EAAG,SACjB,OACF,GAAS,EAAL/O,EAAQ,CACV,IAAMsP,EAAU,KAAqB,GACrC,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,4BAA6B,KACrF,KAAiB,GACjB,KAAkB,cAAgE,aAAjD,KAAmB,EAAG,EAAGA,EAAQC,cAEtE,SAASC,GAAwCxP,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACpE,IAAMyP,EAAO,OACb,KAAsB,EAAG,OAAQ,IACjC,KAAkB,iBAAiB,SAA+E1M,GAAsC,OAA5B,KAAqB0M,GAAc1M,EAAO2M,oBACtK,KAAsB,EAAG,YACzB,KAAsB,EAAG,WACzB,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAiJ,OAApE,KAAqBD,GAAuB,OAAuCJ,cAAc,cACzM,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAG1B,GAA2D,GAAI,GAAI,kBAAmB,IAC3G,KAAc,EAAG,SACjB,OACA,KAAkB,EAAGwB,GAAmD,EAAG,EAAG,UAAW,IACzF,KAAc,EAAG,SACjB,OACA,OACF,GAAS,EAALnP,EAAQ,CACV,IAAMkJ,EAAS,OACf,KAAkB,YAAaA,EAAO7I,YACtC,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,2BAA4B,KACpF,KAAiB,GACjB,KAAkB,cAA+D,YAAhD,KAAmB,EAAG,EAAG6I,EAAOqG,aACjE,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,EAAGrG,EAAOb,UAE/D,IAAMsH,GAAO,CAAC,mBACd,SAASC,GAAyD5P,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACrF,IAAM0J,EAAM,OACZ,KAAsB,EAAG,MAAO,GAChC,KAAkB,SAAS,WAAkL,OAAvF,KAAqBA,GAAM,KAAqB,GAAgB,KAAmB,GAAemG,eACxN,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAAL7P,EAAQ,CACV,IAAMkJ,EAAS,KAAqB,GAC9B4G,EAAM,KAAmB,GAC/B,KAAmB,WAAY5G,EAAO6G,0BACtC,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,2BAA4B,KAAMD,EAAIE,WAAY,MAE9G,SAASC,GAAmDjQ,EAAIC,GAE9D,GAF8E,EAALD,GACvE,KAAkB,EAAG4P,GAA0D,EAAG,EAAG,MAAO,GACrF,EAAL5P,EAAQ,CACV,OACA,IAAM8P,EAAM,KAAmB,GAC/B,KAAkB,OAAQA,EAAIE,aAElC,SAASE,GAAkElQ,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC9F,IAAMmQ,EAAO,OACb,KAA+B,GAC/B,KAAsB,EAAG,uBAAwB,GACjD,KAAkB,UAAU,WAAsH,KAAqBA,GAAO,IAAMb,EAAU,OAA8Bc,EAAUd,EAAQrO,KAAsC,OAAM,EAArBqO,EAAQe,OAAuBD,MACpS,OACA,OACF,GAAS,EAALpQ,EAAQ,CACV,IAAMoQ,EAAU,OAAuBnP,KACvC,KAAiB,GACjB,KAAkB,aAAcmP,EAAQE,WAAxC,CAAoD,aAAY,IAEpE,SAASC,GAAkEvQ,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC9F,IAAMwQ,EAAO,OACb,KAA+B,GAC/B,KAAsB,EAAG,WAAY,GACrC,KAAkB,aAAa,WAA6G,KAAqBA,GAAO,IAAMC,EAAU,OAA8BL,EAAUK,EAAQxP,KAAsC,OAAM,EAArBwP,EAAQJ,OAAuBD,MAC9R,KAAc,GACd,OACA,OACF,GAAS,EAALpQ,EAAQ,CACV,IAAMoQ,EAAU,OAAuBnP,KACvC,KAAiB,GACjB,KAAkB,OAAQ,SAC1B,KAAiB,GACjB,KAA0B,IAAMmP,EAAQM,MAAO,MAEnD,SAASC,GAAmD3Q,EAAIC,GAG9D,GAH8E,EAALD,IACvE,KAAkB,EAAGkQ,GAAmE,EAAG,EAAG,eAAgB,GAC9G,KAAkB,EAAGK,GAAmE,EAAG,EAAG,eAAgB,IACvG,EAALvQ,EAAQ,CACV,IAAMoQ,EAAUnQ,EAAIgB,KACpB,KAAkB,OAAQmP,EAAQE,YAClC,KAAiB,GACjB,KAAkB,QAASF,EAAQE,aAEvC,SAASM,GAAkE5Q,EAAIC,GAI7E,GAJ6F,EAALD,IACtF,KAA+B,GAC/B,KAAiB,EAAG,uBAAwB,IAC5C,QACO,EAALA,EAAQ,CACV,IAAM6Q,EAAW,OAAuB5P,KACxC,KAAiB,GACjB,KAAkB,aAAc4P,EAASP,WAAzC,CAAqD,aAAY,IAErE,SAASQ,GAAmD9Q,EAAIC,GAE9D,GAF8E,EAALD,GACvE,KAAkB,EAAG4Q,GAAmE,EAAG,EAAG,eAAgB,GACvG,EAAL5Q,EAAQ,CACV,IAAM6Q,EAAW5Q,EAAIgB,KACrB,KAAkB,OAAQ4P,EAASP,aAEvC,IAAMS,GAAO,CAAC,+BACd,SAASC,GAAmChR,EAAIC,GAAgB,EAALD,IACvD,KAAsB,EAAG,IAAK,IAC9B,KAAiB,EAAG,WAAY,IAChC,KAAsB,EAAG,OAAQ,IACjC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,QACO,EAALA,IACF,KAAkB,aAAc,KAAuB,EAAGoF,KAC1D,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,gCAEtD,SAAS6L,GAAmDjR,EAAIC,GAG9D,GAH8E,EAALD,IACvE,KAAiB,EAAG,MAAO,IAC3B,KAAc,EAAG,iBACV,EAALA,EAAQ,CACV,IAAMkR,EAAWjR,EAAI2E,KACrB,KAAkB,MAAO,KAAmB,EAAG,EAAGsM,EAAU,QAAS,OAEzE,SAASC,GAA2DnR,EAAIC,GAAgB,EAALD,IAC/E,KAAsB,EAAG,MAAO,IAChC,KAAiB,EAAG,WAAY,IAChC,QAEJ,SAASoR,GAAwDpR,EAAIC,GAAgB,EAALD,IAC5E,KAAsB,EAAG,YACzB,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,qBAEtD,SAASqR,GAA6CrR,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACzE,IAAMiJ,EAAO,OACb,KAAsB,EAAG,KAAM,IAC/B,KAAsB,EAAG,MAAO,IAChC,KAAkB,EAAGgI,GAAoD,EAAG,EAAG,MAAO,IACtF,KAAkB,EAAGE,GAA4D,EAAG,EAAG,cAAe,KAAM,GAAI,MAChH,OACA,OACA,KAAsB,EAAG,KAAM,IAC/B,KAAc,GACd,OACA,KAAsB,EAAG,KAAM,IAC/B,KAAkB,EAAGC,GAAyD,EAAG,EAAG,WAAY,IAChG,OACA,KAAsB,EAAG,KAAM,IAC/B,KAAiB,GAAI,uBAAwB,IAC7C,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,KAAM,IAChC,KAAsB,GAAI,gBAC1B,KAAsB,GAAI,SAAU,IACpC,KAAc,IACd,KAAc,GAAI,aAClB,KAAiB,GAAI,WAAY,IACjC,OACA,KAAsB,GAAI,oBAAqB,GAC/C,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAAmF,KAAqBnI,GAAO,IAAMqI,EAAYrR,EAAIgB,KAA6C,OAAxB,OAAsCsQ,cAAcD,EAAUnQ,cACnP,KAAc,GAAI,iBAClB,KAAiB,GAAI,WAAY,IACjC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,OACF,GAAS,EAALnB,EAAQ,CACV,IAAMsR,EAAYrR,EAAIgB,KAChBQ,EAAM,KAAmB,GACzB+P,EAAS,OACf,KAAmB,YAAaF,EAAUG,SAC1C,KAAiB,GACjB,KAAkB,OAAQD,EAAOE,eAAiBJ,EAAUK,aAAeL,EAAUM,qBAAuBN,EAAUK,aAAtH,CAAoI,WAAYlQ,GAChJ,KAAiB,GACjB,KAAmB,YAAa6P,EAAUG,SAC1C,KAAiB,GACjB,KAA0B,IAAKD,EAAOE,eAAiBJ,EAAUO,YAAcP,EAAUQ,mBAAoB,KAC7G,KAAiB,GACjB,KAAmB,YAAaR,EAAUG,SAC1C,KAAiB,GACjB,KAAkB,QAASH,EAAUG,SACrC,KAAiB,GACjB,KAAmB,YAAaH,EAAUG,SAC1C,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI,eAAtD,CAAsE,SAAU,KAAuB,GAAInI,GAAMgI,EAAUnQ,YAC3H,KAAiB,GACjB,KAAmB,YAAamQ,EAAUG,SAC1C,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,kBAAmB,KAC7E,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,iBAAkB,MAEhF,SAASM,GAA8C/R,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC1E,IAAM0J,EAAM,OACZ,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,QAAS,GAClC,KAAkB,iBAAiB,SAAsF3G,GAAqE,OAA3D,KAAqB2G,GAAuBzJ,EAAIqB,UAA2BJ,KAAO6B,KACrN,OACA,OACA,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,GAAI,yBAA0B,GAAI,IACxD,KAAkB,iBAAiB,SAAwGA,GAAqE,OAA3D,KAAqB2G,GAAuBzJ,EAAIqB,UAA2BvE,OAASgG,IAAzO,CAAoP,iBAAiB,WAA8K,OAAlE,KAAqB2G,GAAqB,OAAsCsI,sBACjc,OACA,OACA,OACF,GAAS,EAALhS,EAAQ,CACV,IAAMiS,EAAWhS,EAAIqB,UACrB,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,mBAClD,KAAiB,GACjB,KAAkB,UAAW2Q,EAAS/Q,KAAtC,CAA4C,YAAa+Q,EAASC,OAClE,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,0BAClD,KAAiB,GACjB,KAAkB,UAAWD,EAASlV,OAAtC,CAA8C,YAAakV,EAAS/Q,KAApE,CAA0E,WAA8B,KAAlB+Q,EAAS/Q,OAEnG,SAASiR,GAAiDnS,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC7E,IAAMiJ,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAyJ,OAAnE,KAAqBA,GAAsB,OAAsCmJ,eAClM,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACO,EAALpS,IACF,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,sBAAuB,OAEnF,SAASqS,GAAsDrS,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAClF,IAAMsS,EAAO,OACb,KAAsB,EAAG,QAAS,IAClC,KAAkB,iBAAiB,SAA8FvP,GAAU,KAAqBuP,GAAO,IAAMC,EAAc,OAAuBjR,UAAmD,OAAxB,OAAuCkR,kBAAkBD,EAAYpN,IAAIsM,QAAU1O,IAAhU,CAA2U,iBAAiB,WAAuK,OAArE,KAAqBuP,GAAuB,KAAqB,GAAmBG,uBAClhB,OACF,GAAS,EAALzS,EAAQ,CACV,IAAMuS,EAAc,OAAuBjR,UACrCgO,EAAU,OAChB,KAAkB,UAAWA,EAAQkD,kBAAkBD,EAAYpN,IAAIsM,UAE3E,SAASiB,GAAoE1S,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChG,IAAM2S,EAAO,OACb,KAAsB,EAAG,uBACzB,KAAsB,EAAG,QAAS,IAClC,KAAkB,iBAAiB,SAA4G5P,GAAU,KAAqB4P,GAAO,IAAMJ,EAAc,OAAuBjR,UAAmD,OAAxB,OAAuCkR,kBAAkBD,EAAYpN,IAAIyN,IAAM7P,IAA1U,CAAqV,iBAAiB,WAAgH,KAAqB4P,GAAO,IAAMJ,EAAc,OAAuBjR,UAAiBuF,EAAU,OAAwB,OAAOA,EAAQgM,cAAchM,EAAQ2L,kBAAkBD,EAAYpN,QACnpB,KAAc,EAAG,aACjB,OACA,OACF,GAAS,EAALnF,EAAQ,CACV,IAAMuS,EAAc,OAAuBjR,UACrCqB,EAAU,OAChB,KAAiB,GACjB,KAAkB,UAAWA,EAAQ6P,kBAAkBD,EAAYpN,IAAIyN,IAAvE,CAA4E,cAAe,KAAmB,EAAG,EAAG,iBAExH,SAASE,GAAqD9S,EAAIC,GAIhE,GAJgF,EAALD,IACzE,KAAsB,EAAG,QACzB,KAAc,GACd,QACO,EAALA,EAAQ,CACV,IAAMuS,EAAc,OAAuBjR,UACrC8B,EAAU,OAChB,KAAiB,GACjB,KAAyBA,EAAQoP,kBAAkBD,EAAYpN,IAAIyN,MAEvE,SAASG,GAAoE/S,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChG,IAAMgT,EAAO,OACb,KAAsB,EAAG,uBACzB,KAAsB,EAAG,qBAAsB,IAC/C,KAAkB,iBAAiB,SAAyHjQ,GAAU,KAAqBiQ,GAAO,IAAMT,EAAc,OAAuBjR,UAAmD,OAAxB,OAAuCkR,kBAAkBD,EAAYpN,IAAI4F,MAAQhI,IAAzV,CAAoW,iBAAiB,WAA6H,KAAqBiQ,GAAO,IAAMT,EAAc,OAAuBjR,UAAiB2R,EAAU,OAAwB,OAAOA,EAAQJ,cAAcI,EAAQT,kBAAkBD,EAAYpN,QAC/qB,OACA,OACF,GAAS,EAALnF,EAAQ,CACV,IAAMuS,EAAc,OAAuBjR,UACrCwC,EAAU,OAChB,KAAiB,GACjB,KAAkB,UAAWA,EAAQ0O,kBAAkBD,EAAYpN,IAAI4F,MAAvE,CAA8E,eAAgBjH,EAAQ8G,eAE1G,SAASsI,GAAsDlT,EAAIC,GAKjE,GALiF,EAALD,IAC1E,KAAsB,EAAG,QACzB,KAAc,GACd,KAAc,EAAG,YACjB,QACO,EAALA,EAAQ,CACV,IAAMuS,EAAc,OAAuBjR,UACrCmP,EAAU,OAChB,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAGA,EAAQ+B,kBAAkBD,EAAYpN,IAAI4F,MAAQ,IAAK0F,EAAQ7F,gBAErH,SAASuI,GAAqEnT,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACjG,IAAMkI,EAAO,OACb,KAAsB,EAAG,uBACzB,KAAsB,EAAG,QAAS,IAClC,KAAkB,iBAAiB,SAA6GnF,GAAU,KAAqBmF,GAAO,IAAMqK,EAAc,OAAuBjR,UAAmD,OAAxB,OAAuCkR,kBAAkBD,EAAYpN,IAAIiO,MAAQrQ,IAA7U,CAAwV,iBAAiB,WAAiH,KAAqBmF,GAAO,IAAMqK,EAAc,OAAuBjR,UAAiB+R,EAAU,OAAwB,OAAOA,EAAQR,cAAcQ,EAAQb,kBAAkBD,EAAYpN,QACvpB,OACA,OACF,GAAS,EAALnF,EAAQ,CACV,IAAMuS,EAAc,OAAuBjR,UACrC8E,EAAU,OAChB,KAAiB,GACjB,KAAkB,UAAWA,EAAQoM,kBAAkBD,EAAYpN,IAAIiO,QAE3E,SAASE,GAAsDtT,EAAIC,GAIjE,GAJiF,EAALD,IAC1E,KAAsB,EAAG,QACzB,KAAc,GACd,QACO,EAALA,EAAQ,CACV,IAAMuS,EAAc,OAAuBjR,UACrCkB,EAAU,OAChB,KAAiB,GACjB,KAAyBA,EAAQgQ,kBAAkBD,EAAYpN,IAAIiO,QAEvE,SAASG,GAA8DvT,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC1F,IAAMwT,EAAO,OACb,KAAsB,EAAG,gBACzB,KAAsB,EAAG,SAAU,IACnC,KAAiB,EAAG,WAAY,IAChC,OACA,KAAsB,EAAG,oBAAqB,IAC9C,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAmG,KAAqBA,GAAO,IAAMC,EAAuBxT,EAAI2E,KAA+C,OAAzB,KAAqB,GAAmB8O,cAAcD,MACvQ,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,OACA,OACO,EAALzT,IACF,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iBAAkB,MAE9E,SAAS2T,GAA8C3T,EAAIC,GAwBzD,GAxByE,EAALD,IAClE,KAAsB,EAAG,MACzB,KAAsB,EAAG,MACzB,KAAkB,EAAGqS,GAAuD,EAAG,EAAG,QAAS,IAC3F,OACA,KAAsB,EAAG,MACzB,KAAc,GACd,OACA,KAAsB,EAAG,MACzB,KAAkB,EAAGK,GAAqE,EAAG,EAAG,sBAAuB,IACvH,KAAkB,EAAGI,GAAsD,EAAG,EAAG,OAAQ,IACzF,OACA,KAAsB,EAAG,MACzB,KAAkB,EAAGC,GAAqE,EAAG,EAAG,sBAAuB,IACvH,KAAkB,GAAIG,GAAuD,EAAG,EAAG,OAAQ,IAC3F,OACA,KAAsB,GAAI,MAC1B,KAAkB,GAAIC,GAAsE,EAAG,EAAG,sBAAuB,IACzH,KAAkB,GAAIG,GAAuD,EAAG,EAAG,OAAQ,IAC3F,OACA,KAAsB,GAAI,MAC1B,KAAkB,GAAIC,GAA+D,EAAG,EAAG,eAAgB,IAC3G,OACA,QACO,EAALvT,EAAQ,CACV,IAAMuS,EAActS,EAAIqB,UAClBkQ,EAAS,OACf,KAAmB,YAAaA,EAAOgB,kBAAkBD,EAAYpN,IAAIsM,SAAWD,EAAOgB,kBAAkBD,EAAYpN,IAAIyO,UAC7H,KAAiB,GACjB,KAAkB,QAASpC,EAAOgB,kBAAkBD,EAAYpN,IAAIyO,UACpE,KAAiB,GACjB,KAA0B,IAAKpC,EAAOqC,eAAetB,GAAc,KACnE,KAAiB,GACjB,KAAkB,QAASf,EAAOgB,kBAAkBD,EAAYpN,IAAIyO,UACpE,KAAiB,GACjB,KAAkB,OAAQpC,EAAOgB,kBAAkBD,EAAYpN,IAAIyO,UACnE,KAAiB,GACjB,KAAkB,QAASpC,EAAOgB,kBAAkBD,EAAYpN,IAAIyO,UACpE,KAAiB,GACjB,KAAkB,OAAQpC,EAAOgB,kBAAkBD,EAAYpN,IAAIyO,UACnE,KAAiB,GACjB,KAAkB,QAASpC,EAAOgB,kBAAkBD,EAAYpN,IAAIyO,UACpE,KAAiB,GACjB,KAAkB,OAAQpC,EAAOgB,kBAAkBD,EAAYpN,IAAIyO,UACnE,KAAiB,GACjB,KAAkB,OAAQpC,EAAOgB,kBAAkBD,EAAYpN,IAAI2O,mBAEvE,SAASC,GAA4D/T,EAAIC,GAEvE,GAFuF,EAALD,GAChF,KAAiB,EAAG,2BAA4B,GACzC,EAALA,EAAQ,CACV,IAAMI,EAAS,OACf,KAAkB,YAAaA,EAAO4T,UAAtC,CAAiD,iBAAkB5T,EAAO6T,eAA1E,CAA0F,qBAAsB7T,EAAO8T,qBAE3H,SAASC,GAA+DnU,EAAIC,GAAgB,EAALD,GACnF,KAAiB,EAAG,WAAY,IAEpC,SAASoU,GAA+DpU,EAAIC,GAAgB,EAALD,GACnF,KAAiB,EAAG,WAAY,IAEpC,SAASqU,GAAoDrU,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChF,IAAMsU,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAyF,KAAqBA,GAAO,IAAMC,EAAgB,OAAuBjT,UAAW,OAAOiT,EAAcC,UAAYD,EAAcC,YACvP,KAAkB,EAAGL,GAAgE,EAAG,EAAG,WAAY,IACvG,KAAkB,EAAGC,GAAgE,EAAG,EAAG,WAAY,IACvG,OACF,GAAS,EAALpU,EAAQ,CACV,IAAMuU,EAAgB,OAAuBjT,UACvC4H,EAAS,OACf,KAAkB,WAAYA,EAAO8K,WACrC,KAAiB,GACjB,KAAkB,QAASO,EAAcC,WAAatL,EAAO8K,WAC7D,KAAiB,GACjB,KAAkB,OAAQO,EAAcC,UAAYtL,EAAO8K,YAE/D,SAASS,GAAyDzU,EAAIC,GAAgB,EAALD,GAC7E,KAAiB,EAAG,MAAO,IAE/B,SAAS0U,GAAsD1U,EAAIC,GAAgB,EAALD,IAC1E,KAAsB,EAAG,YACzB,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,qBAEtD,SAAS2U,GAAkD3U,EAAIC,GAAgB,EAALD,IACtE,KAAsB,EAAG,MAAO,IAChC,KAAiB,EAAG,WAAY,IAChC,QAEJ,IAAM4U,GAAO,SAAUvT,GAAM,MAAO,CAAEwT,SAAUxT,IAC1CyT,GAAO,SAAUhU,GAAM,MAAO,CAAC,KAAM,SAAUA,IACrD,SAASiU,GAAgD/U,EAAIC,GAM3D,GAN2E,EAALD,IACpE,KAAsB,EAAG,IAAK,IAC9B,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,EAAQ,CACV,IAAMuU,EAAgB,OAAuBjT,UAC7C,KAAkB,aAAc,KAAuB,EAAGwT,GAAM,KAAuB,EAAGF,GAAML,EAAcpP,MAC9G,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iCAAkC,MAE9F,SAAS6P,GAAqDhV,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACjF,IAAMiV,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAA0F,KAAqBA,GAAO,IAAMpE,EAAW5Q,EAAIqB,UAAiBiT,EAAgB,OAAuBjT,UAAmD,OAAxB,OAAuC4T,KAAKX,EAAe1D,EAAS1L,OAC7T,KAAc,EAAG,SACjB,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,OACF,GAAS,EAALnF,EAAQ,CACV,IAAM6Q,EAAW5Q,EAAIqB,UACf6T,EAAU,KAAqB,GACrC,KAAkB,YAAa,KAAmB,EAAG,EAAGA,EAAQC,uBAChE,KAAiB,GACjB,KAA0B,IAAKvE,EAASwE,KAAM,MAElD,SAASC,GAAuEtV,EAAIC,GAElF,GAFkG,EAALD,GAC3F,KAAiB,EAAG,2BAA4B,IACzC,EAALA,EAAQ,CACV,IAAMuU,EAAgB,OAAuBjT,UACvC8J,EAAU,OAChB,KAAkB,YAAaA,EAAQ4I,UAAvC,CAAkD,iBAAkBO,EAApE,CAAmF,qBAAsBnJ,EAAQ8I,qBAErH,IAAMqB,GAAO,SAAUlU,GAAM,MAAO,CAAEmU,SAAUnU,IAC1CoU,GAAO,SAAU5U,GAAM,MAAO,CAAC,wBAAyBA,IAC9D,SAAS6U,GAA2C1V,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACvE,IAAM8C,EAAO,OACb,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAkB,EAAGuR,GAAqD,EAAG,EAAG,SAAU,GAC1F,KAAkB,EAAGI,GAA0D,EAAG,EAAG,cAAe,KAAM,EAAG,MAC7G,KAAc,GACd,OACA,KAAiB,EAAG,MAAO,GAC3B,KAAkB,EAAGC,GAAuD,EAAG,EAAG,WAAY,GAC9F,KAAsB,EAAG,IAAK,IAC9B,KAAiB,GAAI,WAAY,IACjC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,IAAK,IAC/B,KAAiB,GAAI,WAAY,IACjC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAkB,GAAIC,GAAmD,EAAG,EAAG,MAAO,IACtF,KAAsB,GAAI,gBAC1B,KAAsB,GAAI,SAAU,IACpC,KAAiB,GAAI,WAAY,IACjC,OACA,KAAsB,GAAI,oBAAqB,IAC/C,KAAkB,GAAII,GAAiD,EAAG,EAAG,IAAK,IAClF,KAAiB,GAAI,MAAO,IAC5B,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAAiF,KAAqBjS,GAAO,IAAMyR,EAAgBtU,EAAIqB,UAAiBqU,EAAO1V,EAAIkD,MAA+C,OAAxB,OAAuCyS,OAAOrB,EAAeoB,MAClR,KAAc,GAAI,SAClB,KAAiB,GAAI,WAAY,IACjC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAAiF,KAAqB7S,GAAO,IAAMyR,EAAgBtU,EAAIqB,UAAiBqU,EAAO1V,EAAIkD,MAA+C,OAAxB,OAAuC0S,SAAStB,EAAeoB,MACpR,KAAc,GAAI,SAClB,KAAiB,GAAI,WAAY,IACjC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,KAAM,IAChC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAkB,GAAIX,GAAsD,EAAG,EAAG,SAAU,IAC5F,KAAiB,GAAI,MAAO,IAC5B,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAAiF,KAAqBlS,GAAO,IAAMyR,EAAgBtU,EAAIqB,UAAmD,OAAxB,cAA8CiT,EAAcpP,OACzP,KAAc,GAAI,SAClB,KAAiB,GAAI,WAAY,IACjC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,OACA,KAAkB,GAAImQ,GAAwE,EAAG,EAAG,2BAA4B,IAChI,OACF,GAAS,EAALtV,EAAQ,CACV,IAAMuU,EAAgBtU,EAAIqB,UACpBqU,EAAO1V,EAAIkD,MACX1B,EAAM,KAAmB,GACzBiE,EAAS,OACf,KAAmB,UAAW6O,EAAc5K,WAC5C,KAAkB,cAAe4K,GACjC,KAAiB,GACjB,KAAmB,SAAUA,EAAcpP,KAAOO,EAAOwO,oBACzD,KAAkB,UAAW,SAAWxO,EAAOoQ,OAC/C,KAAiB,GACjB,KAAkB,OAAkC,MAA1BvB,EAAcwB,SAAmB,KAAOxB,EAAcwB,SAAS5Z,OAAzF,CAAiG,WAAYsF,GAC7G,KAAiB,GACjB,KAA0B,IAAK8S,EAAcrT,KAAM,KACnD,KAAiB,GACjB,KAAkB,OAAQqT,EAAc5K,WACxC,KAAiB,GACjB,KAAkB,aAAc,KAAuB,GAAIL,GAAM,KAAuB,GAAIiM,GAAMhB,EAAcpP,MAChH,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,yBAA0B,KACpF,KAAiB,GACjB,KAAkB,aAAc,KAAuB,GAAIsQ,GAAMlB,EAAcpP,KAC/E,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,eAAgB,KAC1E,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,WAAqB,IAATwQ,IAAe,KAAmB,GAAI,GAAIjQ,EAAO0P,uBAC/E,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,mBAAoB,KAC9E,KAAiB,GACjB,KAAkB,WAAYO,IAASjQ,EAAOuO,eAAe8B,SAAS5Z,OAAS,IAAM,KAAmB,GAAI,GAAIuJ,EAAO0P,uBACvH,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,qBAAsB,KAChF,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,oBACpD,KAAiB,GACjB,KAAkB,UAAW1P,EAAOsQ,iBAAiBzB,IACrD,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI7O,EAAOuQ,uBACjE,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,iBAAkB,KAC5E,KAAiB,GACjB,KAAkB,OAAQ1B,EAAcC,UAAY9O,EAAOsO,YAE/D,SAASkC,GAAgDlW,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC5E,IAAMmW,EAAM,OACZ,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,QAAS,GAClC,KAAkB,iBAAiB,SAAwFpT,GAAqE,OAA3D,KAAqBoT,GAAuBlW,EAAIqB,UAA2BJ,KAAO6B,IAAvN,CAAkO,iBAAiB,SAAwFA,GAAU,KAAqBoT,GAAM,IAAM1U,EAAM,KAAmB,IAA4C,OAAxB,OAAsC2U,YAAYrT,EAAQtB,MAC7d,OACA,OACA,KAAsB,EAAG,MAAO,IAChC,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,GAAI,yBAA0B,GAAI,IACxD,KAAkB,iBAAiB,SAA0GsB,GAAqE,OAA3D,KAAqBoT,GAAuBlW,EAAIqB,UAA2BvE,OAASgG,IAA3O,CAAsP,iBAAiB,WAAiL,OAAnE,KAAqBoT,GAAsB,OAAuCnE,sBACvc,OACA,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAAsF,KAAqBmE,GAAM,IAAME,EAAWpW,EAAIqB,UAAmD,OAAxB,OAAuCgV,aAAaD,EAASnV,SACzP,KAAc,GAAI,aAClB,KAAiB,GAAI,WAAY,IACjC,OACA,OACA,OACF,GAAS,EAALlB,EAAQ,CACV,IAAMqW,EAAWpW,EAAIqB,UACrB,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,mBAClD,KAAiB,GACjB,KAAkB,UAAW+U,EAASnV,MACtC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,0BAClD,KAAiB,GACjB,KAAkB,UAAWmV,EAAStZ,OAAtC,CAA8C,YAAasZ,EAASnV,KAApE,CAA0E,WAA8B,KAAlBmV,EAASnV,MAC/F,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAI,2BAE1D,SAASqV,GAA+CvW,EAAIC,GAAgB,EAALD,IACnE,KAAsB,EAAG,MACzB,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,mBAEtD,SAASwW,GAAgDxW,EAAIC,GAAgB,EAALD,IACpE,KAAsB,EAAG,MACzB,KAAc,GACd,KAAc,EAAG,aACjB,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,qBAEtD,SAASyW,GAAqDzW,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACjF,IAAMsU,EAAO,OACb,KAAsB,EAAG,MACzB,KAAsB,EAAG,QAAS,IAClC,KAAkB,UAAU,WAA+J,OAArE,KAAqBA,GAAuB,KAAqB,GAAmBoC,iBAA1M,CAA6N,iBAAiB,SAA6F3T,GAAU,KAAqBuR,GAAO,IAAMqC,EAAc,OAAuBrV,UAAmD,OAAxB,OAAuCkR,kBAAkBmE,EAAYxR,IAAIsM,QAAU1O,KAC1gB,OACA,OACF,GAAS,EAAL/C,EAAQ,CACV,IAAM2W,EAAc,OAAuBrV,UACrCqB,EAAU,OAChB,KAAiB,GACjB,KAAkB,UAAWA,EAAQ6P,kBAAkBmE,EAAYxR,IAAIsM,UAE3E,SAASmF,GAAqD5W,EAAIC,GAIhE,GAJgF,EAALD,IACzE,KAAsB,EAAG,MACzB,KAAc,GACd,QACO,EAALA,EAAQ,CACV,IAAM2W,EAAc,OAAuBrV,UAC3C,KAAiB,GACjB,KAA0B,IAAKqV,EAAY5Z,OAAO8Z,KAAK,KAAM,MAEjE,SAASC,GAAgD9W,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC5E,IAAMiV,EAAO,OACb,KAAsB,EAAG,MACzB,KAAkB,EAAGwB,GAAsD,EAAG,EAAG,KAAM,GACvF,KAAkB,EAAGG,GAAsD,EAAG,EAAG,KAAM,GACvF,KAAsB,EAAG,MACzB,KAAsB,EAAG,uBACzB,KAAsB,EAAG,QAAS,IAClC,KAAkB,UAAU,WAAyJ,OAApE,KAAqB3B,GAAuB,OAAuCyB,iBAApM,CAAuN,iBAAiB,SAAwF3T,GAAU,KAAqBkS,GAAO,IAAM0B,EAAc1W,EAAIqB,UAAmD,OAAxB,OAAuCkR,kBAAkBmE,EAAYxR,IAAIyN,IAAM7P,KACxe,KAAc,EAAG,aACjB,OACA,OACA,OACA,KAAsB,EAAG,MACzB,KAAsB,EAAG,uBACzB,KAAsB,EAAG,qBAAsB,IAC/C,KAAkB,iBAAiB,SAAqGA,GAAU,KAAqBkS,GAAO,IAAM0B,EAAc1W,EAAIqB,UAAmD,OAAxB,OAAuCkR,kBAAkBmE,EAAYxR,IAAI4F,MAAQhI,IAAlT,CAA6T,iBAAiB,WAA6K,OAApE,KAAqBkS,GAAuB,OAAuCyB,kBAC1gB,OACA,OACA,OACA,KAAsB,GAAI,MAC1B,KAAsB,GAAI,uBAC1B,KAAsB,GAAI,QAAS,IACnC,KAAkB,iBAAiB,SAAyF3T,GAAU,KAAqBkS,GAAO,IAAM0B,EAAc1W,EAAIqB,UAAmD,OAAxB,OAAuCkR,kBAAkBmE,EAAYxR,IAAIiO,MAAQrQ,IAAtS,CAAiT,UAAU,WAA0J,OAApE,KAAqBkS,GAAuB,OAAuCyB,kBACpe,OACA,OACA,OACA,OACF,GAAS,EAAL1W,EAAQ,CACV,IAAM2W,EAAc1W,EAAIqB,UAClBwD,EAAS,OACf,KAAmB,YAAaA,EAAO0N,kBAAkBmE,EAAYxR,IAAIsM,SACzE,KAAiB,GACjB,KAAkB,OAAQ,EAAI3M,EAAOiS,SAAS5a,QAC9C,KAAiB,GACjB,KAAkB,OAAQ,EAAI2I,EAAOiS,SAAS5a,QAC9C,KAAiB,GACjB,KAAkB,UAAW2I,EAAO0N,kBAAkBmE,EAAYxR,IAAIyN,IAAtE,CAA2E,cAAe,KAAmB,EAAG,EAAG,gBACnH,KAAiB,GACjB,KAAkB,UAAW9N,EAAO0N,kBAAkBmE,EAAYxR,IAAI4F,MAAtE,CAA6E,eAAgBjG,EAAO8F,cACpG,KAAiB,GACjB,KAAkB,UAAW9F,EAAO0N,kBAAkBmE,EAAYxR,IAAIiO,QAE1E,IAAM4D,GAAO,CAAC,YACd,SAASC,GAAoDjX,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChF,IAAM0J,EAAM,OACZ,KAAsB,EAAG,WAAY,GACrC,KAAkB,aAAa,WAA+F,KAAqBA,GAAM,IAAMwN,EAAYjX,EAAIqB,UAAmD,OAAzB,KAAqB,GAAkBgV,aAAaY,MAC7P,KAAc,GACd,OACF,GAAS,EAALlX,EAAQ,CACV,IAAMkX,EAAYjX,EAAIqB,UAChB6V,EAAYlX,EAAImX,KAChB5F,EAAS,KAAqB,GACpC,KAAmB,WAAY2F,GAAa3F,EAAO6F,aAAnD,CAAiE,SAAUH,EAAUI,QACrF,KAAkB,OAAQJ,EAAUI,OAAS,OAAS,QAAtD,CAA+D,YAAa9F,EAAO+F,WACnF,KAAiB,GACjB,KAA0B,IAAKL,EAAUhW,KAAM,MAEnD,SAASsW,GAAyCxX,EAAIC,GAIpD,GAJoE,EAALD,IAC7D,KAAsB,EAAG,MAAO,GAChC,KAAkB,EAAGiX,GAAqD,EAAG,EAAG,WAAY,GAC5F,QACO,EAALjX,EAAQ,CACV,IAAMI,EAAS,OACf,KAAiB,GACjB,KAAkB,UAAWA,EAAOqX,UAExC,IAAMC,GAAO,CAAC,OACRC,GAAO,CAAC,MACd,SAASC,GAA4C5X,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACxE,IAAMiJ,EAAO,OACb,KAAsB,EAAG,MAAO,IAChC,KAAkB,SAAS,WAA8E,KAAqBA,GAAO,IAAMN,EAAS,KAAqB,GAAI,OAAOA,EAAOkP,aAAalP,EAAO1D,kBAC/M,KAAc,EAAG,gBACjB,OACF,GAAS,EAALjF,EAAQ,CACV,IAAMyL,EAAS,KAAqB,GACpC,KAAkB,MAAO,KAAmB,EAAG,EAAGA,EAAOxG,cAAe,SAAU,OAEtF,SAAS6S,GAA4C9X,EAAIC,GAAgB,EAALD,IAChE,KAAsB,EAAG,MAAO,IAChC,KAAiB,EAAG,WAAY,IAChC,KAAsB,EAAG,OACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,+BAEtD,SAAS+X,GAAqD/X,EAAIC,GAAgB,EAALD,GACzE,KAA0B,GAE9B,SAASgY,GAA4ChY,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACxE,IAAMwL,EAAO,OACb,KAAsB,EAAG,MAAO,IAChC,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAsJ,OAArE,KAAqBA,GAAuB,KAAqB,GAAmByM,kBAChM,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,OACO,EAALjY,IACF,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,mBAAoB,MAEhF,SAASkY,GAAsClY,EAAIC,GAajD,GAbiE,EAALD,IAC1D,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAkB,EAAG4X,GAA6C,EAAG,EAAG,MAAO,GAC/E,KAAkB,EAAGE,GAA6C,EAAG,EAAG,MAAO,GAC/E,OACA,OACA,KAAsB,EAAG,MAAO,GAChC,KAAkB,EAAGC,GAAsD,EAAG,EAAG,eAAgB,GACjG,OACA,KAAkB,EAAGC,GAA6C,EAAG,EAAG,MAAO,IAC/E,QACO,EAALhY,EAAQ,CACV,IAAMI,EAAS,OACT0J,EAAM,KAAmB,GAC/B,KAAiB,GACjB,KAAkB,OAAQ1J,EAAO6E,eACjC,KAAiB,GACjB,KAAkB,QAAS7E,EAAO6E,eAClC,KAAiB,GACjB,KAAkB,mBAAoB6E,GACtC,KAAiB,GACjB,KAAkB,mBAAoB,kBAE1C,SAASqO,GAAoDnY,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChF,IAAMwJ,EAAO,OACb,KAAsB,EAAG,MAAO,IAChC,KAAkB,SAAS,WAAsF,KAAqBA,GAAO,IAAMpD,EAAU,KAAqB,GAAI,OAAOA,EAAQyR,aAAazR,EAAQnB,kBAC1N,KAAc,EAAG,gBACjB,OACF,GAAS,EAALjF,EAAQ,CACV,IAAM2C,EAAU,KAAqB,GACrC,KAAkB,MAAO,KAAmB,EAAG,EAAGA,EAAQsC,cAAe,SAAU,OAEvF,SAASmT,GAAoDpY,EAAIC,GAAgB,EAALD,IACxE,KAAsB,EAAG,MAAO,IAChC,KAAiB,EAAG,WAAY,IAChC,QAEJ,SAASqY,GAA6DrY,EAAIC,GAAgB,EAALD,GACjF,KAA0B,GAE9B,SAASsY,GAAuDtY,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACnF,IAAMuY,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAiK,OAArE,KAAqBA,GAAuB,KAAqB,GAAmBN,kBAC3M,KAAc,EAAG,aACjB,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACO,EAALjY,IACF,KAAkB,QAAS,KAAmB,EAAG,EAAG,oBACpD,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,mBAAoB,MAEhF,SAASwY,GAA8CxY,EAAIC,GAOzD,GAPyE,EAALD,IAClE,KAAsB,EAAG,MAAO,IAChC,KAAkB,EAAGmY,GAAqD,EAAG,EAAG,MAAO,GACvF,KAAkB,EAAGC,GAAqD,EAAG,EAAG,MAAO,GACvF,OACA,KAAkB,EAAGC,GAA8D,EAAG,EAAG,eAAgB,GACzG,KAAkB,EAAGC,GAAwD,EAAG,EAAG,SAAU,KACtF,EAALtY,EAAQ,CACV,IAAMwR,EAAS,OACT1H,EAAM,KAAmB,GAC/B,KAAiB,GACjB,KAAkB,OAAQ0H,EAAOvM,eACjC,KAAiB,GACjB,KAAkB,QAASuM,EAAOvM,eAClC,KAAiB,GACjB,KAAkB,mBAAoB6E,GACtC,KAAiB,GACjB,KAAkB,mBAAoB,kBAE1C,SAAS2O,GAAoDzY,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAChF,IAAM2S,EAAO,OACb,KAAsB,EAAG,MAAO,IAChC,KAAkB,sBAAsB,WAAwK,OAArE,KAAqBA,GAAuB,KAAqB,GAAmB+F,qBAC/N,KAAc,EAAG,iBACjB,KAAsB,EAAG,eAAgB,IACzC,KAAkB,gBAAgB,SAAkG3V,GAA+E,OAArE,KAAqB4P,GAAuB,KAAqB,GAAmBgG,UAAU5V,MAC5O,KAAsB,EAAG,MAAO,IAChC,KAAiB,EAAG,MAAO,IAC3B,KAAc,EAAG,gBACjB,OACA,KAAsB,EAAG,oBAAqB,IAC9C,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAyF,KAAqB4P,GAAO,IAAMiG,EAAY3Y,EAAIqB,UAAoD,OAAzB,KAAqB,GAAmBuW,aAAae,MACtP,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAA0F,KAAqBjG,GAAO,IAAMiG,EAAY3Y,EAAIqB,UAAoD,OAAzB,KAAqB,GAAmBuX,cAAcD,MACxP,KAAc,GAAI,iBAClB,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAiB,GAAI,MAAO,IAC5B,KAAsB,GAAI,SAAU,IACpC,KAAkB,SAAS,WAA0F,KAAqBjG,GAAO,IAAMiG,EAAY3Y,EAAIqB,UAAoD,OAAzB,KAAqB,GAAmBwX,YAAYF,MACtP,KAAc,GAAI,iBAClB,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,OACF,GAAS,EAAL5Y,EAAQ,CACV,IAAM4Y,EAAY3Y,EAAIqB,UAChByX,EAAU,KAAqB,GACrC,KAAkB,uBAAwB,KAAmB,EAAG,GAAI,iBAApE,CAAsF,4BAA6BA,EAAQC,wBAC3H,KAAiB,GACjB,KAAmB,WAAYD,EAAQE,WAAWL,IAClD,KAAiB,GACjB,KAAkB,MAAO,KAAmB,EAAG,GAAIA,EAAW,QAAS,MACvE,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,GAAI,iBAAkB,KAC3E,KAAiB,GACjB,KAAkB,WAAYG,EAAQE,WAAWL,KAAe,KAAmB,GAAI,GAAI,kBAC3F,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,+BAAgC,KAC1F,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,sBAAuB,MAErF,SAASM,GAA8ClZ,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC1E,IAAMuE,EAAO,OACb,KAAsB,EAAG,MAAO,GAAI,IACpC,KAAsB,EAAG,MAAO,GAAI,IACpC,KAAkB,sBAAsB,WAAiK,OAApE,KAAqBA,GAAuB,OAAuCmU,qBACxN,KAAc,EAAG,iBACjB,OACA,KAAkB,EAAGD,GAAqD,GAAI,GAAI,MAAO,IACzF,OACF,GAAS,EAALzY,EAAQ,CACV,IAAMkJ,EAAS,OACf,KAAmB,UAAWA,EAAOiQ,SACrC,KAAiB,GACjB,KAAkB,uBAAwB,KAAmB,EAAG,EAAG,iBAAnE,CAAqF,4BAA6BjQ,EAAO8P,wBACzH,KAAiB,GACjB,KAAkB,UAAW9P,EAAOlE,SAExC,SAASoU,GAA0DpZ,EAAIC,GAAgB,EAALD,IAC9E,KAAc,GACd,KAAc,EAAG,cACV,EAALA,GACF,KAAyB,KAAmB,EAAG,EAAG,kCAEtD,SAASqZ,GAAgGrZ,EAAIC,GAG3G,GAH2H,EAALD,IACpH,KAAiB,EAAG,2BAA4B,IAChD,KAAc,EAAG,kBACV,EAALA,EAAQ,CACV,IAAMsZ,EAAiB,OAAuBhY,UACxCoJ,EAAS,KAAqB,GACpC,KAAkB,wBAAyBA,EAAO6O,iBAAlD,CAAoE,cAAeD,EAAnF,CAAmG,YAAa,KAAmB,EAAG,EAAG,mBAE7I,SAASE,GAAqExZ,EAAIC,GAIhF,GAJgG,EAALD,IACzF,KAA+B,GAC/B,KAAkB,EAAGqZ,GAAiG,EAAG,EAAG,2BAA4B,IACxJ,QACO,EAALrZ,EAAQ,CACV,IAAMsZ,EAAiBrZ,EAAIqB,UACrBmK,EAAS,KAAqB,GACpC,KAAiB,GACjB,KAAkB,OAAQA,EAAO8N,iBAAiBjX,IAAIgX,EAAepY,QAEzE,SAASuY,GAAsDzZ,EAAIC,GAQjE,GARiF,EAALD,IAC1E,KAAsB,EAAG,WACzB,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAGwZ,GAAsE,EAAG,EAAG,eAAgB,GACjH,QACO,EAALxZ,EAAQ,CACV,IAAM8E,EAAS,OACf,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,yBAClD,KAAiB,GACjB,KAAkB,UAAWA,EAAOlC,eAExC,SAAS8W,GAA2D1Z,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACvF,IAAMiJ,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAmK,OAAnE,KAAqBA,GAAsB,OAAsCc,YAC5M,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAAoK,OAApE,KAAqBd,GAAuB,OAAuC0Q,YAC9M,KAAc,GACd,KAAc,EAAG,aACjB,OACF,GAAS,EAAL3Z,EAAQ,CACV,IAAMkJ,EAAS,OACT0Q,EAAM,KAAmB,GACzB1Z,EAAM,KAAmB,GAC/B,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,kBAClD,KAAiB,GACjB,KAAkB,WAAY0Z,EAAItZ,SAAWJ,EAAII,SAAWsZ,EAAIrZ,UAAYL,EAAIK,UAAY2I,EAAOqQ,iBAAiBhZ,UACpH,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,iCAAkC,MAE9F,SAASsZ,GAAiF7Z,EAAIC,GAAgB,EAALD,IACrG,KAAsB,EAAG,sBACzB,KAAiB,EAAG,QAAS,IAC7B,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,QACO,EAALA,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,oBAEtD,SAAS8Z,GAA4F9Z,EAAIC,GAIvG,GAJuH,EAALD,IAChH,KAAsB,EAAG,SAAU,IACnC,KAAc,GACd,QACO,EAALA,EAAQ,CACV,IAAM+Z,EAAkB9Z,EAAIqB,UAC5B,KAAkB,QAASyY,EAAgB5U,IAC3C,KAAiB,GACjB,KAA0B,IAAK4U,EAAgB7Y,KAAM,MAEzD,SAAS8Y,GAAmFha,EAAIC,GAU9F,GAV8G,EAALD,IACvG,KAAsB,EAAG,wBACzB,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,SAAU,IACnC,KAAkB,EAAG8Z,GAA6F,EAAG,EAAG,SAAU,IAClI,OACA,QACO,EAAL9Z,EAAQ,CACV,IAAMyL,EAAS,KAAqB,GACpC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,yBAClD,KAAiB,GACjB,KAAkB,UAAWA,EAAOwO,gBAExC,SAASC,GAA0Ela,EAAIC,GAQrF,GARqG,EAALD,IAC9F,KAAsB,EAAG,QAAS,IAClC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,MAAO,IAChC,KAAc,GACd,QACO,EAALA,EAAQ,CACV,IAAMma,EAAO,KAAqB,GAAGhX,MAC/BuH,EAAS,OACf,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,yBAClD,KAAiB,GACjB,KAA0B,IAAKA,EAAO0P,mBAAmBD,GAAO,MAEpE,SAASE,GAAgHra,EAAIC,GAG3H,GAH2I,EAALD,IACpI,KAAiB,EAAG,2BAA4B,IAChD,KAAc,EAAG,kBACV,EAALA,EAAQ,CACV,IAAMsa,EAAkB,OAAuBhZ,UACzC6Y,EAAO,KAAqB,GAAGhX,MAC/BX,EAAU,OAChB,KAAkB,WAAU,EAA5B,CAAmC,wBAAyBA,EAAQ+X,UAAUC,GAAGL,GAAM7X,IAAI,KAAuB,EAAGJ,KAArH,CAA4H,YAAa,KAAmB,EAAG,EAAG,iBAAlK,CAAoL,cAAeoY,IAEvM,SAASG,GAAqFza,EAAIC,GAIhG,GAJgH,EAALD,IACzG,KAA+B,GAC/B,KAAkB,EAAGqa,GAAiH,EAAG,EAAG,2BAA4B,IACxK,QACO,EAALra,EAAQ,CACV,IAAMsa,EAAkBra,EAAIqB,UACtB6Y,EAAO,KAAqB,GAAGhX,MAC/BsN,EAAU,OAChB,KAAiB,GACjB,KAAkB,OAAQA,EAAQhO,iBAAiB0X,EAAMG,EAAgBpZ,QAE7E,SAASwZ,GAAsE1a,EAAIC,GAIjF,GAJiG,EAALD,IAC1F,KAAsB,EAAG,UAAW,IACpC,KAAkB,EAAGya,GAAsF,EAAG,EAAG,eAAgB,IACjI,QACO,EAALza,EAAQ,CACV,IAAM2a,EAAS,KAAqB,GACpC,KAAiB,GACjB,KAAkB,UAAWA,EAAO/X,eAExC,SAASgY,GAA6E5a,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACzG,IAAM8C,EAAO,OACb,KAAsB,EAAG,WAAY,IACrC,KAAkB,aAAa,WAAwH,KAAqBA,GAAO,IAAM+X,EAAa5a,EAAIqB,UAAoD,OAAzB,KAAqB,GAAmBwZ,WAAWD,MACxR,KAAc,EAAG,iBACjB,KAAsB,EAAG,OAAQ,IACjC,KAAc,GACd,OACA,KAAc,GACd,OACF,GAAS,EAAL7a,EAAQ,CACV,IAAM6a,EAAa5a,EAAIqB,UACjBkG,EAAU,KAAqB,GACrC,KAAkB,YAAaA,EAAQuT,gBAAgBF,EAAWG,SAAlE,CAA4E,UAAS,EAArF,CAA4F,OAAQ,KAAmB,EAAG,EAAG,kBAAoB,UACjJ,KAAiB,GACjB,KAAyBxT,EAAQuT,gBAAgBF,EAAWG,UAC5D,KAAiB,GACjB,KAA0B,IAAKxT,EAAQyT,WAAWJ,GAAa,MAEnE,SAASK,GAAkElb,EAAIC,GAO7E,GAP6F,EAALD,IACtF,KAAsB,EAAG,OACzB,KAAsB,EAAG,MAAO,IAChC,KAAkB,EAAG4a,GAA8E,EAAG,EAAG,WAAY,IACrH,KAAc,EAAG,QACjB,OACA,QACO,EAAL5a,EAAQ,CACV,IAAMmb,EAAa,KAAqB,GAAG7Z,UAC3C,KAAiB,GACjB,KAAkB,UAAW,KAAmB,EAAG,EAAG6Z,EAAW1D,QAAS,aAE9E,SAAS2D,GAAmFpb,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC/G,IAAMqb,EAAO,OACb,KAAsB,EAAG,uBAAwB,IACjD,KAAkB,UAAU,WAAuI,KAAqBA,GAAO,IAAMC,EAAiBrb,EAAIqB,UAAiB6Y,EAAO,KAAqB,GAAGhX,MAA+C,OAAxB,OAAuCoY,iBAAiBpB,EAAMmB,EAAenW,OAC9W,KAAc,EAAG,iBACjB,OACF,GAAS,EAALnF,EAAQ,CACV,IAAMsb,EAAiBrb,EAAIqB,UAC3B,KAAkB,aAAcga,EAAhC,CAAgD,YAAa,KAAmB,EAAG,EAAG,mBAE1F,SAASE,GAAmFxb,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC/G,IAAMkH,EAAO,OACb,KAAsB,EAAG,uBAAwB,IACjD,KAAkB,UAAU,WAAuI,KAAqBA,GAAO,IAAMuU,EAAiBxb,EAAIqB,UAAiB6Y,EAAO,KAAqB,GAAGhX,MAA+C,OAAxB,OAAuCoY,iBAAiBpB,EAAMsB,EAAetW,OAC9W,KAAc,EAAG,iBACjB,OACF,GAAS,EAALnF,EAAQ,CACV,IAAMyb,EAAiBxb,EAAIqB,UAC3B,KAAkB,aAAcma,EAAhC,CAAgD,YAAa,KAAmB,EAAG,EAAG,mBAE1F,SAASC,GAAqE1b,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACjG,IAAM2b,EAAO,OACb,KAAsB,EAAG,SAAU,IACnC,KAAkB,SAAS,WAA0G,KAAqBA,GAAO,IAAMR,EAAa,KAAqB,GAAG7Z,UAAmD,OAAxB,OAAuCsa,sBAAsBC,KAAK,CAACV,EAAWhW,QACrT,KAAiB,EAAG,WAAY,IAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACO,EAALnF,IACF,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,sBAAuB,MAEnF,IAAM8b,GAAO,SAAUza,GAAM,MAAO,CAACA,EAAI,UACnC0a,GAAO,SAAU1a,GAAM,MAAO,CAACA,EAAI,kBACzC,SAAS2a,GAA2Dhc,EAAIC,GAAO,GAAS,EAALD,EAAQ,CACvF,IAAMkI,EAAO,OACb,KAA+B,EAAG,GAClC,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,kBAAmB,GAC5C,KAAc,EAAG,iBACjB,KAAsB,EAAG,uBACzB,KAAiB,EAAG,QAAS,GAC7B,KAAc,EAAG,iBACjB,KAAc,EAAG,aACjB,OACA,OACA,KAAsB,EAAG,kBAAmB,GAC5C,KAAc,GAAI,iBAClB,KAAsB,GAAI,uBAC1B,KAAiB,GAAI,QAAS,IAC9B,KAAc,GAAI,iBAClB,KAAc,GAAI,aAClB,OACA,OACA,OACA,KAAsB,GAAI,MAAO,IACjC,KAAkB,GAAI2R,GAAkF,EAAG,EAAG,qBAAsB,IACpI,OACA,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,qBAAsB,IAChD,KAAkB,UAAU,SAA0G9W,GAAU,KAAqBmF,GAAO,IAAMiT,EAAa,OAAuB7Z,UAAmD,OAAxB,OAAuC2a,cAAcd,EAAWhW,GAAIpC,MACrT,OACA,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,MAAO,IACjC,KAAkB,GAAIiX,GAAoF,EAAG,EAAG,uBAAwB,IACxI,KAAkB,GAAIE,GAA2E,EAAG,EAAG,cAAe,KAAM,GAAI,MAChI,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,uBAC1B,KAAsB,GAAI,SAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAiB,GAAI,qBAAsB,IAC3C,KAAc,GAAI,iBAClB,OACA,OACA,KAAiB,GAAI,2BAA4B,IACjD,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,uBAC1B,KAAsB,GAAI,SAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAiB,GAAI,QAAS,IAC9B,KAAc,GAAI,iBAClB,OACA,KAAsB,GAAI,uBAAwB,IAClD,KAAiB,GAAI,QAAS,IAC9B,KAAc,GAAI,iBAClB,KAAsB,GAAI,SAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,MAAO,IACjC,KAAkB,GAAIQ,GAAuE,EAAG,EAAG,UAAW,IAC9G,OACA,OACA,OACA,OACA,OACA,KAAsB,GAAI,MAAO,IACjC,KAAsB,GAAI,MAAO,IACjC,KAAiB,GAAI,kBAAmB,IACxC,KAAkB,GAAIQ,GAAmE,EAAG,EAAG,MAAO,IACtG,KAAiB,GAAI,MAAO,IAC5B,KAAsB,GAAI,MAAO,IACjC,KAAkB,GAAIE,GAAoF,EAAG,EAAG,uBAAwB,IACxI,KAAkB,GAAII,GAAoF,EAAG,EAAG,uBAAwB,IACxI,KAAkB,GAAIE,GAAsE,EAAG,EAAG,SAAU,IAC5G,OACA,OACA,OACA,OACF,GAAS,EAAL1b,EAAQ,CACV,IAAM0J,EAAM,KAAmB,IACzBwS,EAAU,OACV/B,EAAO+B,EAAQ/Y,MACfgY,EAAae,EAAQ5a,UACrBwD,EAAS,OACf,KAAkB,YAAaA,EAAOyV,UAAUC,GAAGL,IACnD,KAAiB,GACjB,KAAkB,YAAa,KAAmB,EAAG,GAAI,kBACzD,KAAiB,GACjB,KAAkB,YAAa,KAAmB,EAAG,GAAI,iBAAzD,CAA2E,cAAe,KAAmB,EAAG,GAAI,gBACpH,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,iBAA1D,CAA4E,cAAe,KAAmB,GAAI,GAAI,gBACtH,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,WAAU,EAA5B,CAAmC,SAAUgB,EAAWnW,OAAxD,CAAgE,gBAAiBmW,EAAWlW,eAC5F,KAAiB,GACjB,KAAkB,mBAAoB,gBAAtC,CAAuD,uBAAwByE,GAC/E,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,kBACpD,KAAiB,GACjB,KAAkB,eAAgByR,EAAWvQ,aAA7C,CAA2D,YAAa,KAAmB,GAAI,GAAI,kBACnG,KAAiB,GACjB,KAAkB,QAAS9F,EAAOyV,UAAUjY,IAAI,KAAuB,GAAIwZ,GAAM3B,IAAOrc,MAAxF,CAA+F,eAAgBqd,EAAWvQ,aAA1H,CAAwI,mBAAoBuQ,EAAWgB,iBAAvK,CAAyL,gBAAiBrX,EAAOyV,UAAUjY,IAAI,KAAuB,GAAIyZ,GAAM5B,IAAOrc,OACvQ,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,0BACpD,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAAkB,eAAgB,KAAmB,GAAI,GAAI,kBAC7D,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,4BACpD,KAAiB,GACjB,KAAkB,OAAQgH,EAAOlC,aAAazG,QAC9C,KAAiB,GACjB,KAAkB,SAAUgf,GAC5B,KAAiB,GACjB,KAAkB,OAAQA,EAAW1D,QAAQtb,QAC7C,KAAiB,GACjB,KAAkB,UAAW2I,EAAOsX,oBAAoBjC,IACxD,KAAiB,GACjB,KAAkB,UAAWrV,EAAOuX,mBAAmBlC,IACvD,KAAiB,GACjB,KAAkB,mBAAoB,kBAE1C,IAAMmC,GAAO,SAAUjb,GAAM,MAAO,CAACA,EAAI,YACzC,SAASkb,GAA4Cvc,EAAIC,GAIvD,GAJuE,EAALD,IAChE,KAAsB,EAAG,MAAO,GAChC,KAAkB,EAAGgc,GAA4D,GAAI,GAAI,eAAgB,GACzG,QACO,EAALhc,EAAQ,CACV,IAEIwc,EAFErC,EAAOla,EAAIkD,MACX/C,EAAS,OAETqc,IAAyF,OAA1ED,EAAUpc,EAAOma,UAAUjY,IAAI,KAAuB,EAAGga,GAAMnC,MAAyBqC,EAAQ1e,OACrH,KAAmB,WAAY2e,GAC/B,KAAiB,GACjB,KAAkB,OAAQrc,EAAOma,UAAUC,GAAGL,KAElD,SAASuC,GAAsD1c,EAAIC,GAMjE,GANiF,EAALD,IAC1E,KAA+B,GAC/B,KAAsB,EAAG,iBACzB,KAAc,GACd,OACA,QACO,EAALA,EAAQ,CACV,IAAM2c,EAAiB1c,EAAIqB,UAC3B,KAAiB,GACjB,KAAyBqb,EAAezb,OAE5C,SAAS0b,GAA4D5c,EAAIC,GAGvE,GAHuF,EAALD,IAChF,KAAiB,EAAG,MAAO,IAC3B,KAAc,EAAG,iBACV,EAALA,EAAQ,CACV,IAAM6c,EAAa,OAAuB5b,KAC1C,KAAkB,MAAO,KAAmB,EAAG,EAAG4b,EAAW5X,cAAe,QAAS,OAEzF,SAAS6X,GAA4D9c,EAAIC,GAAgB,EAALD,IAChF,KAAsB,EAAG,MAAO,IAChC,KAAiB,EAAG,WAAY,IAChC,QAEJ,SAAS+c,GAAsE/c,EAAIC,GAOjF,GAPiG,EAALD,IAC1F,KAA+B,GAC/B,KAAsB,EAAG,KAAM,GAC/B,KAAc,EAAG,iBACjB,KAAc,GACd,OACA,QACO,EAALA,EAAQ,CACV,IAAMgd,EAAY/c,EAAIqB,UAChB2b,EAAO,OAAuB9Z,MAC9BuH,EAAS,OACf,KAAiB,GACjB,KAAmB,QAAS,KAAmB,EAAG,EAAGA,EAAOqQ,gBAAgBiC,EAAUhC,WACtF,KAAmB,YAAatQ,EAAO6P,UAAUjY,IAAI,KAAuB,EAAGga,GAAMW,IAAOnf,OAC5F,KAAiB,GACjB,KAA0B,IAAKkf,EAAU9b,KAAM,MAEnD,SAASgc,GAAsDld,EAAIC,GA6CjE,GA7CiF,EAALD,IAC1E,KAA+B,EAAG,GAClC,KAAsB,EAAG,KAAM,GAC/B,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAkB,EAAG4c,GAA6D,EAAG,EAAG,MAAO,GAC/F,KAAkB,EAAGE,GAA6D,EAAG,EAAG,MAAO,GAC/F,OACA,OACA,OACA,KAAsB,EAAG,KAAM,GAC/B,KAAsB,EAAG,uBACzB,KAAiB,EAAG,QAAS,GAC7B,KAAc,EAAG,iBACjB,KAAc,GAAI,aAClB,OACA,OACA,KAAsB,GAAI,KAAM,GAChC,KAAsB,GAAI,uBAC1B,KAAiB,GAAI,QAAS,GAC9B,KAAc,GAAI,iBAClB,KAAc,GAAI,aAClB,OACA,OACA,KAAkB,GAAIC,GAAuE,EAAG,EAAG,eAAgB,GACnH,KAAc,GAAI,QAClB,KAAsB,GAAI,KAAM,IAChC,KAAsB,GAAI,uBAC1B,KAAiB,GAAI,qBAAsB,IAC3C,KAAc,GAAI,iBAClB,OACA,OACA,KAAsB,GAAI,KAAM,IAChC,KAAsB,GAAI,uBAC1B,KAAiB,GAAI,QAAS,IAC9B,KAAc,GAAI,iBAClB,OACA,OACA,KAAsB,GAAI,KAAM,IAChC,KAAsB,GAAI,sBAC1B,KAAiB,GAAI,QAAS,IAC9B,KAAc,GAAI,iBAClB,OACA,OACA,QACO,EAAL/c,EAAQ,CACV,IAAM6c,EAAa5c,EAAIgB,KACjBgc,EAAOhd,EAAIkD,MACXuC,EAAS,OACf,KAAkB,YAAaA,EAAO6U,UAAUC,GAAGyC,IACnD,KAAiB,GACjB,KAAmB,YAAavX,EAAO6U,UAAUjY,IAAI,KAAuB,GAAIga,GAAMW,IAAOnf,OAC7F,KAAiB,GACjB,KAAkB,OAAQ+e,EAAW5X,eACrC,KAAiB,GACjB,KAAkB,QAAS4X,EAAW5X,eACtC,KAAiB,GACjB,KAAmB,YAAaS,EAAO6U,UAAUjY,IAAI,KAAuB,GAAIga,GAAMW,IAAOnf,OAC7F,KAAiB,GACjB,KAAkB,YAAa,KAAmB,EAAG,GAAI,iBAAzD,CAA2E,cAAe,KAAmB,GAAI,GAAI,gBACrH,KAAiB,GACjB,KAAmB,YAAa4H,EAAO6U,UAAUjY,IAAI,KAAuB,GAAIga,GAAMW,IAAOnf,OAC7F,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,iBAA1D,CAA4E,cAAe,KAAmB,GAAI,GAAI,gBACtH,KAAiB,GACjB,KAAkB,UAAW,KAAmB,GAAI,GAAI+e,EAAWpF,QAAS,YAC5E,KAAiB,GACjB,KAAmB,YAAa/R,EAAO6U,UAAUjY,IAAI,KAAuB,GAAIga,GAAMW,IAAOnf,OAC7F,KAAiB,GACjB,KAAkB,eAAgB+e,EAAWjS,aAA7C,CAA2D,YAAa,KAAmB,GAAI,GAAI,kBACnG,KAAiB,GACjB,KAAmB,YAAalF,EAAO6U,UAAUjY,IAAI,KAAuB,GAAIga,GAAMW,IAAOnf,OAC7F,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAAmB,YAAa4H,EAAO6U,UAAUjY,IAAI,KAAuB,GAAIga,GAAMW,IAAOnf,OAC7F,KAAiB,GACjB,KAAkB,eAAgB,KAAmB,GAAI,GAAI,mBAEjE,IAAMqf,GAAO,SAAU9b,GAAM,MAAO,CAAE+b,KAAM/b,IAC5C,SAASgc,GAA2Crd,EAAIC,GAMtD,GANsE,EAALD,IAC/D,KAAsB,EAAG,MAAO,GAChC,KAAc,GACd,KAAc,EAAG,aACjB,KAAc,EAAG,SACjB,QACO,EAALA,EAAQ,CACV,IAAMI,EAAS,OACf,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,gCAAiC,KAAuB,EAAG+c,GAAM,KAAmB,EAAG,EAAG/c,EAAOkd,YAAa,OAE1K,IAAMC,GAAO,SAAUlc,EAAIR,GAAM,MAAO,CAAEkK,MAAO1J,EAAI+b,KAAMvc,IAC3D,SAAS2c,GAA2Cxd,EAAIC,GAQtD,GARsE,EAALD,IAC/D,KAAsB,EAAG,MAAO,GAChC,KAAc,GACd,KAAc,EAAG,aACjB,KAAc,EAAG,YACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,QACO,EAALA,EAAQ,CACV,IAAM0F,EAAS,OACf,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,yCAA0C,KAAuB,GAAI6X,GAAM,KAAmB,EAAG,EAAG,KAAmB,EAAG,EAAG7X,EAAO+X,aAAc/X,EAAOkF,cAAe,KAAmB,EAAG,EAAGlF,EAAO4X,YAAa,OAEjR,IAAI,oDACA,WAAYI,EAAQC,EAAOC,EAAqBC,EAAqBC,EAAaC,GAAYA,sCAC1FnhB,cAAM+gB,EAAOD,EAAQE,EAAqBE,IACrCD,oBAAsBA,EAC3BrhB,EAAKshB,YAAcA,EACnBthB,EAAKuhB,YAAcA,EACnBvhB,EAAK6D,WAAa,IAAI,IAAU,IAL0D0d,EAD9F,wDASIvhB,KAAK6D,WAAa,IAAI,IAAU,CAC5Ba,KAAM,IAAI,IAAY,MAE1B1E,KAAKwhB,SAZT,oCAeIxhB,KAAKyhB,YAfT,oCAiBcC,GAEV1hB,KAAK6D,WAAWiC,IAAI,QAAQ6b,SAASD,EAAMhd,MAE3C1E,KAAK6D,WAAWiC,IAAI,QAAQ8b,gBArBhC,6BAuBM,WACF5hB,KAAKshB,YAAYO,QACZC,YAAY,CACbnZ,GAAI3I,KAAK2I,GACTjE,KAAM1E,KAAK6D,WAAWvC,MAAMoD,OAE3BxE,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CAAEC,OAAQ,aACnFrgB,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,eAjCpB,oCAqCcA,EAAQC,GAElBjiB,KAAK6D,WAAWiC,IAAI,QAAQ6b,SAASK,EAAOtd,UAvChD,GAA0D,KA0C9D,GAAqBwd,UAAO,SAAsCC,GAAK,OAAO,IAAKA,GAAK,IAAsB,KAAyB,KAAgB,KAAyB,KAAwB,KAAyB,MAA6B,KAAyB,MAA6B,KAAyB,KAAqB,KAAyB,OAC3X,GAAqBC,UAAO,KAAyB,CAAEC,KAAM,GAAsBC,UAAW,CAAC,CAAC,qBAAsBC,SAAU,CAAC,MAAoCC,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,EAAG,UAAW,CAAC,aAAc,gBAAiB,CAAC,QAAS,kBAAmB,EAAG,WAAY,QAAS,EAAG,oBAAqB,CAAC,EAAG,QAAS,WAAY,eAAgB,CAAC,EAAG,MAAO,cAAe,EAAG,WAAY,UAAWC,SAAU,SAAuCnf,EAAIC,GAAgB,EAALD,IACld,KAAsB,EAAG,kBACzB,KAAsB,EAAG,eACzB,KAAiB,EAAG,kBAAmB,GACvC,KAAc,EAAG,SACjB,OACA,KAAsB,EAAG,gBACzB,KAAiB,EAAG,uBAAwB,GAC5C,KAAkB,EAAGD,GAAwC,EAAG,EAAG,SAAU,GAC7E,OACA,OACA,KAAsB,EAAG,oBAAqB,GAC9C,KAAkB,eAAe,SAAgFgD,GAAU,OAAO9C,EAAIgc,cAAclZ,MACpJ,KAAc,EAAG,SACjB,QACO,EAAL/C,IACF,KAAiB,GACjB,KAAkB,SAAU,KAAmB,EAAG,EAAGC,EAAImf,UACzD,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,EAAGnf,EAAImf,SAAxD,CAAkE,YAAW,KAC5EC,WAAY,CAAC,IAA2B,IAA+B,IAA4B,IAAgC,IAAgC,KAA+B,KAA+BC,MAAO,CAAC,IAAkB,KAAuBC,OAAQ,CAAC,oEAAqEC,gBAAiB,IAC1X,GAAqBC,eAAiB,iBAAM,CACxC,CAAEZ,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAuB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAC7D,IACA,KACA,KACA,IACA,OACL,IAEH,IAAI,oDACA,WAAYhB,EAAqB6B,EAAc5B,EAAaJ,EAAQC,GAAMA,wCACtE/gB,cAAM8gB,EAAQC,IACTE,oBAAsBA,EAC3BrhB,EAAKkjB,aAAeA,EACpBljB,EAAKshB,YAAcA,EACnBthB,EAAKwT,WAAa,IAAI,IAAY,IAClCxT,EAAKmjB,aALL/iB,wFAMiB,wBAAaJ,IAAKshB,YAAYO,SAAQuB,aAAzBpjB,sBAAiDqjB,YAAIA,OAAKA,EAAK7a,UAAQ,SAAC8a,EAAMC,GAAP,MAAgB,CACjHtI,QAAS,CACLqI,OACAC,OACAC,OAAQ,CACJ9e,KAAM,CACF+e,SAAUzjB,EAAKwT,WAAWlS,QAGlCoiB,KAAM,CACFC,UAAW,EAAAC,UAAUC,WAjBqC1C,EAD1E,wDAuBU,WACN/gB,8DACAJ,KAAK8jB,kBAAoB,OAAAC,EAAA,GAAc/jB,KAAKgkB,cAAehkB,KAAKikB,aAAcjkB,KAAKkkB,aAAaC,KAAK,OAAAC,EAAA,IAAI,4CAA6C,CAAGC,aAAhD,KAA8DC,YAA9D,KAA2EC,WAA3E,UACzGvkB,KAAKwT,WAAWgR,aACXL,KAAK,OAAAM,EAAA,GAAa,KAAM,OAAAC,EAAA,GAAU1kB,KAAK2kB,WACvCzkB,WAAU,kBAAMF,EAAK4kB,eA5B9B,oCA8BcC,GAAMA,WACZA,EAAMllB,SACNK,KAAKmjB,aACLnjB,KAAKshB,YAAYO,QACZiD,aAAaD,GACbV,KAAK,OAAAY,EAAA,IAAS,kBAAO/kB,EAAKmjB,iBAC1BjjB,WAAW8kB,YACZ5kB,uDACAJ,EAAKqhB,oBAAoBU,QAAQ,YAAO,sCAAuC,CAC3Eta,MAAOod,EAAMllB,eAvC7B,kCA4CYslB,GAAMA,WACdjlB,KAAKklB,mBAAmBD,EAAMtc,IACzBwb,KAAK,OAAAgB,EAAA,IAAWC,YAAQA,OACrBA,EAAS3jB,SAAW,IAAe4jB,QAC5B,EAAC,GAGDrlB,EAAKklB,mBAAmBD,EAAMtc,GAAIyc,EAAS7iB,SAAW,IAAI4hB,KAAK,OAAAC,EAAA,IAAKkB,YAACA,OAAKA,EAAE7jB,SAAW,IAAe4jB,gBAGhHnlB,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,UAEZhiB,EAAK4kB,aACLjjB,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,eA7DpB,yCAiEmBuD,EAAShjB,GAAQA,WAChC,OAAOvC,KAAKkjB,aACPsC,OAAO,CACRC,MAAO,YAAO,gCACdC,KAAMnjB,EACNojB,QAAS,CACL,CAAEtD,KAAM,YAAanO,MAAO,YAAO,kBACnC,CAAEmO,KAAM,SAAUnO,MAAO,YAAO,iBAAkB0R,aAAYA,MAGjEzB,KAAK,OAAAgB,EAAA,IAAWH,YAAGA,OAAMA,EAAMhlB,EAAKshB,YAAYO,QAAQgE,YAAYN,IAAWhjB,GAAW,OAAS,OAAA6hB,EAAA,IAAKY,YAAGA,OAAKA,EAAIa,oBA3E7H,GAAsD,KA8E1D,GAAmB3D,UAAO,SAAoCC,GAAK,OAAO,IAAKA,GAAK,IAAoB,KAAyB,MAA6B,KAAyB,MAAsB,KAAyB,KAAqB,KAAyB,KAAgB,KAAyB,OAC7T,GAAmBC,UAAO,KAAyB,CAAEC,KAAM,GAAoBC,UAAW,CAAC,CAAC,mBAAoBC,SAAU,CAAC,MAAoCC,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,OAAQ,OAAQ,OAAQ,aAAc,EAAG,YAAa,eAAgB,EAAG,cAAe,eAAgB,CAAC,aAAc,cAAe,CAAC,iBAAkB,gBAAiB,EAAG,YAAa,eAAgB,CAAC,EAAG,SAAU,cAAe,YAAa,eAAgB,CAAC,EAAG,mBAAoB,CAAC,EAAG,eAAgB,sBAAuB,CAAC,EAAG,cAAe,eAAgB,aAAc,eAAgBC,SAAU,SAAqCnf,EAAIC,GAAgB,EAALD,IAC5nB,KAAsB,EAAG,kBACzB,KAAsB,EAAG,eACzB,KAAiB,EAAG,QAAS,GAC7B,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,gBACzB,KAAiB,EAAG,uBAAwB,GAC5C,KAAsB,EAAG,uBAAwB,GACjD,KAAkB,eAAe,SAAiF+C,GAAU,OAAO9C,EAAIqiB,cAAcvf,MACrJ,OACA,OACA,OACA,KAAsB,EAAG,oBAAqB,GAC9C,KAAkB,eAAe,SAA8EA,GAAU,OAAO9C,EAAIoiB,YAAYtf,MAChJ,KAAc,EAAG,YACjB,KAAc,EAAG,SACjB,KAAc,GAAI,SAClB,KAAc,GAAI,iBAClB,OACA,KAAsB,GAAI,MAAO,GACjC,KAAsB,GAAI,8BAA+B,GACzD,KAAkB,sBAAsB,SAAgGA,GAAU,OAAO9C,EAAIsiB,gBAAgBxf,MAC7K,KAAc,GAAI,SAClB,OACA,KAAsB,GAAI,0BAA2B,GACrD,KAAkB,cAAc,SAAoFA,GAAU,OAAO9C,EAAIuiB,cAAczf,MACvJ,KAAc,GAAI,SAClB,KAAc,GAAI,SAClB,KAAc,GAAI,SAClB,OACA,QACO,EAAL/C,IACF,KAAiB,GACjB,KAAkB,cAAeC,EAAI+P,WAArC,CAAiD,cAAe,KAAmB,EAAG,GAAI,4BAC1F,KAAiB,GACjB,KAAkB,YAAa/P,EAAI0f,WACnC,KAAiB,GACjB,KAAkB,SAAU,KAAmB,EAAG,GAAI,KAAmB,EAAG,GAAI1f,EAAIwiB,QAAS,KAAmB,GAAI,GAAIxiB,EAAIqgB,oBAAsB,KAAuB,GAAI9f,KAA7K,CAAoL,eAAc,EAAlM,CAAyM,YAAa,KAAmB,GAAI,GAAI,kBACjP,KAAiB,GACjB,KAAkB,eAAgB,KAAmB,GAAI,GAAIP,EAAIugB,gBACjE,KAAiB,GACjB,KAAkB,cAAe,KAAmB,GAAI,GAAIvgB,EAAIwgB,cAAhE,CAA+E,eAAgB,KAAmB,GAAI,GAAIxgB,EAAIugB,eAA9H,CAA8I,aAAc,KAAmB,GAAI,GAAIvgB,EAAIygB,gBAC1LrB,WAAY,CAAC,IAA2B,IAA+B,KAAkC,IAA6B,IAAwB,IAA6B,IAAgC,IAAgC,IAAgC,IAA8B,KAAsC,MAAqCC,MAAO,CAAC,IAAsB,IAAqB,IAAkB,MAA2BC,OAAQ,CAAC,8SACtf,GAAmBE,eAAiB,iBAAM,CACtC,CAAEZ,KAAM,MACR,CAAEA,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAqB,YAAW,CAAE,YAAW,oBAAqB,CAAC,KAC3D,KACA,IACA,IACA,OACL,IAEH,IAAI,cACA,WAAYlB,EAAOD,EAAQI,GAAYA,wBACnCthB,KAAKmhB,MAAQA,EACbnhB,KAAKkhB,OAASA,EACdlhB,KAAKshB,YAAcA,EACnBthB,KAAKkmB,kBAAoB,IAAI,IAAY,IACzClmB,KAAKmmB,oBAAsB,IAAIC,EAAA,EAAgB,IAC/CpmB,KAAKqmB,SAAW,IAAID,EAAA,MACpBpmB,KAAK2kB,SAAW,IAAI2B,EAAA,EARxB,wDAUU,WACNtmB,KAAKumB,qBAAuBvmB,KAAKmhB,MAAMqF,SAASrC,KAAK,OAAAC,EAAA,IAAIqC,YAAGA,OAAIA,EAAI3gB,IAAI,mBAAkB,OAAAse,EAAA,IAAIsC,YAAIA,OAAMA,GAAYA,EAAL,KAAa,OAAAC,EAAA,GAAU,GAAI,OAAAC,EAAA,MAC1I5mB,KAAK6mB,sBAAwB7mB,KAAKmhB,MAAMqF,SAASrC,KAAK,OAAAC,EAAA,IAAIqC,YAAGA,OAAIA,EAAI3gB,IAAI,sBAAqB,OAAAse,EAAA,IAAI0C,YAAOA,OAAMA,GAAgBA,EAAN,MAAiB,OAAAH,EAAA,GAAU,IAAK,OAAAC,EAAA,MACzJ,IAAMG,EAAc/mB,KAAKkmB,kBAAkB1B,aAAaL,KAAK,OAAAM,EAAA,GAAa,KAAM,OAAAuC,EAAA,IAAI,kBAAMhnB,EAAKinB,sBAAsB,MAAK,OAAAN,EAAA,GAAU,KAC9HO,EAAc,OAAAnD,EAAA,GAAc/jB,KAAKmmB,oBAAqBnmB,KAAKumB,qBAAsBvmB,KAAK6mB,sBAAuBE,EAAa/mB,KAAKqmB,UAAUlC,KAAK,OAAAO,EAAA,GAAU1kB,KAAK2kB,UAAW,OAAAQ,EAAA,IAAU,YAAiCgC,0BAA/Bxe,EAA+Bwe,KAA3B7C,EAA2B6C,KAAd9C,EAAc8C,YAC/M5D,EAAOc,EACPf,GAAQgB,EAAc,GAAKD,EACjC,OAAI1b,EACO3I,EAAKshB,YAAY8F,WACnBC,sBAAsB1e,EAAI4a,EAAMD,EAAM6D,GACtCG,WAAUjE,YAAIA,OAAIA,EAAK+D,cAGrB,OAAAG,EAAA,GAAG,UAGlBvnB,KAAKwnB,UAAYN,EAAY/C,KAAK,OAAAC,EAAA,IAAI3iB,YAAMA,OAAKA,EAASA,EAAOgmB,gBAAgBC,MAAQ,OACzF1nB,KAAK2nB,oBAAsBT,EAAY/C,KAAK,OAAAC,EAAA,IAAI3iB,YAAMA,OAAKA,EAASA,EAAOgmB,gBAAgBlD,WAAa,QA3B5G,kCA6BYqD,GACJ,iBAAkBA,GAClB5nB,KAAKmmB,oBAAoB3kB,KAAKomB,EAAQC,aAAaC,gBA/B3D,oCAmCI9nB,KAAK2kB,SAASnjB,OACdxB,KAAK2kB,SAASoD,aApClB,4CAsCsBrB,GAClB1mB,KAAKgoB,SAAS,eAAgBtB,KAvClC,8CAyCwBI,GACpB9mB,KAAKgoB,SAAS,kBAAmBlB,KA1CrC,gCA6CI9mB,KAAKqmB,SAAS7kB,MAAKA,KA7CvB,+BA+CSymB,EAAK3mB,GACVtB,KAAKkhB,OAAOgH,SAAS,CAAC,KAAMC,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAI/O,KAAKmhB,MAAMiH,SAASC,QAApDF,mBAAgEF,EAAM3mB,KAAW,CACzGgnB,WAAYtoB,KAAKmhB,MACjBoH,oBAAqB,cAlD7B,KAsDJ,GAA4BrG,UAAO,SAA6CC,GAAK,OAAO,IAAKA,GAAK,IAA6B,KAAyB,KAAwB,KAAyB,KAAgB,KAAyB,OACtP,GAA4BC,UAAO,KAAyB,CAAEC,KAAM,GAA6BC,UAAW,CAAC,CAAC,4BAA6BkG,eAAgB,SAAoDhlB,EAAIC,EAAKglB,GAGhN,IAAIC,EAHiO,EAALllB,GAChO,KAA4BilB,EAAU,SAC/B,EAALjlB,GAEF,KAAsBklB,EAAK,UAA0BjlB,EAAIklB,eAAiBD,EAAGE,QAC5EC,OAAQ,CAAEhB,aAAc,gBAAkBtF,SAAU,CAAC,MAA8BC,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,EAAG,mBAAoB,CAAC,EAAG,oBAAqB,CAAC,EAAG,mBAAoB,2BAA4B,CAAC,OAAQ,OAAQ,EAAG,YAAa,EAAG,cAAe,eAAgB,CAAC,EAAG,QAAS,eAAgB,aAAc,cAAe,aAAc,sBAAuB,CAAC,EAAG,OAAQ,gBAAiB,CAAC,EAAG,QAAS,gBAAiB,CAAC,YAAa,OAAQ,EAAG,QAAS,WAAYC,SAAU,SAA8Cnf,EAAIC,GAAgB,EAALD,IACziB,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,MAAO,GAChC,KAAkB,EAAGS,GAAqD,EAAG,EAAG,eAAgB,GAChG,KAAc,EAAG,SACjB,OACA,KAAiB,EAAG,QAAS,GAC7B,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,iBAAkB,GAC3C,KAAkB,cAAc,SAAmFsC,GAAU,OAAO9C,EAAIwjB,sBAAsB1gB,KAA9J,CAA0K,sBAAsB,SAA2FA,GAAU,OAAO9C,EAAIqlB,wBAAwBviB,MACxU,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,GAAI,SAClB,KAAkB,GAAIhC,GAAqD,EAAG,EAAG,eACjF,QACO,EAALf,IACF,KAAiB,GACjB,KAAkB,mBAAoBC,EAAIklB,eAA1C,CAA0D,0BAA2B,KAAuB,GAAI/jB,GAAK,KAAmB,EAAG,EAAGnB,EAAIkkB,uBAClJ,KAAiB,GACjB,KAAkB,cAAe,KAAmB,EAAG,GAAI,0BAA3D,CAAsF,cAAelkB,EAAIyiB,mBACzG,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,GAAIziB,EAAI+jB,WAAzD,CAAqE,eAAgB,KAAmB,EAAG,GAAI/jB,EAAIojB,uBAAnH,CAA2I,aAAc,KAAmB,EAAG,GAAIpjB,EAAIkkB,qBAAvL,CAA6M,cAAe,KAAmB,GAAI,GAAIlkB,EAAI8iB,yBAC1P1D,WAAY,CAAC,IAAyB,KAAkC,IAA6B,IAAwB,IAA6B,IAA2B,MAAiCC,MAAO,CAAC,IAAkB,KAAuBC,OAAQ,CAAC,waAAyaC,gBAAiB,IACntB,GAA4BC,eAAiB,iBAAM,CAC/C,CAAEZ,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,OAEZ,YAAW,CACP,cACA,YAAW,cAAe0G,SAC3B,GAA4BC,UAAW,oBAAe,GACzD,YAAW,CACP,YAAa,KAAa,CAAEC,QAAOA,IACnC,YAAW,cAAe,OAC3B,GAA4BD,UAAW,sBAAiB,GAC3D,GAA8B,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAAgB,IAAQ,OACjG,IAEH,IAAI,oDACA,WAAY9H,EAAQC,EAAOC,EAAqB8H,EAAgB5H,EAAaC,EAAaF,EAAqB6B,GAAaA,sCACxH9iB,cAAM+gB,EAAOD,EAAQE,EAAqBE,IACrC4H,eAAiBA,EACtBlpB,EAAKshB,YAAcA,EACnBthB,EAAKuhB,YAAcA,EACnBvhB,EAAKqhB,oBAAsBA,EAC3BrhB,EAAKkjB,aAAeA,EACpBljB,EAAKkI,aAAe,GACpBlI,EAAK0I,QAAU,GACf1I,EAAKuH,WAAa,GAClBvH,EAAKoG,aAAepG,EAAKmpB,qBAAqB,cAC9CnpB,EAAK6D,WAAa7D,EAAKuhB,YAAY6H,MAAM,CACrC1kB,KAAM,CAAC,GAAI,IAAW2kB,UACtBC,KAAM,GACNliB,YAAa,GACbmB,SAAQA,EACRG,QAAS1I,EAAKuhB,YAAYgI,MAAM,IAChCnjB,aAAcpG,EAAKuhB,YAAY6H,MAAMppB,EAAKoG,aAAaojB,QAAO,SAACC,EAAMC,GAAP,OAAkBvB,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAI0a,GAAhCtB,mBAA0CuB,EAAMhlB,KAAO,OAAQ,OAjB3Bwe,EAD5H,wDAqBU,WACNljB,KAAKwhB,OACLxhB,KAAK6G,QAAU7G,KAAKshB,YAAY1V,MAC3B+d,eACArC,WAAUjE,YAAIA,OAAIA,EAAKuG,OAAOlC,SAC9BvD,KAAK,OAAA0F,EAAA,GAAY,IACtB7pB,KAAKshB,YAAY8F,WAAW0C,uBAAuBC,QAAQ7pB,WAAU8kB,YACjEhlB,EAAKuH,WAAayd,EAAIgF,qBAE1BhqB,KAAK+G,eAAiB/G,KAAKshB,YAAY2I,SAClCC,mBACAC,WAAU9G,YAAIA,OAAIA,EAAK+G,mBAhChC,oCAmCIpqB,KAAKyhB,YAnCT,0CAqCoB+B,GAChB,OAAOxjB,KAAKuH,WAAW8iB,MAAKC,YAACA,OAAIA,EAAEzf,OAAS2Y,EAAO3Y,UAtCvD,uCAwCiBnG,GACb,QAAS1E,KAAK6D,WAAWiC,IAAI,CAAC,eAAgBpB,MAzClD,sCA4CI,QAASyjB,OAAO5nB,OAAOP,KAAKkI,cAAcvI,SA5C9C,iCAiDW4qB,GAAUA,WACjBvqB,KAAK6L,OAAOsY,KAAK,YAAK,IAAIjkB,WAAUwV,YAChC,GAAIA,EAAO,CACP,IAAM8U,EAAcxqB,EAAK6D,WAAWiC,IAAI,CAAC,SACrC0kB,GAAeA,EAAYzmB,UAC3BymB,EAAY7I,SAAS,SAAA8I,gBAAA,WAAmBF,GAAa,YAtDrE,gCA2DUG,GACN,IAAMC,EAAe3qB,KAAK6D,WAAWiC,IAAI,WAEzC,IAAe,IADD6kB,EAAarpB,MAAMspB,WAAUC,YAACA,OAAIA,EAAEhgB,OAAS6f,EAAiB7f,QAC1D,CACd,IAAMigB,EAAWJ,EAAiBlrB,KAAKgqB,QAAO,SAACuB,EAAQC,GAAT,OAAkB7C,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAIgc,GAAhC5C,mBAA4C6C,EAAItmB,KAAOsmB,EAAI1pB,UAAW,IACtIqpB,EAAajqB,KAAKV,KAAKuhB,YAAY0J,QAAQ,CACvCpgB,KAAM6f,EAAiB7f,KACvBrL,KAAMsrB,KAEV9qB,KAAK0I,QAAQhI,KAAKgqB,MApE1B,mCAuEaA,GACT,IAAMC,EAAe3qB,KAAK6D,WAAWiC,IAAI,WACnCa,EAAQgkB,EAAarpB,MAAMspB,WAAUC,YAACA,OAAIA,EAAEhgB,OAAS6f,EAAiB7f,SAC7D,IAAXlE,IACAgkB,EAAaO,SAASvkB,GACtB3G,KAAK0I,QAAQrH,OAAOsF,EAAO,MA5EnC,+BA+EQ,WACC3G,KAAK6D,WAAWsnB,OAGrB,OAAApH,EAAA,GAAc/jB,KAAK4iB,QAAS5iB,KAAKsS,eAC5B6R,KAAK,YAAK,GAAI,OAAAiH,EAAA,IAAS,YAAYnJ,0BAAVoJ,EAAUpJ,YAC9BqJ,EAAQtrB,EAAKurB,qBAAqBF,EAAUrrB,EAAK6D,WAAYoe,GAC7D5J,EAAWrY,EAAKmhB,MAAMiH,SAAS5B,SAAS1gB,IAAI,YAIlD,OAHIuS,IACAiT,EAAMjT,SAAWA,GAEdrY,EAAKshB,YAAY8F,WAAWoE,iBAAiBF,OAEnDprB,WAAUmjB,YACXrjB,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,eAEZhiB,EAAKkI,aAAe,GACpBlI,EAAK6D,WAAW4nB,iBAChBzrB,EAAKkpB,eAAewC,eACpB1rB,EAAKkhB,OAAOgH,SAAS,CAAC,MAAO7E,EAAKmI,iBAAiB7iB,IAAK,CAAE2f,WAAYtoB,EAAKmhB,WAC5Exf,YACC3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,oBAtGpB,6BA0GM,WACF,OAAA+B,EAAA,GAAc/jB,KAAK4iB,QAAS5iB,KAAKsS,eAC5B6R,KAAK,YAAK,GAAI,OAAAiH,EAAA,IAAS,YAAYnJ,0BAAVoJ,EAAUpJ,YAC9BqJ,EAAQtrB,EAAKurB,qBAAqBF,EAAUrrB,EAAK6D,WAAYoe,GACnE,OAAOjiB,EAAKshB,YAAY8F,WAAWuE,iBAAiBL,OAEnDprB,WAAU,WACXF,EAAKkI,aAAe,GACpBlI,EAAK6D,WAAW4nB,iBAChBzrB,EAAKkpB,eAAewC,eACpB1rB,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,eAEZhiB,EAAK4rB,kBAAkBhH,aACxBjjB,YACC3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,oBA1HpB,sCA+HI,OAAO5hB,qEAA0BJ,KAAKkI,aAAa2jB,WAAa7rB,KAAKkI,aAAa4jB,kBA/HtF,oCAoIc9J,EAAQC,GAAaA,WACzB8J,EAAqB/J,EAAOgK,aAAa3B,MAAKlI,YAACA,OAAIA,EAAEF,eAAiBA,KAQ5E,GAPAjiB,KAAK6D,WAAWooB,WAAW,CACvBvnB,KAAMqnB,EAAqBA,EAAmBrnB,KAAO,GACrD4kB,KAAMyC,EAAqBA,EAAmBzC,KAAO,GACrDliB,YAAa2kB,EAAqBA,EAAmB3kB,YAAc,GACnEmB,SAAUyZ,EAAO7U,YAErB6U,EAAOtZ,QAAQwjB,SAAQ5B,YAACA,OAAItqB,EAAKmH,UAAUmjB,MACvCtqB,KAAKoG,aAAazG,OAAQ,CAC1B,IAD0B,EACpBwsB,EAAoBnsB,KAAK6D,WAAWiC,IAAI,CAAC,iBADrB,6BAEH9F,KAAKoG,cAFF,IAE1B,2BAA0C,CAAC,IAAhCgmB,EAA+B,QAChCnE,EAAMmE,EAAS1nB,KACfpD,EAA0B,iBAAlB8qB,EAAS/J,KACjB0J,EAAmB3lB,aAAa6hB,GAChCjG,EAAO5b,aAAa6hB,GACpBgD,EAAUkB,EAAkBrmB,IAAImiB,GAClCgD,GACAA,EAAQgB,WAAW3qB,IATD,kCA7IlC,2CA+JqB+pB,EAAUgB,EAAMpK,GACjC,IAAMqK,EAAkB,aAA0B,CAC9CC,aAAclB,EACdmB,cAAeH,EAAK/qB,MACpBmrB,kBAAmBzsB,KAAKoG,aACxB6b,eACAyK,mBAAoB,CAChBzK,eACAvd,KAAM2mB,EAAS3mB,MAAQ,GACvB4kB,KAAM+B,EAAS/B,MAAQ,GACvBliB,YAAaikB,EAASjkB,aAAe,MAG7C,OAAO+gB,OAAOpZ,OAAOoZ,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAIud,GAAkBtsB,KAAKkI,cAAe,CAAEiF,WAAYkf,EAAK/qB,MAAMiH,QAASG,QAAS1I,KAAK2sB,sBAAsB3sB,KAAK0I,QAAS1I,KAAK6D,WAAWvC,MAAMoH,aA5KzM,4CAiLsBkkB,EAAYC,GAC9B,OAAOD,EAAWxI,KAAI,SAACyG,EAAGpqB,GAAJ,MACX,CACHoK,KAAMggB,EAAEhgB,KACRiiB,UAAW3E,OAAO5nB,OAAOssB,EAAoBpsB,GAAGjB,MAAM4kB,KAAI,SAAC9iB,EAAOyrB,GAAR,MAAc,CACpEroB,KAAMmmB,EAAErrB,KAAKutB,GAAGroB,KAChBpD,MAAOA,EAAM0rB,WACb3K,KAAMwI,EAAErrB,KAAKutB,GAAG1K,iBAxLhC,GAAoE,KA8LxE,GAA0BH,UAAO,SAA2CC,GAAK,OAAO,IAAKA,GAAK,IAA2B,KAAyB,KAAgB,KAAyB,KAAwB,KAAyB,MAA6B,KAAyB,KAA2B,KAAyB,KAAqB,KAAyB,KAAqB,KAAyB,MAA6B,KAAyB,QAC5e,GAA0BC,UAAO,KAAyB,CAAEC,KAAM,GAA2BC,UAAW,CAAC,CAAC,0BAA2B2K,UAAW,SAAyCzpB,EAAIC,GAGrL,IAAIilB,EAHiM,EAALllB,GAChM,KAAmBuB,IAAIA,GAChB,EAALvB,GAEF,KAAsBklB,EAAK,UAA0BjlB,EAAImoB,kBAAoBlD,EAAGE,QAC/ErG,SAAU,CAAC,MAAoCC,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,yBAA0B,sBAAuB,sBAAuB,CAAC,aAAc,qBAAsB,CAAC,QAAS,kBAAmB,EAAG,WAAY,QAAS,EAAG,OAAQ,YAAa,CAAC,eAAgB,IAAK,CAAC,QAAS,OAAQ,EAAG,YAAa,EAAG,QAAS,CAAC,EAAG,MAAO,cAAe,EAAG,WAAY,SAAU,CAAC,QAAS,kBAAmB,EAAG,WAAY,QAAS,EAAG,oBAAqB,CAAC,EAAG,OAAQ,EAAG,aAAc,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,MAAO,aAAc,EAAG,SAAU,CAAC,OAAQ,WAAY,YAAa,GAAI,kBAAmB,UAAW,KAAM,aAAc,EAAG,eAAgB,CAAC,EAAG,kBAAmB,CAAC,EAAG,OAAQ,YAAa,CAAC,UAAW,IAAK,CAAC,MAAO,OAAQ,EAAG,SAAU,CAAC,KAAM,OAAQ,OAAQ,OAAQ,kBAAmB,OAAQ,EAAG,WAAY,SAAU,CAAC,MAAO,OAAQ,EAAG,QAAS,UAAW,CAAC,KAAM,OAAQ,OAAQ,OAAQ,kBAAmB,OAAQ,UAAW,cAAe,EAAG,YAAa,CAAC,kBAAmB,cAAe,EAAG,WAAY,SAAU,CAAC,gBAAiB,eAAgB,EAAG,QAAS,CAAC,EAAG,mBAAoB,CAAC,EAAG,SAAU,gBAAiB,UAAW,CAAC,gBAAiB,UAAW,EAAG,WAAY,CAAC,EAAG,QAAS,WAAY,CAAC,EAAG,oBAAqB,CAAC,EAAG,gBAAiB,CAAC,qBAAsB,IAAK,CAAC,gBAAiB,gBAAiB,CAAC,aAAc,aAAc,EAAG,wBAAyB,cAAe,EAAG,QAAS,CAAC,aAAc,aAAc,EAAG,wBAAyB,eAAgB,CAAC,EAAG,SAAU,YAAa,sBAAuB,kBAAmB,WAAY,gBAAiB,UAAW,CAAC,qBAAsB,GAAI,EAAG,MAAO,eAAgB,CAAC,QAAS,QAAS,CAAC,cAAe,eAAgB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,QAAS,EAAG,QAAS,WAAY,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,SAAU,CAAC,EAAG,mBAAoBC,SAAU,SAA4Cnf,EAAIC,GAqB35D,GArB26D,EAALD,IACp6D,KAAsB,EAAG,kBACzB,KAAsB,EAAG,eACzB,KAAiB,EAAG,kBAAmB,GACvC,KAAc,EAAG,SACjB,KAAsB,EAAG,wBAAyB,GAClD,KAAkB,sBAAsB,SAAgG+C,GAAU,OAAO9C,EAAIypB,YAAY3mB,MACzK,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,OACA,OACA,KAAsB,EAAG,gBACzB,KAAiB,EAAG,uBAAwB,GAC5C,KAAkB,GAAIvB,GAA8C,EAAG,EAAG,SAAU,GACpF,KAAc,GAAI,SAClB,KAAkB,GAAIO,GAAmD,EAAG,EAAG,cAAe,KAAM,EAAG,MACvG,OACA,OACA,KAAkB,GAAIuC,GAA4C,GAAI,GAAI,OAAQ,GAClF,KAAc,GAAI,UACX,EAALtE,EAAQ,CACV,IAAM4Z,EAAM,KAAmB,IAC/B,KAAiB,GACjB,KAAkB,SAAU,KAAmB,EAAG,EAAG3Z,EAAImf,UACzD,KAAiB,GACjB,KAAkB,WAAY,KAAmB,EAAG,EAAGnf,EAAIoI,QAA3D,CAAoE,yBAA0B,KAAmB,EAAG,GAAIpI,EAAI0pB,qBAA5H,CAAkJ,sBAAuB,KAAmB,EAAG,GAAI1pB,EAAI6O,gBACvM,KAAiB,GACjB,KAAkB,OAAQ,KAAmB,GAAI,GAAI7O,EAAIoI,QAAzD,CAAkE,WAAYuR,GAC9E,KAAiB,GACjB,KAAkB,OAAQ,KAAmB,GAAI,GAAI3Z,EAAImf,YACxDC,WAAY,WAAc,MAAO,CAAC,IAA2B,IAA+B,IAA4B,KAAkC,IAAgC,IAAgC,IAAa,KAA+B,IAAwC,IAA6B,IAA2B,KAA2B,IAA2B,KAAkC,IAAqC,IAAoB,IAAwB,IAAwB,IAA0B,IAAiB,IAA6B,IAAyB,KAAgC,GAAwB,IAAsB,IAAgB,GAA6B,IAAsB,IAAoC,IAAmC,IAA0B,IAAiC,IAAyB,IAA8B,MAAkCC,MAAO,WAAc,MAAO,CAAC,IAAkB,IAAsB,OAA8BC,OAAQ,CAAC,iEAAkEC,gBAAiB,IAC5rC,GAA0BC,eAAiB,iBAAM,CAC7C,CAAEZ,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,QAEZ,YAAW,CACP,aAAU,sBACV,YAAW,cAAe,KAC3B,GAA0B2G,UAAW,yBAAoB,GAC5D,GAA4B,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAClE,IACA,KACA,IACA,IACA,IACA,KACA,QACL,IAEH,IAAI,cACA,WAAY1H,EAAaD,EAAqB6B,EAAchC,EAAQC,GAAMA,wBACtEnhB,KAAKshB,YAAcA,EACnBthB,KAAKqhB,oBAAsBA,EAC3BrhB,KAAKkjB,aAAeA,EACpBljB,KAAKkhB,OAASA,EACdlhB,KAAKmhB,MAAQA,EACbnhB,KAAKwX,aAPT,wDAUIxX,KAAKotB,YAAcptB,KAAKshB,YAAY8F,WAAWiG,eAAe,MAAO,GAAGC,yBACxEttB,KAAKimB,OAASjmB,KAAKotB,YAAYjD,WAAW9G,YAAIA,OAAKA,EAAKkK,YAAY7F,SAAOvD,KAAK,OAAA0F,EAAA,GAAY,IAC5F7pB,KAAKwtB,oBAAsBxtB,KAAKmhB,MAAMqF,SAASrC,KAAK,OAAAC,EAAA,IAAKqJ,YAAEA,OAAKA,EAAG3nB,IAAI,eAAc,OAAA8gB,EAAA,MACrF5mB,KAAKmJ,uBAAyB,OAAA4a,EAAA,GAAc/jB,KAAKwtB,oBAAqBxtB,KAAKimB,QAAQ9B,KAAK,OAAAC,EAAA,IAAI,YAAMmJ,0BAAJ5kB,EAAI4kB,YAC9F,GAAI5kB,EAAI,CACJ,IAAM+kB,EAAQH,EAAYlD,MAAMsD,YAACA,OAAKA,EAAEhlB,KAAOA,KAC/C,OAAO+kB,EAAQA,EAAMhpB,KAAO,GAEhC,MAAO,SAlBf,kCAqBYgd,GAAMA,WACd1hB,KAAKshB,YAAY8F,WAAWwG,eAAe,CAAClM,IAAQxhB,UAAU,CAC1DsB,KAAM,WACFxB,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCACxC/hB,EAAK4kB,WAEThjB,MAAQD,YACJ3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,0CA5BlD,uCAgCiB+G,GAAGA,WAChB3I,KAAKimB,OACA9B,KAAK,YAAK,GAAI,OAAAC,EAAA,IAAKsD,YAAKA,OAAM,EAAIA,EAAMkD,WAAWnqB,YAACA,OAAKA,EAAEotB,QAAUptB,EAAEotB,OAAOllB,KAAOA,QAAM,OAAAwc,EAAA,IAAW2I,YAAWA,OAC3G9tB,EAAKkjB,aAAasC,OAAO,CAC5BC,MAAO,YAAO,qCACdC,KAAMoI,EACA,YAAO,8DAEbnI,QAAS,CACL,CAAEtD,KAAM,YAAanO,MAAO,YAAO,kBACnC,CAAEmO,KAAM,SAAUnO,MAAO,YAAO,iBAAkB0R,aAAYA,SAGtE,OAAAT,EAAA,IAAWC,YAAQA,OAAKA,EAAWplB,EAAKshB,YAAY8F,WAAW2G,iBAAiBplB,GAAM,QACrFzI,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,eAEZhiB,EAAK4kB,aACLjjB,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,oBArDpB,sCA0DI,IAAMqG,EAASF,OAAOpZ,OAAO,GAAI/O,KAAKmhB,MAAMiH,SAASC,eAC9CA,EAAOrP,SACdhZ,KAAKkhB,OAAOgH,SAAS,CAAC,KAAMG,GAAS,CAAEC,WAAYtoB,KAAKmhB,MAAOoH,oBAAqB,eA5DxF,gCA+DIvoB,KAAKotB,YAAYY,IAAIC,cA/DzB,KAkEJ,GAAwB/L,UAAO,SAAyCC,GAAK,OAAO,IAAKA,GAAK,IAAyB,KAAyB,KAAqB,KAAyB,MAA6B,KAAyB,MAAsB,KAAyB,KAAgB,KAAyB,OAC5U,GAAwBC,UAAO,KAAyB,CAAEC,KAAM,GAAyBC,UAAW,CAAC,CAAC,wBAAyBE,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,EAAG,qBAAsB,CAAC,OAAQ,WAAY,cAAe,GAAI,EAAG,UAAW,iBAAkB,CAAC,aAAc,mBAAoB,CAAC,QAAS,kBAAmB,EAAG,aAAc,EAAG,oBAAqB,CAAC,EAAG,sBAAuB,CAAC,EAAG,cAAe,qBAAsB,YAAa,YAAa,oBAAqB,CAAC,EAAG,uBAAwB,CAAC,EAAG,gBAAiB,CAAC,EAAG,MAAO,cAAe,EAAG,cAAe,CAAC,QAAS,QAAS,CAAC,EAAG,oBAAqB,CAAC,OAAQ,SAAU,EAAG,eAAgB,EAAG,SAAU,CAAC,QAAS,UAAWC,SAAU,SAA0Cnf,EAAIC,GAAgB,EAALD,IACvuB,KAAsB,EAAG,kBACzB,KAAsB,EAAG,eACzB,KAAsB,EAAG,uBAAwB,GACjD,KAAsB,EAAG,QAAS,GAClC,KAAkB,iBAAiB,SAAyE+C,GAAU,OAAO9C,EAAI+T,UAAYjR,KAC7I,OACA,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,OACA,OACA,KAAsB,EAAG,gBACzB,KAAiB,EAAG,uBAAwB,GAC5C,KAAkB,EAAGsC,GAAsC,EAAG,EAAG,IAAK,GACtE,OACA,OACA,KAAsB,GAAI,MAAO,GACjC,KAAsB,GAAI,sBAAuB,GACjD,KAAkB,aAAa,SAAoFtC,GAAU,OAAO9C,EAAIyqB,YAAY3nB,KAApJ,CAAgK,oBAAoB,SAA2FA,GAAU,OAAO9C,EAAIsqB,iBAAiBxnB,MACrT,KAAc,GAAI,SAClB,KAAc,GAAI,SAClB,OACA,KAAsB,GAAI,MAAO,GACjC,KAAc,GAAI,SAClB,KAAsB,GAAI,0BAA2B,GACrD,KAAc,GAAI,SAClB,KAAkB,GAAIuC,GAAiD,EAAG,EAAG,eAC7E,OACA,OACA,QACO,EAALtF,IACF,KAAiB,GACjB,KAAkB,UAAWC,EAAI+T,WACjC,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,mCAClD,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,cAAe,KAAmB,GAAI,GAAI/T,EAAIwiB,QAAhE,CAAyE,qBAAsB,KAAmB,GAAI,GAAIxiB,EAAI+pB,qBAA9H,CAAoJ,YAAa/pB,EAAI+T,WACrK,KAAiB,GACjB,KAAmB,WAAY,KAAmB,GAAI,GAAI/T,EAAI+pB,sBAC9D,KAAiB,GACjB,KAAkB,eAAgB,KAAmB,GAAI,GAAI/pB,EAAI+pB,wBAChE3K,WAAY,WAAc,MAAO,CAAC,IAA2B,IAA+B,IAA2B,KAAkC,IAAqC,IAAoB,IAAwB,IAAgB,IAAiB,IAAgC,IAAgC,KAA+B,GAC3W,GAA6B,IAA2B,MAA6BC,MAAO,WAAc,MAAO,CAAC,IAAsB,MAAsBC,OAAQ,CAAC,g8BAAi8BC,gBAAiB,IACjoC,GAAwBC,eAAiB,iBAAM,CAC3C,CAAEZ,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,OAEZ,GAA0B,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAChE,KACA,KACA,IACA,OACL,IAEH,IAAI,oDACA,WAAYnB,EAAQC,EAAOC,EAAqB8H,EAAgB5H,EAAaC,EAAaF,EAAqB6B,GAAaA,sCACxH9iB,cAAM+gB,EAAOD,EAAQE,EAAqBE,IACrC4H,eAAiBA,EACtBlpB,EAAKshB,YAAcA,EACnBthB,EAAKuhB,YAAcA,EACnBvhB,EAAKqhB,oBAAsBA,EAC3BrhB,EAAKkjB,aAAeA,EACpBljB,EAAKoG,aAAepG,EAAKmpB,qBAAqB,SAC9CnpB,EAAKiL,kBAAoBjL,EAAKmpB,qBAAqB,cACnDnpB,EAAK6D,WAAa7D,EAAKuhB,YAAY6H,MAAM,CACrCxd,MAAO5L,EAAKuhB,YAAY6H,MAAM,CAC1Bve,KAAM,CAAC,GAAI,IAAWwe,UACtB3kB,KAAM,GACN6D,SAAQA,EACRnC,aAAcpG,EAAKuhB,YAAY6H,MAAMppB,EAAKoG,aAAaojB,QAAO,SAACC,EAAMC,GAAP,OAAkBvB,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAI0a,GAAhCtB,mBAA0CuB,EAAMhlB,KAAO,OAAQ,OAEnJnE,OAAQP,EAAKuhB,YAAYgI,MAAM,MAhBqFrG,EAD5H,wDAqBIljB,KAAKwhB,SArBT,oCAwBIxhB,KAAKyhB,YAxBT,iCA0BW0M,EAAa5D,GACpB,IAAK4D,EAAa,CACd,IAAMC,EAAcpuB,KAAK6D,WAAWiC,IAAI,CAAC,QAAS,SAC9CsoB,GAAeA,EAAYrqB,UAC3BqqB,EAAYzM,SAAS,SAAA8I,gBAAA,CAAgBF,EAAW,SA9B5D,sCAkCgB4D,EAAa5D,EAAW5jB,GACpC,IAAKwnB,EAAa,CACd,IAAMC,EAAcpuB,KAAK6D,WAAWiC,IAAI,CAAC,SAAUa,EAAO,SACtDynB,GAAeA,EAAYrqB,UAC3BqqB,EAAYzM,SAAS,SAAA8I,gBAAA,CAAgBF,EAAW,SAtC5D,uCA0CiB7lB,GACb,QAAS1E,KAAK6D,WAAWiC,IAAI,CAAC,QAAS,eAAgBpB,MA3C3D,4CA6CsBiC,EAAOjC,GACzB,QAAS1E,KAAK6D,WAAWiC,IAAI,CAAC,SAAUa,EAAO,eAAgBjC,MA9CnE,2CAiDI,OAAO1E,KAAK6D,WAAWiC,IAAI,YAjD/B,sCAoDI,IAAMuoB,EAAkBruB,KAAK6D,WAAWiC,IAAI,UACxCuoB,IACAA,EAAgBC,OAAOD,EAAgB1uB,OAAQK,KAAKuhB,YAAY6H,MAAM,CAClE1kB,KAAM,CAAC,GAAI,IAAW2kB,UACtBxe,KAAM,MAEV7K,KAAKO,OAAOG,KAAK,CAAEgE,KAAM,GAAImG,KAAM,QA1D3C,+BA6DQ,WACE0jB,EAAYvuB,KAAK6D,WAAWiC,IAAI,SACjCyoB,GAAcA,EAAUpD,OAG7B,OAAApH,EAAA,GAAc/jB,KAAK4iB,QAAS5iB,KAAKsS,eAC5B6R,KAAK,YAAK,GAAI,OAAAiH,EAAA,IAAS,YAASnJ,0BAAPrW,EAAOqW,YAC3BuM,EAAWxuB,EAAKyuB,gBAAgB7iB,EAAO2iB,EAAWtM,GACxD,OAAOjiB,EAAKshB,YAAY1V,MAAM8iB,YAAYF,MAC1C,OAAArJ,EAAA,IAAW9B,YAAIA,OAAKrjB,EAAKshB,YAAY1V,MAAM+d,cAAaA,GAAMI,QAAQ5F,KAAK,OAAAwK,EAAA,GAAMtL,QAChFnjB,WAAWmjB,YACZrjB,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CAAEC,OAAQ,UACnFhiB,EAAK6D,WAAW4nB,iBAChBzrB,EAAKkpB,eAAewC,eACpB1rB,EAAKkhB,OAAOgH,SAAS,CAAC,MAAO7E,EAAKqL,YAAY/lB,IAAK,CAAE2f,WAAYtoB,EAAKmhB,WACtExf,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,eA9EpB,6BAkFM,WACF,OAAA+B,EAAA,GAAc/jB,KAAK4iB,QAAS5iB,KAAKsS,eAC5B6R,KAAK,YAAK,GAAI,OAAAiH,EAAA,IAAS,YAASnJ,0BAAPrW,EAAOqW,YAC3B2M,EAAa5uB,EAAK6D,WAAWiC,IAAI,SACjC+oB,EAAmB,GACzB,GAAID,GAAcA,EAAWzD,MAAO,CAChC,IAAMqD,EAAWxuB,EAAKyuB,gBAAgB7iB,EAAOgjB,EAAY3M,GACrDuM,GACAK,EAAiBnuB,KAAKV,EAAKshB,YAAY1V,MAAMkjB,YAAYN,IAGjE,IAAMO,EAAc/uB,EAAK6D,WAAWiC,IAAI,UACxC,GAAIipB,GAAeA,EAAY5D,MAAO,CAClC,IAAM6D,EAAYD,EAAYE,SACzBzL,QAAQmK,YAACA,OAAMA,EAAErsB,MAAMqH,MACvByb,KAAKuJ,YAACA,MAAK,CACZuB,QAAStjB,EAAMjD,GACfkC,KAAM8iB,EAAErsB,MAAMuJ,KACdmhB,aAAc,CAAC,CAAEtnB,KAAMipB,EAAErsB,MAAMoD,KAAMud,qBAErC+M,EAAUrvB,QACVkvB,EAAiBnuB,KAAKV,EAAKshB,YAAY1V,MAClCujB,kBAAkBH,GAClB7K,KAAK,OAAAgB,EAAA,IAAU,kBAAMnlB,EAAKshB,YAAY1V,MAAMwjB,SAASpvB,EAAK2I,IAAIohB,aAEvE,IAAMsF,EAAgBrvB,EAAKsvB,sBAAsB1jB,EAAOmjB,EAAa9M,GACjEoN,EAAc1vB,QACdkvB,EAAiBnuB,KAAKV,EAAKshB,YAAY1V,MAAM2jB,kBAAkBF,IAGvE,OAAO,OAAAG,EAAA,GAASX,MAChB,OAAA1J,EAAA,IAAU,kBAAMnlB,EAAKshB,YAAY1V,MAAM+d,cAAaA,GAAMI,YACzD7pB,WAAU,WACXF,EAAK6D,WAAW4nB,iBAChBzrB,EAAKkpB,eAAewC,eACpB1rB,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CAAEC,OAAQ,aACnFrgB,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,eAxHpB,uCA4HiByN,EAAc9oB,GAAMA,WACjC,IAAK8oB,EAAc,CAEf,IAAMpB,EAAkBruB,KAAK6D,WAAWiC,IAAI,UAK5C,OAJIuoB,GACAA,EAAgBnD,SAASvkB,QAE7B3G,KAAKO,OAAOc,OAAOsF,EAAO,GAG9B3G,KAAKklB,mBAAmBuK,GACnBtL,KAAK,OAAAgB,EAAA,IAAWC,YAAQA,OACrBA,EAAS3jB,SAAW,IAAe4jB,QAC5B,EAAC,GAGDrlB,EAAKklB,mBAAmBuK,EAAcrK,EAAS7iB,SAAW,IAAI4hB,KAAK,OAAAC,EAAA,IAAKkB,YAACA,OAAKA,EAAE7jB,SAAW,IAAe4jB,eAErH,OAAAF,EAAA,IAAWuK,YAAOA,OAAMA,EAAU1vB,EAAKshB,YAAY1V,MAAMwjB,SAASpvB,EAAK2I,IAAIohB,QAAU,OACpF7pB,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,kBAEZrgB,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,oBArJpB,yCAyJmByN,EAAcltB,GAAQA,WACrC,OAAOvC,KAAKkjB,aACPsC,OAAO,CACRC,MAAO,YAAO,sCACdC,KAAMnjB,EACNojB,QAAS,CACL,CAAEtD,KAAM,YAAanO,MAAO,YAAO,kBACnC,CAAEmO,KAAM,SAAUnO,MAAO,YAAO,iBAAkB0R,aAAYA,MAGjEzB,KAAK,OAAAgB,EAAA,IAAW1jB,YAAMA,OAAKA,EAASzB,EAAKshB,YAAY1V,MAAM+jB,kBAAkB,CAACF,KAAiBltB,GAAW,OAAQ,OAAA6hB,EAAA,IAAK3iB,YAAMA,OAAKA,EAAOkuB,kBAAkB,SAnKpK,oCAwKc/jB,EAAOqW,GAAaA,WACxB8J,EAAqBngB,EAAMogB,aAAa3B,MAAMlI,YAACA,OAAKA,EAAEF,eAAiBA,KAQ7E,GAPAjiB,KAAK6D,WAAWooB,WAAW,CACvBrgB,MAAO,CACHf,KAAMe,EAAMf,KACZtC,SAAUqD,EAAMuB,UAChBzI,KAAMqnB,EAAqBA,EAAmBrnB,KAAO,MAGzD1E,KAAKoG,aAAazG,OAAQ,CAC1B,IAD0B,EACpBwsB,EAAoBnsB,KAAK6D,WAAWiC,IAAI,CAAC,QAAS,iBAD9B,6BAEH9F,KAAKoG,cAFF,IAE1B,2BAA0C,CAAC,IAAhCgmB,EAA+B,QAChCnE,EAAMmE,EAAS1nB,KACfpD,EAA0B,iBAAlB8qB,EAAS/J,KACjB0J,EAAmB3lB,aAAa6hB,GAChCrc,EAAMxF,aAAa6hB,GACnBgD,EAAUkB,EAAkBrmB,IAAImiB,GAClCgD,GACAA,EAAQgB,WAAW3qB,IATD,+BAa9B,IAAMsuB,EAAyB5vB,KAAK6D,WAAWiC,IAAI,UACnD8pB,EAAuB/b,QACvB7T,KAAKO,OAALP,mBAAkB4L,EAAMrL,QACxBqL,EAAMrL,OAAO2rB,SAAQ,SAAC5qB,EAAOb,GACzB,IAAMovB,EAAmBvuB,EAAM0qB,cAAgB1qB,EAAM0qB,aAAa3B,MAAMlI,YAACA,OAAKA,EAAEF,eAAiBA,KAC3FmH,EAAQ,CACVzgB,GAAIrH,EAAMqH,GACVkC,KAAMvJ,EAAMuJ,KACZnG,KAAMmrB,EAAmBA,EAAiBnrB,KAAO,IAGrD,GADAkrB,EAAuBtB,OAAO7tB,EAAGT,EAAKuhB,YAAY6H,MAAMA,IACpDppB,EAAKiL,kBAAkBtL,OAAQ,CAC/B,IAAImwB,EAAyB9vB,EAAK6D,WAAWiC,IAAI,CAAC,SAAUrF,EAAG,iBAK/D,GAJKqvB,IACDA,EAAyB,IAAI,IAAU,IACvC9vB,EAAK6D,WAAWiC,IAAI,CAAC,SAAUrF,IAAIsvB,WAAW,eAAgBD,IAE9DA,EAAJ,oCAC2B9vB,EAAKiL,mBADhC,IACI,2BAA+C,CAAC,IAArCmhB,EAAoC,QACrCnE,EAAMmE,EAAS1nB,KACfsrB,EAA+B,iBAAlB5D,EAAS/J,KACtBwN,EAAiBzpB,aAAa6hB,GAC9B3mB,EAAM8E,aAAa6hB,GACnBgD,EAAU6E,EAAuBhqB,IAAImiB,GACvCgD,EACAA,EAAQtJ,SAASqO,GAGjBF,EAAuBC,WAAW9H,EAAK,IAAI,IAAY+H,KAXnE,sCA/MZ,sCAqOgBpkB,EAAOqkB,EAAgBhO,GACnC,IAAMqJ,EAAQ,aAA0B,CACpCiB,aAAc3gB,EACd4gB,cAAeyD,EAAe3uB,MAC9BmrB,kBAAmBzsB,KAAKoG,aACxB6b,eACAyK,mBAAoB,CAChBzK,eACAvd,KAAMkH,EAAMlH,MAAQ,MAI5B,OADA4mB,EAAMne,WAAa8iB,EAAe3uB,MAAMiH,QACjC+iB,IAjPX,4CAuPsB1f,EAAOyiB,EAAiBpM,GAAaA,WACjDiO,EAActkB,EAAMrL,OAAOijB,QAAO,SAAC2M,EAAG1vB,GACxC,IAAM2vB,EAAU/B,EAAgBvoB,IAAIrF,EAAEusB,YACtC,OAAOoD,GAAWA,EAAQjF,OAASiF,EAAQ9uB,MAAMqH,MAE/C0nB,EAAmBhC,EAAgBY,SACpCzL,QAAQmK,YAACA,OAAKA,EAAExC,OAASwC,EAAErsB,MAAMqH,MACjCyb,KAAKuJ,YAACA,OAAKA,EAAErsB,SAClB,GAAI4uB,EAAYvwB,SAAW0wB,EAAiB1wB,OACxC,MAAM,IAAI2wB,MAAM,YAAO,+CAE3B,OAAOJ,EACF9L,KAAI,SAAC9iB,EAAOb,GAAR,OACE,aAA0B,CAC7B8rB,aAAcjrB,EACdkrB,cAAe6D,EAAiB5vB,GAChCgsB,kBAAmBzsB,EAAKiL,kBACxBgX,eACAyK,mBAAoB,CAChBzK,eACAvd,KAAM,SAIb8e,OAAO,EAAA+M,wBA/QhB,GAA0D,KAkR9D,GAAqBrO,UAAO,SAAsCC,GAAK,OAAO,IAAKA,GAAK,IAAsB,KAAyB,KAAgB,KAAyB,KAAwB,KAAyB,MAA6B,KAAyB,KAA2B,KAAyB,KAAqB,KAAyB,KAAqB,KAAyB,MAA6B,KAAyB,QAC7d,GAAqBC,UAAO,KAAyB,CAAEC,KAAM,GAAsBC,UAAW,CAAC,CAAC,qBAAsBC,SAAU,CAAC,MAAoCC,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,yBAA0B,sBAAuB,sBAAuB,CAAC,aAAc,gBAAiB,CAAC,QAAS,kBAAmB,EAAG,WAAY,QAAS,EAAG,OAAQ,YAAa,CAAC,eAAgB,IAAK,CAAC,QAAS,OAAQ,EAAG,YAAa,EAAG,QAAS,CAAC,EAAG,MAAO,cAAe,EAAG,WAAY,SAAU,CAAC,QAAS,kBAAmB,EAAG,WAAY,QAAS,EAAG,oBAAqB,CAAC,EAAG,OAAQ,EAAG,aAAc,CAAC,gBAAiB,QAAS,EAAG,cAAe,CAAC,MAAO,aAAc,EAAG,SAAU,CAAC,OAAQ,WAAY,YAAa,GAAI,kBAAmB,UAAW,KAAM,aAAc,EAAG,eAAgB,CAAC,EAAG,kBAAmB,CAAC,EAAG,OAAQ,YAAa,CAAC,UAAW,IAAK,CAAC,MAAO,OAAQ,EAAG,SAAU,CAAC,KAAM,OAAQ,OAAQ,OAAQ,kBAAmB,OAAQ,EAAG,WAAY,SAAU,CAAC,MAAO,OAAQ,EAAG,QAAS,kBAAmB,CAAC,KAAM,OAAQ,OAAQ,OAAQ,kBAAmB,OAAQ,EAAG,YAAa,CAAC,gBAAiB,eAAgB,EAAG,QAAS,CAAC,QAAS,aAAc,EAAG,QAAS,CAAC,gBAAiB,gBAAiB,CAAC,EAAG,QAAS,WAAY,CAAC,aAAc,QAAS,EAAG,wBAAyB,cAAe,EAAG,QAAS,CAAC,aAAc,QAAS,EAAG,wBAAyB,eAAgB,CAAC,EAAG,cAAe,CAAC,QAAS,0BAA2B,gBAAiB,SAAU,EAAG,QAAS,CAAC,OAAQ,SAAU,QAAS,oBAAqB,EAAG,QAAS,EAAG,oBAAqB,CAAC,gBAAiB,SAAU,EAAG,oBAAqB,SAAU,CAAC,QAAS,cAAe,EAAG,gBAAiB,EAAG,QAAS,WAAY,CAAC,EAAG,cAAe,EAAG,iBAAkB,CAAC,EAAG,gBAAiB,CAAC,OAAQ,OAAQ,kBAAmB,OAAQ,EAAG,WAAY,SAAU,CAAC,OAAQ,OAAQ,kBAAmB,OAAQ,WAAY,IAAK,CAAC,OAAQ,SAAU,qBAAsB,GAAI,EAAG,MAAO,WAAY,UAAW,CAAC,QAAS,cAAe,CAAC,cAAe,gBAAiB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,gBAAiB,EAAG,WAAY,SAAU,CAAC,QAAS,QAAS,EAAG,aAAc,CAAC,aAAc,aAAc,EAAG,YAAa,wBAAyB,cAAe,EAAG,QAAS,CAAC,aAAc,aAAc,EAAG,YAAa,wBAAyB,eAAgB,CAAC,OAAQ,SAAU,EAAG,MAAO,gBAAiB,EAAG,SAAU,CAAC,QAAS,QAASC,SAAU,SAAuCnf,EAAIC,GAqB36E,GArB27E,EAALD,IACp7E,KAAsB,EAAG,kBACzB,KAAsB,EAAG,eACzB,KAAiB,EAAG,kBAAmB,GACvC,KAAc,EAAG,SACjB,KAAsB,EAAG,wBAAyB,GAClD,KAAkB,sBAAsB,SAA2F+C,GAAU,OAAO9C,EAAIypB,YAAY3mB,MACpK,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,OACA,OACA,KAAsB,EAAG,gBACzB,KAAiB,EAAG,uBAAwB,GAC5C,KAAkB,GAAI6C,GAAyC,EAAG,EAAG,SAAU,GAC/E,KAAc,GAAI,SAClB,KAAkB,GAAIE,GAA8C,EAAG,EAAG,cAAe,KAAM,EAAG,MAClG,OACA,OACA,KAAkB,GAAImC,GAAuC,GAAI,GAAI,OAAQ,GAC7E,KAAc,GAAI,UACX,EAALjI,EAAQ,CACV,IAAM4Z,EAAM,KAAmB,IAC/B,KAAiB,GACjB,KAAkB,SAAU,KAAmB,EAAG,EAAG3Z,EAAImf,UACzD,KAAiB,GACjB,KAAkB,WAAY,KAAmB,EAAG,EAAGnf,EAAIoI,QAA3D,CAAoE,yBAA0B,KAAmB,EAAG,GAAIpI,EAAI0pB,qBAA5H,CAAkJ,sBAAuB,KAAmB,EAAG,GAAI1pB,EAAI6O,gBACvM,KAAiB,GACjB,KAAkB,OAAQ,KAAmB,GAAI,GAAI7O,EAAIoI,QAAzD,CAAkE,WAAYuR,GAC9E,KAAiB,GACjB,KAAkB,OAAQ,KAAmB,GAAI,GAAI3Z,EAAImf,YACxDC,WAAY,CAAC,IAA2B,IAA+B,IAA4B,KAAkC,IAAgC,IAAgC,IAAa,KAA+B,IAAwC,IAA6B,IAA2B,IAAsB,KAA2B,IAA2B,KAAkC,IAAqC,IAAoB,IAAwB,IAAwB,IAA0B,IAAiB,IAA6B,IAAgB,IAAoC,IAAsB,IAA0B,IAAiC,IAAyB,IAA8B,KAA+BC,MAAO,CAAC,IAAkB,IAAsB,MAA2BC,OAAQ,CAAC,iEAAkEC,gBAAiB,IAC3/B,GAAqBC,eAAiB,iBAAM,CACxC,CAAEZ,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,QAEZ,GAAuB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAC7D,IACA,KACA,IACA,IACA,IACA,KACA,QACL,IAEH,IAAI,oDACA,WAAYf,EAAa4B,EAAc7B,EAAqBH,EAAQC,GAAMA,wCACtE/gB,cAAM8gB,EAAQC,IACTG,YAAcA,EACnBthB,EAAKkjB,aAAeA,EACpBljB,EAAKqhB,oBAAsBA,EAC3BrhB,EAAKoM,aAAe,EACpBpM,EAAK2M,aAAe,GALpBvM,wFAMiB,wBAAaJ,IAAKshB,YAAY1V,OAAM4kB,UAAvBxwB,mBAA0CstB,4BAA0BjK,YAAIA,OAAIA,EAAKuG,UAPzCzI,EAD1E,gEAUmBvV,GACX5L,KAAK2M,aAAaf,EAAMjD,MAAQiD,EAAMrL,OAAOZ,OAC7CK,KAAK2M,aAAaf,EAAMjD,IAAM3I,KAAKoM,aAGnCpM,KAAK2M,aAAaf,EAAMjD,IAAMiD,EAAMrL,OAAOZ,SAfnD,kCAkBY8vB,GAAaA,WACrBzvB,KAAKklB,mBAAmBuK,GACnBtL,KAAK,OAAAgB,EAAA,IAAUC,YAAQA,OACpBA,EAAS3jB,SAAW,IAAe4jB,QAC5B,EAAC,GAGDrlB,EAAKklB,mBAAmBuK,EAAcrK,EAAS7iB,SAAW,IAAI4hB,KAAK,OAAAC,EAAA,IAAIkB,YAACA,OAAIA,EAAE7jB,SAAW,IAAe4jB,gBAGlHnlB,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,eAEZhiB,EAAK4kB,aACNjjB,YACC3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,oBAnCpB,yCAuCmBkN,EAAS3sB,GAAQA,WAChC,OAAOvC,KAAKkjB,aACPsC,OAAO,CACRC,MAAO,YAAO,gCACdC,KAAMnjB,EACNojB,QAAS,CACL,CAAEtD,KAAM,YAAanO,MAAO,YAAO,kBACnC,CAAEmO,KAAM,SAAUnO,MAAO,YAAO,iBAAkB0R,aAAYA,MAGjEzB,KAAK,OAAAgB,EAAA,IAAUH,YAAGA,OAAKA,EAAMhlB,EAAKshB,YAAY1V,MAAMqB,YAAYiiB,IAAW3sB,GAAW,OAAS,OAAA6hB,EAAA,IAAIY,YAAGA,OAAIA,EAAI/X,oBAjDvH,GAAsD,KAoD1D,GAAmBiV,UAAO,SAAoCC,GAAK,OAAO,IAAKA,GAAK,IAAoB,KAAyB,KAAqB,KAAyB,MAAsB,KAAyB,MAA6B,KAAyB,KAAgB,KAAyB,OAC7T,GAAmBC,UAAO,KAAyB,CAAEC,KAAM,GAAoBC,UAAW,CAAC,CAAC,mBAAoBC,SAAU,CAAC,MAAoCC,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,aAAc,cAAe,CAAC,QAAS,kBAAmB,EAAG,aAAc,EAAG,oBAAqB,CAAC,EAAG,QAAS,eAAgB,aAAc,cAAe,aAAc,sBAAuB,CAAC,EAAG,UAAW,CAAC,EAAG,MAAO,cAAe,EAAG,cAAe,CAAC,QAAS,QAAS,CAAC,EAAG,OAAQ,gBAAiB,CAAC,EAAG,aAAc,YAAa,mBAAoB,EAAG,QAAS,WAAY,CAAC,QAAS,oCAAqC,EAAG,QAAS,EAAG,QAAS,CAAC,EAAG,OAAQ,YAAa,CAAC,UAAW,IAAK,CAAC,EAAG,QAAS,gBAAiB,CAAC,YAAa,OAAQ,EAAG,QAAS,UAAW,CAAC,OAAQ,SAAU,qBAAsB,GAAI,EAAG,MAAO,WAAY,UAAW,CAAC,QAAS,cAAe,CAAC,cAAe,gBAAiB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,gBAAiB,EAAG,WAAY,SAAU,CAAC,QAAS,QAAS,EAAG,aAAc,CAAC,EAAG,aAAc,YAAa,oBAAqB,CAAC,EAAG,MAAO,SAAU,gBAAiB,WAAY,EAAG,SAAU,CAAC,WAAY,IAAK,CAAC,QAAS,UAAWC,SAAU,SAAqCnf,EAAIC,GAAgB,EAALD,IACrsC,KAAsB,EAAG,kBACzB,KAAsB,EAAG,gBACzB,KAAiB,EAAG,uBAAwB,GAC5C,KAAkB,EAAGsI,GAAiC,EAAG,EAAG,IAAK,GACjE,OACA,OACA,KAAsB,EAAG,iBAAkB,GAC3C,KAAkB,cAAc,SAA0EvF,GAAU,OAAO9C,EAAIuiB,cAAczf,KAA7I,CAAyJ,sBAAsB,SAAkFA,GAAU,OAAO9C,EAAIsiB,gBAAgBxf,MACtS,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAsB,EAAG,iBACzB,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,iBAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,gBAAiB,GAC3C,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,iBAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAiB,GAAI,iBACrB,KAAiB,GAAI,iBACrB,KAAkB,GAAIwG,GAA4C,GAAI,GAAI,eAC1E,QACO,EAALvJ,IACF,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,GAAIC,EAAIwiB,QAAzD,CAAkE,eAAgB,KAAmB,EAAG,GAAIxiB,EAAIugB,eAAhH,CAAgI,aAAc,KAAmB,EAAG,GAAIvgB,EAAIygB,aAA5K,CAA0L,cAAe,KAAmB,EAAG,GAAIzgB,EAAIwgB,eACvO,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,gBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,gBACpD,KAAiB,GACjB,KAAkB,UAAS,GAC3B,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,mBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,yBACnDpB,WAAY,CAAC,IAA2B,IAAgC,IAAgC,KAA+B,IAA2B,IAAiC,IAA2B,IAAyB,IAAgB,IAAa,IAAsB,KAAgC,IAA0B,IAAiC,IAA8B,IAA8B,MAAiCC,MAAO,CAAC,IAAkB,IAAsB,IAAkB,MAA2BC,OAAQ,CAAC,6DACjlB,GAAmBE,eAAiB,iBAAM,CACtC,CAAEZ,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAqB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAC3D,KACA,KACA,IACA,OACL,IAMH,IAAI,cACA,WAAYf,GAAYA,wBACpBthB,KAAKshB,YAAcA,EAFvB,yDAKI,OAAOthB,KAAKshB,YAAY1V,MAAM+d,eAAerC,WAAWjE,YAAIA,OAAKA,EAAKuG,OAAOlC,WALjF,yCAQI,OAAO1nB,KAAKshB,YAAY2I,SACnBwG,mBACAnJ,WAAWjE,YAAIA,OAAKA,EAAK5F,iBACzB0G,KAAK,OAAA0F,EAAA,GAAY,MAX1B,gDAa0ByB,EAAOpa,EAAsB+Q,GAAaA,WAC1DyO,EAAiB1wB,KAAKshB,YAAYO,QAAQ8O,cAAcrF,GACxDsF,EAAuB1f,EAAqB2f,OAAOrN,QAAQsN,YAACA,OAAK,EAAIA,EAAEvwB,OAAOZ,UAC9EoxB,EAAsB/wB,KAAKgxB,0BAA0BJ,EAAsB3O,GACjF,OAAO,OAAAuN,EAAA,GAASkB,EAAgBK,GAAqB5M,KAAK,OAAAiH,EAAA,IAAS,sCAAIuF,EAAJ,KAAIA,cAAiBhf,EAArB,YAClCA,EAAahS,OACpC,OAAA6vB,EAAA,GAAS7d,EAAayS,KAAK6M,YAAWA,OAC7BjxB,EAAKshB,YAAYO,QAAQqP,wBAAwB,CACpDvsB,UAAWgsB,EAAchoB,GACzBwoB,cAAeF,EAAYtoB,SAGjC,OAAA4e,EAAA,GAAG,KACmBpD,KAAK,OAAAC,EAAA,IAAI,iBAC1B,CAAEuM,gBAAehf,uBAE5B,OAAAyZ,EAAA,IAAS,YAAkBzZ,IAAfgf,EAAehf,EAAfgf,cAAehf,iBACrB4I,EAAWrJ,EAAqBqJ,SAAS6J,KAAK+L,YAChD,IAAMiB,EAAYzf,EAAahS,OACzBwwB,EAAEkB,aAAajN,KAAI,SAAC3F,EAAY9X,GAC9B,IAAM2qB,EAAS3f,EAAahL,GAAOsU,QAAQoP,MAAMQ,YAACA,OAAKA,EAAEnmB,OAAS+Z,KAClE,IAAK6S,EACD,MAAM,IAAIhB,MAAJ,mDAAsD7R,EAAtD,4BAEV,OAAO6S,EAAO3oB,MAEhB,GACN,OAAOwf,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAIohB,GAAI,CAAEiB,iBAE3CnW,EAAUtJ,EAAayS,KAAKmN,YAAEA,OAAKA,EAAGtW,WAASuO,QAAO,SAACgI,EAAM3G,GAAP,mCAAiB2G,GAAjB,mBAA0B3G,MAAI,IAC1F,OAAO7qB,EAAKyxB,sBAAsBd,EAAepW,EAAUU,EAASgH,SA3C5E,gDA8C0B4O,EAAQ5O,GAAaA,WAC3C,OAAO4O,EAAOlxB,OACR,OAAA6vB,EAAA,GAASqB,EAAOzM,KAAKuJ,YAACA,OACb3tB,EAAKshB,YAAYO,QACnBmP,0BAA0B,CAC3BnmB,KAAM,SAAA4f,gBAAA,CAAgBkD,EAAEjpB,KAAM,KAC9BsnB,aAAc,CAAC,CAAE/J,eAAcvd,KAAMipB,EAAEjpB,OACvCuW,QAAS0S,EAAEptB,OAAO6jB,KAAK+L,YAACA,MAAK,CACzBtlB,KAAM,SAAA4f,gBAAA,CAAgB0F,EAAG,KACzBnE,aAAc,CAAC,CAAE/J,eAAcvd,KAAMyrB,UAGxChM,KAAK,OAAAC,EAAA,IAAKf,YAAIA,OAAKA,EAAKqO,iCAE/B,OAAAnK,EAAA,GAAG,MA5Db,4CA8DsB1F,EAAS8P,EAAa1W,EAASgH,GACjD,IAAM1H,EAAWoX,EAAYvN,KAAK+L,YAC9B,IAAMzrB,EAAOuW,EAAQtb,OAARsb,UACJ4G,EAAQnd,KADJuW,YACYkV,EAAEiB,UAClBhN,KAAKzb,YAAEA,OAAKsS,EAAQoP,MAAMQ,YAACA,OAAKA,EAAEliB,KAAOA,QACzC6a,OAAO,EAAA+M,oBACPnM,KAAKyG,YAACA,OAAKA,EAAEnmB,QACb2V,KAAK,MACRwH,EAAQnd,KACd,MAAO,CACHC,UAAWkd,EAAQlZ,GACnB4F,MAAO4hB,EAAE5hB,MACT6H,IAAK+Z,EAAE/Z,IACPwb,YAAazB,EAAEvZ,MACfoV,aAAc,CACV,CACI/J,eACAvd,SAGR0sB,UAAWjB,EAAEiB,cAGrB,OAAOpxB,KAAKshB,YAAYO,QAAQ4P,sBAAsBlX,GAAU4J,KAAK,OAAAC,EAAA,IAAI,kBAA+B,CACpGqN,sBADqE,EAAGA,sBAExE9sB,UAAWkd,EAAQlZ,UAvF3B,oCA0FckpB,EAAcC,GACxB,IAAMjD,EAAmB,GAOzB,OANIgD,GACAhD,EAAiBnuB,KAAKV,KAAKshB,YAAYO,QAAQkQ,cAAcF,IAE7DC,GACAjD,EAAiBnuB,KAAKV,KAAKshB,YAAYO,QAAQmQ,sBAAsBF,IAElE,OAAAtC,EAAA,GAASX,KAlGpB,0CAoGoBvD,GAChB,OAAOtrB,KAAKshB,YAAYO,QAAQ9P,oBAAoBuZ,KArGxD,2CAuGqB3iB,EAAIhE,GAAUA,WAC/B,OAAO3E,KAAKshB,YAAYO,QAAQoQ,qBAAqBtpB,GAAIwb,KAAK,OAAAgB,EAAA,IAAW1jB,YAAMA,OACvEA,EAAOwwB,qBAAqBxwB,SAAW,IAAe4jB,QAC/CrlB,EAAKshB,YAAYO,QAAQqQ,WAAWvtB,GAAWolB,QAG/C,OAAAoI,EAAA,GAAW1wB,EAAOwwB,qBAAqB1vB,iBA7G1D,KAkHJ,GAAqB2f,UAAO,SAAsCC,GAAK,OAAO,IAAKA,GAAK,IAAsB,KAAgB,OAC9H,GAAqBc,eAAiB,iBAAM,CACxC,CAAEZ,KAAM,OAEZ,GAAqB+P,WAAQ,aAAmB,CAAEC,QAAS,WAA0C,OAAO,IAAI,GAAqB,aAAS,OAAkBC,MAAO,GAAsBC,WAAY,SACzM,GAAuB,YAAW,CAAE,YAAW,oBAAqB,CAAC,OAClE,IAEH,IAAIC,GAAyBA,WACzB,WAAYtJ,GAAeA,wBACvBlpB,KAAKkpB,eAAiBA,EACtBlpB,KAAKyN,eAAiB,GAHD+kB,+DAKR,WACbC,YAAW,kBAAMzyB,EAAK0yB,SAASC,UAAS,KANnBH,qCASrBxyB,KAAK4yB,YAAY5yB,KAAKyN,kBATD+kB,+BAYrBxyB,KAAK4yB,kBAZgBJ,KAe7BA,GAA0BtQ,UAAO,SAA2CC,GAAK,OAAO,IAAKA,GAAKqQ,IAA2B,KAAyB,OACtJA,GAA0BpQ,UAAO,KAAyB,CAAEC,KAAMmQ,GAA2BlQ,UAAW,CAAC,CAAC,2BAA4B2K,UAAW,SAAyCzpB,EAAIC,GAGtL,IAAIilB,EAHkM,EAALllB,GACjM,KAAmB,SACZ,EAALA,GAEF,KAAsBklB,EAAK,UAA0BjlB,EAAIivB,SAAWhK,EAAGE,QACtEpG,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,iBAAkB,IAAK,CAAC,EAAG,SAAU,wBAAyB,CAAC,mBAAoB,IAAK,CAAC,OAAQ,SAAU,EAAG,MAAO,EAAG,SAAU,CAAC,OAAQ,SAAU,EAAG,MAAO,cAAe,EAAG,WAAY,UAAWC,SAAU,SAA4Cnf,EAAIC,GAAgB,EAALD,IAC3S,KAAkB,EAAG4J,GAAkD,EAAG,EAAG,cAAe,GAC5F,KAAsB,EAAG,2BAA4B,GACrD,KAAkB,wBAAwB,SAAqG7G,GAAU,OAAO9C,EAAIgK,eAAiBlH,KACrL,OACA,KAAkB,EAAG8G,GAAkD,EAAG,EAAG,cAAe,IACrF,EAAL7J,IACF,KAAiB,GACjB,KAAkB,SAAUC,EAAImmB,UAC/B/G,WAAY,CAAC,IAA6B,KAAoC,KAAgCC,MAAO,CAAC,KAAuBC,OAAQ,CAAC,IAAKC,gBAAiB,IACrLwP,GAA0BvP,eAAiB,iBAAM,CAC7C,CAAEZ,KAAM,OAEZ,YAAW,CACP,aAAU,MACV,YAAW,cAAe,OAC3BmQ,GAA0BxJ,UAAW,gBAAW,GACnDwJ,GAA4B,YAAW,CAAE,YAAW,oBAAqB,CAAC,OACvEA,IAEH,IAAI,cACA,WAAYlR,EAAaD,GAAoBA,wBACzCrhB,KAAKshB,YAAcA,EACnBthB,KAAKqhB,oBAAsBA,EAC3BrhB,KAAK6yB,mBAAqB,IAAI,IAAY,GAC1C7yB,KAAK8yB,yBAA2B,IAAI,IALxC,wDAOU,WACAC,EAAmB/yB,KAAKshB,YAAY0R,OACrCC,aACA3L,WAAU,qBAAG2L,WAA4BC,mBACxCC,EAAenzB,KAAKshB,YAAY2I,SAASmJ,cAAc9L,WAAUjE,YAAIA,OAAIA,EAAKgQ,YACpF,OAAAtP,EAAA,GAAcgP,EAAkBI,GAAcjzB,WAAU,YAAmBmzB,0BAAjBH,EAAiBG,YAEvErzB,EAAKwO,eAAiB6kB,EAAShJ,MAAKsD,YAACA,OAAIA,EAAEhlB,KAAOuqB,KAClDlzB,EAAKszB,kBAAoBD,KAE7BrzB,KAAK8yB,yBAAyBtO,aAAatkB,WAAUqzB,YACjDvzB,EAAKwzB,cAAcD,MAEvBvzB,KAAKyzB,iBAAmB,OAAA1P,EAAA,GAAc,OAAA2P,EAAA,GAAK1zB,KAAK2zB,eAAe,KAAM3zB,KAAK6yB,mBAAmBrO,aAAaL,KAAK,OAAAwC,EAAA,GAAU,KAAKxC,KAAK,OAAAC,EAAA,IAAI,sCAAE7J,EAAF,KAAYqZ,EAAZ,YAC5HrZ,EAAS6J,KAAI+L,YAACA,MAAI,CACrBxnB,GAAIwnB,EAAExnB,GACNjE,KAAMyrB,EAAEzrB,KACR6J,MAAO4hB,EAAE5hB,MACTJ,aAAcgiB,EAAE5hB,OAASqlB,YAzBrC,oCA6BcC,GACV7zB,KAAK8N,gBAAkB9N,KAAKszB,kBAAkBjJ,MAAKsD,YAACA,OAAIA,EAAEhlB,KAAOkrB,EAAW,QA9BhF,+BAgCQ,WACE/lB,EAAkB9N,KAAK8N,gBACzBA,GACA9N,KAAKshB,YAAYO,QACZiS,wBAAwB,CACzBC,UAAWjmB,EAAgBnF,GAC3BqrB,WAAYh0B,KAAKg0B,WACjBC,aAAcj0B,KAAK6yB,mBAAmBvxB,QAErCpB,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,6CAA8C,CAClFnU,QAASE,EAAgBjD,OAE7B7K,EAAK4yB,aAAYA,QA7C7B,+BAkDI5yB,KAAK4yB,gBAlDT,qCAoDerP,GACX,OAAO,YAAUvjB,UAAKA,OAAC,EAAhB,yBAAgC,uGAC7Bua,EAAW,GACR9Z,EAAI,EAFsB,YAEnBA,EAAIT,KAAKg0B,WAAWr0B,QAAU4a,EAAS5a,OAAS4jB,GAF7B,iBAGzBkE,OAHyB,SAGDznB,KAAKshB,YAAYO,QAC1CqQ,WAAWlyB,KAAKg0B,WAAWvzB,IAC3B6mB,WAAU,gBAAGzF,EAAH,EAAGA,QAAH,OAAiBA,GAAWA,EAAQtH,YAC9C2Z,YAN0B,OAGzBzM,EAHyB,OAO/BlN,EAAS7Z,KAAT6Z,QAAQA,mBAAUkN,GAAmB,KAPN,OAEmChnB,IAFnC,gDAS5B8Z,EAAS4Z,MAAM,EAAG5Q,IATU,qDArD3C,KAkEJ,GAAuCrB,UAAO,SAAwDC,GAAK,OAAO,IAAKA,GAAK,IAAwC,KAAyB,KAAqB,KAAyB,QAC3O,GAAuCC,UAAO,KAAyB,CAAEC,KAAM,GAAwCC,UAAW,CAAC,CAAC,0CAA2CE,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,iBAAkB,IAAK,CAAC,EAAG,QAAS,CAAC,WAAY,GAAI,EAAG,WAAY,wBAAyB,eAAgB,CAAC,EAAG,eAAgB,CAAC,WAAY,GAAI,OAAQ,SAAU,MAAO,IAAK,MAAO,QAAS,EAAG,eAAgB,CAAC,EAAG,yBAA0B,CAAC,EAAG,qBAAsB,CAAC,EAAG,SAAU,CAAC,EAAG,OAAQ,YAAa,CAAC,cAAe,IAAK,CAAC,EAAG,QAAS,WAAY,CAAC,mBAAoB,IAAK,CAAC,oBAAqB,IAAK,CAAC,OAAQ,SAAU,EAAG,MAAO,EAAG,SAAU,CAAC,OAAQ,SAAU,EAAG,MAAO,cAAe,EAAG,WAAY,UAAWC,SAAU,SAAyDnf,EAAIC,GAkDpxB,GAlDoyB,EAALD,IAC7xB,KAAkB,EAAGkK,GAA+D,EAAG,EAAG,cAAe,GACzG,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,uBACzB,KAAsB,EAAG,SACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAiB,EAAG,iCAAkC,GACtD,OACA,KAAiB,EAAG,MAAO,GAC3B,KAAsB,EAAG,uBACzB,KAAsB,EAAG,SACzB,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAiB,GAAI,QAAS,GAC9B,OACA,OACA,KAAsB,GAAI,MAAO,GACjC,KAAsB,GAAI,QAAS,GACnC,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,QAAS,GACnC,KAAsB,GAAI,SAC1B,KAAsB,GAAI,MAC1B,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,KAAc,GAAI,aAClB,KAAc,GAAI,sBAClB,OACA,KAAsB,GAAI,MAC1B,KAAkB,GAAIG,GAAgE,EAAG,EAAG,cAAe,GAC3G,KAAkB,GAAIE,GAAgE,EAAG,EAAG,cAAe,KAAM,EAAG,MACpH,OACA,OACA,OACA,KAAsB,GAAI,SAC1B,KAAkB,GAAIO,GAAuD,GAAI,EAAG,KAAM,IAC1F,KAAc,GAAI,SAClB,OACA,OACA,OACA,KAAkB,GAAIQ,GAAgE,EAAG,EAAG,cAAe,KACpG,EAALtL,EAAQ,CACV,IAAME,EAAM,KAAmB,IAC/B,KAAiB,GACjB,KAAyB,KAAmB,EAAG,GAAI,mBACnD,KAAiB,GACjB,KAAkB,YAAW,EAA7B,CAAqC,yBAAwB,EAA7D,CAAqE,cAAeD,EAAIqvB,0BACxF,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,oCACpD,KAAiB,GACjB,KAAkB,cAAervB,EAAIovB,oBACrC,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,kCACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,gBACpD,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,2BAA4B,KAAuB,GAAIllB,GAAM,KAAmB,GAAI,GAAI,KAAmB,GAAI,GAA0B,MAAtBlK,EAAI+K,eAAyB,KAAO/K,EAAI+K,eAAe3D,SAAU,KAC9O,KAAiB,GACjB,KAAkB,OAAQpH,EAAIqK,gBAA9B,CAA+C,WAAYpK,GAC3D,KAAiB,GACjB,KAAkB,UAAW,KAAmB,GAAI,GAAID,EAAIgwB,qBAC3D5Q,WAAY,CAAC,IAA6B,IAA0B,IAAiB,IAA0C,IAAiB,IAAwB,IAA6B,KAAkC,IAA4B,IAA6B,IAAa,IAAgB,KAAgCC,MAAO,CAAC,IAAsB,IAAyB,IAAkB,KAAsBC,OAAQ,CAAC,0NAA2NC,gBAAiB,IAC1rB,GAAuCC,eAAiB,iBAAM,CAC1D,CAAEZ,KAAM,KACR,CAAEA,KAAM,QAEZ,GAAyC,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAAa,QACjG,IAEH,IAAI,oDACA,WAAYlB,EAAOD,EAAQE,EAAqBgT,EAAsB7S,EAAa2B,EAAc7B,EAAqBC,EAAa+S,EAAUnL,GAAeA,sCACxJ9oB,cAAM+gB,EAAOD,EAAQE,EAAqBE,IACrC8S,qBAAuBA,EAC5Bp0B,EAAKuhB,YAAcA,EACnBvhB,EAAKkjB,aAAeA,EACpBljB,EAAKqhB,oBAAsBA,EAC3BrhB,EAAKshB,YAAcA,EACnBthB,EAAKq0B,SAAWA,EAChBr0B,EAAKkpB,eAAiBA,EACtBlpB,EAAKkI,aAAe,GACpBlI,EAAKs0B,oBAAsB,GAC3Bt0B,EAAKgS,mBAAqB,GAC1BhS,EAAKyS,mBAAqB,OAC1BzS,EAAKkR,qBAAuB,CAAE2f,OAAQ,GAAItW,SAAU,IACpDva,EAAKoG,aAAepG,EAAKmpB,qBAAqB,WAC9CnpB,EAAKoS,oBAAsBpS,EAAKmpB,qBAAqB,kBACrDnpB,EAAKu0B,wBAA0Bv0B,EAAKmpB,qBAAqB,sBACzDnpB,EAAKqS,mBAAqBrS,EAAKmpB,qBAAqB,iBACpDnpB,EAAK6D,WAAa7D,EAAKuhB,YAAY6H,MAAM,CACrCvH,QAAS7hB,EAAKuhB,YAAY6H,MAAM,CAC5BnU,SAAQA,EACRvQ,KAAM,CAAC,GAAI,IAAW2kB,UACtBC,KAAM,GACNliB,YAAa,GACbotB,cAAe,CAAC,IAChBpuB,aAAcpG,EAAKuhB,YAAY6H,MAAMppB,EAAKoG,aAAaojB,QAAO,SAACC,EAAMC,GAAP,OAAkBvB,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAI0a,GAAhCtB,mBAA0CuB,EAAMhlB,KAAO,OAAQ,OAEnJ6V,SAAUva,EAAKuhB,YAAYgI,MAAM,MA3BmHL,EAD5J,wDAgCIlpB,KAAKwhB,OACLxhB,KAAKy0B,SAAWz0B,KAAK4iB,QACrB5iB,KAAK0R,UAAY1R,KAAKy0B,SAAStQ,KAAK,OAAAC,EAAA,IAAKvC,YAAOA,OAAKA,EAAQtH,aAC7Dva,KAAKmS,eAAiBnS,KAAKo0B,qBAAqB3D,mBAAmBtM,KAAK,OAAAO,EAAA,GAAU1kB,KAAK2kB,WACvF3kB,KAAK+S,WAAa/S,KAAKmhB,MAAMqF,SAASrC,KAAK,OAAAC,EAAA,IAAKqC,YAAGA,OAAKA,EAAI3gB,IAAI,WAKhE9F,KAAK6G,QAAU7G,KAAKo0B,qBAAqB5D,YACzC,IAAMkE,EAAsB10B,KAAKy0B,SAAStQ,KAAK,OAAAC,EAAA,IAAKvC,YAAOA,OAAKA,EAAQ8S,gBAClEC,EAAkB50B,KAAK6G,QAAQsd,KAAK,OAAAC,EAAA,GAAI,OAExCyQ,EADe70B,KAAK80B,sBACoBtQ,aAAaL,KAAK,OAAAC,EAAA,IAAK2Q,YAAGA,OAAKA,EAAIP,iBAAgB,OAAA5N,EAAA,MAC3FoO,EAAyB,OAAAjR,EAAA,GAAc8Q,EAA0BH,EAAqBE,GAAiBzQ,KAAK,OAAAC,EAAA,IAAI,YAA2B6Q,0BAAzB1B,EAAyB0B,KAApBC,EAAoBD,YACvIE,EAAQA,6BAAOD,GAAPC,mBAA8BF,IAC5C,OAAO1B,EAAInP,KAAKzb,YAAEA,OAAKwsB,EAAS9K,MAAM+K,YAAEA,OAAKA,EAAGzsB,KAAOA,QAAK6a,OAAO,EAAA+M,wBAEvEvwB,KAAKqR,aAAe,OAAAgkB,EAAA,GAAMX,EAAqBM,GAC/Ch1B,KAAKmQ,iBAAmBnQ,KAAKy0B,SAAStQ,KAAK,OAAAC,EAAA,IAAKkR,YAACA,OAAKA,EAAEjC,eAnD5D,oCAsDIrzB,KAAKyhB,YAtDT,oCAwDc8T,GACVv1B,KAAKkhB,OAAOgH,SAAS,CAAC,KAAMC,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAI/O,KAAKmhB,MAAMiH,SAASC,QAAS,CAAElkB,IAAKoxB,KAAa,CACzGhN,oBAAqB,QACrBD,WAAYtoB,KAAKmhB,MACjBne,MAAMA,gBAADA,GACA,aA7Db,uCAiEiB0L,GACb,OAAOA,IAAgB,EAAA8mB,uBAlE3B,wCAqEIx1B,KAAKkjB,aACAuS,cAAc,GAAwC,CACvDC,KAAM,KACNC,OAAQ,CACJ3B,WAAY,CAACh0B,KAAK2I,OAGrBzI,cA5ET,wCA8EkB6zB,GAAUA,WACxB/zB,KAAKkjB,aACAsC,OAAO,CACRC,MAAO,YAAO,uCACdE,QAAS,CACL,CAAEtD,KAAM,YAAanO,MAAO,YAAO,kBACnC,CAAEmO,KAAM,SAAUnO,MAAO,YAAO,+BAAgC0R,aAAYA,MAG/EzB,KAAK,OAAAgB,EAAA,IAAWC,YAAQA,OAAKA,EAC5BplB,EAAKshB,YAAYO,QAAQ+T,0BAA0B,CACjD7B,YACAC,WAAY,CAACh0B,EAAK2I,MAEpB,QACDzI,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,0DACxCpgB,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,0DAhG9C,uCAmGiB8C,GACb,QAAS1E,KAAK6D,WAAWiC,IAAI,CAAC,UAAW,eAAgBpB,MApG7D,sCAuGI,QAASyjB,OAAO5nB,OAAOP,KAAKkI,cAAcvI,SAvG9C,6CA0GI,QAASwoB,OAAO0N,KAAK71B,KAAKs0B,qBAAqB30B,SA1GnD,yCA4GmB+hB,GACf1hB,KAAKs0B,oBAAoB5S,EAAMoU,WAAapU,IA7GhD,iCAkHW6I,GAAUA,WACjBvqB,KAAK6L,OAAOsY,KAAK,YAAK,IAAIjkB,WAAWwV,YACjC,GAAIA,EAAO,CACP,IAAM8U,EAAcxqB,EAAK6D,WAAWiC,IAAI,CAAC,UAAW,SAChD0kB,GAAeA,EAAYzmB,UAC3BymB,EAAY7I,SAAS,SAAA8I,gBAAA,WAAmBF,GAAa,YAvHrE,gDA4HyB,WACrBvqB,KAAK+1B,yBAAyB71B,WAAWs0B,YACrC,GAAIA,EAAe,CACf,IAAMwB,EAAeh2B,EAAK80B,sBACpBmB,EAAuBD,EAAa10B,MAAMkzB,cAChDwB,EAAa/J,WAAW,CACpBuI,cAAe,OAAA0B,SAAA,8BAAWD,GAAX,mBAAoCzB,OAEvDwB,EAAapU,oBApIzB,0CAwIoB0J,GAAMA,WACtBtrB,KAAKo0B,qBAAqBriB,oBAAoBuZ,GAAOprB,WAAU,WAC3DF,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,qBAEZrgB,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,uBA/IpB,8CAmJwByN,GACpB,IAAMuG,EAAeh2B,KAAK80B,sBACpBmB,EAAuBD,EAAa10B,MAAMkzB,cAChDwB,EAAa/J,WAAW,CACpBuI,cAAeyB,EAAqBzS,QAAQ7a,YAAEA,OAAKA,IAAO8mB,OAE9DuG,EAAapU,gBAzJjB,8CA8JwB5P,GAAmBA,WACvChS,KAAK+1B,yBACA5R,KAAK5kB,EAAeS,KAAK0R,YACzBxR,WAAU,YAAiBqa,0BAAfia,EAAeja,YAC5B,GAAIia,EAAe,CAAC,IAAD,+BACSxiB,GADT,yBACJ8jB,EADI,QAELnvB,EAAQ4T,EAASqQ,WAAWuF,YAACA,OAAKA,EAAExnB,KAAOmtB,KAC3CK,EAAU5b,EAAS5T,GACnByvB,EAAwBD,EAAUA,EAAQxB,YAAYvQ,KAAKgR,YAAEA,OAAKA,EAAGzsB,MAAM,GAC3E0tB,EAAmBr2B,EAAK6D,WAAWiC,IAAI,CAAC,WAAYa,IACtD0vB,IACAA,EAAiBpK,WAAW,CACxBuI,cAAe,OAAA0B,SAAA,8BAAWE,GAAX,mBAAqC5B,OAExD6B,EAAiBzU,gBATzB,2BAA6C,IAD9B,8BAaf5hB,EAAKkpB,eAAewC,qBA/KhC,iDAoLI,OAAQ,EAAI1rB,KAAKkR,qBAAqBqJ,SAAS5a,QAC3CK,KAAKkR,qBAAqBqJ,SAAS+b,OAAOnG,YAACA,MACtB,KAAVA,EAAE/Z,SAtLrB,+CAyLwB,WACpB,OAAOpW,KAAKo0B,qBAAqB5D,YAAYrM,KAAK,OAAAiH,EAAA,IAAUxB,YAAMA,OAAK5pB,EAAKkjB,aAAauS,cAAcjD,GAA2B,CAC9HkD,KAAM,KACNa,UAASA,EACTZ,OAAQ,CAAE/L,eACT,OAAAxF,EAAA,IAAKuQ,YAAWA,OAAKA,GAAeA,EAAYvQ,KAAK+L,YAACA,OAAKA,EAAExnB,YA9LtE,+BAgMQ,WACEqtB,EAAeh2B,KAAK80B,sBACrBkB,EAAa7K,OAGlB,OAAApH,EAAA,GAAc/jB,KAAKy0B,SAAUz0B,KAAKsS,eAC7B6R,KAAK,YAAK,GAAI,OAAAiH,EAAA,IAAS,YAAWnJ,0BAATJ,EAASI,YAC7BuU,EAAax2B,EAAKy2B,kBAAkB5U,EAASmU,EAAc/T,GACjE,OAAOjiB,EAAKo0B,qBAAqBsC,0BAA0BF,EAAYx2B,EAAKkR,qBAAsB+Q,OAEjG/hB,WAAU,YAA0ByE,EAAvB8sB,sBAAuB9sB,kBACrC3E,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,YAEZhiB,EAAKkI,aAAe,GACpBlI,EAAKs0B,oBAAsB,GAC3Bt0B,EAAK6D,WAAW4nB,iBAChBzrB,EAAKkhB,OAAOgH,SAAS,CAAC,MAAOvjB,GAAY,CAAE2jB,WAAYtoB,EAAKmhB,WAC5Dxf,YAEAg1B,QAAQ/0B,MAAMD,GACd3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,iBAtNpB,6BA0NM,WACF,OAAA+B,EAAA,GAAc/jB,KAAKy0B,SAAUz0B,KAAKsS,eAC7B6R,KAAK,YAAK,GAAI,OAAAiH,EAAA,IAAS,YAAWnJ,IAE/B4P,EACA+E,EAH+B3U,sBAATJ,EAASI,YAC7B+T,EAAeh2B,EAAK80B,uBAGtBkB,EAAa7K,OAASnrB,EAAKsF,mBAC3BusB,EAAe7xB,EAAKy2B,kBAAkB5U,EAASmU,EAAc/T,IAEjE,IAAM4U,EAAgB72B,EAAK6D,WAAWiC,IAAI,YAI1C,OAHK+wB,GAAiBA,EAAc1L,OAAUnrB,EAAKwP,0BAC/ConB,EAAgB52B,EAAK82B,0BAA0BjV,EAASgV,EAAe5U,IAEpEjiB,EAAKo0B,qBAAqBrC,cAAcF,EAAc+E,OAE5D12B,WAAWuB,YACZzB,EAAK+2B,oBAAoBt1B,GACzBzB,EAAK6D,WAAW4nB,iBAChBzrB,EAAKkI,aAAe,GACpBlI,EAAKs0B,oBAAsB,GAC3Bt0B,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,YAEZhiB,EAAKkpB,eAAewC,kBACpB/pB,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,iBApPpB,sCAyPI,OAAO5hB,qEAA0BJ,KAAKkI,aAAa2jB,WAAa7rB,KAAKkI,aAAa4jB,kBAzPtF,oCA8PcjK,EAASI,GAAaA,WAC1B8J,EAAqBlK,EAAQmK,aAAa3B,MAAMlI,YAACA,OAAKA,EAAEF,eAAiBA,KAU/E,GATAjiB,KAAK6D,WAAWooB,WAAW,CACvBpK,QAAS,CACL5M,QAAS4M,EAAQ5M,QACjBvQ,KAAMqnB,EAAqBA,EAAmBrnB,KAAO,GACrD4kB,KAAMyC,EAAqBA,EAAmBzC,KAAO,GACrDliB,YAAa2kB,EAAqBA,EAAmB3kB,YAAc,GACnEotB,cAAe3S,EAAQ8S,YAAYvQ,KAAKgR,YAAEA,OAAKA,EAAGzsB,SAGtD3I,KAAKoG,aAAazG,OAAQ,CAC1B,IAD0B,EACpBwsB,EAAoBnsB,KAAK6D,WAAWiC,IAAI,CAAC,UAAW,iBACpDkxB,EAAwBjL,GAAsBA,EAAmB3lB,cAAiB,GAClF6wB,EAAYpV,EAAQzb,cAAgB,GAHhB,6BAIHpG,KAAKoG,cAJF,IAI1B,2BAA0C,CAAC,IAAhCgmB,EAA+B,QAChCnE,EAAMmE,EAAS1nB,KACfpD,EAA0B,iBAAlB8qB,EAAS/J,KAA0B2U,EAAqB/O,GAAOgP,EAAUhP,GACjFgD,EAAUkB,EAAkBrmB,IAAImiB,GAClCgD,GACAA,EAAQgB,WAAW3qB,IATD,+BAa9B,IAAM41B,EAAoBl3B,KAAK6D,WAAWiC,IAAI,YAC9C+b,EAAQtH,SAAS2R,SAAQ,SAACiK,EAAS11B,GAC/B,IAAM02B,EAAqBhB,EAAQnK,aAAa3B,MAAMlI,YAACA,OAAKA,EAAEF,eAAiBA,KACzEuS,EAAgB2B,EAAQxB,YAAYvQ,KAAKgR,YAAEA,OAAKA,EAAGzsB,MACnDygB,EAAQ,CACVnU,QAASkhB,EAAQlhB,QACjBmB,IAAK+f,EAAQ/f,IACb1R,KAAMyyB,EAAqBA,EAAmBzyB,KAAO,GACrD6J,MAAO4nB,EAAQ5nB,MACfoR,iBAAkBwW,EAAQxW,iBAC1ByX,aAAcjB,EAAQiB,aACtBC,cAAelB,EAAQmB,YAAY3uB,GACnCipB,YAAauE,EAAQvE,YACrB2F,eAAgBpB,EAAQoB,eACxB/C,iBAEA6B,EAAmBa,EAAkBlZ,GAAGvd,GAQ5C,GAPI41B,EACAA,EAAiBpK,WAAW7C,IAG5BiN,EAAmBr2B,EAAKuhB,YAAY6H,MAAMjB,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAIqa,GAAQ,CAAEoL,cAAex0B,EAAKuhB,YAAY0J,QAAQuJ,MAC5H0C,EAAkB5I,OAAO7tB,EAAG41B,IAE5Br2B,EAAKoS,oBAAoBzS,OAAQ,CACjC,IAAIwsB,EAAoBkK,EAAiBvwB,IAAI,CAAC,iBACzCqmB,IACDA,EAAoBnsB,EAAKuhB,YAAY6H,MAAMppB,EAAKoS,oBAAoBoX,QAAO,SAACC,EAAMC,GAAP,OAAkBvB,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAI0a,GAAhCtB,mBAA0CuB,EAAMhlB,KAAO,OAAQ,KAC5J2xB,EAAiBtG,WAAW,eAAgB5D,IAJf,mCAMVnsB,EAAKoS,qBANK,IAMjC,2BAAiD,CAAC,IAAvCga,EAAsC,QACvCnE,EAAMmE,EAAS1nB,KACfpD,EAA0B,iBAAlB8qB,EAAS/J,KACjB8U,EAAmB/wB,aAAa6hB,GAChCkO,EAAQ/vB,aAAa6hB,GACrBgD,EAAUkB,EAAkBrmB,IAAImiB,GAClCgD,GACAA,EAAQgB,WAAW3qB,IAbM,qCA9S7C,wCAqUkBugB,EAAS2V,EAAkBvV,GACzC,IAAMwV,EAAiB,aAA0B,CAC7ClL,aAAc1K,EACd2K,cAAegL,EAAiBl2B,MAChCmrB,kBAAmBzsB,KAAKoG,aACxB6b,eACAyK,mBAAoB,CAChBzK,eACAvd,KAAMmd,EAAQnd,MAAQ,GACtB4kB,KAAMzH,EAAQyH,MAAQ,GACtBliB,YAAaya,EAAQza,aAAe,MAG5C,OAAO+gB,OAAOpZ,OAAOoZ,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAI0oB,GAAiBz3B,KAAKkI,cAAe,CAAEssB,cAAegD,EAAiBl2B,MAAMkzB,kBAlVtI,gDAwV0B3S,EAASqV,EAAmBjV,GAAaA,WACzDyV,EAAgB7V,EAAQtH,SAASiJ,QAAO,SAAC2M,EAAG1vB,GAC9C,IAAM2vB,EAAU8G,EAAkBpxB,IAAIrF,EAAEusB,YACxC,OAAOoD,GAAWA,EAAQjF,SAExBwM,EAAqBT,EAAkBjI,SAASzL,QAAQmK,YAACA,OAAKA,EAAExC,SAAO/G,KAAKuJ,YAACA,OAAKA,EAAErsB,SAC1F,GAAIo2B,EAAc/3B,SAAWg4B,EAAmBh4B,OAC5C,MAAM,IAAI2wB,MAAM,YAAO,mDAE3B,OAAOoH,EACFtT,KAAI,SAAC+R,EAAS11B,GACf,IAAMm3B,EAAYD,EAAmBl3B,GAC/BgB,EAAS,aAA0B,CACrC8qB,aAAc4J,EACd3J,cAAeoL,EACfnL,kBAAmBzsB,EAAKoS,oBACxB6P,eACAyK,mBAAoB,CAChBzK,eACAvd,KAAM,MAGdjD,EAAO41B,cAAgBO,EAAUP,cACjC51B,EAAO+yB,cAAgBoD,EAAUpD,cACjC,IAAMtsB,EAAelI,EAAKs0B,oBAAoB6B,EAAQxtB,IAKtD,OAJIT,IACAzG,EAAOqqB,gBAAkB5jB,EAAa4jB,gBACtCrqB,EAAOoqB,SAAW3jB,EAAa2jB,UAE5BpqB,KAEN+hB,OAAO,EAAA+M,sBAvXhB,4CA0XI,OAAOvwB,KAAK6D,WAAWiC,IAAI,aA1X/B,0CA+XoB+xB,GAChB,IAAMC,EAAcD,EAAQ,GACtBrN,EAAcxqB,KAAK6D,WAAWiC,IAAI,CAAC,UAAW,SAIhD0kB,GAAgCsN,EAFnBC,eAAe,kBAG5BvN,EAAY7I,SAASmW,EAAY/F,cAAczI,KAAM,CAAE0O,WAAUA,QAtYzE,GAA8D,KA0YlE,GAAuB9V,UAAO,SAAwCC,GAAK,OAAO,IAAKA,GAAK,IAAwB,KAAyB,KAAwB,KAAyB,KAAgB,KAAyB,MAA6B,KAAyB,IAAuB,KAAyB,KAAqB,KAAyB,MAAsB,KAAyB,MAA6B,KAAyB,KAAqB,KAAyB,KAAkB,KAAyB,OACzjB,GAAuBC,UAAO,KAAyB,CAAEC,KAAM,GAAwBC,UAAW,CAAC,CAAC,uBAAwBC,SAAU,CAAC,MAAoCC,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,EAAG,OAAQ,gBAAiB,CAAC,EAAG,UAAW,CAAC,EAAG,oBAAqB,CAAC,EAAG,WAAY,yBAA0B,sBAAuB,sBAAuB,CAAC,aAAc,kBAAmB,CAAC,QAAS,kBAAmB,EAAG,WAAY,QAAS,EAAG,OAAQ,YAAa,CAAC,eAAgB,IAAK,CAAC,QAAS,OAAQ,EAAG,YAAa,gBAAiB,EAAG,QAAS,CAAC,OAAQ,WAAY,YAAa,GAAI,OAAQ,UAAW,EAAG,eAAgB,CAAC,EAAG,MAAO,cAAe,EAAG,WAAY,SAAU,CAAC,QAAS,kBAAmB,EAAG,WAAY,QAAS,EAAG,oBAAqB,CAAC,EAAG,OAAQ,EAAG,YAAa,iBAAkB,CAAC,aAAc,GAAI,EAAG,SAAU,CAAC,EAAG,eAAgB,CAAC,EAAG,QAAS,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,gBAAiB,UAAW,EAAG,cAAe,CAAC,EAAG,qBAAsB,CAAC,MAAO,OAAQ,EAAG,SAAU,CAAC,KAAM,OAAQ,OAAQ,OAAQ,kBAAmB,OAAQ,EAAG,WAAY,SAAU,CAAC,MAAO,OAAQ,EAAG,QAAS,UAAW,CAAC,KAAM,OAAQ,OAAQ,OAAQ,kBAAmB,OAAQ,UAAW,cAAe,EAAG,YAAa,CAAC,kBAAmB,cAAe,EAAG,WAAY,SAAU,CAAC,gBAAiB,eAAgB,EAAG,QAAS,CAAC,EAAG,UAAW,CAAC,EAAG,aAAc,YAAa,SAAU,EAAG,QAAS,WAAY,CAAC,QAAS,2BAA4B,EAAG,QAAS,EAAG,oBAAqB,CAAC,EAAG,mBAAoB,CAAC,EAAG,SAAU,gBAAiB,UAAW,CAAC,EAAG,QAAS,EAAG,6BAA8B,CAAC,EAAG,SAAU,CAAC,EAAG,QAAS,CAAC,EAAG,oBAAqB,CAAC,EAAG,QAAS,WAAY,CAAC,EAAG,MAAO,SAAU,EAAG,SAAU,CAAC,QAAS,UAAW,CAAC,OAAQ,eAAgB,EAAG,YAAa,EAAG,QAAS,CAAC,OAAQ,eAAgB,EAAG,aAAc,CAAC,EAAG,eAAgB,CAAC,gBAAiB,gBAAiB,CAAC,aAAc,UAAW,EAAG,wBAAyB,cAAe,WAAY,EAAG,QAAS,CAAC,aAAc,UAAW,EAAG,wBAAyB,cAAe,YAAa,CAAC,EAAG,aAAc,YAAa,UAAW,CAAC,EAAG,MAAO,SAAU,gBAAiB,EAAG,SAAU,CAAC,QAAS,QAAS,CAAC,EAAG,kBAAmB,CAAC,EAAG,cAAe,CAAC,EAAG,aAAc,CAAC,EAAG,YAAa,UAAW,CAAC,EAAG,MAAO,wBAAyB,EAAG,SAAU,CAAC,QAAS,QAAS,CAAC,EAAG,MAAO,EAAG,SAAU,CAAC,QAAS,SAAU,CAAC,EAAG,eAAgB,CAAC,QAAS,6CAA8C,EAAG,aAAc,EAAG,oBAAqB,CAAC,EAAG,WAAY,eAAgB,2BAA4B,EAAG,QAAS,CAAC,EAAG,WAAY,SAAU,eAAgB,2BAA4B,gBAAiB,eAAgB,qBAAsB,iBAAkB,cAAe,sBAAuB,kBAAmB,wBAAyB,EAAG,QAAS,CAAC,EAAG,MAAO,gBAAiB,SAAU,oBAAqB,EAAG,cAAe,CAAC,QAAS,YAAa,CAAC,EAAG,WAAY,eAAgB,4BAA6B,CAAC,EAAG,WAAY,SAAU,eAAgB,2BAA4B,gBAAiB,eAAgB,qBAAsB,iBAAkB,cAAe,sBAAuB,kBAAmB,0BAA2BC,SAAU,SAAyCnf,EAAIC,GAwB7pG,GAxB6qG,EAALD,IACtqG,KAAsB,EAAG,kBACzB,KAAsB,EAAG,eACzB,KAAsB,EAAG,MAAO,GAChC,KAAiB,EAAG,kBAAmB,GACvC,KAAc,EAAG,SACjB,KAAkB,EAAG2L,GAAsD,EAAG,EAAG,qBAAsB,GACvG,OACA,KAAsB,EAAG,wBAAyB,GAClD,KAAkB,sBAAsB,SAA6F5I,GAAU,OAAO9C,EAAIypB,YAAY3mB,MACtK,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,KAAc,EAAG,SACjB,OACA,OACA,KAAsB,GAAI,gBAC1B,KAAiB,GAAI,uBAAwB,GAC7C,KAAkB,GAAI6I,GAA2C,EAAG,EAAG,SAAU,GACjF,KAAc,GAAI,SAClB,KAAkB,GAAIK,GAAgD,EAAG,EAAG,cAAe,KAAM,EAAG,MACpG,OACA,OACA,KAAkB,GAAIuD,GAAyC,GAAI,GAAI,OAAQ,GAC/E,KAAc,GAAI,UACX,EAALxP,EAAQ,CACV,IAAME,EAAM,KAAmB,IAC/B,KAAiB,GACjB,KAAkB,SAAU,KAAmB,EAAG,EAAGD,EAAImf,UACzD,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,WAAY,KAAmB,EAAG,GAAInf,EAAIoI,QAA5D,CAAqE,yBAA0B,KAAmB,EAAG,GAAIpI,EAAI0pB,qBAA7H,CAAmJ,sBAAuB,KAAmB,EAAG,GAAI1pB,EAAI6O,gBACxM,KAAiB,GACjB,KAAkB,OAAQ,KAAmB,GAAI,GAAI7O,EAAIoI,QAAzD,CAAkE,WAAYnI,GAC9E,KAAiB,GACjB,KAAkB,OAAQ,KAAmB,GAAI,GAAID,EAAIgxB,aACxD5R,WAAY,WAAc,MAAO,CAAC,IAA2B,IAA+B,IAA4B,KAA+B,KAAkC,IAAgC,IAAgC,IAAa,IAA2B,KAAkC,IAAqC,IAAoB,IAAwB,IAA6B,IAAiB,IAAwC,IAA6B,IAA2B,IAAgB,IAAY,IAAe,IAAmB,IAAY,IAAoB,IAAsB,IAAsB,KAAgC,KAA2B,IAA6B,IAAwB,IAAyB,KAAgC,IAAgB,GAAwB,KAAwC,KAA0B,IAAyB,IAAsB,IAA8B,IAAoC,KAAgC,GAAkC,IAA2BoV,GAC9oC,KAAkCnV,MAAO,WAAc,MAAO,CAAC,IAAkB,IAAsB,KAA0B,MAA6BC,OAAQ,CAAC,iTAAkTC,gBAAiB,IAClf,GAAuBC,eAAiB,iBAAM,CAC1C,CAAEZ,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,IACR,CAAEA,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAyB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAC/D,IACA,KACA,GACA,IACA,KACA,KACA,IACA,IACA,OACL,I,IAMG6V,G,WACF,aAAa,wBACTl4B,KAAKm4B,UAAY,G,oDAKd1zB,EAAM2zB,EAAUC,GAEnB,GADA5zB,EAAK6zB,YACDD,IAAiB5zB,EAAK8U,SACtB,GAAI9U,EAAKnD,MAAM4S,MAAO,CAClB,IAAMqkB,EAAgB93B,YAACA,QAAOA,EAAEa,MAAM4S,OAClBlU,KAAKm4B,UAAU3U,OAAO+U,GAC1B54B,OAAS,EAErBK,KAAKm4B,UAAYn4B,KAAKm4B,UAAU3U,QAAO/iB,YAACA,OAAK83B,EAAa93B,MAAI+3B,OAAO/zB,GAGrEzE,KAAKm4B,UAAUz3B,KAAK+D,QAIxBzE,KAAKm4B,UAAUz3B,KAAK+D,K,+BAIvBA,EAAM2zB,GACXp4B,KAAKm4B,UAAYn4B,KAAKm4B,UAAU3U,QAAOiV,YAACA,OAAIA,IAAMh0B,KAClDA,EAAK6zB,c,4BAEHI,GACF14B,KAAKm4B,UAAYO,EAAe14B,KAAKm4B,UAAU3U,QAAOiV,YAACA,OAAIA,EAAEE,YAAY,K,gDAEnDpf,EAAU+e,GAChC/e,EAAS2S,SAAQuM,YAACA,OAAKA,EAAEH,SAAWA,O,sCAExBzK,GACZ7tB,KAAKm4B,UAAYn4B,KAAKm4B,UAAU3U,QAAOiV,YAACA,OAAIA,EAAE5K,SAAWA,O,oCAE/CA,GACV7tB,KAAKm4B,UAAYn4B,KAAKm4B,UAAU3U,QAAOiV,YAACA,OAAIA,IAAM5K,O,4BAnClD,OAAO7tB,KAAKm4B,c,KAsCpB,SAASS,KACL,OAAO,IAAIV,GAGf,IAAMW,GAAKD,GACP,cACA,aAAa,mCACT54B,KAAK84B,iBAAmB,IAAI,IAC5B94B,KAAK+4B,iBAAmB,IAAI,IAC5B/4B,KAAKg5B,SAAW,GAChBh5B,KAAKi5B,kBAAoB,GACzBj5B,KAAKk5B,mBAAqB,SAACC,EAAM10B,GAAP,QACjBzE,EAAKo5B,iBAAiB30B,KAGnBA,EAAKqP,WAAWpP,KAAK20B,cAAcC,WAAWH,EAAKE,gBACvD50B,EAAKqP,WAAWlI,MAAMlH,KAAK20B,cAAcC,WAAWH,EAAKE,iBAEjEr5B,KAAKu5B,aAAgB90B,YAAIA,OACjBzE,EAAKo5B,iBAAiB30B,GACfA,EAAKqP,WAAWlI,MAAMlH,KAGtB,IAGf1E,KAAKo5B,iBAAoB9N,YAAKA,MACF,iBAAVA,KAAwBA,GAASA,EAAMyM,eAAe,eAtB5E,2DAyBcoB,GAAKA,WACf,GAAIA,EACAn5B,KAAKw5B,gBAAgBC,OAAO,CAAEvlB,MAAOilB,EAAM73B,MAAO,CAAE4S,MAAOilB,SAE1D,CACD,IAAMO,EAAc15B,KAAKw5B,gBAAgBG,cAActP,MAAK5pB,YAACA,OAAKT,EAAKo5B,iBAAiB34B,EAAEa,UACtFo4B,GACA15B,KAAKw5B,gBAAgBI,SAASF,MAhC1C,qCAoCenG,GAAIA,WACT7L,EAAQ1nB,KAAKw5B,gBAAgB9R,MACnC1nB,KAAKw5B,gBAAgBG,cAAczN,SAAQznB,YACnCzE,EAAKo5B,iBAAiB30B,EAAKnD,SAAWiyB,EAAIsG,SAASp1B,EAAKnD,MAAMwS,WAAWnL,KACzE3I,EAAKw5B,gBAAgBI,SAASn1B,MAGtC8uB,EAAInP,KAAIzb,YAAEA,OACC+e,EAAM2C,MAAK5lB,YAAIA,OAAIzE,EAAKo5B,iBAAiB30B,IAASA,EAAKqP,WAAWnL,KAAOA,QAE/E6a,OAAO,EAAA+M,oBACPrE,SAAQznB,YACUzE,EAAKw5B,gBAAgBG,cAActP,MAAK5pB,YACvD,IAAMs0B,EAAMt0B,EAAEa,MACd,QAAItB,EAAKo5B,iBAAiBrE,IACfA,EAAIjhB,WAAWnL,KAAOlE,EAAKqP,WAAWnL,OAKjD3I,EAAKw5B,gBAAgBC,OAAO,CAAEvlB,MAAO,GAAI5S,MAAOmD,SAxD5D,qCA4Dek1B,GAAcA,WACpBn5B,MAAMs5B,QAAQH,KACfA,EAAgB,CAACA,IAErB,IAAMI,EAAiBJ,EAActP,MAAK5lB,YAAIA,OAAKzE,EAAKo5B,iBAAiB30B,MACnE+O,EAAaumB,EAAiBA,EAAe7lB,MAAQ,GACrDsgB,EAAgBmF,EAAcnW,OAAOxjB,KAAKo5B,kBAAkBhV,KAAI3jB,YAACA,OAAIA,EAAEqT,WAAWnL,MACpF6K,IAAexT,KAAKg5B,WACpBh5B,KAAK84B,iBAAiBzZ,KAAK7L,GAC3BxT,KAAKg5B,SAAWxlB,GAEhBxT,KAAKi5B,kBAAkB5e,KAAK,OAASma,EAAcna,KAAK,OACxDra,KAAK+4B,iBAAiB1Z,KAAKmV,GAC3Bx0B,KAAKi5B,kBAAoBzE,KAzEjC,+CA6EI,OAAuD,IAAhDx0B,KAAKw5B,gBAAgBQ,UAAUC,gBA7E1C,KAgFJ,GAA4B/X,UAAO,SAA6CC,GAAK,OAAO,IAAKA,GAAK,KACtG,GAA4BC,UAAO,KAAyB,CAAEC,KAAM,GAA6BC,UAAW,CAAC,CAAC,6BAA8B2K,UAAW,SAA2CzpB,EAAIC,GAG9L,IAAIilB,EAH0M,EAALllB,GACzM,KAAyB2P,IAAKA,GACvB,EAAL3P,GAEF,KAAsBklB,EAAK,UAA0BjlB,EAAI+1B,gBAAkB9Q,EAAGE,QAC7EC,OAAQ,CAAEqR,kBAAmB,qBAAuBC,QAAS,CAAErB,iBAAkB,mBAAoBC,iBAAkB,oBAAsBxW,SAAU,CAAC,KAA0B,CAAC,CAAE6X,QAAS,IAAyBC,SAAUxB,OAASrW,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,EAAG,SAAU,cAAe,QAAS,WAAY,eAAgB,WAAY,YAAa,UAAW,CAAC,kBAAmB,IAAK,CAAC,gBAAiB,IAAK,CAAC,eAAgB,IAAK,CAAC,gBAAiB,IAAK,CAAC,QAAS,gBAAiB,EAAG,WAAY,QAAS,EAAG,QAAS,CAAC,EAAG,gBAAiB,EAAG,SAAU,CAAC,EAAG,QAAS,CAAC,EAAG,aAAc,YAAa,UAAW,CAAC,EAAG,OAAQ,aAAc,CAAC,EAAG,aAAc,cAAeC,SAAU,SAA8Cnf,EAAIC,GAAgB,EAALD,IACpuB,KAAsB,EAAG,YAAa,EAAG,GACzC,KAAkB,UAAU,SAA0E+C,GAAU,OAAO9C,EAAI62B,eAAe/zB,MAC1I,KAAc,EAAG,aACjB,KAAkB,EAAGkN,GAAoD,EAAG,EAAG,cAAe,GAC9F,KAAkB,EAAGU,GAAoD,EAAG,EAAG,cAAe,GAC9F,KAAkB,EAAGG,GAAoD,EAAG,EAAG,cAAe,GAC9F,QACO,EAAL9Q,GACF,KAAkB,UAAS,EAA3B,CAAkC,cAAe,KAAmB,EAAG,EAAG,uCAA1E,CAAkH,QAASC,EAAIy2B,kBAA/H,CAAkJ,WAAYz2B,EAAIy1B,mBAAlK,CAAsL,gBAAe,EAArM,CAA4M,YAAW,EAAvN,CAA8N,aAAY,IACzOrW,WAAY,CAAC,IAA0B,IAAW,IAAW,IAAW,IAAa,KAAgC,KAAuBC,MAAO,CAAC,KAAuBC,OAAQ,CAAC,61BAA81BC,gBAAiB,IAC5iC,YAAW,CACP,cACA,YAAW,cAAexiB,QAC3B,GAA4BwoB,UAAW,yBAAoB,GAC9D,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAA4Ba,UAAW,wBAAmB,GAC7D,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAA4Ba,UAAW,wBAAmB,GAC7D,YAAW,CACP,aAAU,kBAAmB,CAAEC,QAAOA,IACtC,YAAW,cAAe,MAC3B,GAA4BD,UAAW,uBAAkB,GAE5D,IAAI,oDACA,WAAY1H,EAAa4B,EAAc7B,EAAqBmZ,EAAiBtZ,EAAQC,GAAMA,wCACvF/gB,cAAM8gB,EAAQC,IACTG,YAAcA,EACnBthB,EAAKkjB,aAAeA,EACpBljB,EAAKqhB,oBAAsBA,EAC3BrhB,EAAKw6B,gBAAkBA,EACvBx6B,EAAKwT,WAAa,GAClBxT,EAAKw0B,cAAgB,GACrBx0B,EAAKkV,kBAPL9U,wFAQiB,wCAAIZ,EAAJ,yBAAIA,EAAJ,uBAAaQ,IAAKshB,YAAYO,SAAQ4Y,eAAzBz6B,SAAwCA,EAAKwT,YAA7CxT,OAA4DR,IAAM8tB,4BAA0BjK,YAAIA,OAAIA,EAAKqX,UAEvI,SAACpX,EAAMC,GAAP,MAAgB,CACZ+H,MAAO,CACHhI,OACAC,OACA4V,KAAMn5B,EAAKwT,WACXghB,cAAex0B,EAAKw0B,cACpBmG,mBAAoB,KAAgBC,IACpC1lB,eAAgBlV,EAAKkV,oBAlB0DiM,EAD3F,wDAuBU,WACN/gB,8DACAJ,KAAKqR,aAAerR,KAAK66B,QAAQ1W,KAAK,OAAAC,EAAA,IAAIf,YAAIA,OAAIA,EAAKqX,OAAO/F,gBAE9D30B,KAAKmhB,MAAM2Z,cACN3W,KAAK,OAAAC,EAAA,IAAIqC,YAAGA,OAAIA,EAAI3gB,IAAI,QAAO,OAAA4e,EAAA,GAAU1kB,KAAK2kB,WAC9CzkB,WAAUi5B,YACXn5B,EAAK+6B,mBAAmBC,cAAc7B,MAE1C,IAAM8B,EAASj7B,KAAKmhB,MAAM2Z,cAAc3W,KAAK,OAAAC,EAAA,IAAIqC,YAAGA,OAAIA,EAAIyU,OAAO,aACnED,EAAO9W,KAAK,OAAAO,EAAA,GAAU1kB,KAAK2kB,WAAWzkB,WAAUqzB,YAC5CvzB,EAAK+6B,mBAAmBI,eAAe5H,MAE3CvzB,KAAKqR,aAAa8S,KAAK,YAAK,GDhoJ7B,SAAepiB,GAAmB,IEJlBT,EFIMU,EAAY,yDAAAo5B,EAE/BC,GENa/5B,EFKUS,aEJLu5B,OAASC,OAAOj6B,IFKLS,EAAQC,EAAUS,MAASW,KAAKo4B,IAAIz5B,GACvE,OAAQtC,YAAMA,OAAKA,EAAOK,KAAK,IAAIgC,EAAcu5B,EAAUr5B,KC6nJvB,CAAM,KAAMzC,EAAe07B,IAAS/6B,WAAU,YAAMqzB,wCAChFvzB,EAAK+6B,mBAAmBI,eAAe5H,QArC/C,oCAwCc4F,GACVn5B,KAAKwT,WAAa2lB,EAClBn5B,KAAKy7B,cAAc,CAAEC,EAAGvC,GAAQ,KAAMzS,KAAM,IAC5C1mB,KAAK4kB,YA3CT,uCA6CiB2O,GACbvzB,KAAKw0B,cAAgBjB,EACrBvzB,KAAKy7B,cAAc,CAAEE,MAAOpI,EAAK7M,KAAM,IACvC1mB,KAAK4kB,YAhDT,2CAkDoB,WAChB5kB,KAAKshB,YAAYO,QAAQ+Z,UAAU17B,WAAU,YAAG07B,gBAC5C57B,EAAKqhB,oBAAoBwa,KAAK,YAAO,uBACrC77B,EAAKw6B,gBAAgBsB,OAAOF,EAAQjzB,IAAIozB,YACpC,GAAIA,EAAI/4B,QAAU,KAASg5B,UAAW,CAClC,IAAM/4B,GAAO,IAAIg5B,KAAKC,cAAeC,OAAOJ,EAAIK,UAAY,GAC5Dp8B,EAAKqhB,oBAAoBU,QAAQ,YAAO,8BAA+B,CACnEta,MAAOs0B,EAAIt6B,OAAO46B,iBAClBp5B,SAEJjD,EAAK4kB,eAGL5kB,EAAKqhB,oBAAoBzf,MAAM,YAAO,kCA/DtD,oCAoEc+C,GAAUA,WACpB3E,KAAKkjB,aACAsC,OAAO,CACRC,MAAO,YAAO,kCACdE,QAAS,CACL,CAAEtD,KAAM,YAAanO,MAAO,YAAO,kBACnC,CAAEmO,KAAM,SAAUnO,MAAO,YAAO,iBAAkB0R,aAAYA,MAGjEzB,KAAK,OAAAgB,EAAA,IAAUC,YAAQA,OAAKA,EAAWplB,EAAKshB,YAAYO,QAAQ9M,cAAcpQ,GAAa,QAC3FzE,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,YAEZhiB,EAAK4kB,aACNjjB,YACC3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,mBArFpB,GAA0D,KA0F9D,GAAqBE,UAAO,SAAsCC,GAAK,OAAO,IAAKA,GAAK,IAAsB,KAAyB,KAAqB,KAAyB,MAAsB,KAAyB,MAA6B,KAAyB,MAAyB,KAAyB,KAAgB,KAAyB,OACrX,GAAqBC,UAAO,KAAyB,CAAEC,KAAM,GAAsBC,UAAW,CAAC,CAAC,sBAAuB2K,UAAW,SAAoCzpB,EAAIC,GAGlK,IAAIilB,EAH8K,EAALllB,GAC7K,KAAyB+Q,IAAKA,GACvB,EAAL/Q,GAEF,KAAsBklB,EAAK,UAA0BjlB,EAAIs3B,mBAAqBrS,EAAGE,QAChFrG,SAAU,CAAC,MAAoCC,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,EAAG,QAAS,CAAC,EAAG,eAAgB,CAAC,EAAG,oBAAqB,mBAAoB,oBAAqB,CAAC,8BAA+B,IAAK,CAAC,EAAG,wBAAyB,CAAC,OAAQ,SAAU,qBAAsB,GAAI,EAAG,eAAgB,CAAC,QAAS,OAAQ,CAAC,cAAe,gBAAiB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,WAAY,SAAU,CAAC,OAAQ,WAAY,cAAe,GAAI,EAAG,UAAW,iBAAkB,CAAC,aAAc,gBAAiB,CAAC,QAAS,kBAAmB,EAAG,aAAc,EAAG,oBAAqB,CAAC,EAAG,QAAS,eAAgB,aAAc,cAAe,aAAc,sBAAuB,CAAC,EAAG,MAAO,cAAe,EAAG,cAAe,CAAC,QAAS,QAAS,CAAC,EAAG,cAAe,CAAC,EAAG,OAAQ,gBAAiB,CAAC,EAAG,qBAAsB,CAAC,EAAG,MAAO,EAAG,OAAQ,YAAa,CAAC,mBAAoB,IAAK,CAAC,EAAG,gBAAiB,CAAC,EAAG,QAAS,CAAC,EAAG,QAAS,gBAAiB,CAAC,YAAa,OAAQ,EAAG,QAAS,UAAW,CAAC,OAAQ,SAAU,qBAAsB,GAAI,EAAG,MAAO,WAAY,UAAW,CAAC,QAAS,cAAe,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,gBAAiB,EAAG,WAAY,SAAU,CAAC,QAAS,QAAS,EAAG,aAAc,CAAC,EAAG,OAAQ,CAAC,EAAG,eAAgB,CAAC,QAAS,QAAS,OAAQ,OAAQC,SAAU,SAAuCnf,EAAIC,GAAgB,EAALD,IAC90C,KAAsB,EAAG,kBACzB,KAAsB,EAAG,cAAe,GACxC,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,2BAA4B,EAAG,GACxD,KAAkB,oBAAoB,SAA4F+C,GAAU,OAAO9C,EAAIu3B,cAAcz0B,KAArK,CAAiL,oBAAoB,SAA4FA,GAAU,OAAO9C,EAAI64B,iBAAiB/1B,MACvU,KAAc,EAAG,SACjB,OACA,KAAsB,EAAG,eAAgB,GACzC,KAAsB,EAAG,SAAU,GACnC,KAAiB,EAAG,WAAY,GAChC,OACA,KAAsB,EAAG,oBAAqB,GAC9C,KAAsB,GAAI,SAAU,GACpC,KAAkB,SAAS,WAAoE,OAAO9C,EAAI84B,wBAC1G,KAAc,GAAI,iBAClB,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,OACA,KAAsB,GAAI,wBAC1B,KAAsB,GAAI,QAAS,GACnC,KAAkB,iBAAiB,SAAuEh2B,GAAU,OAAO9C,EAAIyR,eAAiB3O,KAChJ,OACA,KAAsB,GAAI,SAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,KAAsB,GAAI,gBAC1B,KAAiB,GAAI,uBAAwB,IAC7C,KAAkB,GAAIiO,GAAoC,EAAG,EAAG,IAAK,IACrE,OACA,OACA,KAAsB,GAAI,iBAAkB,IAC5C,KAAkB,cAAc,SAA6EjO,GAAU,OAAO9C,EAAIuiB,cAAczf,KAAhJ,CAA4J,sBAAsB,SAAqFA,GAAU,OAAO9C,EAAIsiB,gBAAgBxf,MAC5S,KAAc,GAAI,SAClB,KAAc,GAAI,SAClB,KAAc,GAAI,SAClB,KAAc,GAAI,SAClB,KAAkB,GAAIsO,GAA8C,GAAI,GAAI,eAC5E,QACO,EAALrR,IACF,KAAiB,GACjB,KAAkB,QAAO,GACzB,KAAiB,GACjB,KAAkB,oBAAqB,KAAmB,EAAG,GAAIC,EAAI4N,eACrE,KAAiB,GACjB,KAAkB,YAAa,KAAmB,GAAI,GAAI,kBAC1D,KAAiB,GACjB,KAA0B,IAAK,KAAmB,GAAI,GAAI,gCAAiC,KAC3F,KAAiB,GACjB,KAAkB,UAAW5N,EAAIyR,gBACjC,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,6BACpD,KAAiB,GACjB,KAAkB,mBAAoB,iBACtC,KAAiB,GACjB,KAAkB,QAAS,KAAmB,GAAI,GAAIzR,EAAIwiB,QAA1D,CAAmE,eAAgB,KAAmB,GAAI,GAAIxiB,EAAIugB,eAAlH,CAAkI,aAAc,KAAmB,GAAI,GAAIvgB,EAAIygB,aAA/K,CAA6L,cAAe,KAAmB,GAAI,GAAIzgB,EAAIwgB,iBAC1OpB,WAAY,CAAC,IAA2B,IAA+B,GAA6B,IAA0B,IAAiC,IAAyB,IAA8B,IAA8B,IAA2B,KAAkC,IAAqC,IAAoB,IAAwB,IAAgB,IAAiB,IAAgC,IAAgC,KAA+B,IAA2B,IAA2B,IAAa,KAAgC,KAAuBC,MAAO,CAAC,IAAkB,KAA0B,IAAsB,KAA0BC,OAAQ,CAAC,uhBAClvB,GAAqBE,eAAiB,iBAAM,CACxC,CAAEZ,KAAM,KACR,CAAEA,KAAM,MACR,CAAEA,KAAM,MACR,CAAEA,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,OAEZ,YAAW,CACP,aAAU,8BAA+B,CAAE4G,QAAOA,IAClD,YAAW,cAAe,KAC3B,GAAqBD,UAAW,0BAAqB,GACxD,GAAuB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAC7D,KACA,KACA,KACA,IACA,OACL,IAGH,IAAI,cACA,WAAY7H,EAAOG,EAAa8S,EAAsB/S,EAAqB6B,GAAaA,wBACpFljB,KAAKmhB,MAAQA,EACbnhB,KAAKshB,YAAcA,EACnBthB,KAAKo0B,qBAAuBA,EAC5Bp0B,KAAKqhB,oBAAsBA,EAC3BrhB,KAAKkjB,aAAeA,EACpBljB,KAAKiW,oBACLjW,KAAKua,SAAW,GAChBva,KAAKgW,kBAAoB,GAT7B,wDAWU,WACNhW,KAAKw8B,yBACLx8B,KAAKiiB,aACDjiB,KAAKmhB,MAAMiH,SAAS5B,SAAS1gB,IAAI,SAAW,eAChD9F,KAAKshB,YAAY2I,SAASC,mBAAmBH,QAAQ7pB,WAAWmjB,YAC5DrjB,EAAKoO,aAAeiV,EAAK+G,cAAchc,kBAhB/C,oCAmBcquB,GACVz8B,KAAKiW,oBACLwmB,EAAYxnB,aArBhB,sCAwBI,OAAQjV,KAAKiW,mBAxBjB,yCA2BI,OAAOkS,OAAO5nB,OAAOP,KAAKgW,mBAAmBwN,QAAQ2M,YAACA,OAAMA,EAAE/Y,UAAY+Y,EAAElb,aA3BhF,qCA6BekhB,GACX,OAAkC,IAA3BA,EAAQlb,QAAQtb,OACjB,YAAO,2BACPw2B,EAAQlb,QAAQmJ,KAAKyG,YAACA,OAAKA,EAAEnmB,QAAM2V,KAAK,OAhClD,kCAmCIra,KAAK2R,aAAajR,KAAK,CACnBgV,OAAMA,EACNhR,KAAM,GACNnE,OAAQ,OAtChB,yCAyCkB,WACRswB,EAAS7wB,KAAK2R,aAAayS,KAAK0M,YAACA,OAAKA,EAAEvwB,UACxCm8B,EAAmB18B,KAAKua,SAC9Bva,KAAKua,SAAWsW,EAAOlxB,OACjB,SAAAg9B,wBAAA,CAAwB9L,GAAQzM,KAAI,SAACnJ,EAASxa,GAAV,MAAgB,CAClDm8B,UAA4C,IAAjC58B,EAAK6hB,QAAQtH,SAAS5a,QAAsB,IAANc,EACjDkI,GAAIsS,EAAQmJ,KAAKyG,YAACA,OAAKA,EAAEnmB,QAAM2V,KAAK,KACpCY,cAEF,CAAC,CAAE2hB,WAAUA,EAAOj0B,GAnDL,sBAmD+BsS,QAAS,KAC7Djb,KAAKua,SAAS2R,SAASiK,YACnB,IAAKn2B,EAAKgW,kBAAkBmgB,EAAQxtB,IAAK,CACrC,IAAMqgB,EAAYhpB,EAAK68B,oBAAoB1G,EAASuG,GACpD18B,EAAKgW,kBAAkBmgB,EAAQxtB,IAAM,CACjCsM,SAAQA,EACRmC,UAASA,EACT6D,QAASkb,EAAQlb,QAAQmJ,KAAKyG,YAACA,OAAKA,EAAEnmB,QACtC6J,MAAOya,EAAUza,MACjB6H,IAAK4S,EAAU5S,IACfQ,MAAOoS,EAAUpS,aA5DjC,0CAqEoBuf,EAASuG,GACzB,GAAIvG,EAAQyG,UACR,OAAO58B,KAAKgW,kBAAsC,oBAEtD,IAAM8mB,EAA6BJ,EAAiBlZ,QAAQ2M,YAACA,OAAKgG,EAAQlb,QAAQmJ,KAAKyG,YAACA,OAAKA,EAAEnmB,QAAM8e,QAAQ9e,YAAIA,OAAKyrB,EAAElV,QAAQmJ,KAAKyG,YAACA,OAAKA,EAAEnmB,QAAMm1B,SAASn1B,SAC5J,OAAIo4B,EAA2Bn9B,OACpBK,KAAKgW,kBAAkB8mB,EAA2B,GAAG7hB,QAAQmJ,KAAKyG,YAACA,OAAKA,EAAEnmB,QAAM2V,KAAK,MAEzF,CACHjE,IAAK,GACL7H,MAAO,EACPqI,MAAO,KAhFf,oCAmFcjO,GAAGA,WACb3I,KAAKkjB,aACAsC,OAAO,CACRC,MAAO,YAAO,0CACdE,QAAS,CACL,CAAEtD,KAAM,YAAanO,MAAO,YAAO,kBACnC,CAAEmO,KAAM,SAAUnO,MAAO,YAAO,iBAAkB0R,aAAYA,MAGjEzB,KAAK,OAAAgB,EAAA,IAAWC,YAAQA,OAAKA,EAAWplB,EAAKo0B,qBAAqBnC,qBAAqBtpB,EAAI3I,EAAK6hB,QAAQlZ,IAAM,OAAQ,OAAAwc,EAAA,IAAU,kBAAMnlB,EAAK+8B,eAAe,UAC1J78B,WAAU,WACXF,EAAKqhB,oBAAoBU,QAAQ,YAAO,gCAAiC,CACrEC,OAAQ,mBAEZhiB,EAAKw8B,4BACL76B,YACA3B,EAAKqhB,oBAAoBzf,MAAM,YAAO,8BAA+B,CACjEogB,OAAQ,wBApGpB,6BAwGM,WACIgb,EAAkBh9B,KAAK2R,aACxB6R,QAAQ+N,YAAEA,OAAKA,EAAG7b,SAClB0O,KAAKmN,YAAEA,MAAK,CACb7sB,KAAM6sB,EAAG7sB,KACTnE,OAAQ,OAEZP,KAAKi9B,2BACA9Y,KAAK,OAAAiH,EAAA,IAAS,kBAAMprB,EAAKo0B,qBAAqBpD,0BAA0BgM,EAAiBh9B,EAAKiiB,iBAAgB,OAAAmJ,EAAA,IAAU8R,YAAmBA,OAAKl9B,EAAKm9B,yBAAyBD,MAAuB,OAAA9R,EAAA,IAAU8R,YAAmBA,OAAKl9B,EAAKo9B,sBAAsBF,MAAuB,OAAA9R,EAAA,IAAUiS,YAASA,OAAKr9B,EAAKs9B,kBAAkBD,MAAa,OAAAjS,EAAA,IAAUyF,YAAMA,OAAK7wB,EAAKu9B,yBAAyB1M,MAAU,OAAAzF,EAAA,IAAUpG,YAAGA,OAAKhlB,EAAKw9B,qBAAqBxY,EAAIyM,0BAAyB,OAAArG,EAAA,IAAU7Q,YAAQA,OAAKva,EAAK+8B,eAAexiB,OACtgBra,UAAU,CACXsB,KAAO+Y,YACHva,EAAKiW,oBACLjW,EAAKqhB,oBAAoBU,QAAQ,YAAO,wCAAyC,CAC7Eta,MAAO8S,EAAS5a,SAEpBK,EAAKw8B,8BAvHjB,iDA4HI,OAAqC,IAAjCx8B,KAAK6hB,QAAQtH,SAAS5a,OACfK,KAAKkjB,aACPsC,OAAO,CACRC,MAAO,YAAO,uDACdC,KAAM,YAAO,sDACbC,QAAS,CACL,CAAEtD,KAAM,YAAanO,MAAO,YAAO,kBACnC,CAAEmO,KAAM,SAAUnO,MAAO,YAAO,kCAAmC0R,aAAYA,MAGlFzB,KAAK,OAAAiH,EAAA,IAAUpG,YAAGA,OAAHA,IACTA,EAAe,OAAAuC,EAAA,OAAW,QAI9B,OAAAA,EAAA,SA3If,+CA8IyB2V,GAAoBA,WACzC,OAAIA,EAAoBv9B,OACb,OAAA6vB,EAAA,GAAS0N,EAAoB9Y,KAAK6M,YAAWA,OACzCjxB,EAAKshB,YAAYO,QAAQqP,wBAAwB,CACpDvsB,UAAW3E,EAAK6hB,QAAQlZ,GACxBwoB,cAAeF,EAAYtoB,SAE/Bwb,KAAK,OAAAC,EAAA,IAAI,kBAAM8Y,MAGZ,OAAA3V,EAAA,GAAG,MAxJlB,4CA2JsB2V,GAAoBA,WAChCO,EAAaz9B,KAAK2R,aACnByS,KAAKmN,YACN,IAAMmM,EAAeR,EAAoB7S,MAAMsT,YAAGA,OAAKA,EAAIj5B,OAAS6sB,EAAG7sB,QACjEk5B,EAAuBF,EAAeA,EAAa/0B,GAAK4oB,EAAG5oB,GACjE,IAAKi1B,EACD,MAAM,IAAItN,MAAM,wCAEpB,OAAOiB,EAAGhxB,OACLijB,QAAQ2M,YAACA,OAAMA,EAAErV,UACjBsJ,KAAK+L,YAACA,MAAK,CACZyN,uBACA/yB,KAAM,SAAA4f,gBAAA,CAAgB0F,EAAEzrB,KAAM,KAC9BsnB,aAAc,CAAC,CAAEtnB,KAAMyrB,EAAEzrB,KAAMud,aAAcjiB,EAAKiiB,sBAGrDuH,QAAO,SAACgI,EAAMvW,GAAP,mCAAuBuW,GAAvB,mBAAgCvW,MAAU,IAChD4iB,EAAWA,6BACVX,EAAoB9Y,KAAK0M,YAACA,OAAKA,EAAEnoB,OADvBk1B,mBAEV79B,KAAK2R,aAAayS,KAAK0M,YAACA,OAAKA,EAAEnoB,MAAI6a,OAAO,EAAA+M,sBAEjD,OAAIkN,EAAW99B,OACJ,OAAA6vB,EAAA,GAASiO,EAAWrZ,KAAKkH,YAAKA,OAAKtrB,EAAKshB,YAAYO,QAAQic,iBAAiBxS,OAASnH,KAAK,OAAAC,EAAA,IAAI,kBAAMyZ,MAGrG,OAAAtW,EAAA,GAAGsW,KApLlB,wCAuLkBR,GAAUA,WACxB,OAAO,OAAA7N,EAAA,GAAS6N,EAAUjZ,KAAKzb,YAAEA,OAAK3I,EAAKshB,YAAYO,QAClDkc,sBAAsBp1B,GACtB2e,WAAWjE,YAAIA,OAAKA,EAAK2a,sBACzB7Z,KAAK,OAAAX,EAAA,GAAO,EAAA+M,2BA3LrB,+CA6LyBM,GACrB,IAAM5V,EAAU4V,EACXrN,OAAO,EAAA+M,oBACPnM,KAAKmN,YAAEA,OAAKA,EAAGtW,WACfuO,QAAO,SAACgI,EAAM3G,GAAP,mCAAiB2G,GAAjB,mBAA0B3G,MAAI,IACpCtQ,EAAW4N,OAAO5nB,OAAOP,KAAKgW,mBAC/BwN,QAAQ2M,YAACA,OAAKA,EAAElb,UAAYkb,EAAE/Y,YAC9BgN,KAAK+L,YAACA,MAAK,CACZ5hB,MAAO4hB,EAAE5hB,MACT6H,IAAK+Z,EAAE/Z,IACPQ,MAAOuZ,EAAEvZ,MACTwa,UAAWjB,EAAElV,QACRmJ,KAAK1f,YAAIA,OAAKuW,EAAQoP,MAAMQ,YAACA,OAAKA,EAAEnmB,OAASA,QAC7C8e,OAAO,EAAA+M,oBACPnM,KAAKyG,YAACA,OAAKA,EAAEliB,UAEtB,OAAO3I,KAAKo0B,qBAAqB3C,sBAAsBzxB,KAAK6hB,QAAStH,EAAUU,EAASjb,KAAKiiB,gBA7MjG,2CA+MqBqJ,GACjB,OAAqC,IAAjCtrB,KAAK6hB,QAAQtH,SAAS5a,OAGfK,KAAKshB,YAAYO,QACnBoQ,qBAAqBjyB,KAAK6hB,QAAQtH,SAAS,GAAG5R,IAC9Cwb,KAAK,OAAAC,EAAA,IAAI,kBAAMkH,MAGb,OAAA/D,EAAA,GAAG+D,KAxNlB,qCA2NeA,GAEX,IAAM3iB,EAAK3I,KAAKmhB,MAAMiH,SAAS5B,SAAS1gB,IAAI,MAC5C,OAAI6C,EACO3I,KAAKshB,YAAYO,QAAQqQ,WAAWvpB,GAAIohB,QAAQ5F,KAAK,OAAAC,EAAA,IAAI,kBAAMkH,MAG/D,OAAA/D,EAAA,GAAG+D,KAlOlB,+CAqOwB,WACpBtrB,KAAKmhB,MAAMkC,KACNc,KAAK,OAAAgB,EAAA,IAAW9B,YAAIA,OAAKA,EAAKrB,UAAS,YAAK,IAC5C9hB,WAAW2hB,YACZ7hB,EAAK6hB,QAAUA,EACf7hB,EAAK2R,aAAekQ,EAAQlQ,aAAayS,KAAKmN,YAAEA,MACrC,CACH5oB,GAAI4oB,EAAG5oB,GACP+M,OAAMA,EACNhR,KAAM6sB,EAAG7sB,KACTnE,OAAQgxB,EAAGtW,QAAQmJ,KAAKyG,YAACA,MAAK,CAC1BliB,GAAIkiB,EAAEliB,GACNjE,KAAMmmB,EAAEnmB,KACRoW,QAAOA,UAInB9a,EAAKgW,kBAAoBhW,EAAKi+B,oBAAoBpc,EAAQtH,UAC1Dva,EAAKwV,wBAvPb,0CA0PoB+E,GAChB,OAAOA,EAASiP,QAAO,SAAC0U,EAAK/N,GACzB,IAAMxnB,EAAKwnB,EAAElV,QAAQtb,OAASwwB,EAAElV,QAAQmJ,KAAKyG,YAACA,OAAKA,EAAEnmB,QAAM2V,KAAK,KA7P/C,sBA8PjB,OAAO8N,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAImvB,GAAhC/V,mBAAyCxf,EAAK,CAC7C2O,iBAAkB6Y,EAAExnB,GACpBsM,SAAQA,EACRmC,UAASA,EACT6D,QAASkV,EAAElV,QAAQmJ,KAAKyG,YAACA,OAAKA,EAAEnmB,QAChC0R,IAAK+Z,EAAE/Z,IACP7H,MAAO4hB,EAAE5hB,MACTqI,MAAOuZ,EAAEyB,iBAElB,QAtQP,KAyQJ,GAA+B1P,UAAO,SAAgDC,GAAK,OAAO,IAAKA,GAAK,IAAgC,KAAyB,KAAwB,KAAyB,KAAqB,KAAyB,IAAuB,KAAyB,MAA6B,KAAyB,QAC1W,GAA+BC,UAAO,KAAyB,CAAEC,KAAM,GAAgCC,UAAW,CAAC,CAAC,gCAAiCE,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,EAAG,MAAO,cAAe,EAAG,WAAY,SAAU,CAAC,QAAS,gBAAiB,EAAG,QAAS,WAAY,CAAC,QAAS,iCAAkC,EAAG,QAAS,EAAG,QAAS,CAAC,EAAG,oBAAqB,CAAC,EAAG,SAAU,CAAC,EAAG,WAAY,EAAG,QAAS,WAAY,CAAC,EAAG,iBAAkB,CAAC,EAAG,QAAS,CAAC,WAAY,GAAI,OAAQ,OAAQ,EAAG,UAAW,WAAY,iBAAkB,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,YAAa,WAAY,iBAAkB,CAAC,4BAA6B,IAAK,CAAC,EAAG,MAAO,sBAAuB,SAAU,EAAG,SAAU,CAAC,QAAS,QAAS,CAAC,OAAQ,WAAY,OAAQ,UAAW,cAAe,GAAI,EAAG,UAAW,gBAAiB,EAAG,QAAS,CAAC,EAAG,QAAS,CAAC,OAAQ,WAAY,OAAQ,UAAW,cAAe,GAAI,EAAG,UAAW,iBAAkB,CAAC,WAAY,GAAI,OAAQ,OAAQ,OAAQ,MAAO,WAAY,GAAI,EAAG,UAAW,cAAe,iBAAkB,CAAC,WAAY,GAAI,OAAQ,QAAS,EAAG,UAAW,eAAgB,iBAAkB,CAAC,WAAY,GAAI,OAAQ,SAAU,OAAQ,QAAS,MAAO,IAAK,OAAQ,IAAK,EAAG,UAAW,iBAAkB,CAAC,qBAAsB,GAAI,EAAG,eAAgB,CAAC,QAAS,qBAAsB,CAAC,cAAe,gBAAiB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,gBAAiB,EAAG,SAAU,CAAC,QAAS,QAAS,EAAG,cAAeC,SAAU,SAAiDnf,EAAIC,GAAgB,EAALD,IACj/C,KAAsB,EAAG,kBACzB,KAAsB,EAAG,gBACzB,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAA6E,OAAOC,EAAIE,UACnH,KAAc,GACd,KAAc,EAAG,aACjB,OACA,OACA,OACA,KAAkB,EAAG4R,GAA+C,GAAI,GAAI,MAAO,GACnF,KAAkB,EAAGI,GAAkD,EAAG,EAAG,SAAU,GACvF,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,QAAS,GAClC,KAAsB,EAAG,SACzB,KAAsB,GAAI,MAC1B,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAiB,GAAI,MACrB,OACA,OACA,KAAkB,GAAIwB,GAA+C,GAAI,GAAI,KAAM,GACnF,OACA,QACO,EAAL3T,IACF,KAAiB,GACjB,KAAkB,YAAaC,EAAIwS,kBAAsD,IAAlCxS,EAAI06B,mBAAmBx+B,QAC9E,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,GAAI,0BAA2B,KAAuB,GAAI6H,GAAK/D,EAAI06B,mBAAmBx+B,SAAU,KACrJ,KAAiB,GACjB,KAAkB,UAAW8D,EAAIkO,cACjC,KAAiB,GACjB,KAAkB,OAAwC,IAAhClO,EAAIoe,QAAQtH,SAAS5a,QAC/C,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,kBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,oBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,gBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,kBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,0BACpD,KAAiB,GACjB,KAAkB,UAAW8D,EAAI8W,YAChCsI,WAAY,WAAc,MAAO,CAAC,IAA2B,IAAgC,IAAgB,IAAa,IAAiB,KAAkC,IAA6B,IAAiB,IAAwB,IAAgB,GAA2B,IAAyB,IAAqC,IAAoB,IAA0B,IAA0B,IAA+B,IAA4B,IAA0B,IAAiC,IAA8B,MAAkCC,MAAO,WAAc,MAAO,CAAC,IAAsB,MAAyBC,OAAQ,CAAC,ySACxrB,GAA+BE,eAAiB,iBAAM,CAClD,CAAEZ,KAAM,KACR,CAAEA,KAAM,KACR,CAAEA,KAAM,IACR,CAAEA,KAAM,MACR,CAAEA,KAAM,QAEZ,GAAiC,YAAW,CAAE,YAAW,oBAAqB,CAAC,IACvE,IACA,GACA,KACA,QACL,IAEH,IAAI,oDACA,WAAYnB,EAAQI,GAAYA,2CACtBJ,EAAQ,CACVkd,WAAY,QACZz1B,GAAI,GACJgb,UAAW,GACX0a,UAAW,GACX35B,KAAM,GACN2d,KAAM,IAAUic,MAChBC,SAAU,EACVC,SAAU,GACVC,MAAO,EACPC,OAAQ,EACRj/B,OAAQ,GACRk/B,QAAS,GACTC,WAAY,OACbj2B,YAAEA,OAAI2Y,EAAYO,QAAQgd,SAASl2B,GAAIwhB,WAAU9G,YAAIA,OAAIA,EAAK4B,YAhBrE,UAA4C,KAmBhD,GAAc/C,UAAO,SAA+BC,GAAK,OAAO,IAAKA,GAAK,IAAe,KAAgB,KAAgB,KAAgB,OACzI,GAAcc,eAAiB,iBAAM,CACjC,CAAEZ,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAc+P,WAAQ,aAAmB,CAAEC,QAAS,WAAmC,OAAO,IAAI,GAAc,aAAS,KAAS,aAAS,OAAkBC,MAAO,GAAeC,WAAY,SAC/L,GAAgB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAAQ,OACnE,IAEH,IAAI,oDACA,WAAYrR,EAAQI,GAAYA,2CACtBJ,EAAQ,CACVkd,WAAY,aACZz1B,GAAI,GACJgb,UAAW,GACX0a,UAAW,GACXpc,aAAc,eACdvd,KAAM,GACN4kB,KAAM,GACNnc,WAAUA,EACV/F,YAAa,GACbqB,cAAe,KACfD,OAAQ,GACRwjB,aAAc,GACdtjB,QAAS,GACTmlB,OAAQ,GACRtU,SAAU,OACX5Q,YAAEA,OAAI2Y,EAAY8F,WAAW0X,cAAcn2B,GAAIwhB,WAAU9G,YAAIA,OAAIA,EAAK+D,iBAlB7E,UAAsD,KAqB1D,GAAmBlF,UAAO,SAAoCC,GAAK,OAAO,IAAKA,GAAK,IAAoB,KAAgB,KAAgB,KAAgB,OACxJ,GAAmBc,eAAiB,iBAAM,CACtC,CAAEZ,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAmB+P,WAAQ,aAAmB,CAAEC,QAAS,WAAwC,OAAO,IAAI,GAAmB,aAAS,KAAS,aAAS,OAAkBC,MAAO,GAAoBC,WAAY,SACnN,GAAqB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAAQ,OACxE,IAEH,IAAI,oDACA,WAAYrR,EAAQI,GAAYA,2CACtBJ,EAAQ,CACVkd,WAAY,QACZz1B,GAAI,GACJgb,UAAW,GACX0a,UAAW,GACXlxB,WAAUA,EACV8U,aAAc,eACdvd,KAAM,GACNmG,KAAM,GACNmhB,aAAc,GACdzrB,OAAQ,KACRoI,YAAEA,OAAK2Y,EAAY1V,MAAMwjB,SAASzmB,GAAIwhB,WAAW9G,YAAIA,OAAKA,EAAKzX,YAbvE,UAA4C,KAgBhD,GAAcsW,UAAO,SAA+BC,GAAK,OAAO,IAAKA,GAAK,IAAe,KAAgB,KAAgB,KAAgB,OACzI,GAAcc,eAAiB,iBAAM,CACjC,CAAEZ,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAc+P,WAAQ,aAAmB,CAAEC,QAAS,WAAmC,OAAO,IAAI,GAAc,aAAS,KAAS,aAAS,OAAkBC,MAAO,GAAeC,WAAY,SAC/L,GAAgB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAAQ,OACnE,IAEH,IAAI,oDACA,WAAYjR,EAAaJ,GAAOA,2CACtBA,EAAQ,CACVkd,WAAY,UACZz1B,GAAI,GACJgb,UAAW,GACX0a,UAAW,GACXppB,SAAQA,EACRgN,aAAc,eACdvd,KAAM,GACN4kB,KAAM,GACN7gB,cAAe,KACfD,OAAQ,GACRpB,YAAa,GACb4kB,aAAc,GACdra,aAAc,GACdgjB,YAAa,GACbpa,SAAU,GACV8Y,SAAU,KACV1qB,YAAEA,OAAK2Y,EAAYO,QAClBqQ,WAAWvpB,GACX2kB,yBACAnD,WAAW9G,YAAIA,OAAKA,EAAKxB,cAtBlC,UAAgD,KAyBpD,GAAgBK,UAAO,SAAiCC,GAAK,OAAO,IAAKA,GAAK,IAAiB,KAAgB,KAAqB,KAAgB,OACpJ,GAAgBc,eAAiB,iBAAM,CACnC,CAAEZ,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAgB+P,WAAQ,aAAmB,CAAEC,QAAS,WAAqC,OAAO,IAAI,GAAgB,aAAS,KAAc,aAAS,OAAaC,MAAO,GAAiBC,WAAY,SACvM,GAAkB,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAAa,OAC1E,IAEH,IAAI,oDACA,WAAYrR,EAAQI,GAAYA,2CACtBJ,EAAQ,CACVkd,WAAY,UACZz1B,GAAI,GACJgb,UAAW,GACX0a,UAAW,GACX35B,KAAM,GACNiN,aAAc,GACd4I,SAAU,KACX5R,YAAEA,OAAI2Y,EAAYO,QAAQkd,0BAA0Bp2B,GAAIwhB,WAAU9G,YAAIA,OAAIA,EAAKxB,cAVtF,UAAgE,KAapE,GAAwBK,UAAO,SAAyCC,GAAK,OAAO,IAAKA,GAAK,IAAyB,KAAgB,KAAgB,KAAgB,OACvK,GAAwBc,eAAiB,iBAAM,CAC3C,CAAEZ,KAAM,KACR,CAAEA,KAAM,OAEZ,GAAwB+P,WAAQ,aAAmB,CAAEC,QAAS,WAA6C,OAAO,IAAI,GAAwB,aAAS,KAAS,aAAS,OAAkBC,MAAO,GAAyBC,WAAY,SACvO,GAA0B,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAAQ,OAC7E,IAEH,IAAMyM,GAAO,CACTC,WAAY,YAAO,wBACpBC,GAAK,CACJD,WAAYE,IACbC,GAAK,CACJH,WAAYI,IACbC,GAAK,CACJL,WAAY,YAAO,sBACpBM,GAAK,CACJN,WAAYO,IACbC,GAAK,CACJR,WAAY,YAAO,2BACpBS,GAAK,CACJT,WAAYU,IACbC,GAAK,CACJX,WAAY,YAAO,sBACpBY,GAAK,CACJZ,WAAYa,IAEVC,GAAgB,CAClB,CACIlnB,KAAM,WACNmnB,UAAW,GACX3c,KAAM2b,IAEV,CACInmB,KAAM,eACNmnB,UAAW,GACXC,QAAS,aAAkB,IAC3BC,cAAe,CAAC,KAChB7c,KAAM6b,IAEV,CACIrmB,KAAM,+BACNmnB,UAAW,GACXC,QAAS,aAAkB,IAC3BC,cAAe,CAAC,KAChB7c,KAAM+b,IAEV,CACIvmB,KAAM,SACNmnB,UAAW,GACX3c,KAAMic,IAEV,CACIzmB,KAAM,aACNmnB,UAAW,GACXC,QAAS,aAAkB,IAC3BC,cAAe,CAAC,KAChB7c,KAAMkc,IAEV,CACI1mB,KAAM,cACNmnB,UAAW,GACX3c,KAAMoc,IAEV,CACI5mB,KAAM,kBACNmnB,UAAW,GACXC,QAAS,aAAkB,IAC3BC,cAAe,CAAC,KAChB7c,KAAMqc,IAEV,CACI7mB,KAAM,SACNmnB,UAAW,GACX3c,KAAMuc,IAEV,CACI/mB,KAAM,aACNmnB,UAAW,GACXC,QAAS,aAAkB,IAC3B5c,KAAMwc,KAGd,SAASV,GAAkB9b,EAAMgF,GAC7B,OAAO,aAAiB,CACpBrG,OAAQqB,EAAKrB,OACbrZ,GAAI0f,EAAO1f,GACXw3B,cAAe,sBACfC,QAASve,YAAOA,OAAIA,EAAQnd,MAC5Byc,MAAO,aAGf,SAASke,GAA+Bhc,EAAMgF,GAC1C,OAAOhF,EAAKrB,OAAOmC,KAAK,OAAAC,EAAA,IAAKpC,YAAMA,MACxB,CACH,CACI9N,MAAO,YAAO,uBACdmsB,KAAM,CAAC,MAAO,aAElB,CACInsB,MAAMA,GAADA,OAAK8N,EAAOtd,MACjB27B,KAAM,CAAC,MAAO,WAAYhY,EAAO1f,GAAI,CAAExE,IAAK,cAEhD,CACI+P,MAAO,YAAO,8BACdmsB,KAAM,CAAC,yBAKvB,SAASb,GAAgBnc,EAAMgF,GAC3B,OAAO,aAAiB,CACpBrG,OAAQqB,EAAKrB,OACbrZ,GAAI0f,EAAO1f,GACXw3B,cAAe,oBACfC,QAASx0B,YAAKA,OAAIA,EAAMlH,MACxByc,MAAO,WAGf,SAASwe,GAAqBtc,EAAMgF,GAChC,OAAO,aAAiB,CACpBrG,OAAQqB,EAAKrB,OACbrZ,GAAI0f,EAAO1f,GACXw3B,cAAe,yBACfC,QAAShZ,YAAUA,OAAIA,EAAW1iB,MAClCyc,MAAO,gBAGf,SAAS2e,GAAgBzc,EAAMgF,GAC3B,OAAO,aAAiB,CACpBrG,OAAQqB,EAAKrB,OACbrZ,GAAI0f,EAAO1f,GACXw3B,cAAe,oBACfC,QAASnb,YAAKA,OAAIA,EAAMvgB,MACxByc,MAAO,WAQf,SAASmf,GAAYC,GACjB,IADuBA,EACjBC,EAAgB,GAChBC,EAAY,GAFKF,6BAIJA,GAJIA,IAIvB,gCAAWG,EAAX,QACID,EAAUC,EAAK/3B,IAAMwf,OAAOpZ,OAAOoZ,OAAOpZ,OAAO,GAAI2xB,GAAO,CAAEnnB,SAAU,MALrDgnB,iEAONA,EAAMnc,KAAIuc,YAACA,OAAIA,EAAEh4B,OAPX43B,IAOvB,gCAAW53B,EAAX,QACI,GAAI83B,EAAU1I,eAAepvB,GAAK,CAC9B,IAAMi4B,EAAaH,EAAU93B,GAC7Bi4B,EAAW5oB,YACX,IAAM6V,EAAS+S,EAAW/S,OAC1B,IAAKA,EACD,SAGkB4S,EAAU5S,EAAOllB,IAE/B83B,EAAU5S,EAAOllB,IACjB83B,EAAU5S,EAAOllB,IAAI4Q,SAAS7Y,KAAKkgC,GAGnCH,EAAU5S,EAAOllB,IAAM,CAAE4Q,SAAU,CAACqnB,IAIxCJ,EAAc9/B,KAAKkgC,KA1BRL,8BAgCvB,MAAO,CAAE53B,GADM63B,EAAc7gC,OAAS6gC,EAAc,GAAG3S,OAAOllB,UACzC4Q,SAAUinB,GAGnC,IAAI,cACA,aAAa,wBACTxgC,KAAKwX,aACLxX,KAAK6gC,UAAY,IAAI,IACrB7gC,KAAK+tB,iBAAmB,IAAI,IAJhC,yDAMYnG,GACJ,gBAAiBA,GAAW5nB,KAAKutB,cACjCvtB,KAAKyX,eAAiB6oB,GAAYtgC,KAAKutB,gBAR/C,6BAWO7L,GACH,IAAMjd,EAAOid,EAAMjd,KAAK4e,KAElByd,EADYpf,EAAMqf,UAAU1d,KACJ1a,GAC9B,GAAmB,MAAfm4B,EACA,MAAM,IAAIxQ,MAAM,qDAEpBtwB,KAAK6gC,UAAUxhB,KAAK,CAChBwI,aAAcpjB,EAAKkE,GACnB0P,SAAUyoB,EACVn6B,MAAO+a,EAAMsf,iBArBrB,6BAwBOtf,GACH1hB,KAAK6gC,UAAUxhB,KAAKqC,KAzBxB,+BA2BS/Y,GACL3I,KAAK+tB,iBAAiB1O,KAAK1W,KA5B/B,iCA8BW+3B,GACP,OAAQA,EAAK3I,eAAe,cA/BhC,KAkCJ,GAAwB7V,UAAO,SAAyCC,GAAK,OAAO,IAAKA,GAAK,KAC9F,GAAwBC,UAAO,KAAyB,CAAEC,KAAM,GAAyBC,UAAW,CAAC,CAAC,wBAAyBuG,OAAQ,CAAErR,UAAW,YAAa+V,YAAa,cAAe7V,mBAAoB,sBAAwByiB,QAAS,CAAE0G,UAAW,YAAa9S,iBAAkB,oBAAsBxL,SAAU,CAAC,MAA8BC,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,mBAAoB,GAAI,EAAG,YAAa,iBAAkB,qBAAsB,EAAG,QAAS,CAAC,mBAAoB,GAAI,EAAG,YAAa,iBAAkB,uBAAwBC,SAAU,SAA0Cnf,EAAIC,GAAgB,EAALD,GACpmB,KAAkB,EAAG+T,GAA6D,EAAG,EAAG,2BAA4B,GAC7G,EAAL/T,GACF,KAAkB,OAAQC,EAAIgU,iBAC7BoL,WAAY,WAAc,MAAO,CAAC,IAAa,GAA6B,MAA6BE,OAAQ,CAAC,IAAKC,gBAAiB,IACjJ,YAAW,CACP,cACA,YAAW,cAAexiB,QAC3B,GAAwBwoB,UAAW,mBAAc,GACpD,YAAW,CACP,cACA,YAAW,cAAeD,SAC3B,GAAwBC,UAAW,0BAAqB,GAC3D,YAAW,CACP,cACA,YAAW,cAAeb,SAC3B,GAAwBa,UAAW,iBAAY,GAClD,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAAwBa,UAAW,iBAAY,GAClD,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAAwBa,UAAW,wBAAmB,GAEzD,IAAI,cACA,WAAY6E,EAAQoT,EAAM3f,GAAYA,wBAClCthB,KAAK6tB,OAASA,EACd7tB,KAAKihC,KAAOA,EACZjhC,KAAKshB,YAAcA,EACnBthB,KAAKsZ,MAAQ,EACbtZ,KAAKwX,aACDqW,IACA7tB,KAAKsZ,MAAQuU,EAAOvU,MAAQ,GARpC,wDAYItZ,KAAKkhC,WAAalhC,KAAKyX,eAAe/S,MAAQ,SAC9C,IAAMy8B,EAAenhC,KAAKshB,YAAY0R,OACjCC,aACA9I,WAAU9G,YAAIA,OAAIA,EAAK4P,WAAWmO,eAClCjd,KAAK,OAAA0F,EAAA,GAAY,IACtB7pB,KAAK4Y,qBAAuBuoB,EAAahd,KAAK,OAAAC,EAAA,IAAIid,YAAKA,OAAIA,EAAMxH,SAAS,KAAWyH,mBACrFthC,KAAKyZ,qBAAuB0nB,EAAahd,KAAK,OAAAC,EAAA,IAAIid,YAAKA,OAAIA,EAAMxH,SAAS,KAAW0H,qBAlBzF,gCAoBU56B,EAAOlC,GACb,OAAOA,EAAKkE,KArBhB,uCAuBiBye,GAYb,OAXc,SAARoa,EAASd,EAAMe,EAAY1W,GAC7B,GAAI2V,EAAK/3B,KAAOye,EAAWze,GAAI,CAC3B,IAAMkQ,EAAO4oB,EAAWjJ,OAAOkI,EAAKh8B,MAC9B2T,EAAW+O,EAAWyG,QAAUzG,EAAWyG,OAAOllB,GACpD+3B,EAAK/3B,KAAO0P,GACZ0S,EAAOrqB,KAAK,CAAEmY,KAAMA,EAAKsb,MAAM,GAAG9Z,KAAK,QAAU,OAAQ1R,GAAI+3B,EAAK/3B,KAEtE+3B,EAAKnnB,SAAS2S,SAAQwV,YAAKA,OAAIF,EAAME,EAAO7oB,EAAMkS,MAEtD,OAAOA,EAEJyW,CAAMxhC,KAAKihC,KAAKxpB,eAAgB,GAAI,MAnC/C,2BAqCK2P,EAAY/O,GACbrY,KAAKihC,KAAKU,OAAO,CACbh7B,MAAO,EACP0R,WACAwP,aAAcT,EAAWze,OAzCjC,6BA4COye,EAAY4Z,GACV5Z,EAAWyG,QAGhB7tB,KAAKihC,KAAKU,OAAO,CACbh7B,MAAOq6B,EAAe,EACtB3oB,SAAU+O,EAAWyG,OAAOllB,GAC5Bkf,aAAcT,EAAWze,OAnDjC,+BAsDSye,EAAY4Z,GACZ5Z,EAAWyG,QAGhB7tB,KAAKihC,KAAKU,OAAO,CACbh7B,MAAOq6B,EAAe,EACtB3oB,SAAU+O,EAAWyG,OAAOllB,GAC5Bkf,aAAcT,EAAWze,OA7DjC,2BAgEK+Y,GACD,YAAgB1hB,KAAKyX,eAAe8B,SAAUmI,EAAMkgB,cAAelgB,EAAMsf,cACzEhhC,KAAKihC,KAAKY,OAAOngB,KAlErB,6BAoEO/Y,GACH3I,KAAKihC,KAAKa,SAASn5B,OArEvB,KAwEJ,GAA4BuZ,UAAO,SAA6CC,GAAK,OAAO,IAAKA,GAAK,IAA6B,KAAyB,GAA6B,IAAK,KAAyB,IAA0B,KAAyB,OAC1Q,GAA4BC,UAAO,KAAyB,CAAEC,KAAM,GAA6BC,UAAW,CAAC,CAAC,6BAA8BuG,OAAQ,CAAErR,UAAW,YAAaC,eAAgB,iBAAkBC,mBAAoB,sBAAwB8K,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,cAAe,GAAI,EAAG,YAAa,EAAG,kBAAmB,sBAAuB,sBAAuB,CAAC,WAAY,IAAK,CAAC,QAAS,aAAc,UAAW,GAAI,EAAG,UAAW,cAAe,EAAG,QAAS,UAAW,gBAAiB,CAAC,UAAW,GAAI,EAAG,aAAc,EAAG,eAAgB,CAAC,EAAG,oBAAqB,EAAG,WAAY,CAAC,EAAG,QAAS,CAAC,QAAS,4BAA6B,EAAG,WAAY,QAAS,EAAG,OAAQ,YAAa,CAAC,eAAgB,IAAK,CAAC,EAAG,eAAgB,CAAC,EAAG,QAAS,CAAC,sBAAuB,WAAY,EAAG,MAAO,WAAY,SAAU,EAAG,cAAe,CAAC,QAAS,aAAc,CAAC,EAAG,MAAO,WAAY,SAAU,EAAG,cAAe,CAAC,QAAS,QAAS,CAAC,QAAS,cAAe,gBAAiB,GAAI,EAAG,oBAAqB,CAAC,qBAAsB,GAAI,EAAG,eAAgB,CAAC,QAAS,qBAAsB,CAAC,cAAe,gBAAiB,CAAC,QAAS,gBAAiB,EAAG,aAAc,EAAG,oBAAqB,CAAC,EAAG,oBAAqB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,WAAY,SAAU,CAAC,QAAS,YAAa,CAAC,QAAS,cAAe,CAAC,EAAG,mBAAoB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,WAAY,QAAS,EAAG,QAAS,WAAY,CAAC,kBAAmB,GAAI,EAAG,SAAU,EAAG,WAAY,SAAU,CAAC,QAAS,QAAS,EAAG,aAAc,CAAC,EAAG,YAAa,iBAAkB,qBAAsB,EAAG,QAAS,CAAC,EAAG,cAAe,gBAAiB,EAAG,WAAY,SAAU,CAAC,QAAS,SAAU,EAAG,QAAS,CAAC,QAAS,cAAe,EAAG,QAAS,CAAC,QAAS,UAAW,CAAC,QAAS,eAAgB,CAAC,EAAG,wBAAyB,CAAC,gBAAiB,GAAI,EAAG,eAAgB,CAAC,QAAS,cAAe,OAAQ,MAAO,CAAC,EAAG,gBAAiB,EAAG,cAAe,CAAC,QAAS,QAAS,CAAC,QAAS,eAAgB,CAAC,EAAG,YAAa,iBAAkB,uBAAwBC,SAAU,SAA8Cnf,EAAIC,GAAgB,EAALD,IACpjE,KAAsB,EAAG,MAAO,EAAG,GACnC,KAAkB,sBAAsB,SAAgF+C,GAAU,OAAO9C,EAAIs+B,KAAKx7B,MAClJ,KAAc,EAAG,SACjB,KAAkB,EAAG2S,GAA4C,GAAI,GAAI,MAAO,GAChF,QACO,EAAL1V,IACF,KAAkB,kBAAmBC,EAAIgU,eAAzC,CAAyD,uBAAwB,KAAmB,EAAG,EAAGhU,EAAImV,uBAC9G,KAAiB,GACjB,KAAkB,UAAWnV,EAAIgU,eAAe8B,SAAhD,CAA0D,eAAgB9V,EAAIu+B,aAC7Enf,WAAY,CAAC,IAAoB,IAAgB,IAAgC,IAAgB,IAAgB,IAAa,IAA2B,IAAyB,KAA+B,IAA0B,IAAiC,IAA8B,IAA8B,IAAsB,IAAsB,IAA8BC,MAAO,CAAC,IAAkB,KAAuBC,OAAQ,CAAC,yzDAA0zDC,gBAAiB,IAChyE,GAA4BC,eAAiB,iBAAM,CAC/C,CAAEZ,KAAM,GAA6B4f,WAAY,CAAC,CAAE5f,KAAM,KAAY,CAAEA,KAAM,OAC9E,CAAEA,KAAM,IACR,CAAEA,KAAM,OAEZ,YAAW,CACP,cACA,YAAW,cAAe8F,SAC3B,GAA4Ba,UAAW,sBAAiB,GAC3D,YAAW,CACP,cACA,YAAW,cAAeD,SAC3B,GAA4BC,UAAW,0BAAqB,GAC/D,YAAW,CACP,cACA,YAAW,cAAeb,SAC3B,GAA4Ba,UAAW,iBAAY,GACtD,GAA8B,YAAW,CAAE,YAAQ,EAAG,eAAa,YAAQ,EAAG,eAC1E,YAAW,oBAAqB,CAAC,GAC7B,GACA,OACL,IAGH,IAAI,cACA,WAAY1H,GAAYA,wBACpBthB,KAAKshB,YAAcA,EACnBthB,KAAKkiC,eAAiB,IAAI,IAC1BliC,KAAK2R,aAAe,GACpB3R,KAAKgW,kBAAoB,GAL7B,wDAOU,WACNhW,KAAKshB,YAAY2I,SAASC,mBAAmBH,QAAQ7pB,WAAUmjB,YAC3DrjB,EAAKoO,aAAeiV,EAAK+G,cAAchc,gBAE3CpO,KAAKwV,qBAXT,kCAcIxV,KAAK2R,aAAajR,KAAK,CAAEgE,KAAM,GAAInE,OAAQ,OAd/C,mCAgBamE,GACT1E,KAAK2R,aAAe3R,KAAK2R,aAAa6R,QAAOsN,YAACA,OAAIA,EAAEpsB,OAASA,KAC7D1E,KAAKwV,qBAlBT,yCAoBkB,WAERqb,EADmB7wB,KAAK2R,aAAa6X,QAAO,SAAC2Y,EAAK/Y,GAAN,OAAgB+Y,EAAM/Y,EAAM7oB,OAAOZ,SAAQ,GAEvFK,KAAK2R,aAAayS,KAAI0M,YAACA,OAAIA,EAAEvwB,OAAO6jB,KAAI+L,YAACA,OAAIA,EAAEzrB,WAC/C,CAAC,CAzBgB,wBA0BvB1E,KAAKua,SAAW,SAAAoiB,wBAAA,CAAwB9L,GAAQzM,KAAI7jB,YAAMA,MAAI,CAAGoI,GAAIpI,EAAO8Z,KAAK,KAAM9Z,aACvFP,KAAKua,SAAS2R,SAAQiK,YACbn2B,EAAKgW,kBAAkBmgB,EAAQxtB,MAChC3I,EAAKgW,kBAAkBmgB,EAAQxtB,IAAM,CACjC0oB,aAAc8E,EAAQ51B,OACtB0U,SAAQA,EACR1G,MAAOvO,EAAKoiC,gBAAgBjM,EAAQxtB,GAAI,QAAS,GACjDyN,IAAKpW,EAAKoiC,gBAAgBjM,EAAQxtB,GAAI,MAAO,IAC7CiO,MAAO5W,EAAKoiC,gBAAgBjM,EAAQxtB,GAAI,QAAS,QAI7D3I,KAAKka,iBArCT,gCAuCUvT,EAAOwvB,GACb,OAAOA,EAAQ51B,OAAO8Z,KAAK,OAxC/B,kCA0CYqH,EAAO2gB,GACf3gB,EAAMxO,iBACNwO,EAAM4gB,kBACND,EAA0B1P,UA7C9B,qCA+Cc,WACJ4P,EAAmBviC,KAAKua,SAAS6J,KAAI+L,YAACA,OAAInwB,EAAKgW,kBAAkBma,EAAExnB,OAAK6a,QAAO2M,YAACA,OAAIA,EAAElb,WAC5FjV,KAAKkiC,eAAe7iB,KAAK,CACrBwR,OAAQ7wB,KAAK2R,aAAayS,KAAImN,YAAEA,MAAI,CAAG7sB,KAAM6sB,EAAG7sB,KAAMnE,OAAQgxB,EAAGhxB,OAAO6jB,KAAI+L,YAACA,OAAIA,EAAEzrB,YACnF6V,SAAUgoB,MAnDlB,sCAsDgBzM,EAAW0M,EAAMlhC,GAC7B,MAxDuB,wBAwDhBw0B,EACD91B,KAAKgW,kBAAwC,oBAAEwsB,GAC/ClhC,MAzDV,KA4DJ,GAAiC4gB,UAAO,SAAkDC,GAAK,OAAO,IAAKA,GAAK,IAAkC,KAAyB,OAC3K,GAAiCC,UAAO,KAAyB,CAAEC,KAAM,GAAkCC,UAAW,CAAC,CAAC,kCAAmC6X,QAAS,CAAE+H,eAAgB,kBAAoB1f,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,QAAS,gBAAiB,EAAG,QAAS,WAAY,CAAC,EAAG,MAAO,sBAAuB,SAAU,EAAG,SAAU,CAAC,QAAS,QAAS,CAAC,EAAG,oBAAqB,CAAC,EAAG,SAAU,CAAC,EAAG,QAAS,CAAC,EAAG,WAAY,EAAG,QAAS,UAAW,gBAAiB,CAAC,EAAG,iBAAkB,CAAC,EAAG,QAAS,CAAC,cAAe,YAAa,WAAY,GAAI,OAAQ,OAAQ,WAAY,GAAI,EAAG,UAAW,gBAAiB,iBAAkB,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,YAAa,WAAY,iBAAkB,CAAC,4BAA6B,IAAK,CAAC,EAAG,gBAAiB,CAAC,EAAG,MAAO,WAAY,sBAAuB,EAAG,QAAS,SAAU,CAAC,QAAS,SAAU,CAAC,WAAY,GAAI,OAAQ,OAAQ,EAAG,UAAW,cAAe,SAAU,iBAAkB,CAAC,WAAY,GAAI,EAAG,UAAW,eAAgB,iBAAkB,CAAC,WAAY,GAAI,OAAQ,SAAU,MAAO,IAAK,OAAQ,IAAK,EAAG,UAAW,gBAAiB,UAAW,CAAC,OAAQ,WAAY,cAAe,GAAI,EAAG,UAAW,SAAU,kBAAmBC,SAAU,SAAmDnf,EAAIC,GAAgB,EAALD,IACruC,KAAkB,EAAGkW,GAAiD,GAAI,GAAI,MAAO,GACrF,KAAsB,EAAG,SAAU,GACnC,KAAkB,SAAS,WAA+E,OAAOjW,EAAImS,eACrH,KAAiB,EAAG,WAAY,GAChC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,MAAO,GAChC,KAAsB,EAAG,QAAS,GAClC,KAAsB,EAAG,SACzB,KAAsB,EAAG,MACzB,KAAkB,EAAGmE,GAAgD,EAAG,EAAG,KAAM,GACjF,KAAkB,GAAIC,GAAiD,EAAG,EAAG,KAAM,GACnF,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,MAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,OACA,OACA,KAAkB,GAAIM,GAAiD,GAAI,GAAI,KAAM,GACrF,OACA,QACO,EAAL9W,IACF,KAAkB,UAAWC,EAAIkO,cACjC,KAAiB,GACjB,KAA0B,IAAK,KAAmB,EAAG,EAAG,sBAAuB,MAC/E,KAAiB,GACjB,KAAkB,OAAQ,EAAIlO,EAAI8W,SAAS5a,QAC3C,KAAiB,GACjB,KAAkB,OAAQ,EAAI8D,EAAI8W,SAAS5a,QAC3C,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,gBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,kBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,0BACpD,KAAiB,GACjB,KAAkB,UAAW8D,EAAI8W,SAAjC,CAA2C,eAAgB9W,EAAIu+B,aAC9Dnf,WAAY,WAAc,MAAO,CAAC,IAAgB,IAAyB,IAAa,IAAgC,IAAiB,KAAkC,IAA6B,IAAiB,IAA0B,IAAwB,IAAgB,GAA2B,IAA0B,IAA+B,IAA4B,IAAqC,MAAwBC,MAAO,WAAc,MAAO,CAAC,MAA0BC,OAAQ,CAAC,8UACjhB,GAAiCE,eAAiB,iBAAM,CACpD,CAAEZ,KAAM,OAEZ,YAAW,CACP,SAAAkY,EAAA,GACA,YAAW,cAAepS,SAC3B,GAAiCa,UAAW,sBAAiB,GAChE,GAAmC,YAAW,CAAE,YAAW,oBAAqB,CAAC,OAC9E,IAEH,IAAMyZ,GAAoC,CACtCrI,QAAS,IACTsI,YAAa,cAAW,kBAAM,MAC9BC,OAAMA,GAEN,cACA,WAAYzZ,GAAeA,wBACvBlpB,KAAKkpB,eAAiBA,EACtBlpB,KAAK+a,UAAY,GACjB/a,KAAK24B,YACL34B,KAAKsrB,MAAQ,GACbtrB,KAAK4iC,cACL5iC,KAAK6a,gBAPT,8DASiBgoB,GACb7iC,KAAK8iC,WAAaD,IAVtB,wCAYkBA,GACd7iC,KAAK+iC,UAAYF,IAbrB,uCAeiBG,GACbhjC,KAAK24B,SAAWqK,EAChBhjC,KAAKkpB,eAAewC,iBAjBxB,iCAmBWuX,GACPjjC,KAAKib,QAAUgoB,GAAO,KApB1B,8BAuBIjjC,KAAKkjC,SAASC,cAAcxQ,UAvBhC,mCAyBarB,GACJA,EAAOxW,SACR9a,KAAKib,QAAUjb,KAAKib,QAAQuI,QAAOqH,YAACA,OAAIA,EAAEnmB,OAAS4sB,EAAO5sB,QAC1D1E,KAAK8iC,WAAW9iC,KAAKib,YA5B7B,gCA+BUyG,GACN,OAAQA,EAAMuG,KACV,IAAK,IACL,IAAK,QACDjoB,KAAKojC,iBACL1hB,EAAMxO,iBACN,MACJ,IAAK,YACGlT,KAAK6a,cACL7a,KAAKqjC,mBACLrjC,KAAK6a,iBAEe,KAAf7a,KAAKsrB,QACVtrB,KAAK6a,iBAET,MACJ,QACI7a,KAAK6a,mBAhDjB,mCAoDI7a,KAAK4iC,cACL5iC,KAAKojC,mBArDT,uCAwDIpjC,KAAKib,QAAU,OAAAib,SAAA,8BAAWl2B,KAAKib,SAAhB,mBAA4Bjb,KAAKsjC,sBAAsBtjC,KAAKsrB,UAC3EtrB,KAAKsrB,MAAQ,GACbtrB,KAAK8iC,WAAW9iC,KAAKib,WA1DzB,4CA4DsBqQ,GAClB,OAAOA,EACFiY,MAAM,SACNnf,KAAIof,YAACA,OAAIA,EAAEC,UACXjgB,QAAOggB,YAACA,MAAU,KAANA,KACZpf,KAAIof,YAACA,MAAI,CAAG9+B,KAAM8+B,EAAG1oB,QAAOA,QAjErC,yCAoES9a,KAAKib,QAAQjb,KAAKib,QAAQtb,OAAS,GAAGmb,SACvC9a,KAAKib,QAAUjb,KAAKib,QAAQkZ,MAAM,EAAGn0B,KAAKib,QAAQtb,OAAS,QArEnE,KAyEJ,GAA0BuiB,UAAO,SAA2CC,GAAK,OAAO,IAAKA,GAAK,IAA2B,KAAyB,OACtJ,GAA0BC,UAAO,KAAyB,CAAEC,KAAM,GAA2BC,UAAW,CAAC,CAAC,2BAA4B2K,UAAW,SAAyCzpB,EAAIC,GAGtL,IAAIilB,EAHkM,EAALllB,GACjM,KAAyBgX,IAAKA,GACvB,EAALhX,GAEF,KAAsBklB,EAAK,UAA0BjlB,EAAIy/B,SAAWxa,EAAGE,QACtEC,OAAQ,CAAE9N,UAAW,aAAewH,SAAU,CAAC,KAA0B,CAACkgB,MAAsCjgB,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,EAAG,gBAAiB,EAAG,SAAU,CAAC,QAAS,QAAS,EAAG,QAAS,CAAC,EAAG,UAAW,WAAY,QAAS,QAAS,OAAQ,iBAAkB,CAAC,WAAY,IAAK,CAAC,EAAG,SAAU,CAAC,EAAG,OAAQ,WAAY,SAAU,YAAa,YAAa,EAAG,QAAS,WAAY,CAAC,EAAG,OAAQ,YAAa,cAAeC,SAAU,SAA4Cnf,EAAIC,GAAO,GAAS,EAALD,EAAQ,CAC9f,IAAMmW,EAAM,OACZ,KAAsB,EAAG,MAAO,GAChC,KAAkB,SAAS,WAAmI,OAA9D,KAAqBA,GAAkB,KAAmB,GAAegZ,WACzK,KAAkB,EAAG3X,GAA0C,EAAG,EAAG,MAAO,GAC5E,KAAsB,EAAG,WAAY,EAAG,GACxC,KAAkB,SAAS,SAAsEzU,GAAU,OAAO9C,EAAIigC,UAAUn9B,KAAhI,CAA4I,SAAS,WAA0E,OAAO9C,EAAIm/B,gBAA1O,CAAgQ,QAAQ,WAAyE,OAAOn/B,EAAIkgC,eAA5V,CAA6W,iBAAiB,SAA8Ep9B,GAAU,OAAO9C,EAAI6nB,MAAQ/kB,KACze,OACA,OACO,EAAL/C,IACF,KAAmB,QAASC,EAAIm/B,YAChC,KAAiB,GACjB,KAAkB,OAAQ,EAAIn/B,EAAIwX,QAAQtb,QAC1C,KAAiB,GACjB,KAAkB,UAAW8D,EAAI6nB,MAAjC,CAAwC,WAAY7nB,EAAIk1B,YACvD9V,WAAY,CAAC,IAAa,KAAkC,IAA6B,IAAwB,IAAgB,IAAgB,KAAuBE,OAAQ,CAAC,00BAC1L,GAA0BE,eAAiB,iBAAM,CAC7C,CAAEZ,KAAM,OAEZ,YAAW,CACP,cACA,YAAW,cAAe8F,SAC3B,GAA0Ba,UAAW,iBAAY,GACpD,YAAW,CACP,aAAU,WAAY,CAAEC,QAAOA,IAC/B,YAAW,cAAe,MAC3B,GAA0BD,UAAW,gBAAW,GACnD,GAA4B,YAAW,CAAE,YAAW,oBAAqB,CAAC,OACvE,IASH,IAAI,cACA,WAAY9F,EAAcgG,EAAgB0a,GAAcA,mCACpD5jC,KAAKkjB,aAAeA,EACpBljB,KAAKkpB,eAAiBA,EACtBlpB,KAAK4jC,cAAgBA,EACrB5jC,KAAKwI,OAAS,GACdxI,KAAK2c,WACL3c,KAAK6jC,OAAS,IAAI,IAClB7jC,KAAKwc,uBAAyB,SAACsnB,EAAM/B,GACjC,GAAIA,IAAS/hC,EAAK+jC,YACd,OAAM,EAEV,GAAIhC,IAAS/hC,EAAKgkC,gBACd,OAAM,EAEV,IAAMC,EAAYjkC,EAAK+jC,YAAYG,QAAQf,cACrCgB,EAAgBL,EAAKM,cAAcF,QAAQf,cAC3CkB,EAActC,EAAKmC,QAAQf,cAC3B5pB,EAAW8qB,EAAYC,eAAiBD,EAAYC,cAAc/qB,SAClEgrB,EAAYC,GAAUjrB,EAAUvZ,EAAKP,OAASwkC,EAAYE,GAC1DM,EAAYD,GAAUjrB,EAAU8qB,GAiBtC,OAhBKrkC,EAAKP,SACNO,EAAK0kC,YAAcH,EACnBvkC,EAAKP,OAASqkC,EAAKM,cACnBH,EAAUU,MAAMlG,MAAQ0F,EAAcS,YAAc,KACpDX,EAAUU,MAAMjG,OAASyF,EAAcU,aAAe,KAClDV,EAAcG,eACdH,EAAcG,cAAcQ,YAAYX,IAGhDnkC,EAAK+kC,YAAcN,EACnBzkC,EAAKiI,OAAS85B,EACdkC,EAAUU,MAAMK,QAAU,GACtBX,EAAYC,eACZD,EAAYC,cAAcW,aAAahB,EAAWQ,EAAYF,EAAYF,EAAYa,YAAcb,GAExGrkC,EAAK+jC,YAAYoB,MAAMrB,EAAMA,EAAKI,QAAQf,cAAciC,WAAYtB,EAAKI,QAAQf,cAAckC,eApCvG,+DAyCI,IAAMpB,EAAYjkC,KAAK+jC,YAAYG,QAAQf,cAC3Cc,EAAUU,MAAMK,QAAU,OACtBf,EAAUK,eACVL,EAAUK,cAAcQ,YAAYb,KA5C5C,qCA+Cc,WACVjkC,KAAKkjB,aACAuS,cAAc,IAA4B,CAC3CC,KAAM,OAELx1B,WAAUuB,YACPA,GAAUA,EAAO9B,SACjBK,EAAKwI,OAAS,OAAA0tB,SAAA,CAAOl2B,EAAKwI,OAAOgwB,OAAO/2B,GAAS,MAC5CzB,EAAKyI,gBACNzI,EAAKyI,cAAgBhH,EAAO,IAEhCzB,EAAKslC,gBAAgBtlC,EAAKwI,OAAQxI,EAAKyI,eACvCzI,EAAKkpB,eAAewC,qBA3DhC,oCA+DczG,GACVjlB,KAAKyI,cAAgBwc,EACrBjlB,KAAKslC,gBAAgBtlC,KAAKwI,OAAQyc,KAjEtC,iCAmEWA,GACP,QAASjlB,KAAKyI,eAAiBzI,KAAKyI,cAAcE,KAAOsc,EAAMtc,KApEnE,mCAsEasc,GACTjlB,KAAKkjB,aACAuS,cAAc,IAA6B,CAC5CC,KAAM,KACNa,UAASA,EACTZ,OAAQ,CAAE1Q,WAET/kB,cA7ET,kCA+EY+kB,GACRjlB,KAAKwI,OAASxI,KAAKwI,OAAOgb,QAAO4X,YAACA,OAAIA,EAAEzyB,KAAOsc,EAAMtc,MACjD3I,KAAKyI,eAAiBzI,KAAKyI,cAAcE,KAAOsc,EAAMtc,KACtD3I,KAAKyI,cAAgBzI,KAAKwI,OAAO7I,OAAS,EAAIK,KAAKwI,OAAO,WAE9DxI,KAAKslC,gBAAgBtlC,KAAKwI,OAAQxI,KAAKyI,iBApF3C,sCAsFgBD,EAAQC,GACpBzI,KAAK6jC,OAAOxkB,KAAK,CACbwM,SAAUrjB,EAAO4b,KAAIgX,YAACA,OAAIA,EAAEzyB,MAC5BmjB,gBAAiBrjB,GAAiBA,EAAcE,OAzFxD,gCA4FU48B,GAAEA,WACFC,EAAQxlC,KAAKylC,yBAAyBF,EAAE7jB,OAC9C1hB,KAAK0lC,UAAUC,OAAOzZ,SAAQ0Z,sBAkGAA,EAAUnN,EAAGoN,GAAEA,MACZD,EAAS1B,QAAQf,cAAc2C,wBAA5DC,EADyCF,EAC3C,IAAOG,EADoCH,EACtC,OAAUI,EAD4BJ,EAC9B,KAAQK,EADsBL,EACxB,MACzB,OAAOA,GAAKE,GAAOF,GAAKG,GAAUvN,GAAKwN,GAAQxN,GAAKyN,GApGlBN,CACOA,EAAUJ,EAAM/M,EAAG+M,EAAMK,KACtD7lC,EAAKgkC,gBAAkB4B,QAhGnC,wCAsGI,GAAK5lC,KAAKiI,QAAWjI,KAAKP,OAA1B,CAGA,IAAMwkC,EAAYjkC,KAAK+jC,YAAYG,QAAQf,cAErCtV,EAASoW,EAAUK,cACzBL,EAAUU,MAAMK,QAAU,OAC1BnX,EAAOiX,YAAYb,GACnBpW,EAAOsY,YAAYlC,GACnBpW,EAAOoX,aAAajlC,KAAKP,OAAOykC,QAAQf,cAAetV,EAAOtU,SAASvZ,KAAK0kC,cAC5E1kC,KAAKiI,OAAS,KACdjI,KAAKP,OAAS,KACVO,KAAK0kC,cAAgB1kC,KAAK+kC,cAC1B,YAAgB/kC,KAAKwI,OAAQxI,KAAK0kC,YAAa1kC,KAAK+kC,aACpD/kC,KAAKslC,gBAAgBtlC,KAAKwI,OAAQxI,KAAKyI,mBApH/C,+CAwHyBiZ,GAErB,IAAM8jB,EAmEd,SAAwB9jB,GACpB,OAAOA,EAAMW,KAAKiX,WAAW,SADjC,CAnEqC5X,GAASA,EAAM0kB,QAAQ,IAAM1kB,EAAM2kB,eAAe,GAAK3kB,EAC9E4kB,EAAiBtmC,KAAK4jC,cAAc2C,4BAC1C,MAAO,CACH9N,EAAG+M,EAAMgB,MAAQF,EAAeL,KAChCJ,EAAGL,EAAMiB,MAAQH,EAAeP,SA9HxC,KAsLJ,SAASvB,GAAUpd,EAAYsZ,GAC3B,OAAKtZ,EAGE5mB,MAAMwoB,UAAU5nB,QAAQslC,KAAKtf,EAAYsZ,IAFpC,EAtDhB,GAAuBxe,UAAO,SAAwCC,GAAK,OAAO,IAAKA,GAAK,IAAwB,KAAyB,MAAsB,KAAyB,KAA2B,KAAyB,OAChP,GAAuBC,UAAO,KAAyB,CAAEC,KAAM,GAAwBC,UAAW,CAAC,CAAC,uBAAwB2K,UAAW,SAAsCzpB,EAAIC,GAIzK,IAAIilB,EAJqL,EAALllB,IACpL,KAAmB0X,IAAKA,EAAO,KAC/B,KAAmBC,IAAKA,EAAO,MACxB,EAAL3X,IAEF,KAAsBklB,EAAK,UAA0BjlB,EAAIiiC,UAAYhd,EAAGE,OACxE,KAAsBF,EAAK,UAA0BjlB,EAAIsgC,YAAcrb,EAAGE,SACzE+d,SAAU,EAAGC,aAAc,SAA6CpjC,EAAIC,GAAgB,EAALD,GACxF,KAAmB,UAAWC,EAAIkZ,UACjCkM,OAAQ,CAAErgB,OAAQ,SAAUmU,QAAS,UAAWlU,cAAe,iBAAmB0xB,QAAS,CAAE0J,OAAQ,UAAYrhB,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,QAAS,OAAQ,EAAG,OAAQ,YAAa,CAAC,cAAe,IAAK,CAAC,YAAa,IAAK,CAAC,EAAG,QAAS,CAAC,EAAG,YAAa,CAAC,EAAG,kBAAmB,CAAC,EAAG,MAAO,QAAS,EAAG,QAAS,CAAC,QAAS,cAAe,EAAG,QAAS,CAAC,EAAG,cAAe,CAAC,EAAG,oBAAqB,CAAC,QAAS,cAAe,EAAG,oBAAqB,CAAC,EAAG,MAAO,SAAU,CAAC,EAAG,eAAgB,CAAC,QAAS,QAAS,OAAQ,OAAQ,CAAC,EAAG,eAAgB,CAAC,EAAG,MAAO,EAAG,SAAU,CAAC,QAAS,cAAe,CAAC,EAAG,iBAAkB,WAAY,CAAC,QAAS,+CAAgD,EAAG,QAAS,QAAS,EAAG,oBAAqB,CAAC,QAAS,QAAS,OAAQ,OAAQ,CAAC,EAAG,iBAAkB,MAAO,WAAY,SAAU,YAAa,EAAG,QAAS,SAAU,CAAC,mBAAoB,GAAI,EAAG,cAAe,CAAC,MAAO,IAAK,CAAC,cAAe,GAAI,EAAG,sBAAuB,4BAA6B,sBAAuB,CAAC,KAAM,IAAK,CAAC,cAAe,GAAI,EAAG,sBAAuB,4BAA6B,qBAAsB,EAAG,QAAS,WAAY,CAAC,UAAW,GAAI,EAAG,gBAAiB,CAAC,qBAAsB,GAAI,WAAY,IAAK,EAAG,cAAe,EAAG,SAAU,CAAC,EAAG,OAAQ,CAAC,cAAe,gBAAiB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,SAAU,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,WAAY,SAAU,CAAC,EAAG,oBAAqB,CAAC,OAAQ,SAAU,kBAAmB,GAAI,EAAG,eAAgB,EAAG,WAAY,UAAWC,SAAU,SAAyCnf,EAAIC,GAIxiD,GAJwjD,EAALD,IACjjD,KAAkB,EAAGkY,GAAuC,EAAG,EAAG,MAAO,GACzE,KAAkB,EAAGM,GAA+C,EAAG,EAAG,cAAe,KAAM,EAAG,MAClG,KAAkB,EAAGU,GAA+C,EAAG,EAAG,cAAe,KAAM,EAAG,OAC3F,EAALlZ,EAAQ,CACV,IAAM4Z,EAAM,KAAmB,GAC/B,KAAkB,QAAS3Z,EAAIkZ,QAA/B,CAAwC,WAAYS,KACnDyF,WAAY,CAAC,IAAa,IAAyB,KAA+B,IAAyB,IAAyB,IAAoB,IAAgB,IAA0B,IAAgB,IAAiC,IAA8B,KAA+BC,MAAO,CAAC,IAAyB,IAAsB,MAA2BC,OAAQ,CAAC,86DAA+6DC,gBAAiB,IACp1E,GAAuBC,eAAiB,iBAAM,CAC1C,CAAEZ,KAAM,MACR,CAAEA,KAAM,KACR,CAAEA,KAAM,OAEZ,YAAW,CACP,cACA,YAAW,cAAe7hB,QAC3B,GAAuBwoB,UAAW,cAAS,GAC9C,YAAW,CACP,cACA,YAAW,cAAeb,SAC3B,GAAuBa,UAAW,qBAAgB,GACrD,YAAW,CACP,YAAY,iBACZ,cACA,YAAW,cAAeb,SAC3B,GAAuBa,UAAW,eAAU,GAC/C,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAAuBa,UAAW,cAAS,GAC9C,YAAW,CACP,aAAU,MAAO,CAAEC,QAAOA,EAAQ4d,KAAM,MACxC,YAAW,cAAe,MAC3B,GAAuB7d,UAAW,iBAAY,GACjD,YAAW,CACP,aAAU,KAAM,CAAEC,QAAOA,EAAQ4d,KAAM,MACvC,YAAW,cAAe,MAC3B,GAAuB7d,UAAW,mBAAc,GACnD,GAAyB,YAAW,CAAE,YAAW,oBAAqB,CAAC,KAC/D,IACA,OACL,IAgBH,IAAI,cACA,aAAa,wBACThpB,KAAK8mC,oBAFT,wDAIU,IACFC,EADE,OAEAhb,EAAqB/rB,KAAKgnC,cAAchb,aAAa3B,MAAMlI,YAACA,OAAKA,EAAEF,eAAiBjiB,EAAKinC,kBAI/F,GAHAjnC,KAAK0E,KAAkH,QAA1GqiC,EAAKhb,eAAwEA,EAAmBrnB,gBAAkBqiC,EAAgBA,EAAK,GACpJ/mC,KAAK6K,KAAO7K,KAAKgnC,cAAcn8B,KAC/B7K,KAAK+c,iBAAmB,IAAI,IAAU,IAClC/c,KAAKoG,aAAc,CACnB,IADmB,EACb4wB,EAAwBjL,GAAsBA,EAAmB3lB,cAAiB,GADrE,6BAEIpG,KAAKoG,cAFT,IAEnB,2BAA0C,CAAC,IAAhCgmB,EAA+B,QAChCnE,EAAMmE,EAAS1nB,KACfpD,EAA0B,iBAAlB8qB,EAAS/J,KACjB2U,EAAqB/O,GACrBjoB,KAAKgnC,cAAc5gC,aAAa6hB,GACtCjoB,KAAK+c,iBAAiBgT,WAAW3D,EAAS1nB,KAAM,IAAI,IAAYpD,KAPjD,kCAV3B,+BAsBI,IAAMG,EAAS,aAA0B,CACrC8qB,aAAcvsB,KAAKgnC,cACnB/kB,aAAcjiB,KAAKinC,eACnBza,cAAe,CACX3hB,KAAM7K,KAAK6K,KACXnG,KAAM1E,KAAK0E,KACX0B,aAAcpG,KAAK+c,iBAAiBzb,OAExCmrB,kBAAmBzsB,KAAKoG,aACxBsmB,mBAAoB,CAChBzK,aAAcjiB,KAAKinC,eACnBviC,KAAM,MAGd1E,KAAK4yB,YAAYnxB,KApCrB,+BAuCIzB,KAAK4yB,gBAvCT,iCAyCWrI,GACFvqB,KAAK8mC,kBAAqB9mC,KAAKgnC,cAAcn8B,OAC9C7K,KAAK6K,KAAO,SAAA4f,gBAAA,CAAgBF,EAAW,UA3C/C,KA+CJ,GAAmCrI,UAAO,SAAoDC,GAAK,OAAO,IAAKA,GAAK,KACpH,GAAmCC,UAAO,KAAyB,CAAEC,KAAM,GAAoCC,UAAW,CAAC,CAAC,qCAAsCE,MAAO,GAAIC,KAAM,EAAGC,OAAQ,CAAC,CAAC,iBAAkB,IAAK,CAAC,MAAO,OAAQ,EAAG,SAAU,CAAC,KAAM,OAAQ,OAAQ,OAAQ,WAAY,GAAI,EAAG,UAAW,gBAAiB,SAAU,CAAC,YAAa,WAAY,CAAC,MAAO,OAAQ,EAAG,SAAU,CAAC,KAAM,OAAQ,OAAQ,OAAQ,WAAY,GAAI,UAAW,cAAe,EAAG,UAAW,iBAAkB,CAAC,YAAa,WAAY,CAAC,EAAG,QAAS,CAAC,mBAAoB,IAAK,CAAC,EAAG,QAAS,WAAY,CAAC,aAAc,gBAAiB,EAAG,wBAAyB,cAAe,WAAY,EAAG,QAAS,CAAC,aAAc,gBAAiB,EAAG,wBAAyB,cAAe,YAAa,CAAC,OAAQ,SAAU,EAAG,MAAO,EAAG,SAAU,CAAC,OAAQ,SAAU,EAAG,MAAO,cAAe,EAAG,WAAY,UAAWC,SAAU,SAAqDnf,EAAIC,GAAgB,EAALD,IACv7B,KAAkB,EAAGoZ,GAA2D,EAAG,EAAG,cAAe,GACrG,KAAsB,EAAG,iBAAkB,GAC3C,KAAc,EAAG,aACjB,KAAsB,EAAG,QAAS,EAAG,GACrC,KAAkB,iBAAiB,SAAoFrW,GAAU,OAAO9C,EAAIiB,KAAO6B,IAAnJ,CAA8J,SAAS,SAA4EA,GAAU,OAAO9C,EAAIkI,WAAWpF,EAAO0B,OAAO3G,UACjS,OACA,OACA,KAAsB,EAAG,iBAAkB,GAC3C,KAAc,EAAG,aACjB,KAAsB,EAAG,QAAS,EAAG,GACrC,KAAkB,iBAAiB,SAAoFiF,GAAU,OAAO9C,EAAIoH,KAAOtE,KACnJ,OACA,OACA,KAAkB,EAAG0W,GAAuD,EAAG,EAAG,UAAW,GAC7F,KAAkB,GAAIC,GAA4D,EAAG,EAAG,cAAe,IAChG,EAAL1Z,IACF,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,EAAG,wBACpD,KAAiB,GACjB,KAAkB,UAAWC,EAAIiB,MACjC,KAAiB,GACjB,KAAkB,QAAS,KAAmB,EAAG,EAAG,gBACpD,KAAiB,GACjB,KAAkB,UAAWjB,EAAIoH,MACjC,KAAiB,GACjB,KAAkB,OAAQpH,EAAI2C,aAAazG,UAC1CkjB,WAAY,CAAC,IAA6B,KAA2B,KAAkC,IAA6B,IAA0B,IAAwB,IAAgB,IAAyB,IAAa,IAA+B,IAAiB,IAAgB,KAAqCC,MAAO,CAAC,IAAsB,MAA2BC,OAAQ,CAAC,IAAKC,gBAAiB,IAElb,IAAI,cACA,WAAYkG,EAAgBhG,GAAaA,wBACrCljB,KAAKkpB,eAAiBA,EACtBlpB,KAAKkjB,aAAeA,EACpBljB,KAAKknC,YAAc,IAAI,IACvBlnC,KAAKmnC,gBAAkB,IAAI,IAC3BnnC,KAAKof,sBAAwB,IAAI,IACjCpf,KAAK+R,oBAAsB,IAAI,IAC/B/R,KAAKgS,mBAAqB,GAR9B,wDAUU,WACNhS,KAAKonC,iBAAmBpnC,KAAK+d,UAAUyG,aAAatkB,WAAU,kBAAMF,EAAKkpB,eAAewC,oBAX5F,kCAaY9D,GACJ,WAAYA,GAAaA,EAAgB,OAAEE,eAC3C9nB,KAAK20B,YAAc,aAAmB30B,KAAK4pB,WAfnD,oCAmBQ5pB,KAAKonC,kBACLpnC,KAAKonC,iBAAiBtkC,gBApB9B,yCAuBmB6D,GACf,IAAMskB,EAAUjrB,KAAK+d,UAAUC,GAAGrX,GAAOb,IAAI,CAAC,kBAC9C,GAAImlB,GAAWjrB,KAAKyd,cAAe,CAC/B,IAAMiQ,EAAQ1tB,KAAKyd,cAAc4M,MAAMlI,YAACA,OAAKA,EAAExZ,KAAOsiB,EAAQ3pB,SAC9D,OAAOosB,EAAQA,EAAMhpB,KAAO,GAEhC,MAAO,KA7BX,uCAgCI,QAAS1E,KAAKua,UAAYva,KAAKgS,mBAAmBrS,SAAWK,KAAKua,SAAS5a,SAhC/E,oCAkCcm2B,EAAWpU,GACrB1hB,KAAKknC,YAAY7nB,KAAK8I,OAAOpZ,OAAO,CAAE+mB,aAAapU,IACnD,IAAM/a,EAAQ3G,KAAKua,SAASqQ,WAAWuF,YAACA,OAAKA,EAAExnB,KAAOmtB,KACtD91B,KAAK+d,UAAUC,GAAGrX,GAAOib,gBArC7B,wCAwCQ5hB,KAAKqnC,iBACLrnC,KAAKgS,mBAAqB,GAG1BhS,KAAKgS,mBAAqBhS,KAAKua,SAAS6J,KAAK+L,YAACA,OAAKA,EAAExnB,MAEzD3I,KAAKmnC,gBAAgB9nB,KAAKrf,KAAKgS,sBA9CnC,0CAgDoB8jB,GAChB,IAAMnvB,EAAQ3G,KAAKgS,mBAAmB5Q,QAAQ00B,IACzC,EAAInvB,EACL3G,KAAKgS,mBAAmB3Q,OAAOsF,EAAO,GAGtC3G,KAAKgS,mBAAmBtR,KAAKo1B,GAEjC91B,KAAKmnC,gBAAgB9nB,KAAKrf,KAAKgS,sBAxDnC,sCA0DgBmf,GAAcA,IACtB4V,EADsB5V,OAEpB/H,EAAQppB,KAAK2R,aAAa0Y,MAAMyG,YAACA,OAAKA,EAAEnoB,KAAOwoB,KACrD,GAAI/H,EAEA,OADoJ,QAA/H2d,EAAK3d,eAA8CA,EAAM4C,aAAa3B,MAAMlI,YAACA,OAAKA,EAAEF,eAAiBjiB,EAAKinC,6BAA6BF,EAAgBA,EAAK3d,EAAM4C,aAAa,IACjLtnB,OA/D3B,iCAkEW4sB,GAAOA,IACVyV,EADUzV,OAGd,OADuG,QAAlFyV,EAAKzV,EAAOtF,aAAa3B,MAAMlI,YAACA,OAAKA,EAAEF,eAAiBjiB,EAAKinC,6BAA6BF,EAAgBA,EAAKzV,EAAOtF,aAAa,IACrItnB,OArEvB,yCAuEmBiC,GAAMA,WACrB,GAAI3G,KAAK4pB,OAAQ,CACb,IAAM0d,EAAoBtnC,KAAKunC,iBAAiB5gC,GAC1C6gC,EAAuBxnC,KAAKua,SAAS5T,GAAOguB,YAAYvQ,KAAKgR,YAAEA,OAAKA,EAAGzsB,MAC7E,OAAO2+B,EACF9jB,QAAQiV,YAACA,OAAM+O,EAAqB3N,SAASpB,MAC7CrU,KAAKzb,YAAEA,OAAK3I,EAAK20B,YAAYtK,MAAM+K,YAAEA,OAAKA,EAAGzsB,KAAOA,QACpD6a,OAAO,EAAA+M,oBAGZ,MAAO,KAjFf,0CAoFoB5pB,GAChB,IAAMwvB,EAAUn2B,KAAKua,SAAS5T,GAG9B,OADqB,mBADK3G,KAAKunC,iBAAiB5gC,IACJ6c,QAAQiV,YAACA,OAAKtC,EAAQxB,YAAYvQ,KAAKgR,YAAEA,OAAKA,EAAGzsB,MAAIkxB,SAASpB,MAErGrU,KAAKzb,YAAEA,OAAKwtB,EAAQxB,YAAYtK,MAAM+K,YAAEA,OAAKA,EAAGzsB,KAAOA,QACvD6a,OAAO,EAAA+M,sBA1FhB,uCA4FiB5pB,EAAO8oB,GACpB,IAAMgY,EAAYznC,KAAK+d,UAAUC,GAAGrX,GAC9B+gC,EAAWD,EAAUnmC,MAAMkzB,cAAchR,QAAQ7a,YAAEA,OAAKA,IAAO8mB,KACrEgY,EAAUxb,WAAW,CACjBuI,cAAekT,IAEnBD,EAAU7lB,gBAlGd,wCAoGkBkU,GACd,OAAQ,EAAI91B,KAAKgS,mBAAmB5Q,QAAQ00B,KArGhD,uCAuGiBnvB,EAAOjC,GACpB,QAAS1E,KAAK+d,UAAUC,GAAGrX,GAAOb,IAAI,CAAC,eAAgBpB,MAxG3D,iCA0GW4sB,GAAOA,WACdtxB,KAAKkjB,aACAuS,cAAc,GAAoC,CACnDC,KAAM,KACNC,OAAQ,CACJqR,cAAe1V,EACf2V,eAAgBjnC,KAAKinC,eACrB7gC,aAAcpG,KAAKqS,sBAGtBnS,WAAWuB,YACRA,GACAzB,EAAK+R,oBAAoBsN,KAAK5d,QAtH1C,uCA0HiBkF,GAEb,OADkB3G,KAAK+d,UAAUC,GAAGrX,GAAOrF,MAC1BkzB,kBA5HrB,KA+HJ,GAA6BtS,UAAO,SAA8CC,GAAK,OAAO,IAAKA,GAAK,IAA8B,KAAyB,KAA2B,KAAyB,QACnN,GAA6BC,UAAO,KAAyB,CAAEC,KAAM,GAA8BC,UAAW,CAAC,CAAC,8BAA+BuG,OAAQ,CAAE9K,UAAW,CAAC,2BAA4B,aAAcxD,SAAU,WAAYkD,cAAe,gBAAiBmM,OAAQ,SAAUjY,aAAc,eAAgBvL,aAAc,eAAgBiM,mBAAoB,qBAAsB40B,eAAgB,kBAAoB9M,QAAS,CAAE+M,YAAa,cAAeC,gBAAiB,kBAAmB/nB,sBAAuB,wBAAyBrN,oBAAqB,uBAAyBwQ,SAAU,CAAC,MAA8BC,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,EAAG,iBAAkB,CAAC,QAAS,yBAA0B,EAAG,WAAY,EAAG,QAAS,WAAY,CAAC,EAAG,oBAAqB,QAAS,CAAC,EAAG,YAAa,EAAG,QAAS,CAAC,EAAG,aAAc,CAAC,EAAG,aAAc,cAAe,CAAC,EAAG,WAAY,CAAC,EAAG,MAAO,EAAG,YAAa,CAAC,WAAY,GAAI,OAAQ,OAAQ,kBAAmB,MAAO,EAAG,WAAY,eAAgB,CAAC,EAAG,OAAQ,EAAG,YAAa,CAAC,WAAY,GAAI,OAAQ,OAAQ,kBAAmB,OAAQ,EAAG,WAAY,eAAgB,CAAC,EAAG,kBAAmB,CAAC,EAAG,oBAAqB,CAAC,EAAG,cAAe,CAAC,EAAG,gBAAiB,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,SAAU,gBAAiB,UAAW,CAAC,EAAG,uBAAwB,CAAC,EAAG,mBAAoB,CAAC,EAAG,0BAA2B,CAAC,EAAG,gBAAiB,CAAC,EAAG,mBAAoB,wBAAyB,CAAC,mBAAoB,IAAK,CAAC,EAAG,SAAU,CAAC,WAAY,GAAI,kBAAmB,QAAS,EAAG,eAAgB,YAAa,CAAC,EAAG,QAAS,eAAgB,mBAAoB,iBAAkB,CAAC,WAAY,GAAI,OAAQ,SAAU,MAAO,IAAK,OAAQ,IAAK,kBAAmB,cAAe,EAAG,YAAa,CAAC,EAAG,0BAA2B,CAAC,OAAQ,WAAY,cAAe,GAAI,OAAQ,iBAAkB,kBAAmB,iBAAkB,EAAG,eAAgB,CAAC,EAAG,iBAAkB,CAAC,gBAAiB,eAAgB,EAAG,QAAS,CAAC,EAAG,kBAAmB,CAAC,EAAG,UAAW,CAAC,EAAG,QAAS,CAAC,EAAG,eAAgB,CAAC,EAAG,UAAW,CAAC,EAAG,aAAc,YAAa,SAAU,EAAG,QAAS,WAAY,CAAC,QAAS,2BAA4B,EAAG,QAAS,EAAG,oBAAqB,CAAC,OAAQ,WAAY,YAAa,GAAI,OAAQ,UAAW,kBAAmB,WAAY,CAAC,YAAa,GAAI,OAAQ,UAAW,kBAAmB,iBAAkB,CAAC,EAAG,QAAS,EAAG,QAAS,WAAY,CAAC,EAAG,SAAU,CAAC,EAAG,qBAAsB,CAAC,EAAG,sBAAuB,CAAC,gBAAiB,gBAAiB,CAAC,EAAG,QAAS,WAAY,CAAC,aAAc,iBAAkB,EAAG,UAAW,wBAAyB,WAAY,cAAe,EAAG,QAAS,CAAC,aAAc,iBAAkB,EAAG,UAAW,wBAAyB,WAAY,eAAgB,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,SAAU,OAAQ,YAAa,EAAG,QAAS,WAAY,CAAC,EAAG,YAAa,SAAU,OAAQ,aAAc,CAAC,EAAG,qBAAsB,CAAC,EAAG,aAAc,YAAa,UAAW,CAAC,EAAG,MAAO,SAAU,gBAAiB,EAAG,SAAU,CAAC,QAAS,SAAUC,SAAU,SAA+Cnf,EAAIC,GAAgB,EAALD,IACp+F,KAAsB,EAAG,MAAO,GAChC,KAAkB,EAAGuc,GAA6C,EAAG,EAAG,MAAO,GAC/E,QACO,EAALvc,IACF,KAAiB,GACjB,KAAkB,UAAWC,EAAI8W,YAChCsI,WAAY,WAAc,MAAO,CAAC,IAAgB,IAAa,IAA6B,IAA2B,KAA4B,IAA0B,KAAkC,IAA6B,IAAiB,IAAwB,IAAwB,KAA+B,GAAwB,IAAiB,IAA+B,GAA6B,IAA4B,IAA2B,IAAqC,IAAoB,IAA0B,IAA4B,IAA2B,IAAmC,IAAkB,IAAuB,IAAwC,IAAsB,IAAoC,IAAsB,KAAgC,MAA6BC,MAAO,WAAc,MAAO,CAAC,KAA0B,IAAsB,OAAqBC,OAAQ,CAAC,qpGAAspGC,gBAAiB,IAC9oI,GAA6BC,eAAiB,iBAAM,CAChD,CAAEZ,KAAM,KACR,CAAEA,KAAM,QAEZ,YAAW,CACP,YAAM,4BACN,YAAW,cAAe,MAC3B,GAA6B2G,UAAW,iBAAY,GACvD,YAAW,CACP,cACA,YAAW,cAAexoB,QAC3B,GAA6BwoB,UAAW,gBAAW,GACtD,YAAW,CACP,cACA,YAAW,cAAexoB,QAC3B,GAA6BwoB,UAAW,qBAAgB,GAC3D,YAAW,CACP,cACA,YAAW,cAAexoB,QAC3B,GAA6BwoB,UAAW,cAAS,GACpD,YAAW,CACP,cACA,YAAW,cAAexoB,QAC3B,GAA6BwoB,UAAW,oBAAe,GAC1D,YAAW,CACP,cACA,YAAW,cAAexoB,QAC3B,GAA6BwoB,UAAW,oBAAe,GAC1D,YAAW,CACP,cACA,YAAW,cAAexoB,QAC3B,GAA6BwoB,UAAW,0BAAqB,GAChE,YAAW,CACP,cACA,YAAW,cAAeD,SAC3B,GAA6BC,UAAW,sBAAiB,GAC5D,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAA6Ba,UAAW,mBAAc,GACzD,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAA6Ba,UAAW,uBAAkB,GAC7D,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAA6Ba,UAAW,6BAAwB,GACnE,YAAW,CACP,SAAAuR,EAAA,GACA,YAAW,cAAepS,SAC3B,GAA6Ba,UAAW,2BAAsB,GACjE,GAA+B,YAAW,CAAE,YAAW,oBAAqB,CAAC,IAAmB,QAC7F,IAEH,IAAIiP,GAA6BA,6GACb9G,GACZ,IAAM/H,EAAQppB,KAAK2R,aAAa0Y,MAAKyG,YAACA,OAAIA,EAAEnoB,KAAOwoB,KACnD,OAAO/H,GAASA,EAAM1kB,SAHGuzB,KAMjCA,GAA8B/V,UAAO,SAA+CC,GAAK,OAAO,IAAKA,GAAK8V,KAC1GA,GAA8B7V,UAAO,KAAyB,CAAEC,KAAM4V,GAA+B3V,UAAW,CAAC,CAAC,+BAAgCuG,OAAQ,CAAE9K,UAAW,CAAC,2BAA4B,aAAcxD,SAAU,WAAY5I,aAAc,gBAAkB6Q,MAAO,GAAIC,KAAM,GAAIC,OAAQ,CAAC,CAAC,EAAG,SAAU,CAAC,EAAG,QAAS,WAAY,CAAC,EAAG,aAAc,CAAC,EAAG,OAAQ,gBAAiB,CAAC,EAAG,YAAa,CAAC,EAAG,kBAAmB,CAAC,EAAG,MAAO,EAAG,QAAS,CAAC,QAAS,cAAe,EAAG,QAAS,CAAC,WAAY,GAAI,OAAQ,OAAQ,kBAAmB,OAAQ,EAAG,WAAY,eAAgB,CAAC,WAAY,GAAI,OAAQ,OAAQ,kBAAmB,MAAO,EAAG,WAAY,eAAgB,CAAC,EAAG,OAAQ,eAAgB,SAAU,CAAC,WAAY,GAAI,kBAAmB,QAAS,EAAG,eAAgB,YAAa,CAAC,EAAG,OAAQ,eAAgB,SAAU,CAAC,WAAY,GAAI,OAAQ,SAAU,MAAO,IAAK,OAAQ,IAAK,kBAAmB,cAAe,EAAG,YAAa,CAAC,OAAQ,WAAY,YAAa,GAAI,OAAQ,UAAW,kBAAmB,UAAW,EAAG,eAAgB,CAAC,EAAG,OAAQ,CAAC,EAAG,eAAgB,CAAC,QAAS,QAAS,OAAQ,OAAQC,SAAU,SAAgDnf,EAAIC,GAAgB,EAALD,IAC1oC,KAAsB,EAAG,iBAAkB,GAC3C,KAAiB,EAAG,iBACpB,KAAsB,EAAG,iBACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAsB,EAAG,iBACzB,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAG0c,GAAuD,EAAG,EAAG,eAAgB,GAClG,KAAc,EAAG,QACjB,KAAsB,GAAI,iBAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,iBAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAsB,GAAI,iBAC1B,KAAc,IACd,KAAc,GAAI,aAClB,OACA,KAAkB,GAAIQ,GAAuD,GAAI,GAAI,eACrF,QACO,EAALld,IACF,KAAkB,QAASC,EAAI8W,UAC/B,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,gBAClD,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,gBAClD,KAAiB,GACjB,KAAkB,UAAW,KAAmB,EAAG,GAAI9W,EAAIkO,aAAc,OACzE,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,kBACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,0BACpD,KAAiB,GACjB,KAAyB,KAAmB,GAAI,GAAI,qBACnDkR,WAAY,CAAC,IAA2B,IAAiC,IAAgB,IAA6B,IAA2B,IAAa,IAA0B,KAAkC,IAA6B,IAAiB,IAAwB,IAAwB,IAA+B,IAA4B,IAA2B,IAAqC,IAAoB,IAA0B,KAA0BC,MAAO,CAAC,IAAsB,KAAiB,KAA0B,IAAyB,MAA2BC,OAAQ,CAAC,8TAA+TC,gBAAiB,IAC19B,YAAW,CACP,YAAM,4BACN,YAAW,cAAe,MAC3BiV,GAA8BjP,UAAW,iBAAY,GACxD,YAAW,CACP,cACA,YAAW,cAAexoB,QAC3By3B,GAA8BjP,UAAW,gBAAW,GACvD,YAAW,CACP,cACA,YAAW,cAAexoB,QAC3By3B,GAA8BjP,UAAW,oBAAe,GAE3D,IAAI,cACA,WAAY1H,GAAYA,wBACpBthB,KAAKshB,YAAcA,EACnBthB,KAAK2nC,aAAe,IAAIvhB,EAAA,EAAgB,GACxCpmB,KAAK4nC,qBAAuB,IAAIxhB,EAAA,EAAgB,IAJpD,wDAOI,IAAMyhB,EAAY7nC,KAAKshB,YAAY2I,SAC9B6d,YAAY,MAAO,EAAG,eACtB3d,WAAU9G,YAAIA,OAAIA,EAAK0kB,SAASrgB,SAC/B3gB,EAAiB/G,KAAKshB,YAAY2I,SACnCC,iBAAiB,eACjBC,WAAU9G,YAAIA,OAAIA,EAAK+G,iBAC5BpqB,KAAK8gB,SAAW,OAAAiD,EAAA,GAAchd,EAAgB8gC,EAAW7nC,KAAK4nC,sBAAsBzjB,KAAK,OAAAC,EAAA,IAAI,YAAqBiT,0BAAnBzpB,EAAmBypB,KAAV0Q,EAAU1Q,YACxG2Q,EAAiBp6B,EAAQo6B,eAC/B,IAAKA,EACD,OAAO,EAEX,IAAMC,EAAiBF,EAAS1d,MAAK6d,YAAOA,OAAIA,EAAQC,KAAKx/B,KAAOq/B,EAAer/B,IAAMu/B,EAAQ7c,SAAS1iB,KAAO0uB,KACjH,OAAK4Q,EAGEA,EAAe3mC,MAFX,MAIftB,KAAKihB,YAAc,OAAA8C,EAAA,GAAc/jB,KAAK8gB,SAAU9gB,KAAK2nC,cAAcxjB,KAAK,OAAAC,EAAA,IAAI,sCAAE8jB,EAAF,KAAW35B,EAAX,YACjEnL,KAAKglC,MAAM75B,IAAU,IAAM25B,GAAW,MAAQ,UAzB7D,kCA4BYtgB,GACJ,UAAWA,GACX5nB,KAAK2nC,aAAanmC,KAAKomB,EAAQrZ,MAAMuZ,cAErC,kBAAmBF,GACnB5nB,KAAK4nC,qBAAqBpmC,KAAKomB,EAAQyP,cAAcvP,kBAjC7D,KAqCJ,GAA4B5F,UAAO,SAA6CC,GAAK,OAAO,IAAKA,GAAK,IAA6B,KAAyB,OAC5J,GAA4BC,UAAO,KAAyB,CAAEC,KAAM,GAA6BC,UAAW,CAAC,CAAC,6BAA8BuG,OAAQ,CAAElJ,iBAAkB,mBAAoBpR,MAAO,QAASH,aAAc,eAAgBipB,cAAe,iBAAmB9U,SAAU,CAAC,MAA8BC,MAAO,EAAGC,KAAM,EAAGC,OAAQ,CAAC,CAAC,EAAG,qBAAsB,CAAC,QAAS,QAAS,EAAG,QAAS,CAAC,EAAG,UAAWC,SAAU,SAA8Cnf,EAAIC,GAAgB,EAALD,IACxd,KAAsB,EAAG,QAAS,GAClC,KAAc,GACd,KAAc,EAAG,aACjB,OACA,KAAkB,EAAGqd,GAA4C,EAAG,EAAG,MAAO,GAC9E,KAAkB,EAAGG,GAA4C,EAAG,GAAI,MAAO,IACxE,EAALxd,IACF,KAAiB,GACjB,KAAyB,KAAmB,EAAG,EAAG,kBAClD,KAAiB,GACjB,KAAkB,OAAQC,EAAIkc,kBAC9B,KAAiB,GACjB,KAAkB,QAASlc,EAAIkc,oBAC9BkD,WAAY,CAAC,IAAiB,KAAcC,MAAO,CAAC,IAAsB,IAAkB,KAAsBC,OAAQ,CAAC,iGAAkGC,gBAAiB,IACvP,GAA4BC,eAAiB,iBAAM,CAC/C,CAAEZ,KAAM,OAEZ,YAAW,CACP,cACA,YAAW,cAAegmB,UAC3B,GAA4Brf,UAAW,wBAAmB,GAC7D,YAAW,CACP,cACA,YAAW,cAAesf,SAC3B,GAA4Btf,UAAW,aAAQ,GAClD,YAAW,CACP,cACA,YAAW,cAAeD,SAC3B,GAA4BC,UAAW,oBAAe,GACzD,YAAW,CACP,cACA,YAAW,cAAeD,SAC3B,GAA4BC,UAAW,qBAAgB,GAC1D,GAA8B,YAAW,CAAE,YAAW,oBAAqB,CAAC,OACzE,IAEH,IAAIuf,GAAaA,sCAEjBA,GAAcC,UAAO,KAAwB,CAAEnmB,KAAMkmB,KACrDA,GAAcE,UAAO,KAAwB,CAAEpW,QAAS,SAA+BlQ,GAAK,OAAO,IAAKA,GAAKomB,KAAqBG,QAAS,CAAC,CAAC,KAAc,IAAaC,SAAS5I,S,kCEr5MjL5X,OAAOygB,eAAeC,EAAS,aAAc,CAAEvnC,OAAMA,IAcrDunC,EAAQ3S,OAbR,SAAgB4S,EAAKC,GACjB,OAAOD,EAAItlB,QAAO,SAAC/e,EAAMkC,EAAOqiC,GAAd,OACNriC,IACJqiC,EAAKpe,WAAUnqB,YAACA,YAADA,IACPsoC,EACOtoC,IAAMgE,EAGNhE,EAAEsoC,KAAWtkC,EAAKskC","file":"x","sourcesContent":["import { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function withLatestFrom(...args) {\n    return (source) => {\n        let project;\n        if (typeof args[args.length - 1] === 'function') {\n            project = args.pop();\n        }\n        const observables = args;\n        return source.lift(new WithLatestFromOperator(observables, project));\n    };\n}\nclass WithLatestFromOperator {\n    constructor(observables, project) {\n        this.observables = observables;\n        this.project = project;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new WithLatestFromSubscriber(subscriber, this.observables, this.project));\n    }\n}\nclass WithLatestFromSubscriber extends OuterSubscriber {\n    constructor(destination, observables, project) {\n        super(destination);\n        this.observables = observables;\n        this.project = project;\n        this.toRespond = [];\n        const len = observables.length;\n        this.values = new Array(len);\n        for (let i = 0; i < len; i++) {\n            this.toRespond.push(i);\n        }\n        for (let i = 0; i < len; i++) {\n            let observable = observables[i];\n            this.add(subscribeToResult(this, observable, observable, i));\n        }\n    }\n    notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values[outerIndex] = innerValue;\n        const toRespond = this.toRespond;\n        if (toRespond.length > 0) {\n            const found = toRespond.indexOf(outerIndex);\n            if (found !== -1) {\n                toRespond.splice(found, 1);\n            }\n        }\n    }\n    notifyComplete() {\n    }\n    _next(value) {\n        if (this.toRespond.length === 0) {\n            const args = [value, ...this.values];\n            if (this.project) {\n                this._tryProject(args);\n            }\n            else {\n                this.destination.next(args);\n            }\n        }\n    }\n    _tryProject(args) {\n        let result;\n        try {\n            result = this.project.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    }\n}\n//# sourceMappingURL=withLatestFrom.js.map","import { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function delay(delay, scheduler = async) {\n    const absoluteDelay = isDate(delay);\n    const delayFor = absoluteDelay ? (+delay - scheduler.now()) : Math.abs(delay);\n    return (source) => source.lift(new DelayOperator(delayFor, scheduler));\n}\nclass DelayOperator {\n    constructor(delay, scheduler) {\n        this.delay = delay;\n        this.scheduler = scheduler;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n    }\n}\nclass DelaySubscriber extends Subscriber {\n    constructor(destination, delay, scheduler) {\n        super(destination);\n        this.delay = delay;\n        this.scheduler = scheduler;\n        this.queue = [];\n        this.active = false;\n        this.errored = false;\n    }\n    static dispatch(state) {\n        const source = state.source;\n        const queue = source.queue;\n        const scheduler = state.scheduler;\n        const destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            const delay = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay);\n        }\n        else {\n            this.unsubscribe();\n            source.active = false;\n        }\n    }\n    _schedule(scheduler) {\n        this.active = true;\n        const destination = this.destination;\n        destination.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    }\n    scheduleNotification(notification) {\n        if (this.errored === true) {\n            return;\n        }\n        const scheduler = this.scheduler;\n        const message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    }\n    _next(value) {\n        this.scheduleNotification(Notification.createNext(value));\n    }\n    _error(err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n        this.unsubscribe();\n    }\n    _complete() {\n        this.scheduleNotification(Notification.createComplete());\n        this.unsubscribe();\n    }\n}\nclass DelayMessage {\n    constructor(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n}\n//# sourceMappingURL=delay.js.map","import { __decorate, __metadata, __awaiter, __param } from 'tslib';\nimport { Component, ChangeDetectionStrategy, Input, ContentChild, TemplateRef, ChangeDetectorRef, ViewChild, ɵɵdefineInjectable, ɵɵinject, Injectable, EventEmitter, Output, SkipSelf, Optional, forwardRef, ElementRef, HostBinding, NgModule } from '@angular/core';\nimport { Router, ActivatedRoute, RouterModule } from '@angular/router';\nimport { BaseDetailComponent, ServerConfigService, NotificationService, DataService, BaseListComponent, DeletionResult, ModalService, createUpdatedTranslatable, FacetValueSelectorComponent, flattenFacetValues, IGNORE_CAN_DEACTIVATE_GUARD, LogicalOperator, JobState, JobQueueService, getDefaultUiLanguage, BaseEntityResolver, AssetType, createResolveData, CanDeactivateDetailGuard, detailBreadcrumb, Permission, AssetPickerDialogComponent, AssetPreviewDialogComponent, SharedModule } from '@vendure/admin-ui/core';\nimport { marker } from '@biesbjerg/ngx-translate-extract-marker';\nimport { map, debounceTime, takeUntil, finalize, switchMap, startWith, distinctUntilChanged, tap, shareReplay, take, mergeMap, mapTo, withLatestFrom, delay, filter } from 'rxjs/operators';\nimport { FormGroup, FormControl, FormBuilder, Validators, NG_VALUE_ACCESSOR, FormArray } from '@angular/forms';\nimport { SortOrder } from '@vendure/common/lib/generated-shop-types';\nimport { combineLatest, EMPTY, BehaviorSubject, Subject, of, forkJoin, throwError, from, merge } from 'rxjs';\nimport { normalizeString } from '@vendure/common/lib/normalize-string';\nimport { notNullOrUndefined, generateAllCombinations } from '@vendure/common/lib/shared-utils';\nimport { Location } from '@angular/common';\nimport { DEFAULT_CHANNEL_CODE } from '@vendure/common/lib/shared-constants';\nimport { unique } from '@vendure/common/lib/unique';\nimport { NgSelectComponent, SELECTION_MODEL_FACTORY } from '@ng-select/ng-select';\nimport { moveItemInArray, CdkDropListGroup, CdkDropList } from '@angular/cdk/drag-drop';\nimport { ViewportRuler } from '@angular/cdk/overlay';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/router';\nimport * as ɵngcc2 from '@vendure/admin-ui/core';\nimport * as ɵngcc3 from '@angular/forms';\nimport * as ɵngcc4 from '@angular/common';\nimport * as ɵngcc5 from '@ngx-translate/core';\nimport * as ɵngcc6 from 'ngx-pagination';\nimport * as ɵngcc7 from '@clr/angular';\nimport * as ɵngcc8 from '@ng-select/ng-select';\nimport * as ɵngcc9 from '@angular/cdk/drag-drop';\nimport * as ɵngcc10 from '@angular/cdk/overlay';\n\nfunction AssetDetailComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function AssetDetailComponent_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nconst _c0 = function () { return {}; };\nfunction CollectionContentsComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nconst _c1 = function () { return { tab: \"variants\" }; };\nconst _c2 = function (a1, a2) { return [\"/catalog/products\", a1, a2]; };\nfunction CollectionContentsComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 5);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"td\", 6);\n    ɵngcc0.ɵɵelement(3, \"vdr-table-row-action\", 7);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r2 = ctx.item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(variant_r2.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(4, 3, \"common.edit\"))(\"linkTo\", ɵngcc0.ɵɵpureFunction2(6, _c2, variant_r2.productId, ɵngcc0.ɵɵpureFunction0(5, _c1)));\n} }\nconst _c3 = function (a0) { return { $implicit: a0 }; };\nconst _c4 = [\"collectionContents\"];\nfunction CollectionDetailComponent_button_10_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionDetailComponent_button_10_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.create(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction CollectionDetailComponent_ng_template_12_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionDetailComponent_ng_template_12_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", (ctx_r6.detailForm.invalid || ctx_r6.detailForm.pristine) && !ctx_r6.assetsChanged());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction CollectionDetailComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, CollectionDetailComponent_ng_template_12_button_0_Template, 3, 4, \"button\", 7);\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n} }\nfunction CollectionDetailComponent_form_14_ng_container_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction CollectionDetailComponent_form_14_ng_template_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c5 = function () { return [\"customFields\"]; };\nfunction CollectionDetailComponent_form_14_section_24_ng_container_4_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 31);\n} if (rf & 2) {\n    const customField_r19 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r20 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r20.detailForm.get(ɵngcc0.ɵɵpureFunction0(2, _c5)))(\"customField\", customField_r19);\n} }\nfunction CollectionDetailComponent_form_14_section_24_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, CollectionDetailComponent_form_14_section_24_ng_container_4_vdr_custom_field_control_1_Template, 1, 3, \"vdr-custom-field-control\", 30);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r19 = ctx.$implicit;\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r18.customFieldIsSet(customField_r19.name));\n} }\nfunction CollectionDetailComponent_form_14_section_24_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 29);\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, CollectionDetailComponent_form_14_section_24_ng_container_4_Template, 2, 1, \"ng-container\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"common.custom-fields\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r13.customFields);\n} }\nfunction CollectionDetailComponent_form_14_ng_container_32_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-configurable-input\", 32);\n    ɵngcc0.ɵɵlistener(\"remove\", function CollectionDetailComponent_form_14_ng_container_32_Template_vdr_configurable_input_remove_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r25); const ctx_r24 = ɵngcc0.ɵɵnextContext(2); return ctx_r24.removeFilter($event); });\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const filter_r22 = ctx.$implicit;\n    const i_r23 = ctx.index;\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"facets\", ɵngcc0.ɵɵpipeBind1(2, 6, ctx_r14.facets$))(\"operation\", filter_r22)(\"operationDefinition\", ctx_r14.getFilterDefinition(filter_r22))(\"formControlName\", i_r23)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(3, 8, \"UpdateCatalog\"))(\"activeChannel\", ɵngcc0.ɵɵpipeBind1(4, 10, ctx_r14.activeChannel$));\n} }\nfunction CollectionDetailComponent_form_14_div_33_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 37);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionDetailComponent_form_14_div_33_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r29); const filter_r27 = ctx.$implicit; const ctx_r28 = ɵngcc0.ɵɵnextContext(3); return ctx_r28.addFilter(filter_r27); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const filter_r27 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", filter_r27.description, \" \");\n} }\nfunction CollectionDetailComponent_form_14_div_33_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(2, \"button\", 33);\n    ɵngcc0.ɵɵelement(3, \"clr-icon\", 34);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"vdr-dropdown-menu\", 35);\n    ɵngcc0.ɵɵtemplate(7, CollectionDetailComponent_form_14_div_33_button_7_Template, 2, 1, \"button\", 36);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 2, \"marketing.add-condition\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r15.allFilters);\n} }\nconst _c6 = function (a0) { return { count: a0 }; };\nfunction CollectionDetailComponent_form_14_ng_template_37_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 38);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const count_r30 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"catalog.collection-contents\"), \" (\", ɵngcc0.ɵɵpipeBind2(3, 4, \"common.results-count\", ɵngcc0.ɵɵpureFunction1(7, _c6, count_r30)), \") \");\n} }\nconst _c7 = function (a0) { return { pattern: a0 }; };\nfunction CollectionDetailComponent_form_14_Template(rf, ctx) { if (rf & 1) {\n    const _r32 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 8);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 9);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(3, \"vdr-form-field\", 11);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementStart(5, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(6, \"input\", 12);\n    ɵngcc0.ɵɵpipe(7, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(8, \"label\", 13);\n    ɵngcc0.ɵɵtemplate(9, CollectionDetailComponent_form_14_ng_container_9_Template, 3, 3, \"ng-container\", 14);\n    ɵngcc0.ɵɵtemplate(10, CollectionDetailComponent_form_14_ng_template_10_Template, 2, 3, \"ng-template\", null, 15, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"vdr-form-field\", 16);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵelementStart(14, \"input\", 17);\n    ɵngcc0.ɵɵlistener(\"input\", function CollectionDetailComponent_form_14_Template_input_input_14_listener($event) { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.updateSlug($event.target.value); });\n    ɵngcc0.ɵɵpipe(15, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"vdr-form-field\", 18);\n    ɵngcc0.ɵɵpipe(17, \"translate\");\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelement(19, \"input\", 19);\n    ɵngcc0.ɵɵpipe(20, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(21, \"vdr-rich-text-editor\", 20);\n    ɵngcc0.ɵɵpipe(22, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵtemplate(24, CollectionDetailComponent_form_14_section_24_Template, 5, 4, \"section\", 21);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(25, \"div\", 22);\n    ɵngcc0.ɵɵelementStart(26, \"vdr-product-assets\", 23);\n    ɵngcc0.ɵɵlistener(\"change\", function CollectionDetailComponent_form_14_Template_vdr_product_assets_change_26_listener($event) { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r33 = ɵngcc0.ɵɵnextContext(); return ctx_r33.assetChanges = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(27, \"div\", 24);\n    ɵngcc0.ɵɵelementStart(28, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(29, \"label\");\n    ɵngcc0.ɵɵtext(30);\n    ɵngcc0.ɵɵpipe(31, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(32, CollectionDetailComponent_form_14_ng_container_32_Template, 5, 12, \"ng-container\", 25);\n    ɵngcc0.ɵɵtemplate(33, CollectionDetailComponent_form_14_div_33_Template, 8, 4, \"div\", 26);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(34, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(35, \"vdr-collection-contents\", 27, 28);\n    ɵngcc0.ɵɵtemplate(37, CollectionDetailComponent_form_14_ng_template_37_Template, 4, 9, \"ng-template\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const category_r9 = ctx.ngIf;\n    const _r11 = ɵngcc0.ɵɵreference(11);\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r3.detailForm);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(4, 19, \"catalog.visibility\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"vdrDisabled\", !ɵngcc0.ɵɵpipeBind1(7, 21, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.detailForm.value.visible)(\"ngIfElse\", _r11);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(13, 23, \"common.name\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(15, 25, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(17, 27, \"catalog.slug\"))(\"errors\", ɵngcc0.ɵɵpureFunction1(39, _c7, ɵngcc0.ɵɵpipeBind1(18, 29, \"catalog.slug-pattern-error\")));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(20, 31, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(22, 33, \"UpdateCatalog\"))(\"label\", ɵngcc0.ɵɵpipeBind1(23, 35, \"common.description\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.customFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"assets\", category_r9.assets)(\"featuredAsset\", category_r9.featuredAsset);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(31, 37, \"catalog.filters\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.filters);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"collectionId\", ctx_r3.id);\n} }\nconst _c8 = function () { return [\"./create\"]; };\nfunction CollectionListComponent_a_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 8);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 9);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c8));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.create-new-collection\"), \" \");\n} }\nfunction CollectionListComponent_ng_template_18_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 10);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"button\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionListComponent_ng_template_18_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.closeContents(); });\n    ɵngcc0.ɵɵelement(5, \"clr-icon\", 12);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const count_r2 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, ctx_r1.activeCollectionTitle$), \" (\", ɵngcc0.ɵɵpipeBind2(3, 4, \"common.results-count\", ɵngcc0.ɵɵpureFunction1(7, _c6, count_r2)), \") \");\n} }\nfunction FacetDetailComponent_button_10_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetDetailComponent_button_10_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.create(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction FacetDetailComponent_ng_template_12_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetDetailComponent_ng_template_12_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r6.detailForm.invalid || ctx_r6.detailForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction FacetDetailComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, FacetDetailComponent_ng_template_12_button_0_Template, 3, 4, \"button\", 7);\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n} }\nfunction FacetDetailComponent_form_14_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction FacetDetailComponent_form_14_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c9 = function () { return [\"facet\", \"customFields\"]; };\nfunction FacetDetailComponent_form_14_section_20_ng_container_4_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 24);\n} if (rf & 2) {\n    const customField_r16 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r17 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r17.detailForm.get(ɵngcc0.ɵɵpureFunction0(2, _c9)))(\"customField\", customField_r16);\n} }\nfunction FacetDetailComponent_form_14_section_20_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, FacetDetailComponent_form_14_section_20_ng_container_4_vdr_custom_field_control_1_Template, 1, 3, \"vdr-custom-field-control\", 23);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r16 = ctx.$implicit;\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r15.customFieldIsSet(customField_r16.name));\n} }\nfunction FacetDetailComponent_form_14_section_20_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 21);\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, FacetDetailComponent_form_14_section_20_ng_container_4_Template, 2, 1, \"ng-container\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"common.custom-fields\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r13.customFields);\n} }\nfunction FacetDetailComponent_form_14_section_21_table_4_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"th\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r23 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(customField_r23.name);\n} }\nconst _c10 = function (a1) { return [\"values\", a1, \"customFields\"]; };\nfunction FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_vdr_custom_field_control_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 40);\n} if (rf & 2) {\n    const customField_r27 = ɵngcc0.ɵɵnextContext().$implicit;\n    const i_r25 = ɵngcc0.ɵɵnextContext().index;\n    const ctx_r28 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"showLabel\", false)(\"customFieldsFormGroup\", ctx_r28.detailForm.get(ɵngcc0.ɵɵpureFunction1(3, _c10, i_r25)))(\"customField\", customField_r27);\n} }\nfunction FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 31);\n    ɵngcc0.ɵɵtemplate(2, FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_vdr_custom_field_control_2_Template, 1, 5, \"vdr-custom-field-control\", 39);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r27 = ctx.$implicit;\n    const i_r25 = ɵngcc0.ɵɵnextContext().index;\n    const ctx_r26 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r26.customValueFieldIsSet(i_r25, customField_r27.name));\n} }\nfunction FacetDetailComponent_form_14_section_21_table_4_tr_13_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 30);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 31);\n    ɵngcc0.ɵɵelement(2, \"vdr-entity-info\", 0);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\", 31);\n    ɵngcc0.ɵɵelementStart(4, \"input\", 32);\n    ɵngcc0.ɵɵlistener(\"input\", function FacetDetailComponent_form_14_section_21_table_4_tr_13_Template_input_input_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r34); const i_r25 = ctx.index; const facet_r9 = ɵngcc0.ɵɵnextContext(3).ngIf; const ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.updateValueCode(facet_r9.values[i_r25] == null ? null : facet_r9.values[i_r25].code, $event.target.value, i_r25); });\n    ɵngcc0.ɵɵpipe(5, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\", 31);\n    ɵngcc0.ɵɵelement(7, \"input\", 33);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(8, FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_Template, 3, 1, \"ng-container\", 22);\n    ɵngcc0.ɵɵelementStart(9, \"td\", 31);\n    ɵngcc0.ɵɵelementStart(10, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(11, \"button\", 34);\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵelement(14, \"clr-icon\", 35);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"vdr-dropdown-menu\", 36);\n    ɵngcc0.ɵɵelementStart(16, \"button\", 37);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetDetailComponent_form_14_section_21_table_4_tr_13_Template_button_click_16_listener() { ɵngcc0.ɵɵrestoreView(_r34); const i_r25 = ctx.index; const facet_r9 = ɵngcc0.ɵɵnextContext(3).ngIf; const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.deleteFacetValue(facet_r9.values[i_r25] == null ? null : facet_r9.values[i_r25].id, i_r25); });\n    ɵngcc0.ɵɵpipe(17, \"hasPermission\");\n    ɵngcc0.ɵɵelement(18, \"clr-icon\", 38);\n    ɵngcc0.ɵɵtext(19);\n    ɵngcc0.ɵɵpipe(20, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const value_r24 = ctx.$implicit;\n    const i_r25 = ctx.index;\n    const ctx_r22 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"formGroupName\", i_r25);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"entity\", value_r24);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(5, 7, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r22.customValueFields);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 9, \"common.actions\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(17, 11, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(20, 13, \"common.delete\"), \" \");\n} }\nfunction FacetDetailComponent_form_14_section_21_table_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"table\", 28);\n    ɵngcc0.ɵɵelementStart(1, \"thead\");\n    ɵngcc0.ɵɵelementStart(2, \"tr\");\n    ɵngcc0.ɵɵelement(3, \"th\");\n    ɵngcc0.ɵɵelementStart(4, \"th\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"th\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(10, FacetDetailComponent_form_14_section_21_table_4_ng_container_10_Template, 3, 1, \"ng-container\", 22);\n    ɵngcc0.ɵɵelement(11, \"th\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"tbody\");\n    ɵngcc0.ɵɵtemplate(13, FacetDetailComponent_form_14_section_21_table_4_tr_13_Template, 21, 15, \"tr\", 29);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 4, \"common.name\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 6, \"common.code\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r19.customValueFields);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r19.values);\n} }\nfunction FacetDetailComponent_form_14_section_21_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 41);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetDetailComponent_form_14_section_21_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const ctx_r37 = ɵngcc0.ɵɵnextContext(3); return ctx_r37.addFacetValue(); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 42);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.add-facet-value\"), \" \");\n} }\nfunction FacetDetailComponent_form_14_section_21_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 25);\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, FacetDetailComponent_form_14_section_21_table_4_Template, 14, 8, \"table\", 26);\n    ɵngcc0.ɵɵelementStart(5, \"div\");\n    ɵngcc0.ɵɵtemplate(6, FacetDetailComponent_form_14_section_21_button_6_Template, 4, 3, \"button\", 27);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 3, \"catalog.facet-values\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", 0 < ctx_r14.getValuesFormArray().length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"CreateCatalog\");\n} }\nfunction FacetDetailComponent_form_14_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 8);\n    ɵngcc0.ɵɵelementStart(1, \"section\", 9);\n    ɵngcc0.ɵɵelementStart(2, \"vdr-form-field\", 10);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementStart(4, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(5, \"input\", 11);\n    ɵngcc0.ɵɵpipe(6, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(7, \"label\", 12);\n    ɵngcc0.ɵɵtemplate(8, FacetDetailComponent_form_14_ng_container_8_Template, 3, 3, \"ng-container\", 13);\n    ɵngcc0.ɵɵtemplate(9, FacetDetailComponent_form_14_ng_template_9_Template, 2, 3, \"ng-template\", null, 14, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"vdr-form-field\", 15);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementStart(13, \"input\", 16);\n    ɵngcc0.ɵɵlistener(\"input\", function FacetDetailComponent_form_14_Template_input_input_13_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const facet_r9 = ctx.ngIf; const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.updateCode(facet_r9.code, $event.target.value); });\n    ɵngcc0.ɵɵpipe(14, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"vdr-form-field\", 17);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵpipe(17, \"hasPermission\");\n    ɵngcc0.ɵɵelement(18, \"input\", 18);\n    ɵngcc0.ɵɵpipe(19, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(20, FacetDetailComponent_form_14_section_20_Template, 5, 4, \"section\", 19);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(21, FacetDetailComponent_form_14_section_21_Template, 7, 5, \"section\", 20);\n    ɵngcc0.ɵɵpipe(22, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r11 = ɵngcc0.ɵɵreference(10);\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r3.detailForm);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(3, 12, \"catalog.visibility\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"vdrDisabled\", !ɵngcc0.ɵɵpipeBind1(6, 14, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.detailForm.value.facet.visible)(\"ngIfElse\", _r11);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(12, 16, \"common.name\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(14, 18, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(16, 20, \"common.code\"))(\"readOnlyToggle\", ɵngcc0.ɵɵpipeBind1(17, 22, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(19, 24, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.customFields.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ɵngcc0.ɵɵpipeBind1(22, 26, ctx_r3.isNew$));\n} }\nfunction FacetListComponent_a_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 4);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 5);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c8));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.create-new-facet\"), \" \");\n} }\nfunction FacetListComponent_ng_template_23_vdr_facet_value_chip_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-facet-value-chip\", 18);\n} if (rf & 2) {\n    const value_r8 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"facetValue\", value_r8)(\"removable\", false)(\"displayFacetName\", false);\n} }\nfunction FacetListComponent_ng_template_23_button_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 5);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const facet_r2 = ɵngcc0.ɵɵnextContext(2).item;\n    const ctx_r9 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", facet_r2.values.length - ctx_r9.initialLimit, \" \");\n} }\nfunction FacetListComponent_ng_template_23_button_7_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 21);\n} }\nfunction FacetListComponent_ng_template_23_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetListComponent_ng_template_23_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const facet_r2 = ɵngcc0.ɵɵnextContext().item; const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.toggleDisplayLimit(facet_r2); });\n    ɵngcc0.ɵɵtemplate(1, FacetListComponent_ng_template_23_button_7_ng_container_1_Template, 3, 1, \"ng-container\", 9);\n    ɵngcc0.ɵɵtemplate(2, FacetListComponent_ng_template_23_button_7_ng_template_2_Template, 1, 0, \"ng-template\", null, 20, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r10 = ɵngcc0.ɵɵreference(3);\n    const facet_r2 = ɵngcc0.ɵɵnextContext().item;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", (ctx_r4.displayLimit[facet_r2.id] || 0) < facet_r2.values.length)(\"ngIfElse\", _r10);\n} }\nfunction FacetListComponent_ng_template_23_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction FacetListComponent_ng_template_23_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c11 = function (a1) { return [\"./\", a1]; };\nfunction FacetListComponent_ng_template_23_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\", 6);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"td\", 6);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"td\", 6);\n    ɵngcc0.ɵɵtemplate(5, FacetListComponent_ng_template_23_vdr_facet_value_chip_5_Template, 1, 3, \"vdr-facet-value-chip\", 7);\n    ɵngcc0.ɵɵpipe(6, \"slice\");\n    ɵngcc0.ɵɵtemplate(7, FacetListComponent_ng_template_23_button_7_Template, 4, 2, \"button\", 8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"td\", 6);\n    ɵngcc0.ɵɵelementStart(9, \"vdr-chip\");\n    ɵngcc0.ɵɵtemplate(10, FacetListComponent_ng_template_23_ng_container_10_Template, 3, 3, \"ng-container\", 9);\n    ɵngcc0.ɵɵtemplate(11, FacetListComponent_ng_template_23_ng_template_11_Template, 2, 3, \"ng-template\", null, 10, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"td\", 11);\n    ɵngcc0.ɵɵelement(14, \"vdr-table-row-action\", 12);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"td\", 11);\n    ɵngcc0.ɵɵelementStart(17, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(18, \"button\", 13);\n    ɵngcc0.ɵɵtext(19);\n    ɵngcc0.ɵɵpipe(20, \"translate\");\n    ɵngcc0.ɵɵelement(21, \"clr-icon\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(22, \"vdr-dropdown-menu\", 15);\n    ɵngcc0.ɵɵelementStart(23, \"button\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetListComponent_ng_template_23_Template_button_click_23_listener() { ɵngcc0.ɵɵrestoreView(_r18); const facet_r2 = ctx.item; const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.deleteFacet(facet_r2.id); });\n    ɵngcc0.ɵɵpipe(24, \"hasPermission\");\n    ɵngcc0.ɵɵelement(25, \"clr-icon\", 17);\n    ɵngcc0.ɵɵtext(26);\n    ɵngcc0.ɵɵpipe(27, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const facet_r2 = ctx.item;\n    const _r6 = ɵngcc0.ɵɵreference(12);\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(facet_r2.code);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(facet_r2.name);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind3(6, 23, facet_r2.values, 0, ctx_r1.displayLimit[facet_r2.id] || 3));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", facet_r2.values.length > ctx_r1.initialLimit);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !facet_r2.isPrivate)(\"ngIfElse\", _r6);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(15, 27, \"common.edit\"))(\"linkTo\", ɵngcc0.ɵɵpureFunction1(35, _c11, facet_r2.id));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(20, 29, \"common.actions\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(24, 31, \"DeleteCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(27, 33, \"common.delete\"), \" \");\n} }\nfunction ApplyFacetDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.add-facets\"));\n} }\nfunction ApplyFacetDialogComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function ApplyFacetDialogComponent_ng_template_2_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function ApplyFacetDialogComponent_ng_template_2_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.selectValues(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r1.selectedValues.length === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"catalog.add-facets\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.assign-products-to-channel\"));\n} }\nconst _c12 = function (a0) { return { channel: a0 }; };\nfunction AssignProductsToChannelDialogComponent_ng_template_29_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(1, 1, \"catalog.price-in-channel\", ɵngcc0.ɵɵpureFunction1(4, _c12, ctx_r1.selectedChannel == null ? null : ctx_r1.selectedChannel.code)), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_30_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.no-channel-selected\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"currency\");\n} if (rf & 2) {\n    const row_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(1, 1, row_r6.pricePreview / 100, ctx_r7.selectedChannel == null ? null : ctx_r7.selectedChannel.currencyCode), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_ng_template_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0, \" - \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵelementStart(1, \"td\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"currency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\");\n    ɵngcc0.ɵɵtemplate(7, AssignProductsToChannelDialogComponent_tr_33_ng_template_7_Template, 2, 4, \"ng-template\", 8);\n    ɵngcc0.ɵɵtemplate(8, AssignProductsToChannelDialogComponent_tr_33_ng_template_8_Template, 1, 0, \"ng-template\", null, 12, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r6 = ctx.$implicit;\n    const _r8 = ɵngcc0.ɵɵreference(9);\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(row_r6.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(5, 4, row_r6.price / 100, ctx_r4.currentChannel == null ? null : ctx_r4.currentChannel.currencyCode));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.selectedChannel)(\"ngIfElse\", _r8);\n} }\nconst _c13 = function (a0) { return { channelCode: a0 }; };\nfunction AssignProductsToChannelDialogComponent_ng_template_35_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(1, 1, \"catalog.assign-to-named-channel\", ɵngcc0.ɵɵpureFunction1(4, _c13, ctx_r11.selectedChannel == null ? null : ctx_r11.selectedChannel.code)), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_35_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.no-channel-selected\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_35_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function AssignProductsToChannelDialogComponent_ng_template_35_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function AssignProductsToChannelDialogComponent_ng_template_35_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.assign(); });\n    ɵngcc0.ɵɵtemplate(4, AssignProductsToChannelDialogComponent_ng_template_35_ng_template_4_Template, 2, 6, \"ng-template\", 8);\n    ɵngcc0.ɵɵtemplate(5, AssignProductsToChannelDialogComponent_ng_template_35_ng_template_5_Template, 2, 3, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r12 = ɵngcc0.ɵɵreference(6);\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 4, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r5.selectedChannel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.selectedChannel)(\"ngIfElse\", _r12);\n} }\nconst _c14 = function () { return [\"product\", \"enabled\"]; };\nfunction ProductDetailComponent_clr_toggle_wrapper_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(1, \"input\", 8);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r0.detailForm.get(ɵngcc0.ɵɵpureFunction0(4, _c14)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 2, \"common.enabled\"));\n} }\nfunction ProductDetailComponent_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_button_12_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.create(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r1.detailForm.invalid || ctx_r1.detailForm.pristine || !ctx_r1.variantsToCreateAreValid());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction ProductDetailComponent_ng_template_14_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_ng_template_14_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(2); return ctx_r8.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", (ctx_r7.detailForm.invalid || ctx_r7.detailForm.pristine) && !ctx_r7.assetsChanged() && !ctx_r7.variantAssetsChanged());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction ProductDetailComponent_ng_template_14_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductDetailComponent_ng_template_14_button_0_Template, 3, 4, \"button\", 10);\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_ng_container_4_vdr_chip_1_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 38);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_ng_container_4_vdr_chip_1_Template_vdr_chip_iconClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r24); const channel_r20 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r22 = ɵngcc0.ɵɵnextContext(5); return ctx_r22.removeFromChannel(channel_r20.id); });\n    ɵngcc0.ɵɵelement(1, \"vdr-channel-badge\", 39);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"channelCodeToLabel\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const channel_r20 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"channelCode\", channel_r20.code);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, channel_r20.code), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_ng_container_4_vdr_chip_1_Template, 4, 4, \"vdr-chip\", 37);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const channel_r20 = ctx.$implicit;\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r19.isDefaultChannel(channel_r20.code));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-form-item\", 31);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelementStart(2, \"div\", 32);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 33);\n    ɵngcc0.ɵɵtemplate(4, ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_ng_container_4_Template, 2, 1, \"ng-container\", 34);\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"button\", 35);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_Template_button_click_6_listener() { ɵngcc0.ɵɵrestoreView(_r27); const ctx_r26 = ɵngcc0.ɵɵnextContext(4); return ctx_r26.assignToChannel(); });\n    ɵngcc0.ɵɵelement(7, \"clr-icon\", 36);\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 3, \"common.channels\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(5, 5, ctx_r18.productChannels$));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 7, \"catalog.assign-to-channel\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_vdr_form_item_1_Template, 10, 9, \"vdr-form-item\", 30);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nconst _c15 = function () { return [\"product\", \"customFields\"]; };\nfunction ProductDetailComponent_form_16_clr_tab_content_6_section_17_ng_container_4_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 42);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const customField_r29 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r30 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r30.detailForm.get(ɵngcc0.ɵɵpureFunction0(5, _c15)))(\"customField\", customField_r29)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 3, \"UpdateCatalog\"));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_section_17_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductDetailComponent_form_16_clr_tab_content_6_section_17_ng_container_4_vdr_custom_field_control_1_Template, 2, 6, \"vdr-custom-field-control\", 41);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r29 = ctx.$implicit;\n    const ctx_r28 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r28.customFieldIsSet(customField_r29.name));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_section_17_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 40);\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, ProductDetailComponent_form_16_clr_tab_content_6_section_17_ng_container_4_Template, 2, 1, \"ng-container\", 34);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"common.custom-fields\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r14.customFields);\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_vdr_facet_value_chip_19_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-facet-value-chip\", 43);\n    ɵngcc0.ɵɵlistener(\"remove\", function ProductDetailComponent_form_16_clr_tab_content_6_vdr_facet_value_chip_19_Template_vdr_facet_value_chip_remove_0_listener() { ɵngcc0.ɵɵrestoreView(_r34); const facetValue_r32 = ctx.$implicit; const ctx_r33 = ɵngcc0.ɵɵnextContext(3); return ctx_r33.removeProductFacetValue(facetValue_r32.id); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const facetValue_r32 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"facetValue\", facetValue_r32)(\"removable\", ɵngcc0.ɵɵpipeBind1(1, 2, \"UpdateCatalog\"));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_button_21_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 44);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_content_6_button_21_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r36); const ctx_r35 = ɵngcc0.ɵɵnextContext(3); return ctx_r35.selectProductFacetValue(); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 45);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.add-facets\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_div_24_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"h4\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"vdr-generate-product-variants\", 46);\n    ɵngcc0.ɵɵlistener(\"variantsChange\", function ProductDetailComponent_form_16_clr_tab_content_6_div_24_Template_vdr_generate_product_variants_variantsChange_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r38); const ctx_r37 = ɵngcc0.ɵɵnextContext(3); return ctx_r37.createVariantsConfig = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.product-variants\"));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_6_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-tab-content\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 15);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 16);\n    ɵngcc0.ɵɵelementStart(3, \"section\", 17);\n    ɵngcc0.ɵɵtemplate(4, ProductDetailComponent_form_16_clr_tab_content_6_ng_container_4_Template, 2, 0, \"ng-container\", 18);\n    ɵngcc0.ɵɵelementStart(5, \"vdr-form-field\", 19);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementStart(7, \"input\", 20);\n    ɵngcc0.ɵɵlistener(\"input\", function ProductDetailComponent_form_16_clr_tab_content_6_Template_input_input_7_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r39 = ɵngcc0.ɵɵnextContext(2); return ctx_r39.updateSlug($event.target.value); });\n    ɵngcc0.ɵɵpipe(8, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"vdr-form-field\", 21);\n    ɵngcc0.ɵɵpipe(10, \"translate\");\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelement(12, \"input\", 22);\n    ɵngcc0.ɵɵpipe(13, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(14, \"vdr-rich-text-editor\", 23);\n    ɵngcc0.ɵɵpipe(15, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵtemplate(17, ProductDetailComponent_form_16_clr_tab_content_6_section_17_Template, 5, 4, \"section\", 24);\n    ɵngcc0.ɵɵelementStart(18, \"div\", 25);\n    ɵngcc0.ɵɵtemplate(19, ProductDetailComponent_form_16_clr_tab_content_6_vdr_facet_value_chip_19_Template, 2, 4, \"vdr-facet-value-chip\", 26);\n    ɵngcc0.ɵɵpipe(20, \"async\");\n    ɵngcc0.ɵɵtemplate(21, ProductDetailComponent_form_16_clr_tab_content_6_button_21_Template, 4, 3, \"button\", 27);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(22, \"div\", 28);\n    ɵngcc0.ɵɵelementStart(23, \"vdr-product-assets\", 29);\n    ɵngcc0.ɵɵlistener(\"change\", function ProductDetailComponent_form_16_clr_tab_content_6_Template_vdr_product_assets_change_23_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r41 = ɵngcc0.ɵɵnextContext(2); return ctx_r41.assetChanges = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(24, ProductDetailComponent_form_16_clr_tab_content_6_div_24_Template, 5, 3, \"div\", 14);\n    ɵngcc0.ɵɵpipe(25, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const product_r10 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r11 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(6, 13, \"catalog.product-name\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(8, 15, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(10, 17, \"catalog.slug\"))(\"errors\", ɵngcc0.ɵɵpureFunction1(31, _c7, ɵngcc0.ɵɵpipeBind1(11, 19, \"catalog.slug-pattern-error\")));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(13, 21, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(15, 23, \"UpdateCatalog\"))(\"label\", ɵngcc0.ɵɵpipeBind1(16, 25, \"common.description\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r11.customFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(20, 27, ctx_r11.facetValues$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"assets\", product_r10.assets)(\"featuredAsset\", product_r10.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(25, 29, ctx_r11.isNew$));\n} }\nconst _c16 = function () { return [\"./\", \"manage-variants\"]; };\nfunction ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_a_13_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 58);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 59);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c16));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.manage-variants\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_table_14_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-product-variants-table\", 60);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n} if (rf & 2) {\n    const product_r10 = ɵngcc0.ɵɵnextContext(3).ngIf;\n    const ctx_r45 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"variants\", ɵngcc0.ɵɵpipeBind1(1, 3, ctx_r45.variants$))(\"optionGroups\", product_r10.optionGroups)(\"productVariantsFormArray\", ctx_r45.detailForm.get(\"variants\"));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_list_15_Template(rf, ctx) { if (rf & 1) {\n    const _r49 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-product-variants-list\", 61);\n    ɵngcc0.ɵɵlistener(\"assetChange\", function ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_list_15_Template_vdr_product_variants_list_assetChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r48 = ɵngcc0.ɵɵnextContext(4); return ctx_r48.variantAssetChange($event); })(\"updateProductOption\", function ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_list_15_Template_vdr_product_variants_list_updateProductOption_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r50 = ɵngcc0.ɵɵnextContext(4); return ctx_r50.updateProductOption($event); })(\"selectionChange\", function ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_list_15_Template_vdr_product_variants_list_selectionChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r51 = ɵngcc0.ɵɵnextContext(4); return ctx_r51.selectedVariantIds = $event; })(\"selectFacetValueClick\", function ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_list_15_Template_vdr_product_variants_list_selectFacetValueClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r52 = ɵngcc0.ɵɵnextContext(4); return ctx_r52.selectVariantFacetValue($event); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const product_r10 = ɵngcc0.ɵɵnextContext(3).ngIf;\n    const ctx_r46 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"variants\", ɵngcc0.ɵɵpipeBind1(1, 8, ctx_r46.variants$))(\"facets\", ɵngcc0.ɵɵpipeBind1(2, 10, ctx_r46.facets$))(\"optionGroups\", product_r10.optionGroups)(\"productVariantsFormArray\", ctx_r46.detailForm.get(\"variants\"))(\"taxCategories\", ɵngcc0.ɵɵpipeBind1(3, 12, ctx_r46.taxCategories$))(\"customFields\", ctx_r46.customVariantFields)(\"customOptionFields\", ctx_r46.customOptionFields)(\"activeLanguage\", ɵngcc0.ɵɵpipeBind1(4, 14, ctx_r46.languageCode$));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_Template(rf, ctx) { if (rf & 1) {\n    const _r55 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-tab-content\");\n    ɵngcc0.ɵɵelementStart(1, \"section\", 47);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 48);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 49);\n    ɵngcc0.ɵɵelementStart(4, \"button\", 50);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r55); const ctx_r54 = ɵngcc0.ɵɵnextContext(3); return ctx_r54.variantDisplayMode = \"card\"; });\n    ɵngcc0.ɵɵelement(5, \"clr-icon\", 51);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"button\", 52);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_Template_button_click_8_listener() { ɵngcc0.ɵɵrestoreView(_r55); const ctx_r56 = ɵngcc0.ɵɵnextContext(3); return ctx_r56.variantDisplayMode = \"table\"; });\n    ɵngcc0.ɵɵelement(9, \"clr-icon\", 53);\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(12, \"div\", 54);\n    ɵngcc0.ɵɵtemplate(13, ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_a_13_Template, 4, 5, \"a\", 55);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(14, ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_table_14_Template, 2, 5, \"vdr-product-variants-table\", 56);\n    ɵngcc0.ɵɵtemplate(15, ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_vdr_product_variants_list_15_Template, 5, 16, \"vdr-product-variants-list\", 57);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r43 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵclassProp(\"btn-primary\", ctx_r43.variantDisplayMode === \"card\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(7, 9, \"catalog.display-variant-cards\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"btn-primary\", ctx_r43.variantDisplayMode === \"table\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(11, 11, \"catalog.display-variant-table\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r43.variantDisplayMode === \"table\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r43.variantDisplayMode === \"card\");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_8_Template(rf, ctx) { if (rf & 1) {\n    const _r58 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-tab\");\n    ɵngcc0.ɵɵelementStart(1, \"button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_8_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r58); const ctx_r57 = ɵngcc0.ɵɵnextContext(2); return ctx_r57.navigateToTab(\"variants\"); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, ProductDetailComponent_form_16_clr_tab_8_clr_tab_content_4_Template, 16, 13, \"clr-tab-content\", 13);\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.product-variants\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"clrIfActive\", ɵngcc0.ɵɵpipeBind1(5, 4, ctx_r12.activeTab$) === \"variants\");\n} }\nfunction ProductDetailComponent_form_16_Template(rf, ctx) { if (rf & 1) {\n    const _r60 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 11);\n    ɵngcc0.ɵɵlistener(\"keydown.enter\", function ProductDetailComponent_form_16_Template_form_keydown_enter_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r60); return $event.preventDefault(); });\n    ɵngcc0.ɵɵelementStart(1, \"clr-tabs\");\n    ɵngcc0.ɵɵelementStart(2, \"clr-tab\");\n    ɵngcc0.ɵɵelementStart(3, \"button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r60); const ctx_r61 = ɵngcc0.ɵɵnextContext(); return ctx_r61.navigateToTab(\"details\"); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(6, ProductDetailComponent_form_16_clr_tab_content_6_Template, 26, 33, \"clr-tab-content\", 13);\n    ɵngcc0.ɵɵpipe(7, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(8, ProductDetailComponent_form_16_clr_tab_8_Template, 6, 6, \"clr-tab\", 14);\n    ɵngcc0.ɵɵpipe(9, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r4.detailForm);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 4, \"catalog.product-details\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"clrIfActive\", ɵngcc0.ɵɵpipeBind1(7, 6, ctx_r4.activeTab$) === \"details\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ɵngcc0.ɵɵpipeBind1(9, 8, ctx_r4.isNew$));\n} }\nconst _c17 = [\"selectComponent\"];\nfunction ProductSearchInputComponent_ng_template_3_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductSearchInputComponent_ng_template_3_div_0_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); ɵngcc0.ɵɵnextContext(2); const _r0 = ɵngcc0.ɵɵreference(1); return _r0.selectTag(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    const _r0 = ɵngcc0.ɵɵreference(1);\n    ɵngcc0.ɵɵclassProp(\"selected\", ctx_r4.isSearchHeaderSelected());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(2, 4, \"catalog.search-for-term\"), \": \", _r0.searchTerm, \" \");\n} }\nfunction ProductSearchInputComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductSearchInputComponent_ng_template_3_div_0_Template, 3, 6, \"div\", 5);\n} if (rf & 2) {\n    ɵngcc0.ɵɵnextContext();\n    const _r0 = ɵngcc0.ɵɵreference(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", _r0.searchTerm);\n} }\nfunction ProductSearchInputComponent_ng_template_4_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-facet-value-chip\", 8);\n    ɵngcc0.ɵɵlistener(\"remove\", function ProductSearchInputComponent_ng_template_4_ng_container_0_Template_vdr_facet_value_chip_remove_1_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(); const item_r7 = ctx_r12.item; const clear_r8 = ctx_r12.clear; return clear_r8(item_r7); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r7 = ɵngcc0.ɵɵnextContext().item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"facetValue\", item_r7.facetValue)(\"removable\", true);\n} }\nfunction ProductSearchInputComponent_ng_template_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-chip\", 9);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function ProductSearchInputComponent_ng_template_4_ng_container_1_Template_vdr_chip_iconClick_1_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(); const item_r7 = ctx_r16.item; const clear_r8 = ctx_r16.clear; return clear_r8(item_r7); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r7 = ɵngcc0.ɵɵnextContext().item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"icon\", \"times\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\\\"\", item_r7.label, \"\\\"\");\n} }\nfunction ProductSearchInputComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductSearchInputComponent_ng_template_4_ng_container_0_Template, 2, 2, \"ng-container\", 7);\n    ɵngcc0.ɵɵtemplate(1, ProductSearchInputComponent_ng_template_4_ng_container_1_Template, 3, 2, \"ng-container\", 7);\n} if (rf & 2) {\n    const item_r7 = ctx.item;\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r7.facetValue);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !item_r7.facetValue);\n} }\nfunction ProductSearchInputComponent_ng_template_5_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"vdr-facet-value-chip\", 10);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r19 = ɵngcc0.ɵɵnextContext().item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"facetValue\", item_r19.facetValue)(\"removable\", false);\n} }\nfunction ProductSearchInputComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductSearchInputComponent_ng_template_5_ng_container_0_Template, 2, 2, \"ng-container\", 7);\n} if (rf & 2) {\n    const item_r19 = ctx.item;\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r19.facetValue);\n} }\nconst _c18 = [\"productSearchInputComponent\"];\nfunction ProductListComponent_a_21_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 13);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 14);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 15);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c8));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 2, \"catalog.create-new-product\"));\n} }\nfunction ProductListComponent_ng_template_27_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 28);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const asset_r8 = ctx.ngIf;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, asset_r8, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ProductListComponent_ng_template_27_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 29);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 30);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction ProductListComponent_ng_template_27_vdr_chip_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"common.disabled\"));\n} }\nfunction ProductListComponent_ng_template_27_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\", 16);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 17);\n    ɵngcc0.ɵɵtemplate(2, ProductListComponent_ng_template_27_img_2_Template, 2, 4, \"img\", 18);\n    ɵngcc0.ɵɵtemplate(3, ProductListComponent_ng_template_27_ng_template_3_Template, 2, 0, \"ng-template\", null, 19, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"td\", 16);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\", 20);\n    ɵngcc0.ɵɵtemplate(8, ProductListComponent_ng_template_27_vdr_chip_8_Template, 3, 3, \"vdr-chip\", 21);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"td\", 22);\n    ɵngcc0.ɵɵelement(10, \"vdr-table-row-action\", 23);\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"td\", 22);\n    ɵngcc0.ɵɵelementStart(13, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(14, \"button\", 24);\n    ɵngcc0.ɵɵtext(15);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵelement(17, \"clr-icon\", 25);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(18, \"vdr-dropdown-menu\", 7);\n    ɵngcc0.ɵɵelementStart(19, \"button\", 26);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductListComponent_ng_template_27_Template_button_click_19_listener() { ɵngcc0.ɵɵrestoreView(_r10); const result_r3 = ctx.item; const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.deleteProduct(result_r3.productId); });\n    ɵngcc0.ɵɵpipe(20, \"hasPermission\");\n    ɵngcc0.ɵɵelement(21, \"clr-icon\", 27);\n    ɵngcc0.ɵɵtext(22);\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const result_r3 = ctx.item;\n    const _r5 = ɵngcc0.ɵɵreference(4);\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.groupByProduct ? result_r3.productAsset : result_r3.productVariantAsset || result_r3.productAsset)(\"ngIfElse\", _r5);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r2.groupByProduct ? result_r3.productName : result_r3.productVariantName, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(11, 19, \"common.edit\"))(\"linkTo\", ɵngcc0.ɵɵpureFunction1(27, _c11, result_r3.productId));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(16, 21, \"common.actions\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(20, 23, \"DeleteCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(23, 25, \"common.delete\"), \" \");\n} }\nfunction ProductVariantsEditorComponent_div_5_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 6);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"input\", 8);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_div_5_Template_input_ngModelChange_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const group_r3 = ctx.$implicit; return group_r3.name = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"div\", 9);\n    ɵngcc0.ɵɵelementStart(7, \"label\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"vdr-option-value-input\", 10, 11);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_div_5_Template_vdr_option_value_input_ngModelChange_10_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const group_r3 = ctx.$implicit; return group_r3.values = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_div_5_Template_vdr_option_value_input_ngModelChange_10_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.generateVariants(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const group_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 7, \"catalog.option\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", group_r3.name)(\"readonly\", !group_r3.isNew);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 9, \"catalog.option-values\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", group_r3.values)(\"groupName\", group_r3.name)(\"disabled\", group_r3.name === \"\");\n} }\nfunction ProductVariantsEditorComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsEditorComponent_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.addOption(); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 13);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.add-option\"), \"\\n\");\n} }\nfunction ProductVariantsEditorComponent_tr_27_input_2_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"input\", 16);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_27_input_2_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r21); const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20.variantFormValues[variant_r11.id].enabled = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_27_input_2_Template_input_ngModelChange_0_listener() { ɵngcc0.ɵɵrestoreView(_r21); const ctx_r23 = ɵngcc0.ɵɵnextContext(2); return ctx_r23.formValueChanged = true; });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r12 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r12.variantFormValues[variant_r11.id].enabled);\n} }\nfunction ProductVariantsEditorComponent_tr_27_clr_input_container_6_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(1, \"input\", 17);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_27_clr_input_container_6_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r26); const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25.variantFormValues[variant_r11.id].sku = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_27_clr_input_container_6_Template_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r26); const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r28 = ɵngcc0.ɵɵnextContext(); return ctx_r28.onFormChanged(ctx_r28.variantFormValues[variant_r11.id]); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r13 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r13.variantFormValues[variant_r11.id].sku)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 2, \"catalog.sku\"));\n} }\nfunction ProductVariantsEditorComponent_tr_27_span_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r14 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r14.variantFormValues[variant_r11.id].sku);\n} }\nfunction ProductVariantsEditorComponent_tr_27_clr_input_container_9_Template(rf, ctx) { if (rf & 1) {\n    const _r33 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(1, \"vdr-currency-input\", 18);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_27_clr_input_container_9_Template_vdr_currency_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r33); const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.variantFormValues[variant_r11.id].price = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_27_clr_input_container_9_Template_vdr_currency_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r33); const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.onFormChanged(ctx_r35.variantFormValues[variant_r11.id]); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r15 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r15.variantFormValues[variant_r11.id].price)(\"currencyCode\", ctx_r15.currencyCode);\n} }\nfunction ProductVariantsEditorComponent_tr_27_span_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"currency\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r16 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(2, 1, ctx_r16.variantFormValues[variant_r11.id].price / 100, ctx_r16.currencyCode));\n} }\nfunction ProductVariantsEditorComponent_tr_27_clr_input_container_12_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(1, \"input\", 19);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_27_clr_input_container_12_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.variantFormValues[variant_r11.id].stock = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_27_clr_input_container_12_Template_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r40); const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r42 = ɵngcc0.ɵɵnextContext(); return ctx_r42.onFormChanged(ctx_r42.variantFormValues[variant_r11.id]); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r17 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r17.variantFormValues[variant_r11.id].stock);\n} }\nfunction ProductVariantsEditorComponent_tr_27_span_13_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r18 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r18.variantFormValues[variant_r11.id].stock);\n} }\nfunction ProductVariantsEditorComponent_tr_27_vdr_dropdown_15_Template(rf, ctx) { if (rf & 1) {\n    const _r48 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(1, \"button\", 20);\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 21);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"vdr-dropdown-menu\", 22);\n    ɵngcc0.ɵɵelementStart(4, \"button\", 23);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsEditorComponent_tr_27_vdr_dropdown_15_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r48); const productVariantId_r46 = ctx.ngIf; const ctx_r47 = ɵngcc0.ɵɵnextContext(2); return ctx_r47.deleteVariant(productVariantId_r46); });\n    ɵngcc0.ɵɵelement(5, \"clr-icon\", 24);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(7, 1, \"common.delete\"), \" \");\n} }\nfunction ProductVariantsEditorComponent_tr_27_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵelementStart(1, \"td\");\n    ɵngcc0.ɵɵtemplate(2, ProductVariantsEditorComponent_tr_27_input_2_Template, 1, 1, \"input\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"td\");\n    ɵngcc0.ɵɵtemplate(6, ProductVariantsEditorComponent_tr_27_clr_input_container_6_Template, 3, 4, \"clr-input-container\", 15);\n    ɵngcc0.ɵɵtemplate(7, ProductVariantsEditorComponent_tr_27_span_7_Template, 2, 1, \"span\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"td\");\n    ɵngcc0.ɵɵtemplate(9, ProductVariantsEditorComponent_tr_27_clr_input_container_9_Template, 2, 2, \"clr-input-container\", 15);\n    ɵngcc0.ɵɵtemplate(10, ProductVariantsEditorComponent_tr_27_span_10_Template, 3, 4, \"span\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"td\");\n    ɵngcc0.ɵɵtemplate(12, ProductVariantsEditorComponent_tr_27_clr_input_container_12_Template, 2, 1, \"clr-input-container\", 15);\n    ɵngcc0.ɵɵtemplate(13, ProductVariantsEditorComponent_tr_27_span_13_Template, 2, 1, \"span\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(14, \"td\");\n    ɵngcc0.ɵɵtemplate(15, ProductVariantsEditorComponent_tr_27_vdr_dropdown_15_Template, 8, 3, \"vdr-dropdown\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r11 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r2.variantFormValues[variant_r11.id].enabled || ctx_r2.variantFormValues[variant_r11.id].existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.variantFormValues[variant_r11.id].existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r2.getVariantName(variant_r11), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.variantFormValues[variant_r11.id].existing);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.variantFormValues[variant_r11.id].existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.variantFormValues[variant_r11.id].existing);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.variantFormValues[variant_r11.id].existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.variantFormValues[variant_r11.id].existing);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.variantFormValues[variant_r11.id].existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.variantFormValues[variant_r11.id].productVariantId);\n} }\nfunction CollectionTreeComponent_vdr_collection_tree_node_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-collection-tree-node\", 1);\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"expandAll\", ctx_r0.expandAll)(\"collectionTree\", ctx_r0.collectionTree)(\"activeCollectionId\", ctx_r0.activeCollectionId);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_3_clr_icon_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 31);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_3_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 32);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 28);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_button_3_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r16); const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit; return collection_r2.expanded = !collection_r2.expanded; });\n    ɵngcc0.ɵɵtemplate(1, CollectionTreeNodeComponent_div_3_button_3_clr_icon_1_Template, 1, 0, \"clr-icon\", 29);\n    ɵngcc0.ɵɵtemplate(2, CollectionTreeNodeComponent_div_3_button_3_clr_icon_2_Template, 1, 0, \"clr-icon\", 30);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r4.expandAll);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !collection_r2.expanded && !ctx_r4.expandAll);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", collection_r2.expanded || ctx_r4.expandAll);\n} }\nfunction CollectionTreeNodeComponent_div_3_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 33);\n} }\nfunction CollectionTreeNodeComponent_div_3_vdr_chip_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.private\"));\n} }\nfunction CollectionTreeNodeComponent_div_3_div_17_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 34);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 35);\n    ɵngcc0.ɵɵelementEnd();\n} }\nconst _c19 = function (a0) { return { parentId: a0 }; };\nconst _c20 = function (a2) { return [\"./\", \"create\", a2]; };\nfunction CollectionTreeNodeComponent_div_3_a_22_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 36);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 37);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction1(6, _c20, ɵngcc0.ɵɵpureFunction1(4, _c19, collection_r2.id)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.create-new-collection\"), \" \");\n} }\nfunction CollectionTreeNodeComponent_div_3_button_37_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_button_37_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r22); const item_r19 = ctx.$implicit; const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20.move(collection_r2, item_r19.id); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 38);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r19 = ctx.$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r10.hasUpdatePermission$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", item_r19.path, \" \");\n} }\nfunction CollectionTreeNodeComponent_div_3_vdr_collection_tree_node_44_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-collection-tree-node\", 39);\n} if (rf & 2) {\n    const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r11 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"expandAll\", ctx_r11.expandAll)(\"collectionTree\", collection_r2)(\"activeCollectionId\", ctx_r11.activeCollectionId);\n} }\nconst _c21 = function (a0) { return { contents: a0 }; };\nconst _c22 = function (a1) { return [\"/catalog/collections/\", a1]; };\nfunction CollectionTreeNodeComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(3, CollectionTreeNodeComponent_div_3_button_3_Template, 3, 3, \"button\", 6);\n    ɵngcc0.ɵɵtemplate(4, CollectionTreeNodeComponent_div_3_ng_template_4_Template, 1, 0, \"ng-template\", null, 7, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(7, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(8, CollectionTreeNodeComponent_div_3_vdr_chip_8_Template, 3, 3, \"vdr-chip\", 9);\n    ɵngcc0.ɵɵelementStart(9, \"a\", 10);\n    ɵngcc0.ɵɵelement(10, \"clr-icon\", 11);\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"a\", 12);\n    ɵngcc0.ɵɵelement(14, \"clr-icon\", 13);\n    ɵngcc0.ɵɵtext(15);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(17, CollectionTreeNodeComponent_div_3_div_17_Template, 2, 0, \"div\", 14);\n    ɵngcc0.ɵɵelementStart(18, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(19, \"button\", 15);\n    ɵngcc0.ɵɵelement(20, \"clr-icon\", 16);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(21, \"vdr-dropdown-menu\", 17);\n    ɵngcc0.ɵɵtemplate(22, CollectionTreeNodeComponent_div_3_a_22_Template, 4, 8, \"a\", 18);\n    ɵngcc0.ɵɵelement(23, \"div\", 19);\n    ɵngcc0.ɵɵelementStart(24, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_24_listener() { ɵngcc0.ɵɵrestoreView(_r25); const collection_r2 = ctx.$implicit; const i_r3 = ctx.index; const ctx_r24 = ɵngcc0.ɵɵnextContext(); return ctx_r24.moveUp(collection_r2, i_r3); });\n    ɵngcc0.ɵɵpipe(25, \"async\");\n    ɵngcc0.ɵɵelement(26, \"clr-icon\", 21);\n    ɵngcc0.ɵɵtext(27);\n    ɵngcc0.ɵɵpipe(28, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(29, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_29_listener() { ɵngcc0.ɵɵrestoreView(_r25); const collection_r2 = ctx.$implicit; const i_r3 = ctx.index; const ctx_r26 = ɵngcc0.ɵɵnextContext(); return ctx_r26.moveDown(collection_r2, i_r3); });\n    ɵngcc0.ɵɵpipe(30, \"async\");\n    ɵngcc0.ɵɵelement(31, \"clr-icon\", 22);\n    ɵngcc0.ɵɵtext(32);\n    ɵngcc0.ɵɵpipe(33, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(34, \"h4\", 23);\n    ɵngcc0.ɵɵtext(35);\n    ɵngcc0.ɵɵpipe(36, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(37, CollectionTreeNodeComponent_div_3_button_37_Template, 4, 4, \"button\", 24);\n    ɵngcc0.ɵɵelement(38, \"div\", 19);\n    ɵngcc0.ɵɵelementStart(39, \"button\", 25);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_39_listener() { ɵngcc0.ɵɵrestoreView(_r25); const collection_r2 = ctx.$implicit; const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.delete(collection_r2.id); });\n    ɵngcc0.ɵɵpipe(40, \"async\");\n    ɵngcc0.ɵɵelement(41, \"clr-icon\", 26);\n    ɵngcc0.ɵɵtext(42);\n    ɵngcc0.ɵɵpipe(43, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(44, CollectionTreeNodeComponent_div_3_vdr_collection_tree_node_44_Template, 1, 3, \"vdr-collection-tree-node\", 27);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const collection_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const _r5 = ɵngcc0.ɵɵreference(5);\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"private\", collection_r2.isPrivate);\n    ɵngcc0.ɵɵproperty(\"cdkDragData\", collection_r2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"active\", collection_r2.id === ctx_r1.activeCollectionId);\n    ɵngcc0.ɵɵproperty(\"ngClass\", \"depth-\" + ctx_r1.depth);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", collection_r2.children == null ? null : collection_r2.children.length)(\"ngIfElse\", _r5);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", collection_r2.name, \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", collection_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction1(45, _c11, ɵngcc0.ɵɵpureFunction1(43, _c21, collection_r2.id)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(12, 25, \"catalog.view-contents\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction1(47, _c22, collection_r2.id));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(16, 27, \"common.edit\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"CreateCatalog\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", i_r3 === 0 || !ɵngcc0.ɵɵpipeBind1(25, 29, ctx_r1.hasUpdatePermission$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(28, 31, \"catalog.move-up\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", i_r3 === ctx_r1.collectionTree.children.length - 1 || !ɵngcc0.ɵɵpipeBind1(30, 33, ctx_r1.hasUpdatePermission$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(33, 35, \"catalog.move-down\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(36, 37, \"catalog.move-to\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.getMoveListItems(collection_r2));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(40, 39, ctx_r1.hasDeletePermission$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(43, 41, \"common.delete\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", collection_r2.expanded || ctx_r1.expandAll);\n} }\nfunction GenerateProductVariantsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"input\", 9);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_input_ngModelChange_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r7); const group_r4 = ctx.$implicit; return group_r4.name = $event; })(\"keydown.enter\", function GenerateProductVariantsComponent_div_0_Template_input_keydown_enter_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r7); const _r5 = ɵngcc0.ɵɵreference(11); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.handleEnter($event, _r5); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(7, \"label\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"vdr-option-value-input\", 11, 12);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_vdr_option_value_input_ngModelChange_10_listener($event) { ɵngcc0.ɵɵrestoreView(_r7); const group_r4 = ctx.$implicit; return group_r4.values = $event; })(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_vdr_option_value_input_ngModelChange_10_listener() { ɵngcc0.ɵɵrestoreView(_r7); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.generateVariants(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"div\", 13);\n    ɵngcc0.ɵɵelementStart(13, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function GenerateProductVariantsComponent_div_0_Template_button_click_13_listener() { ɵngcc0.ɵɵrestoreView(_r7); const group_r4 = ctx.$implicit; const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.removeOption(group_r4.name); });\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelement(15, \"clr-icon\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const group_r4 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 7, \"catalog.option\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", group_r4.name);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 9, \"catalog.option-values\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", group_r4.values)(\"groupName\", group_r4.name)(\"disabled\", group_r4.name === \"\");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(14, 11, \"catalog.remove-option\"));\n} }\nfunction GenerateProductVariantsComponent_th_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"common.create\"));\n} }\nfunction GenerateProductVariantsComponent_th_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.variant\"));\n} }\nfunction GenerateProductVariantsComponent_tr_20_td_1_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\");\n    ɵngcc0.ɵɵelementStart(1, \"input\", 19);\n    ɵngcc0.ɵɵlistener(\"change\", function GenerateProductVariantsComponent_tr_20_td_1_Template_input_change_1_listener() { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(2); return ctx_r15.onFormChange(); })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_td_1_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); const variant_r12 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.variantFormValues[variant_r12.id].enabled = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r12 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r13 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r13.variantFormValues[variant_r12.id].enabled);\n} }\nfunction GenerateProductVariantsComponent_tr_20_td_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r12 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", variant_r12.values.join(\" \"), \" \");\n} }\nfunction GenerateProductVariantsComponent_tr_20_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵtemplate(1, GenerateProductVariantsComponent_tr_20_td_1_Template, 2, 1, \"td\", 5);\n    ɵngcc0.ɵɵtemplate(2, GenerateProductVariantsComponent_tr_20_td_2_Template, 2, 1, \"td\", 5);\n    ɵngcc0.ɵɵelementStart(3, \"td\");\n    ɵngcc0.ɵɵelementStart(4, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(5, \"input\", 16);\n    ɵngcc0.ɵɵlistener(\"change\", function GenerateProductVariantsComponent_tr_20_Template_input_change_5_listener() { ɵngcc0.ɵɵrestoreView(_r22); const ctx_r21 = ɵngcc0.ɵɵnextContext(); return ctx_r21.onFormChange(); })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_input_ngModelChange_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r22); const variant_r12 = ctx.$implicit; const ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.variantFormValues[variant_r12.id].sku = $event; });\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\");\n    ɵngcc0.ɵɵelementStart(8, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(9, \"vdr-currency-input\", 17);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_vdr_currency_input_ngModelChange_9_listener($event) { ɵngcc0.ɵɵrestoreView(_r22); const variant_r12 = ctx.$implicit; const ctx_r24 = ɵngcc0.ɵɵnextContext(); return ctx_r24.variantFormValues[variant_r12.id].price = $event; })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_vdr_currency_input_ngModelChange_9_listener() { ɵngcc0.ɵɵrestoreView(_r22); const ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25.onFormChange(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"td\");\n    ɵngcc0.ɵɵelementStart(11, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(12, \"input\", 18);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_input_ngModelChange_12_listener($event) { ɵngcc0.ɵɵrestoreView(_r22); const variant_r12 = ctx.$implicit; const ctx_r26 = ɵngcc0.ɵɵnextContext(); return ctx_r26.variantFormValues[variant_r12.id].stock = $event; })(\"change\", function GenerateProductVariantsComponent_tr_20_Template_input_change_12_listener() { ɵngcc0.ɵɵrestoreView(_r22); const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.onFormChange(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r12 = ctx.$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r3.variantFormValues[variant_r12.id].enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", 1 < ctx_r3.variants.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", 1 < ctx_r3.variants.length);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r3.variantFormValues[variant_r12.id].sku)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(6, 9, \"catalog.sku\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r3.variantFormValues[variant_r12.id].price)(\"currencyCode\", ctx_r3.currencyCode);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r3.variantFormValues[variant_r12.id].stock);\n} }\nconst _c23 = [\"textArea\"];\nfunction OptionValueInputComponent_div_1_vdr_chip_1_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 6);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function OptionValueInputComponent_div_1_vdr_chip_1_Template_vdr_chip_iconClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const option_r3 = ctx.$implicit; const ctx_r5 = ɵngcc0.ɵɵnextContext(2); return ctx_r5.removeOption(option_r3); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    const isLast_r4 = ctx.last;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵclassProp(\"selected\", isLast_r4 && ctx_r2.lastSelected)(\"locked\", option_r3.locked);\n    ɵngcc0.ɵɵproperty(\"icon\", option_r3.locked ? \"lock\" : \"times\")(\"colorFrom\", ctx_r2.groupName);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", option_r3.name, \" \");\n} }\nfunction OptionValueInputComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵtemplate(1, OptionValueInputComponent_div_1_vdr_chip_1_Template, 2, 7, \"vdr-chip\", 5);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.options);\n} }\nconst _c24 = [\"dlg\"];\nconst _c25 = [\"dl\"];\nfunction ProductAssetsComponent_div_0_img_3_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"img\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_div_0_img_3_Template_img_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(2); return ctx_r9.previewAsset(ctx_r9.featuredAsset); });\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, ctx_r5.featuredAsset, \"small\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ProductAssetsComponent_div_0_div_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 13);\n    ɵngcc0.ɵɵelementStart(2, \"div\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 1, \"catalog.no-featured-asset\"));\n} }\nfunction ProductAssetsComponent_div_0_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nfunction ProductAssetsComponent_div_0_div_7_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 14);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_div_0_div_7_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(2); return ctx_r11.selectAssets(); });\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 16);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 1, \"asset.add-asset\"), \" \");\n} }\nfunction ProductAssetsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(3, ProductAssetsComponent_div_0_img_3_Template, 2, 4, \"img\", 6);\n    ɵngcc0.ɵɵtemplate(4, ProductAssetsComponent_div_0_div_4_Template, 5, 3, \"div\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(6, ProductAssetsComponent_div_0_ng_container_6_Template, 1, 0, \"ng-container\", 9);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(7, ProductAssetsComponent_div_0_div_7_Template, 5, 3, \"div\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    const _r3 = ɵngcc0.ɵɵreference(4);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.featuredAsset);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n} }\nfunction ProductAssetsComponent_ng_template_1_img_1_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"img\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_1_img_1_Template_img_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r17 = ɵngcc0.ɵɵnextContext(2); return ctx_r17.previewAsset(ctx_r17.featuredAsset); });\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, ctx_r13.featuredAsset, \"thumb\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ProductAssetsComponent_ng_template_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 19);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction ProductAssetsComponent_ng_template_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nfunction ProductAssetsComponent_ng_template_1_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_1_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r19 = ɵngcc0.ɵɵnextContext(2); return ctx_r19.selectAssets(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 16);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 2, \"asset.add-asset\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 4, \"asset.add-asset\"), \" \");\n} }\nfunction ProductAssetsComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 17);\n    ɵngcc0.ɵɵtemplate(1, ProductAssetsComponent_ng_template_1_img_1_Template, 2, 4, \"img\", 6);\n    ɵngcc0.ɵɵtemplate(2, ProductAssetsComponent_ng_template_1_div_2_Template, 2, 0, \"div\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, ProductAssetsComponent_ng_template_1_ng_container_3_Template, 1, 0, \"ng-container\", 9);\n    ɵngcc0.ɵɵtemplate(4, ProductAssetsComponent_ng_template_1_button_4_Template, 5, 6, \"button\", 18);\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    const _r3 = ɵngcc0.ɵɵreference(4);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n} }\nfunction ProductAssetsComponent_ng_template_3_div_5_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 23);\n    ɵngcc0.ɵɵlistener(\"cdkDropListDropped\", function ProductAssetsComponent_ng_template_3_div_5_Template_div_cdkDropListDropped_0_listener() { ɵngcc0.ɵɵrestoreView(_r26); const ctx_r25 = ɵngcc0.ɵɵnextContext(2); return ctx_r25.dropListDropped(); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(2, \"vdr-dropdown\", 26);\n    ɵngcc0.ɵɵlistener(\"cdkDragMoved\", function ProductAssetsComponent_ng_template_3_div_5_Template_vdr_dropdown_cdkDragMoved_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r26); const ctx_r27 = ɵngcc0.ɵɵnextContext(2); return ctx_r27.dragMoved($event); });\n    ɵngcc0.ɵɵelementStart(3, \"div\", 27);\n    ɵngcc0.ɵɵelement(4, \"img\", 28);\n    ɵngcc0.ɵɵpipe(5, \"assetPreview\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"vdr-dropdown-menu\", 29);\n    ɵngcc0.ɵɵelementStart(7, \"button\", 30);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_3_div_5_Template_button_click_7_listener() { ɵngcc0.ɵɵrestoreView(_r26); const asset_r24 = ctx.$implicit; const ctx_r28 = ɵngcc0.ɵɵnextContext(2); return ctx_r28.previewAsset(asset_r24); });\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"button\", 31);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_3_div_5_Template_button_click_10_listener() { ɵngcc0.ɵɵrestoreView(_r26); const asset_r24 = ctx.$implicit; const ctx_r29 = ɵngcc0.ɵɵnextContext(2); return ctx_r29.setAsFeatured(asset_r24); });\n    ɵngcc0.ɵɵpipe(11, \"hasPermission\");\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(14, \"div\", 32);\n    ɵngcc0.ɵɵelementStart(15, \"button\", 33);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_3_div_5_Template_button_click_15_listener() { ɵngcc0.ɵɵrestoreView(_r26); const asset_r24 = ctx.$implicit; const ctx_r30 = ɵngcc0.ɵɵnextContext(2); return ctx_r30.removeAsset(asset_r24); });\n    ɵngcc0.ɵɵpipe(16, \"hasPermission\");\n    ɵngcc0.ɵɵtext(17);\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const asset_r24 = ctx.$implicit;\n    const ctx_r23 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"cdkDropListDisabled\", !ɵngcc0.ɵɵpipeBind1(1, 10, \"UpdateCatalog\"))(\"cdkDropListEnterPredicate\", ctx_r23.dropListEnterPredicate);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"featured\", ctx_r23.isFeatured(asset_r24));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(5, 12, asset_r24, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 15, \"asset.preview\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r23.isFeatured(asset_r24) || !ɵngcc0.ɵɵpipeBind1(11, 17, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 19, \"asset.set-as-featured-asset\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(16, 21, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(18, 23, \"asset.remove-asset\"), \" \");\n} }\nfunction ProductAssetsComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    const _r32 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 21, 22);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 23, 24);\n    ɵngcc0.ɵɵlistener(\"cdkDropListDropped\", function ProductAssetsComponent_ng_template_3_Template_div_cdkDropListDropped_2_listener() { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.dropListDropped(); });\n    ɵngcc0.ɵɵpipe(4, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(5, ProductAssetsComponent_ng_template_3_div_5_Template, 19, 25, \"div\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"compact\", ctx_r4.compact);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"cdkDropListDisabled\", !ɵngcc0.ɵɵpipeBind1(4, 5, \"UpdateCatalog\"))(\"cdkDropListEnterPredicate\", ctx_r4.dropListEnterPredicate);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r4.assets);\n} }\nfunction UpdateProductOptionDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.update-product-option\"));\n} }\nfunction UpdateProductOptionDialogComponent_section_9_ng_container_4_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 11);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const customField_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r7.customFieldsForm)(\"customField\", customField_r6)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 3, \"UpdateCatalog\"));\n} }\nfunction UpdateProductOptionDialogComponent_section_9_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, UpdateProductOptionDialogComponent_section_9_ng_container_4_vdr_custom_field_control_1_Template, 2, 5, \"vdr-custom-field-control\", 10);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r6 = ctx.$implicit;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.customFieldsForm.get(customField_r6.name));\n} }\nfunction UpdateProductOptionDialogComponent_section_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\");\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, UpdateProductOptionDialogComponent_section_9_ng_container_4_Template, 2, 1, \"ng-container\", 9);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"common.custom-fields\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.customFields);\n} }\nfunction UpdateProductOptionDialogComponent_ng_template_10_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function UpdateProductOptionDialogComponent_ng_template_10_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function UpdateProductOptionDialogComponent_ng_template_10_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.update(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    const _r1 = ɵngcc0.ɵɵreference(4);\n    const _r2 = ɵngcc0.ɵɵreference(8);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", _r1.invalid || _r2.invalid || _r1.pristine && _r2.pristine && ctx_r4.customFieldsForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"catalog.update-product-option\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_toggle_wrapper_16_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(1, \"input\", 38);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 1, \"common.enabled\"));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"option\", 41);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const taxCategory_r14 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", taxCategory_r14.id);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", taxCategory_r14.name, \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-select-container\");\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"select\", 39);\n    ɵngcc0.ɵɵtemplate(5, ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_option_5_Template, 2, 2, \"option\", 40);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.tax-category\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r5.taxCategories);\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_template_26_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"label\", 42);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\", 43);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const i_r2 = ɵngcc0.ɵɵnextContext(2).index;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 2, \"catalog.tax-category\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r7.getTaxCategoryName(i_r2), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_section_51_ng_container_1_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 47);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const customField_r17 = ɵngcc0.ɵɵnextContext().$implicit;\n    const i_r2 = ɵngcc0.ɵɵnextContext(3).index;\n    const ctx_r18 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"compact\", true)(\"customFieldsFormGroup\", ctx_r18.formArray.at(i_r2).get(ɵngcc0.ɵɵpureFunction0(6, _c5)))(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 4, \"UpdateCatalog\"))(\"customField\", customField_r17);\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_section_51_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_ng_container_1_section_51_ng_container_1_vdr_custom_field_control_1_Template, 2, 7, \"vdr-custom-field-control\", 46);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r17 = ctx.$implicit;\n    const i_r2 = ɵngcc0.ɵɵnextContext(3).index;\n    const ctx_r16 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r16.customFieldIsSet(i_r2, customField_r17.name));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_section_51_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 44);\n    ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_ng_container_1_section_51_ng_container_1_Template, 2, 1, \"ng-container\", 45);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r8.customFields);\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_div_55_vdr_chip_2_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 50);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function ProductVariantsListComponent_div_1_ng_container_1_div_55_vdr_chip_2_Template_vdr_chip_iconClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r25); const option_r23 = ctx.$implicit; const ctx_r24 = ɵngcc0.ɵɵnextContext(4); return ctx_r24.editOption(option_r23); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(2, \"span\", 51);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const option_r23 = ctx.$implicit;\n    const ctx_r22 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"colorFrom\", ctx_r22.optionGroupName(option_r23.groupId))(\"invert\", true)(\"icon\", ɵngcc0.ɵɵpipeBind1(1, 5, \"UpdateCatalog\") && \"pencil\");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r22.optionGroupName(option_r23.groupId));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r22.optionName(option_r23), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_div_55_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 48);\n    ɵngcc0.ɵɵtemplate(2, ProductVariantsListComponent_div_1_ng_container_1_div_55_vdr_chip_2_Template, 5, 7, \"vdr-chip\", 49);\n    ɵngcc0.ɵɵpipe(3, \"sort\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(3, 1, variant_r1.options, \"groupId\"));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_58_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-facet-value-chip\", 52);\n    ɵngcc0.ɵɵlistener(\"remove\", function ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_58_Template_vdr_facet_value_chip_remove_0_listener() { ɵngcc0.ɵɵrestoreView(_r30); const facetValue_r27 = ctx.$implicit; const i_r2 = ɵngcc0.ɵɵnextContext(2).index; const ctx_r28 = ɵngcc0.ɵɵnextContext(); return ctx_r28.removeFacetValue(i_r2, facetValue_r27.id); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const facetValue_r27 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"facetValue\", facetValue_r27)(\"removable\", ɵngcc0.ɵɵpipeBind1(1, 2, \"UpdateCatalog\"));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_59_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-facet-value-chip\", 52);\n    ɵngcc0.ɵɵlistener(\"remove\", function ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_59_Template_vdr_facet_value_chip_remove_0_listener() { ɵngcc0.ɵɵrestoreView(_r34); const facetValue_r31 = ctx.$implicit; const i_r2 = ɵngcc0.ɵɵnextContext(2).index; const ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.removeFacetValue(i_r2, facetValue_r31.id); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const facetValue_r31 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"facetValue\", facetValue_r31)(\"removable\", ɵngcc0.ɵɵpipeBind1(1, 2, \"UpdateCatalog\"));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_button_60_Template(rf, ctx) { if (rf & 1) {\n    const _r37 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 53);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsListComponent_div_1_ng_container_1_button_60_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r37); const variant_r1 = ɵngcc0.ɵɵnextContext(2).$implicit; const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.selectFacetValueClick.emit([variant_r1.id]); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 54);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.add-facets\"), \" \");\n} }\nconst _c26 = function (a0) { return [a0, \"price\"]; };\nconst _c27 = function (a0) { return [a0, \"taxCategoryId\"]; };\nfunction ProductVariantsListComponent_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0, 4);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 5);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 6);\n    ɵngcc0.ɵɵelementStart(3, \"vdr-title-input\", 7);\n    ɵngcc0.ɵɵpipe(4, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(5, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(6, \"input\", 8);\n    ɵngcc0.ɵɵpipe(7, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(8, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"vdr-title-input\", 9);\n    ɵngcc0.ɵɵpipe(10, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(11, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(12, \"input\", 10);\n    ɵngcc0.ɵɵpipe(13, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"div\", 11);\n    ɵngcc0.ɵɵtemplate(16, ProductVariantsListComponent_div_1_ng_container_1_clr_toggle_wrapper_16_Template, 5, 3, \"clr-toggle-wrapper\", 12);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(17, \"div\", 13);\n    ɵngcc0.ɵɵelementStart(18, \"div\", 14);\n    ɵngcc0.ɵɵelementStart(19, \"div\", 15);\n    ɵngcc0.ɵɵelementStart(20, \"vdr-product-assets\", 16);\n    ɵngcc0.ɵɵlistener(\"change\", function ProductVariantsListComponent_div_1_ng_container_1_Template_vdr_product_assets_change_20_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const variant_r1 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r38 = ɵngcc0.ɵɵnextContext(); return ctx_r38.onAssetChange(variant_r1.id, $event); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(21, \"div\", 17);\n    ɵngcc0.ɵɵelementStart(22, \"div\", 18);\n    ɵngcc0.ɵɵelementStart(23, \"div\", 19);\n    ɵngcc0.ɵɵelementStart(24, \"div\", 20);\n    ɵngcc0.ɵɵtemplate(25, ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_Template, 6, 4, \"clr-select-container\", 21);\n    ɵngcc0.ɵɵtemplate(26, ProductVariantsListComponent_div_1_ng_container_1_ng_template_26_Template, 5, 4, \"ng-template\", null, 22, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(28, \"div\", 23);\n    ɵngcc0.ɵɵelementStart(29, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(30, \"label\");\n    ɵngcc0.ɵɵtext(31);\n    ɵngcc0.ɵɵpipe(32, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(33, \"vdr-currency-input\", 24);\n    ɵngcc0.ɵɵpipe(34, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(35, \"vdr-variant-price-detail\", 25);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(36, \"div\", 19);\n    ɵngcc0.ɵɵelementStart(37, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(38, \"label\");\n    ɵngcc0.ɵɵtext(39);\n    ɵngcc0.ɵɵpipe(40, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(41, \"input\", 26);\n    ɵngcc0.ɵɵpipe(42, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(43, \"clr-checkbox-wrapper\", 27);\n    ɵngcc0.ɵɵelement(44, \"input\", 28);\n    ɵngcc0.ɵɵpipe(45, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(46, \"label\");\n    ɵngcc0.ɵɵtext(47);\n    ɵngcc0.ɵɵpipe(48, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(49, \"div\", 29);\n    ɵngcc0.ɵɵelementStart(50, \"div\", 19);\n    ɵngcc0.ɵɵtemplate(51, ProductVariantsListComponent_div_1_ng_container_1_section_51_Template, 2, 1, \"section\", 30);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(52, \"div\", 13);\n    ɵngcc0.ɵɵelementStart(53, \"div\", 31);\n    ɵngcc0.ɵɵelement(54, \"vdr-entity-info\", 32);\n    ɵngcc0.ɵɵtemplate(55, ProductVariantsListComponent_div_1_ng_container_1_div_55_Template, 4, 4, \"div\", 33);\n    ɵngcc0.ɵɵelement(56, \"div\", 34);\n    ɵngcc0.ɵɵelementStart(57, \"div\", 35);\n    ɵngcc0.ɵɵtemplate(58, ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_58_Template, 2, 4, \"vdr-facet-value-chip\", 36);\n    ɵngcc0.ɵɵtemplate(59, ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_59_Template, 2, 4, \"vdr-facet-value-chip\", 36);\n    ɵngcc0.ɵɵtemplate(60, ProductVariantsListComponent_div_1_ng_container_1_button_60_Template, 4, 3, \"button\", 37);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const _r6 = ɵngcc0.ɵɵreference(27);\n    const ctx_r41 = ɵngcc0.ɵɵnextContext();\n    const i_r2 = ctx_r41.index;\n    const variant_r1 = ctx_r41.$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r3.formArray.at(i_r2));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(4, 30, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(7, 32, \"UpdateCatalog\"))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(8, 34, \"catalog.sku\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(10, 36, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(13, 38, \"UpdateCatalog\"))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(14, 40, \"common.name\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"compact\", true)(\"assets\", variant_r1.assets)(\"featuredAsset\", variant_r1.featuredAsset);\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\")(\"vdrIfPermissionsElse\", _r6);\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(32, 42, \"catalog.price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"currencyCode\", variant_r1.currencyCode)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(34, 44, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"price\", ctx_r3.formArray.get(ɵngcc0.ɵɵpureFunction1(54, _c26, i_r2)).value)(\"currencyCode\", variant_r1.currencyCode)(\"priceIncludesTax\", variant_r1.priceIncludesTax)(\"taxCategoryId\", ctx_r3.formArray.get(ɵngcc0.ɵɵpureFunction1(56, _c27, i_r2)).value);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(40, 46, \"catalog.stock-on-hand\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(42, 48, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"vdrDisabled\", !ɵngcc0.ɵɵpipeBind1(45, 50, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(48, 52, \"catalog.track-inventory\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.customFields.length);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"entity\", variant_r1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", variant_r1.options.length);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.existingFacetValues(i_r2));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.pendingFacetValues(i_r2));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n} }\nconst _c28 = function (a0) { return [a0, \"enabled\"]; };\nfunction ProductVariantsListComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_ng_container_1_Template, 61, 58, \"ng-container\", 3);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const i_r2 = ctx.index;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    var tmp_0_0 = null;\n    const currVal_0 = !((tmp_0_0 = ctx_r0.formArray.get(ɵngcc0.ɵɵpureFunction1(3, _c28, i_r2))) == null ? null : tmp_0_0.value);\n    ɵngcc0.ɵɵclassProp(\"disabled\", currVal_0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.formArray.at(i_r2));\n} }\nfunction ProductVariantsTableComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-dt-column\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const optionGroup_r2 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(optionGroup_r2.name);\n} }\nfunction ProductVariantsTableComponent_ng_template_19_img_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 15);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const variant_r3 = ɵngcc0.ɵɵnextContext().item;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, variant_r3.featuredAsset, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ProductVariantsTableComponent_ng_template_19_div_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 16);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 17);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction ProductVariantsTableComponent_ng_template_19_ng_container_16_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 3);\n    ɵngcc0.ɵɵpipe(2, \"stringToColor\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const option_r9 = ctx.$implicit;\n    const i_r4 = ɵngcc0.ɵɵnextContext().index;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵstyleProp(\"color\", ɵngcc0.ɵɵpipeBind1(2, 5, ctx_r7.optionGroupName(option_r9.groupId)));\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r7.formArray.get(ɵngcc0.ɵɵpureFunction1(7, _c28, i_r4)).value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", option_r9.name, \" \");\n} }\nfunction ProductVariantsTableComponent_ng_template_19_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0, 2);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 3);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(4, ProductVariantsTableComponent_ng_template_19_img_4_Template, 2, 4, \"img\", 6);\n    ɵngcc0.ɵɵtemplate(5, ProductVariantsTableComponent_ng_template_19_div_5_Template, 2, 0, \"div\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\", 3);\n    ɵngcc0.ɵɵelementStart(7, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(8, \"input\", 8);\n    ɵngcc0.ɵɵpipe(9, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(10, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"td\", 3);\n    ɵngcc0.ɵɵelementStart(12, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(13, \"input\", 9);\n    ɵngcc0.ɵɵpipe(14, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(16, ProductVariantsTableComponent_ng_template_19_ng_container_16_Template, 4, 9, \"ng-container\", 1);\n    ɵngcc0.ɵɵpipe(17, \"sort\");\n    ɵngcc0.ɵɵelementStart(18, \"td\", 10);\n    ɵngcc0.ɵɵelementStart(19, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(20, \"vdr-currency-input\", 11);\n    ɵngcc0.ɵɵpipe(21, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(22, \"td\", 12);\n    ɵngcc0.ɵɵelementStart(23, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(24, \"input\", 13);\n    ɵngcc0.ɵɵpipe(25, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(26, \"td\", 12);\n    ɵngcc0.ɵɵelementStart(27, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(28, \"input\", 14);\n    ɵngcc0.ɵɵpipe(29, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const variant_r3 = ctx.item;\n    const i_r4 = ctx.index;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r1.formArray.at(i_r4));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r1.formArray.get(ɵngcc0.ɵɵpureFunction1(41, _c28, i_r4)).value);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", variant_r3.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !variant_r3.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r1.formArray.get(ɵngcc0.ɵɵpureFunction1(43, _c28, i_r4)).value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(9, 24, \"UpdateCatalog\"))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(10, 26, \"common.name\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r1.formArray.get(ɵngcc0.ɵɵpureFunction1(45, _c28, i_r4)).value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(14, 28, \"UpdateCatalog\"))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(15, 30, \"catalog.sku\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(17, 32, variant_r3.options, \"groupId\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r1.formArray.get(ɵngcc0.ɵɵpureFunction1(47, _c28, i_r4)).value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"currencyCode\", variant_r3.currencyCode)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(21, 35, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r1.formArray.get(ɵngcc0.ɵɵpureFunction1(49, _c28, i_r4)).value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(25, 37, \"UpdateCatalog\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r1.formArray.get(ɵngcc0.ɵɵpureFunction1(51, _c28, i_r4)).value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrDisabled\", !ɵngcc0.ɵɵpipeBind1(29, 39, \"UpdateCatalog\"));\n} }\nconst _c29 = function (a0) { return { rate: a0 }; };\nfunction VariantPriceDetailComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"catalog.price-includes-tax-at\", ɵngcc0.ɵɵpureFunction1(6, _c29, ɵngcc0.ɵɵpipeBind1(3, 4, ctx_r0.taxRate$))), \"\\n\");\n} }\nconst _c30 = function (a0, a1) { return { price: a0, rate: a1 }; };\nfunction VariantPriceDetailComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"currency\");\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"catalog.price-with-tax-in-default-zone\", ɵngcc0.ɵɵpureFunction2(11, _c30, ɵngcc0.ɵɵpipeBind2(3, 4, ɵngcc0.ɵɵpipeBind1(4, 7, ctx_r1.grossPrice$), ctx_r1.currencyCode), ɵngcc0.ɵɵpipeBind1(5, 9, ctx_r1.taxRate$))), \"\\n\");\n} }\nlet AssetDetailComponent = class AssetDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, notificationService, dataService, formBuilder) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.notificationService = notificationService;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.detailForm = new FormGroup({});\r\n    }\r\n    ngOnInit() {\r\n        this.detailForm = new FormGroup({\r\n            name: new FormControl(''),\r\n        });\r\n        this.init();\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    onAssetChange(event) {\r\n        // tslint:disable-next-line:no-non-null-assertion\r\n        this.detailForm.get('name').setValue(event.name);\r\n        // tslint:disable-next-line:no-non-null-assertion\r\n        this.detailForm.get('name').markAsDirty();\r\n    }\r\n    save() {\r\n        this.dataService.product\r\n            .updateAsset({\r\n            id: this.id,\r\n            name: this.detailForm.value.name,\r\n        })\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-update-success'), { entity: 'Asset' });\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Asset',\r\n            });\r\n        });\r\n    }\r\n    setFormValues(entity, languageCode) {\r\n        // tslint:disable-next-line:no-non-null-assertion\r\n        this.detailForm.get('name').setValue(entity.name);\r\n    }\r\n};\nAssetDetailComponent.ɵfac = function AssetDetailComponent_Factory(t) { return new (t || AssetDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder)); };\nAssetDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AssetDetailComponent, selectors: [[\"vdr-asset-detail\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 9, vars: 8, consts: [[3, \"entity\"], [\"locationId\", \"asset-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [3, \"asset\", \"editable\", \"assetChange\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function AssetDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelement(2, \"vdr-entity-info\", 0);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(5, \"vdr-action-bar-items\", 1);\n        ɵngcc0.ɵɵtemplate(6, AssetDetailComponent_button_6_Template, 3, 4, \"button\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"vdr-asset-preview\", 3);\n        ɵngcc0.ɵɵlistener(\"assetChange\", function AssetDetailComponent_Template_vdr_asset_preview_assetChange_7_listener($event) { return ctx.onAssetChange($event); });\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(3, 4, ctx.entity$));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"asset\", ɵngcc0.ɵɵpipeBind1(8, 6, ctx.entity$))(\"editable\", true);\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.AssetPreviewComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}\"], changeDetection: 0 });\r\nAssetDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: NotificationService },\r\n    { type: DataService },\r\n    { type: FormBuilder }\r\n];\r\nAssetDetailComponent = __decorate([ __metadata(\"design:paramtypes\", [Router,\r\n        ActivatedRoute,\r\n        ServerConfigService,\r\n        NotificationService,\r\n        DataService,\r\n        FormBuilder])\r\n], AssetDetailComponent);\n\nlet AssetListComponent = class AssetListComponent extends BaseListComponent {\r\n    constructor(notificationService, modalService, dataService, router, route) {\r\n        super(router, route);\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.dataService = dataService;\r\n        this.searchTerm = new FormControl('');\r\n        this.uploading = false;\r\n        super.setQueryFn((...args) => this.dataService.product.getAssetList(...args), (data) => data.assets, (skip, take) => ({\r\n            options: {\r\n                skip,\r\n                take,\r\n                filter: {\r\n                    name: {\r\n                        contains: this.searchTerm.value,\r\n                    },\r\n                },\r\n                sort: {\r\n                    createdAt: SortOrder.DESC,\r\n                },\r\n            },\r\n        }));\r\n    }\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.paginationConfig$ = combineLatest(this.itemsPerPage$, this.currentPage$, this.totalItems$).pipe(map(([itemsPerPage, currentPage, totalItems]) => ({ itemsPerPage, currentPage, totalItems })));\r\n        this.searchTerm.valueChanges\r\n            .pipe(debounceTime(250), takeUntil(this.destroy$))\r\n            .subscribe(() => this.refresh());\r\n    }\r\n    filesSelected(files) {\r\n        if (files.length) {\r\n            this.uploading = true;\r\n            this.dataService.product\r\n                .createAssets(files)\r\n                .pipe(finalize(() => (this.uploading = false)))\r\n                .subscribe((res) => {\r\n                super.refresh();\r\n                this.notificationService.success(marker('asset.notify-create-assets-success'), {\r\n                    count: files.length,\r\n                });\r\n            });\r\n        }\r\n    }\r\n    deleteAsset(asset) {\r\n        this.showModalAndDelete(asset.id)\r\n            .pipe(switchMap((response) => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(asset.id, response.message || '').pipe(map((r) => r.result === DeletionResult.DELETED));\r\n            }\r\n        }))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Asset',\r\n            });\r\n            this.refresh();\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Asset',\r\n            });\r\n        });\r\n    }\r\n    showModalAndDelete(assetId, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-asset'),\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap((res) => (res ? this.dataService.product.deleteAsset(assetId, !!message) : EMPTY)), map((res) => res.deleteAsset));\r\n    }\r\n};\nAssetListComponent.ɵfac = function AssetListComponent_Factory(t) { return new (t || AssetListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute)); };\nAssetListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AssetListComponent, selectors: [[\"vdr-asset-list\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 19, vars: 30, consts: [[\"type\", \"text\", \"name\", \"searchTerm\", 1, \"clr-input\", \"search-input\", 3, \"formControl\", \"placeholder\"], [\"locationId\", \"asset-list\"], [\"dropZoneTarget\", \".content-area\", 3, \"uploading\", \"selectFiles\"], [3, \"assets\", \"multiSelect\", \"canDelete\", \"deleteAsset\"], [1, \"paging-controls\"], [3, \"itemsPerPage\", \"itemsPerPageChange\"], [3, \"currentPage\", \"itemsPerPage\", \"totalItems\", \"pageChange\"]], template: function AssetListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelement(2, \"input\", 0);\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(5, \"vdr-action-bar-items\", 1);\n        ɵngcc0.ɵɵelementStart(6, \"vdr-asset-file-input\", 2);\n        ɵngcc0.ɵɵlistener(\"selectFiles\", function AssetListComponent_Template_vdr_asset_file_input_selectFiles_6_listener($event) { return ctx.filesSelected($event); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"vdr-asset-gallery\", 3);\n        ɵngcc0.ɵɵlistener(\"deleteAsset\", function AssetListComponent_Template_vdr_asset_gallery_deleteAsset_7_listener($event) { return ctx.deleteAsset($event); });\n        ɵngcc0.ɵɵpipe(8, \"paginate\");\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵpipe(10, \"async\");\n        ɵngcc0.ɵɵpipe(11, \"hasPermission\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"div\", 4);\n        ɵngcc0.ɵɵelementStart(13, \"vdr-items-per-page-controls\", 5);\n        ɵngcc0.ɵɵlistener(\"itemsPerPageChange\", function AssetListComponent_Template_vdr_items_per_page_controls_itemsPerPageChange_13_listener($event) { return ctx.setItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(14, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(15, \"vdr-pagination-controls\", 6);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function AssetListComponent_Template_vdr_pagination_controls_pageChange_15_listener($event) { return ctx.setPageNumber($event); });\n        ɵngcc0.ɵɵpipe(16, \"async\");\n        ɵngcc0.ɵɵpipe(17, \"async\");\n        ɵngcc0.ɵɵpipe(18, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"formControl\", ctx.searchTerm)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(3, 10, \"asset.search-asset-name\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"uploading\", ctx.uploading);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"assets\", ɵngcc0.ɵɵpipeBind2(8, 12, ɵngcc0.ɵɵpipeBind1(9, 15, ctx.items$), ɵngcc0.ɵɵpipeBind1(10, 17, ctx.paginationConfig$) || ɵngcc0.ɵɵpureFunction0(29, _c0)))(\"multiSelect\", true)(\"canDelete\", ɵngcc0.ɵɵpipeBind1(11, 19, \"DeleteCatalog\"));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(14, 21, ctx.itemsPerPage$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"currentPage\", ɵngcc0.ɵɵpipeBind1(16, 23, ctx.currentPage$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(17, 25, ctx.itemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(18, 27, ctx.totalItems$));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc3.NgControlStatus, ɵngcc3.FormControlDirective, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.AssetFileInputComponent, ɵngcc2.AssetGalleryComponent, ɵngcc2.ItemsPerPageControlsComponent, ɵngcc2.PaginationControlsComponent], pipes: [ɵngcc5.TranslatePipe, ɵngcc6.PaginatePipe, ɵngcc4.AsyncPipe, ɵngcc2.HasPermissionPipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}vdr-asset-gallery[_ngcontent-%COMP%]{flex:1}.paging-controls[_ngcontent-%COMP%]{padding-top:6px;border-top:1px solid #f2f3f5;display:flex;justify-content:space-between}.search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}\"] });\r\nAssetListComponent.ctorParameters = () => [\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: DataService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\r\nAssetListComponent = __decorate([ __metadata(\"design:paramtypes\", [NotificationService,\r\n        ModalService,\r\n        DataService,\r\n        Router,\r\n        ActivatedRoute])\r\n], AssetListComponent);\n\nlet CollectionContentsComponent = class CollectionContentsComponent {\r\n    constructor(route, router, dataService) {\r\n        this.route = route;\r\n        this.router = router;\r\n        this.dataService = dataService;\r\n        this.filterTermControl = new FormControl('');\r\n        this.collectionIdChange$ = new BehaviorSubject('');\r\n        this.refresh$ = new BehaviorSubject(true);\r\n        this.destroy$ = new Subject();\r\n    }\r\n    ngOnInit() {\r\n        this.contentsCurrentPage$ = this.route.paramMap.pipe(map(qpm => qpm.get('contentsPage')), map(page => (!page ? 1 : +page)), startWith(1), distinctUntilChanged());\r\n        this.contentsItemsPerPage$ = this.route.paramMap.pipe(map(qpm => qpm.get('contentsPerPage')), map(perPage => (!perPage ? 10 : +perPage)), startWith(10), distinctUntilChanged());\r\n        const filterTerm$ = this.filterTermControl.valueChanges.pipe(debounceTime(250), tap(() => this.setContentsPageNumber(1)), startWith(''));\r\n        const collection$ = combineLatest(this.collectionIdChange$, this.contentsCurrentPage$, this.contentsItemsPerPage$, filterTerm$, this.refresh$).pipe(takeUntil(this.destroy$), switchMap(([id, currentPage, itemsPerPage, filterTerm]) => {\r\n            const take = itemsPerPage;\r\n            const skip = (currentPage - 1) * itemsPerPage;\r\n            if (id) {\r\n                return this.dataService.collection\r\n                    .getCollectionContents(id, take, skip, filterTerm)\r\n                    .mapSingle(data => data.collection);\r\n            }\r\n            else {\r\n                return of(null);\r\n            }\r\n        }));\r\n        this.contents$ = collection$.pipe(map(result => (result ? result.productVariants.items : [])));\r\n        this.contentsTotalItems$ = collection$.pipe(map(result => (result ? result.productVariants.totalItems : 0)));\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('collectionId' in changes) {\r\n            this.collectionIdChange$.next(changes.collectionId.currentValue);\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n    setContentsPageNumber(page) {\r\n        this.setParam('contentsPage', page);\r\n    }\r\n    setContentsItemsPerPage(perPage) {\r\n        this.setParam('contentsPerPage', perPage);\r\n    }\r\n    refresh() {\r\n        this.refresh$.next(true);\r\n    }\r\n    setParam(key, value) {\r\n        this.router.navigate(['./', Object.assign(Object.assign({}, this.route.snapshot.params), { [key]: value })], {\r\n            relativeTo: this.route,\r\n            queryParamsHandling: 'merge',\r\n        });\r\n    }\r\n};\nCollectionContentsComponent.ɵfac = function CollectionContentsComponent_Factory(t) { return new (t || CollectionContentsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nCollectionContentsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionContentsComponent, selectors: [[\"vdr-collection-contents\"]], contentQueries: function CollectionContentsComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticContentQuery(dirIndex, TemplateRef, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n    } }, inputs: { collectionId: \"collectionId\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 12, vars: 22, consts: [[1, \"contents-header\"], [1, \"header-title-row\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"type\", \"text\", 1, \"clr-input\", 3, \"placeholder\", \"formControl\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [1, \"left\", \"align-middle\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"]], template: function CollectionContentsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, CollectionContentsComponent_ng_container_2_Template, 1, 0, \"ng-container\", 2);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(4, \"input\", 3);\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"vdr-data-table\", 4);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function CollectionContentsComponent_Template_vdr_data_table_pageChange_6_listener($event) { return ctx.setContentsPageNumber($event); })(\"itemsPerPageChange\", function CollectionContentsComponent_Template_vdr_data_table_itemsPerPageChange_6_listener($event) { return ctx.setContentsItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵpipe(10, \"async\");\n        ɵngcc0.ɵɵtemplate(11, CollectionContentsComponent_ng_template_11_Template, 5, 9, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx.headerTemplate)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(20, _c3, ɵngcc0.ɵɵpipeBind1(3, 8, ctx.contentsTotalItems$)));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(5, 10, \"catalog.filter-by-name\"))(\"formControl\", ctx.filterTermControl);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(7, 12, ctx.contents$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(8, 14, ctx.contentsItemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(9, 16, ctx.contentsTotalItems$))(\"currentPage\", ɵngcc0.ɵɵpipeBind1(10, 18, ctx.contentsCurrentPage$));\n    } }, directives: [ɵngcc4.NgTemplateOutlet, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc3.NgControlStatus, ɵngcc3.FormControlDirective, ɵngcc2.DataTableComponent, ɵngcc2.TableRowActionComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\".contents-header[_ngcontent-%COMP%]{background-color:#fafafa;position:-webkit-sticky;position:sticky;top:0;padding:6px;z-index:1;border-bottom:1px solid #bfc3cc}.contents-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.contents-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     table{margin-top:-1px}\"], changeDetection: 0 });\r\nCollectionContentsComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: Router },\r\n    { type: DataService }\r\n];\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], CollectionContentsComponent.prototype, \"collectionId\", void 0);\r\n__decorate([\r\n    ContentChild(TemplateRef, { static: true }),\r\n    __metadata(\"design:type\", TemplateRef)\r\n], CollectionContentsComponent.prototype, \"headerTemplate\", void 0);\r\nCollectionContentsComponent = __decorate([ __metadata(\"design:paramtypes\", [ActivatedRoute, Router, DataService])\r\n], CollectionContentsComponent);\n\nlet CollectionDetailComponent = class CollectionDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, formBuilder, notificationService, modalService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.assetChanges = {};\r\n        this.filters = [];\r\n        this.allFilters = [];\r\n        this.customFields = this.getCustomFieldConfig('Collection');\r\n        this.detailForm = this.formBuilder.group({\r\n            name: ['', Validators.required],\r\n            slug: '',\r\n            description: '',\r\n            visible: false,\r\n            filters: this.formBuilder.array([]),\r\n            customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.facets$ = this.dataService.facet\r\n            .getAllFacets()\r\n            .mapSingle(data => data.facets.items)\r\n            .pipe(shareReplay(1));\r\n        this.dataService.collection.getCollectionFilters().single$.subscribe(res => {\r\n            this.allFilters = res.collectionFilters;\r\n        });\r\n        this.activeChannel$ = this.dataService.settings\r\n            .getActiveChannel()\r\n            .mapStream(data => data.activeChannel);\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    getFilterDefinition(filter) {\r\n        return this.allFilters.find(f => f.code === filter.code);\r\n    }\r\n    customFieldIsSet(name) {\r\n        return !!this.detailForm.get(['customFields', name]);\r\n    }\r\n    assetsChanged() {\r\n        return !!Object.values(this.assetChanges).length;\r\n    }\r\n    /**\r\n     * If creating a new product, automatically generate the slug based on the collection name.\r\n     */\r\n    updateSlug(nameValue) {\r\n        this.isNew$.pipe(take(1)).subscribe(isNew => {\r\n            if (isNew) {\r\n                const slugControl = this.detailForm.get(['slug']);\r\n                if (slugControl && slugControl.pristine) {\r\n                    slugControl.setValue(normalizeString(`${nameValue}`, '-'));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    addFilter(collectionFilter) {\r\n        const filtersArray = this.detailForm.get('filters');\r\n        const index = filtersArray.value.findIndex(o => o.code === collectionFilter.code);\r\n        if (index === -1) {\r\n            const argsHash = collectionFilter.args.reduce((output, arg) => (Object.assign(Object.assign({}, output), { [arg.name]: arg.value })), {});\r\n            filtersArray.push(this.formBuilder.control({\r\n                code: collectionFilter.code,\r\n                args: argsHash,\r\n            }));\r\n            this.filters.push(collectionFilter);\r\n        }\r\n    }\r\n    removeFilter(collectionFilter) {\r\n        const filtersArray = this.detailForm.get('filters');\r\n        const index = filtersArray.value.findIndex(o => o.code === collectionFilter.code);\r\n        if (index !== -1) {\r\n            filtersArray.removeAt(index);\r\n            this.filters.splice(index, 1);\r\n        }\r\n    }\r\n    create() {\r\n        if (!this.detailForm.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([category, languageCode]) => {\r\n            const input = this.getUpdatedCollection(category, this.detailForm, languageCode);\r\n            const parentId = this.route.snapshot.paramMap.get('parentId');\r\n            if (parentId) {\r\n                input.parentId = parentId;\r\n            }\r\n            return this.dataService.collection.createCollection(input);\r\n        }))\r\n            .subscribe(data => {\r\n            this.notificationService.success(marker('common.notify-create-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.assetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.router.navigate(['../', data.createCollection.id], { relativeTo: this.route });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([category, languageCode]) => {\r\n            const input = this.getUpdatedCollection(category, this.detailForm, languageCode);\r\n            return this.dataService.collection.updateCollection(input);\r\n        }))\r\n            .subscribe(() => {\r\n            this.assetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.contentsComponent.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    canDeactivate() {\r\n        return super.canDeactivate() && !this.assetChanges.assetIds && !this.assetChanges.featuredAssetId;\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the category or current language.\r\n     */\r\n    setFormValues(entity, languageCode) {\r\n        const currentTranslation = entity.translations.find(t => t.languageCode === languageCode);\r\n        this.detailForm.patchValue({\r\n            name: currentTranslation ? currentTranslation.name : '',\r\n            slug: currentTranslation ? currentTranslation.slug : '',\r\n            description: currentTranslation ? currentTranslation.description : '',\r\n            visible: !entity.isPrivate,\r\n        });\r\n        entity.filters.forEach(f => this.addFilter(f));\r\n        if (this.customFields.length) {\r\n            const customFieldsGroup = this.detailForm.get(['customFields']);\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString'\r\n                    ? currentTranslation.customFields[key]\r\n                    : entity.customFields[key];\r\n                const control = customFieldsGroup.get(key);\r\n                if (control) {\r\n                    control.patchValue(value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Given a category and the value of the form, this method creates an updated copy of the category which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedCollection(category, form, languageCode) {\r\n        const updatedCategory = createUpdatedTranslatable({\r\n            translatable: category,\r\n            updatedFields: form.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: category.name || '',\r\n                slug: category.slug || '',\r\n                description: category.description || '',\r\n            },\r\n        });\r\n        return Object.assign(Object.assign(Object.assign({}, updatedCategory), this.assetChanges), { isPrivate: !form.value.visible, filters: this.mapOperationsToInputs(this.filters, this.detailForm.value.filters) });\r\n    }\r\n    /**\r\n     * Maps an array of conditions or actions to the input format expected by the GraphQL API.\r\n     */\r\n    mapOperationsToInputs(operations, formValueOperations) {\r\n        return operations.map((o, i) => {\r\n            return {\r\n                code: o.code,\r\n                arguments: Object.values(formValueOperations[i].args).map((value, j) => ({\r\n                    name: o.args[j].name,\r\n                    value: value.toString(),\r\n                    type: o.args[j].type,\r\n                })),\r\n            };\r\n        });\r\n    }\r\n};\nCollectionDetailComponent.ɵfac = function CollectionDetailComponent_Factory(t) { return new (t || CollectionDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService)); };\nCollectionDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionDetailComponent, selectors: [[\"vdr-collection-detail\"]], viewQuery: function CollectionDetailComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c4, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.contentsComponent = _t.first);\n    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 16, vars: 19, consts: [[3, \"entity\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"collection-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\"], [1, \"clr-row\"], [1, \"clr-col\"], [\"for\", \"visibility\", 3, \"label\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"formControlName\", \"visible\", \"id\", \"visibility\", 3, \"vdrDisabled\"], [1, \"visible-toggle\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"for\", \"slug\", 3, \"label\", \"errors\"], [\"id\", \"slug\", \"type\", \"text\", \"formControlName\", \"slug\", \"pattern\", \"[a-z0-9_-]+\", 3, \"readonly\"], [\"formControlName\", \"description\", 3, \"readonly\", \"label\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [1, \"clr-col-md-auto\"], [3, \"assets\", \"featuredAsset\", \"change\"], [\"formArrayName\", \"filters\", 1, \"clr-row\"], [4, \"ngFor\", \"ngForOf\"], [4, \"vdrIfPermissions\"], [3, \"collectionId\"], [\"collectionContents\", \"\"], [\"formGroupName\", \"customFields\"], [\"entityName\", \"Collection\", 3, \"customFieldsFormGroup\", \"customField\", 4, \"ngIf\"], [\"entityName\", \"Collection\", 3, \"customFieldsFormGroup\", \"customField\"], [3, \"facets\", \"operation\", \"operationDefinition\", \"formControlName\", \"readonly\", \"activeChannel\", \"remove\"], [\"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-outline\"], [\"shape\", \"plus\"], [\"vdrPosition\", \"bottom-left\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\"], [1, \"contents-title\"]], template: function CollectionDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelement(2, \"vdr-entity-info\", 0);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementStart(4, \"vdr-language-selector\", 1);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function CollectionDetailComponent_Template_vdr_language_selector_languageCodeChange_4_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(9, \"vdr-action-bar-items\", 2);\n        ɵngcc0.ɵɵtemplate(10, CollectionDetailComponent_button_10_Template, 3, 4, \"button\", 3);\n        ɵngcc0.ɵɵpipe(11, \"async\");\n        ɵngcc0.ɵɵtemplate(12, CollectionDetailComponent_ng_template_12_Template, 1, 1, \"ng-template\", null, 4, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(14, CollectionDetailComponent_form_14_Template, 38, 41, \"form\", 5);\n        ɵngcc0.ɵɵpipe(15, \"async\");\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(13);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(3, 7, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(5, 9, ctx.isNew$))(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(6, 11, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(7, 13, ctx.languageCode$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(11, 15, ctx.isNew$))(\"ngIfElse\", _r1);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(15, 17, ctx.entity$));\n    } }, directives: function () { return [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.LanguageSelectorComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc4.NgIf, ɵngcc2.IfPermissionsDirective, ɵngcc3.ɵangular_packages_forms_forms_y, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc2.FormFieldComponent, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc2.DisabledDirective, ɵngcc7.ClrLabel, ɵngcc3.DefaultValueAccessor, ɵngcc3.PatternValidator, ɵngcc2.RichTextEditorComponent, ProductAssetsComponent, ɵngcc3.FormArrayName, ɵngcc4.NgForOf, CollectionContentsComponent, ɵngcc3.FormGroupName, ɵngcc2.CustomFieldControlComponent, ɵngcc2.ConfigurableInputComponent, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc7.ClrIconCustomTag, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective]; }, pipes: function () { return [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe]; }, styles: [\".visible-toggle[_ngcontent-%COMP%]{margin-top:-3px!important}\"], changeDetection: 0 });\r\nCollectionDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: FormBuilder },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\r\n__decorate([\r\n    ViewChild('collectionContents'),\r\n    __metadata(\"design:type\", CollectionContentsComponent)\r\n], CollectionDetailComponent.prototype, \"contentsComponent\", void 0);\r\nCollectionDetailComponent = __decorate([ __metadata(\"design:paramtypes\", [Router,\r\n        ActivatedRoute,\r\n        ServerConfigService,\r\n        ChangeDetectorRef,\r\n        DataService,\r\n        FormBuilder,\r\n        NotificationService,\r\n        ModalService])\r\n], CollectionDetailComponent);\n\nlet CollectionListComponent = class CollectionListComponent {\r\n    constructor(dataService, notificationService, modalService, router, route) {\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.expandAll = false;\r\n    }\r\n    ngOnInit() {\r\n        this.queryResult = this.dataService.collection.getCollections(99999, 0).refetchOnChannelChange();\r\n        this.items$ = this.queryResult.mapStream((data) => data.collections.items).pipe(shareReplay(1));\r\n        this.activeCollectionId$ = this.route.paramMap.pipe(map((pm) => pm.get('contents')), distinctUntilChanged());\r\n        this.activeCollectionTitle$ = combineLatest(this.activeCollectionId$, this.items$).pipe(map(([id, collections]) => {\r\n            if (id) {\r\n                const match = collections.find((c) => c.id === id);\r\n                return match ? match.name : '';\r\n            }\r\n            return '';\r\n        }));\r\n    }\r\n    onRearrange(event) {\r\n        this.dataService.collection.moveCollection([event]).subscribe({\r\n            next: () => {\r\n                this.notificationService.success(marker('common.notify-saved-changes'));\r\n                this.refresh();\r\n            },\r\n            error: (err) => {\r\n                this.notificationService.error(marker('common.notify-save-changes-error'));\r\n            },\r\n        });\r\n    }\r\n    deleteCollection(id) {\r\n        this.items$\r\n            .pipe(take(1), map((items) => -1 < items.findIndex((i) => i.parent && i.parent.id === id)), switchMap((hasChildren) => {\r\n            return this.modalService.dialog({\r\n                title: marker('catalog.confirm-delete-collection'),\r\n                body: hasChildren\r\n                    ? marker('catalog.confirm-delete-collection-and-children-body')\r\n                    : undefined,\r\n                buttons: [\r\n                    { type: 'secondary', label: marker('common.cancel') },\r\n                    { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n                ],\r\n            });\r\n        }), switchMap((response) => response ? this.dataService.collection.deleteCollection(id) : EMPTY))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.refresh();\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    closeContents() {\r\n        const params = Object.assign({}, this.route.snapshot.params);\r\n        delete params.contents;\r\n        this.router.navigate(['./', params], { relativeTo: this.route, queryParamsHandling: 'preserve' });\r\n    }\r\n    refresh() {\r\n        this.queryResult.ref.refetch();\r\n    }\r\n};\nCollectionListComponent.ɵfac = function CollectionListComponent_Factory(t) { return new (t || CollectionListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute)); };\nCollectionListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionListComponent, selectors: [[\"vdr-collection-list\"]], decls: 19, vars: 19, consts: [[1, \"expand-all-toggle\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"locationId\", \"collection-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [1, \"collection-wrapper\"], [3, \"collections\", \"activeCollectionId\", \"expandAll\", \"rearrange\", \"deleteCollection\"], [1, \"collection-contents\"], [3, \"collectionId\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"collection-title\"], [\"type\", \"button\", 1, \"close-button\", 3, \"click\"], [\"shape\", \"close\"]], template: function CollectionListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelementStart(2, \"clr-checkbox-wrapper\", 0);\n        ɵngcc0.ɵɵelementStart(3, \"input\", 1);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function CollectionListComponent_Template_input_ngModelChange_3_listener($event) { return ctx.expandAll = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"label\");\n        ɵngcc0.ɵɵtext(5);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(8, \"vdr-action-bar-items\", 2);\n        ɵngcc0.ɵɵtemplate(9, CollectionListComponent_a_9_Template, 4, 5, \"a\", 3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\", 4);\n        ɵngcc0.ɵɵelementStart(11, \"vdr-collection-tree\", 5);\n        ɵngcc0.ɵɵlistener(\"rearrange\", function CollectionListComponent_Template_vdr_collection_tree_rearrange_11_listener($event) { return ctx.onRearrange($event); })(\"deleteCollection\", function CollectionListComponent_Template_vdr_collection_tree_deleteCollection_11_listener($event) { return ctx.deleteCollection($event); });\n        ɵngcc0.ɵɵpipe(12, \"async\");\n        ɵngcc0.ɵɵpipe(13, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"div\", 6);\n        ɵngcc0.ɵɵpipe(15, \"async\");\n        ɵngcc0.ɵɵelementStart(16, \"vdr-collection-contents\", 7);\n        ɵngcc0.ɵɵpipe(17, \"async\");\n        ɵngcc0.ɵɵtemplate(18, CollectionListComponent_ng_template_18_Template, 6, 9, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.expandAll);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 9, \"catalog.expand-all-collections\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"CreateCatalog\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"collections\", ɵngcc0.ɵɵpipeBind1(12, 11, ctx.items$))(\"activeCollectionId\", ɵngcc0.ɵɵpipeBind1(13, 13, ctx.activeCollectionId$))(\"expandAll\", ctx.expandAll);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵclassProp(\"expanded\", ɵngcc0.ɵɵpipeBind1(15, 15, ctx.activeCollectionId$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"collectionId\", ɵngcc0.ɵɵpipeBind1(17, 17, ctx.activeCollectionId$));\n    } }, directives: function () { return [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc7.ClrLabel, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, CollectionTreeComponent,\n        CollectionContentsComponent, ɵngcc1.RouterLinkWithHref, ɵngcc7.ClrIconCustomTag]; }, pipes: function () { return [ɵngcc5.TranslatePipe, ɵngcc4.AsyncPipe]; }, styles: [\"[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.expand-all-toggle[_ngcontent-%COMP%]{display:block;margin-top:14px}.collection-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.collection-wrapper[_ngcontent-%COMP%]   vdr-collection-tree[_ngcontent-%COMP%]{flex:1;height:100%;overflow:auto}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility .3s}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents.expanded[_ngcontent-%COMP%]{width:30vw;visibility:visible;opacity:1;padding-left:12px}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:0 0;border:none;cursor:pointer}.paging-controls[_ngcontent-%COMP%]{padding-top:6px;border-top:1px solid #f2f3f5;display:flex;justify-content:space-between}\"], changeDetection: 0 });\r\nCollectionListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\r\nCollectionListComponent = __decorate([ __metadata(\"design:paramtypes\", [DataService,\r\n        NotificationService,\r\n        ModalService,\r\n        Router,\r\n        ActivatedRoute])\r\n], CollectionListComponent);\n\nlet FacetDetailComponent = class FacetDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, formBuilder, notificationService, modalService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.customFields = this.getCustomFieldConfig('Facet');\r\n        this.customValueFields = this.getCustomFieldConfig('FacetValue');\r\n        this.detailForm = this.formBuilder.group({\r\n            facet: this.formBuilder.group({\r\n                code: ['', Validators.required],\r\n                name: '',\r\n                visible: true,\r\n                customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n            }),\r\n            values: this.formBuilder.array([]),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    updateCode(currentCode, nameValue) {\r\n        if (!currentCode) {\r\n            const codeControl = this.detailForm.get(['facet', 'code']);\r\n            if (codeControl && codeControl.pristine) {\r\n                codeControl.setValue(normalizeString(nameValue, '-'));\r\n            }\r\n        }\r\n    }\r\n    updateValueCode(currentCode, nameValue, index) {\r\n        if (!currentCode) {\r\n            const codeControl = this.detailForm.get(['values', index, 'code']);\r\n            if (codeControl && codeControl.pristine) {\r\n                codeControl.setValue(normalizeString(nameValue, '-'));\r\n            }\r\n        }\r\n    }\r\n    customFieldIsSet(name) {\r\n        return !!this.detailForm.get(['facet', 'customFields', name]);\r\n    }\r\n    customValueFieldIsSet(index, name) {\r\n        return !!this.detailForm.get(['values', index, 'customFields', name]);\r\n    }\r\n    getValuesFormArray() {\r\n        return this.detailForm.get('values');\r\n    }\r\n    addFacetValue() {\r\n        const valuesFormArray = this.detailForm.get('values');\r\n        if (valuesFormArray) {\r\n            valuesFormArray.insert(valuesFormArray.length, this.formBuilder.group({\r\n                name: ['', Validators.required],\r\n                code: '',\r\n            }));\r\n            this.values.push({ name: '', code: '' });\r\n        }\r\n    }\r\n    create() {\r\n        const facetForm = this.detailForm.get('facet');\r\n        if (!facetForm || !facetForm.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([facet, languageCode]) => {\r\n            const newFacet = this.getUpdatedFacet(facet, facetForm, languageCode);\r\n            return this.dataService.facet.createFacet(newFacet);\r\n        }), switchMap((data) => this.dataService.facet.getAllFacets(true).single$.pipe(mapTo(data))))\r\n            .subscribe((data) => {\r\n            this.notificationService.success(marker('common.notify-create-success'), { entity: 'Facet' });\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.router.navigate(['../', data.createFacet.id], { relativeTo: this.route });\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Facet',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([facet, languageCode]) => {\r\n            const facetGroup = this.detailForm.get('facet');\r\n            const updateOperations = [];\r\n            if (facetGroup && facetGroup.dirty) {\r\n                const newFacet = this.getUpdatedFacet(facet, facetGroup, languageCode);\r\n                if (newFacet) {\r\n                    updateOperations.push(this.dataService.facet.updateFacet(newFacet));\r\n                }\r\n            }\r\n            const valuesArray = this.detailForm.get('values');\r\n            if (valuesArray && valuesArray.dirty) {\r\n                const newValues = valuesArray.controls\r\n                    .filter((c) => !c.value.id)\r\n                    .map((c) => ({\r\n                    facetId: facet.id,\r\n                    code: c.value.code,\r\n                    translations: [{ name: c.value.name, languageCode }],\r\n                }));\r\n                if (newValues.length) {\r\n                    updateOperations.push(this.dataService.facet\r\n                        .createFacetValues(newValues)\r\n                        .pipe(switchMap(() => this.dataService.facet.getFacet(this.id).single$)));\r\n                }\r\n                const updatedValues = this.getUpdatedFacetValues(facet, valuesArray, languageCode);\r\n                if (updatedValues.length) {\r\n                    updateOperations.push(this.dataService.facet.updateFacetValues(updatedValues));\r\n                }\r\n            }\r\n            return forkJoin(updateOperations);\r\n        }), switchMap(() => this.dataService.facet.getAllFacets(true).single$))\r\n            .subscribe(() => {\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.notificationService.success(marker('common.notify-update-success'), { entity: 'Facet' });\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Facet',\r\n            });\r\n        });\r\n    }\r\n    deleteFacetValue(facetValueId, index) {\r\n        if (!facetValueId) {\r\n            // deleting a newly-added (not persisted) FacetValue\r\n            const valuesFormArray = this.detailForm.get('values');\r\n            if (valuesFormArray) {\r\n                valuesFormArray.removeAt(index);\r\n            }\r\n            this.values.splice(index, 1);\r\n            return;\r\n        }\r\n        this.showModalAndDelete(facetValueId)\r\n            .pipe(switchMap((response) => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(facetValueId, response.message || '').pipe(map((r) => r.result === DeletionResult.DELETED));\r\n            }\r\n        }), switchMap((deleted) => (deleted ? this.dataService.facet.getFacet(this.id).single$ : [])))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        });\r\n    }\r\n    showModalAndDelete(facetValueId, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-facet-value'),\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap((result) => result ? this.dataService.facet.deleteFacetValues([facetValueId], !!message) : EMPTY), map((result) => result.deleteFacetValues[0]));\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the facet or current language.\r\n     */\r\n    setFormValues(facet, languageCode) {\r\n        const currentTranslation = facet.translations.find((t) => t.languageCode === languageCode);\r\n        this.detailForm.patchValue({\r\n            facet: {\r\n                code: facet.code,\r\n                visible: !facet.isPrivate,\r\n                name: currentTranslation ? currentTranslation.name : '',\r\n            },\r\n        });\r\n        if (this.customFields.length) {\r\n            const customFieldsGroup = this.detailForm.get(['facet', 'customFields']);\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString'\r\n                    ? currentTranslation.customFields[key]\r\n                    : facet.customFields[key];\r\n                const control = customFieldsGroup.get(key);\r\n                if (control) {\r\n                    control.patchValue(value);\r\n                }\r\n            }\r\n        }\r\n        const currentValuesFormArray = this.detailForm.get('values');\r\n        currentValuesFormArray.clear();\r\n        this.values = [...facet.values];\r\n        facet.values.forEach((value, i) => {\r\n            const valueTranslation = value.translations && value.translations.find((t) => t.languageCode === languageCode);\r\n            const group = {\r\n                id: value.id,\r\n                code: value.code,\r\n                name: valueTranslation ? valueTranslation.name : '',\r\n            };\r\n            currentValuesFormArray.insert(i, this.formBuilder.group(group));\r\n            if (this.customValueFields.length) {\r\n                let customValueFieldsGroup = this.detailForm.get(['values', i, 'customFields']);\r\n                if (!customValueFieldsGroup) {\r\n                    customValueFieldsGroup = new FormGroup({});\r\n                    this.detailForm.get(['values', i]).addControl('customFields', customValueFieldsGroup);\r\n                }\r\n                if (customValueFieldsGroup) {\r\n                    for (const fieldDef of this.customValueFields) {\r\n                        const key = fieldDef.name;\r\n                        const fieldValue = fieldDef.type === 'localeString'\r\n                            ? valueTranslation.customFields[key]\r\n                            : value.customFields[key];\r\n                        const control = customValueFieldsGroup.get(key);\r\n                        if (control) {\r\n                            control.setValue(fieldValue);\r\n                        }\r\n                        else {\r\n                            customValueFieldsGroup.addControl(key, new FormControl(fieldValue));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Given a facet and the value of the detailForm, this method creates an updated copy of the facet which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedFacet(facet, facetFormGroup, languageCode) {\r\n        const input = createUpdatedTranslatable({\r\n            translatable: facet,\r\n            updatedFields: facetFormGroup.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: facet.name || '',\r\n            },\r\n        });\r\n        input.isPrivate = !facetFormGroup.value.visible;\r\n        return input;\r\n    }\r\n    /**\r\n     * Given an array of facet values and the values from the detailForm, this method creates an new array\r\n     * which can be persisted to the API.\r\n     */\r\n    getUpdatedFacetValues(facet, valuesFormArray, languageCode) {\r\n        const dirtyValues = facet.values.filter((v, i) => {\r\n            const formRow = valuesFormArray.get(i.toString());\r\n            return formRow && formRow.dirty && formRow.value.id;\r\n        });\r\n        const dirtyValueValues = valuesFormArray.controls\r\n            .filter((c) => c.dirty && c.value.id)\r\n            .map((c) => c.value);\r\n        if (dirtyValues.length !== dirtyValueValues.length) {\r\n            throw new Error(marker(`error.facet-value-form-values-do-not-match`));\r\n        }\r\n        return dirtyValues\r\n            .map((value, i) => {\r\n            return createUpdatedTranslatable({\r\n                translatable: value,\r\n                updatedFields: dirtyValueValues[i],\r\n                customFieldConfig: this.customValueFields,\r\n                languageCode,\r\n                defaultTranslation: {\r\n                    languageCode,\r\n                    name: '',\r\n                },\r\n            });\r\n        })\r\n            .filter(notNullOrUndefined);\r\n    }\r\n};\nFacetDetailComponent.ɵfac = function FacetDetailComponent_Factory(t) { return new (t || FacetDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService)); };\nFacetDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FacetDetailComponent, selectors: [[\"vdr-facet-detail\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 16, vars: 19, consts: [[3, \"entity\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"facet-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\"], [\"formGroupName\", \"facet\", 1, \"form-block\"], [\"for\", \"visibility\", 3, \"label\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"formControlName\", \"visible\", \"id\", \"visibility\", 3, \"vdrDisabled\"], [1, \"visible-toggle\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"for\", \"code\", 3, \"label\", \"readOnlyToggle\"], [\"id\", \"code\", \"type\", \"text\", \"formControlName\", \"code\", 3, \"readonly\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [\"class\", \"form-block\", 4, \"ngIf\"], [\"formGroupName\", \"customFields\"], [4, \"ngFor\", \"ngForOf\"], [\"entityName\", \"Facet\", 3, \"customFieldsFormGroup\", \"customField\", 4, \"ngIf\"], [\"entityName\", \"Facet\", 3, \"customFieldsFormGroup\", \"customField\"], [1, \"form-block\"], [\"class\", \"facet-values-list table\", \"formArrayName\", \"values\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [\"formArrayName\", \"values\", 1, \"facet-values-list\", \"table\"], [\"class\", \"facet-value\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [1, \"facet-value\", 3, \"formGroupName\"], [1, \"align-middle\"], [\"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"type\", \"text\", \"formControlName\", \"code\", \"readonly\", \"\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [\"entityName\", \"FacetValue\", 3, \"showLabel\", \"customFieldsFormGroup\", \"customField\", 4, \"ngIf\"], [\"entityName\", \"FacetValue\", 3, \"showLabel\", \"customFieldsFormGroup\", \"customField\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"add\"]], template: function FacetDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelement(2, \"vdr-entity-info\", 0);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementStart(4, \"vdr-language-selector\", 1);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function FacetDetailComponent_Template_vdr_language_selector_languageCodeChange_4_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(9, \"vdr-action-bar-items\", 2);\n        ɵngcc0.ɵɵtemplate(10, FacetDetailComponent_button_10_Template, 3, 4, \"button\", 3);\n        ɵngcc0.ɵɵpipe(11, \"async\");\n        ɵngcc0.ɵɵtemplate(12, FacetDetailComponent_ng_template_12_Template, 1, 1, \"ng-template\", null, 4, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(14, FacetDetailComponent_form_14_Template, 23, 28, \"form\", 5);\n        ɵngcc0.ɵɵpipe(15, \"async\");\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(13);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(3, 7, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(5, 9, ctx.isNew$))(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(6, 11, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(7, 13, ctx.languageCode$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(11, 15, ctx.isNew$))(\"ngIfElse\", _r1);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(15, 17, ctx.entity$));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.LanguageSelectorComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc4.NgIf, ɵngcc2.IfPermissionsDirective, ɵngcc3.ɵangular_packages_forms_forms_y, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc3.FormGroupName, ɵngcc2.FormFieldComponent, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc2.DisabledDirective, ɵngcc7.ClrLabel, ɵngcc3.DefaultValueAccessor, ɵngcc4.NgForOf, ɵngcc2.CustomFieldControlComponent, ɵngcc3.FormArrayName, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc7.ClrIconCustomTag, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe], styles: [\".visible-toggle[_ngcontent-%COMP%]{margin-top:-3px!important}\"], changeDetection: 0 });\r\nFacetDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: FormBuilder },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\r\nFacetDetailComponent = __decorate([ __metadata(\"design:paramtypes\", [Router,\r\n        ActivatedRoute,\r\n        ServerConfigService,\r\n        ChangeDetectorRef,\r\n        DataService,\r\n        FormBuilder,\r\n        NotificationService,\r\n        ModalService])\r\n], FacetDetailComponent);\n\nlet FacetListComponent = class FacetListComponent extends BaseListComponent {\r\n    constructor(dataService, modalService, notificationService, router, route) {\r\n        super(router, route);\r\n        this.dataService = dataService;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.initialLimit = 3;\r\n        this.displayLimit = {};\r\n        super.setQueryFn((...args) => this.dataService.facet.getFacets(...args).refetchOnChannelChange(), data => data.facets);\r\n    }\r\n    toggleDisplayLimit(facet) {\r\n        if (this.displayLimit[facet.id] === facet.values.length) {\r\n            this.displayLimit[facet.id] = this.initialLimit;\r\n        }\r\n        else {\r\n            this.displayLimit[facet.id] = facet.values.length;\r\n        }\r\n    }\r\n    deleteFacet(facetValueId) {\r\n        this.showModalAndDelete(facetValueId)\r\n            .pipe(switchMap(response => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(facetValueId, response.message || '').pipe(map(r => r.result === DeletionResult.DELETED));\r\n            }\r\n        }))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'FacetValue',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        });\r\n    }\r\n    showModalAndDelete(facetId, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-facet'),\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => (res ? this.dataService.facet.deleteFacet(facetId, !!message) : EMPTY)), map(res => res.deleteFacet));\r\n    }\r\n};\nFacetListComponent.ɵfac = function FacetListComponent_Factory(t) { return new (t || FacetListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute)); };\nFacetListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FacetListComponent, selectors: [[\"vdr-facet-list\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 24, vars: 26, consts: [[\"locationId\", \"facet-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [3, \"expand\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"left\", \"align-middle\"], [3, \"facetValue\", \"removable\", \"displayFacetName\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary btn-icon\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"facetValue\", \"removable\", \"displayFacetName\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", \"btn-icon\", 3, \"click\"], [\"collapse\", \"\"], [\"shape\", \"minus\"]], template: function FacetListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(2, \"vdr-action-bar-items\", 0);\n        ɵngcc0.ɵɵtemplate(3, FacetListComponent_a_3_Template, 4, 5, \"a\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"vdr-data-table\", 2);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function FacetListComponent_Template_vdr_data_table_pageChange_4_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function FacetListComponent_Template_vdr_data_table_itemsPerPageChange_4_listener($event) { return ctx.setItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵelementStart(9, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(10);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(13);\n        ɵngcc0.ɵɵpipe(14, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(15, \"vdr-dt-column\", 3);\n        ɵngcc0.ɵɵtext(16);\n        ɵngcc0.ɵɵpipe(17, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(18, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(19);\n        ɵngcc0.ɵɵpipe(20, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(21, \"vdr-dt-column\");\n        ɵngcc0.ɵɵelement(22, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtemplate(23, FacetListComponent_ng_template_23_Template, 28, 37, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"CreateCatalog\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(5, 10, ctx.items$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(6, 12, ctx.itemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(7, 14, ctx.totalItems$))(\"currentPage\", ɵngcc0.ɵɵpipeBind1(8, 16, ctx.currentPage$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 18, \"common.code\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(14, 20, \"common.name\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"expand\", true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(17, 22, \"catalog.values\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(20, 24, \"catalog.visibility\"));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.DataTableComponent, ɵngcc2.DataTableColumnComponent, ɵngcc1.RouterLinkWithHref, ɵngcc7.ClrIconCustomTag, ɵngcc4.NgForOf, ɵngcc4.NgIf, ɵngcc2.ChipComponent, ɵngcc2.TableRowActionComponent, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective, ɵngcc2.FacetValueChipComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc4.SlicePipe, ɵngcc2.HasPermissionPipe], styles: [\"td.private[_ngcontent-%COMP%]{background-color:#f2f3f5}\"] });\r\nFacetListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\r\nFacetListComponent = __decorate([ __metadata(\"design:paramtypes\", [DataService,\r\n        ModalService,\r\n        NotificationService,\r\n        Router,\r\n        ActivatedRoute])\r\n], FacetListComponent);\n\n/**\r\n * Handles the logic for making the API calls to perform CRUD operations on a Product and its related\r\n * entities. This logic was extracted out of the component because it became too large and hard to follow.\r\n */\r\nlet ProductDetailService = class ProductDetailService {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n    }\r\n    getFacets() {\r\n        return this.dataService.facet.getAllFacets().mapSingle((data) => data.facets.items);\r\n    }\r\n    getTaxCategories() {\r\n        return this.dataService.settings\r\n            .getTaxCategories()\r\n            .mapSingle((data) => data.taxCategories)\r\n            .pipe(shareReplay(1));\r\n    }\r\n    createProductWithVariants(input, createVariantsConfig, languageCode) {\r\n        const createProduct$ = this.dataService.product.createProduct(input);\r\n        const nonEmptyOptionGroups = createVariantsConfig.groups.filter((g) => 0 < g.values.length);\r\n        const createOptionGroups$ = this.createProductOptionGroups(nonEmptyOptionGroups, languageCode);\r\n        return forkJoin(createProduct$, createOptionGroups$).pipe(mergeMap(([{ createProduct }, optionGroups]) => {\r\n            const addOptionsToProduct$ = optionGroups.length\r\n                ? forkJoin(optionGroups.map((optionGroup) => {\r\n                    return this.dataService.product.addOptionGroupToProduct({\r\n                        productId: createProduct.id,\r\n                        optionGroupId: optionGroup.id,\r\n                    });\r\n                }))\r\n                : of([]);\r\n            return addOptionsToProduct$.pipe(map(() => {\r\n                return { createProduct, optionGroups };\r\n            }));\r\n        }), mergeMap(({ createProduct, optionGroups }) => {\r\n            const variants = createVariantsConfig.variants.map((v) => {\r\n                const optionIds = optionGroups.length\r\n                    ? v.optionValues.map((optionName, index) => {\r\n                        const option = optionGroups[index].options.find((o) => o.name === optionName);\r\n                        if (!option) {\r\n                            throw new Error(`Could not find a matching ProductOption \"${optionName}\" when creating variant`);\r\n                        }\r\n                        return option.id;\r\n                    })\r\n                    : [];\r\n                return Object.assign(Object.assign({}, v), { optionIds });\r\n            });\r\n            const options = optionGroups.map((og) => og.options).reduce((flat, o) => [...flat, ...o], []);\r\n            return this.createProductVariants(createProduct, variants, options, languageCode);\r\n        }));\r\n    }\r\n    createProductOptionGroups(groups, languageCode) {\r\n        return groups.length\r\n            ? forkJoin(groups.map((c) => {\r\n                return this.dataService.product\r\n                    .createProductOptionGroups({\r\n                    code: normalizeString(c.name, '-'),\r\n                    translations: [{ languageCode, name: c.name }],\r\n                    options: c.values.map((v) => ({\r\n                        code: normalizeString(v, '-'),\r\n                        translations: [{ languageCode, name: v }],\r\n                    })),\r\n                })\r\n                    .pipe(map((data) => data.createProductOptionGroup));\r\n            }))\r\n            : of([]);\r\n    }\r\n    createProductVariants(product, variantData, options, languageCode) {\r\n        const variants = variantData.map((v) => {\r\n            const name = options.length\r\n                ? `${product.name} ${v.optionIds\r\n                    .map((id) => options.find((o) => o.id === id))\r\n                    .filter(notNullOrUndefined)\r\n                    .map((o) => o.name)\r\n                    .join(' ')}`\r\n                : product.name;\r\n            return {\r\n                productId: product.id,\r\n                price: v.price,\r\n                sku: v.sku,\r\n                stockOnHand: v.stock,\r\n                translations: [\r\n                    {\r\n                        languageCode,\r\n                        name,\r\n                    },\r\n                ],\r\n                optionIds: v.optionIds,\r\n            };\r\n        });\r\n        return this.dataService.product.createProductVariants(variants).pipe(map(({ createProductVariants }) => ({\r\n            createProductVariants,\r\n            productId: product.id,\r\n        })));\r\n    }\r\n    updateProduct(productInput, variantInput) {\r\n        const updateOperations = [];\r\n        if (productInput) {\r\n            updateOperations.push(this.dataService.product.updateProduct(productInput));\r\n        }\r\n        if (variantInput) {\r\n            updateOperations.push(this.dataService.product.updateProductVariants(variantInput));\r\n        }\r\n        return forkJoin(updateOperations);\r\n    }\r\n    updateProductOption(input) {\r\n        return this.dataService.product.updateProductOption(input);\r\n    }\r\n    deleteProductVariant(id, productId) {\r\n        return this.dataService.product.deleteProductVariant(id).pipe(switchMap((result) => {\r\n            if (result.deleteProductVariant.result === DeletionResult.DELETED) {\r\n                return this.dataService.product.getProduct(productId).single$;\r\n            }\r\n            else {\r\n                return throwError(result.deleteProductVariant.message);\r\n            }\r\n        }));\r\n    }\r\n};\nProductDetailService.ɵfac = function ProductDetailService_Factory(t) { return new (t || ProductDetailService)(ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nProductDetailService.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\nProductDetailService.ɵprov = ɵɵdefineInjectable({ factory: function ProductDetailService_Factory() { return new ProductDetailService(ɵɵinject(DataService)); }, token: ProductDetailService, providedIn: \"root\" });\r\nProductDetailService = __decorate([ __metadata(\"design:paramtypes\", [DataService])\r\n], ProductDetailService);\n\nlet ApplyFacetDialogComponent = class ApplyFacetDialogComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.selectedValues = [];\r\n    }\r\n    ngAfterViewInit() {\r\n        setTimeout(() => this.selector.focus(), 0);\r\n    }\r\n    selectValues() {\r\n        this.resolveWith(this.selectedValues);\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n};\nApplyFacetDialogComponent.ɵfac = function ApplyFacetDialogComponent_Factory(t) { return new (t || ApplyFacetDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nApplyFacetDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ApplyFacetDialogComponent, selectors: [[\"vdr-apply-facet-dialog\"]], viewQuery: function ApplyFacetDialogComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(FacetValueSelectorComponent, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.selector = _t.first);\n    } }, decls: 3, vars: 1, consts: [[\"vdrDialogTitle\", \"\"], [3, \"facets\", \"selectedValuesChange\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function ApplyFacetDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ApplyFacetDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"vdr-facet-value-selector\", 1);\n        ɵngcc0.ɵɵlistener(\"selectedValuesChange\", function ApplyFacetDialogComponent_Template_vdr_facet_value_selector_selectedValuesChange_1_listener($event) { return ctx.selectedValues = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(2, ApplyFacetDialogComponent_ng_template_2_Template, 6, 7, \"ng-template\", 2);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"facets\", ctx.facets);\n    } }, directives: [ɵngcc2.DialogTitleDirective, ɵngcc2.FacetValueSelectorComponent, ɵngcc2.DialogButtonsDirective], pipes: [ɵngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\r\nApplyFacetDialogComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\n__decorate([\r\n    ViewChild(FacetValueSelectorComponent),\r\n    __metadata(\"design:type\", FacetValueSelectorComponent)\r\n], ApplyFacetDialogComponent.prototype, \"selector\", void 0);\r\nApplyFacetDialogComponent = __decorate([ __metadata(\"design:paramtypes\", [ChangeDetectorRef])\r\n], ApplyFacetDialogComponent);\n\nlet AssignProductsToChannelDialogComponent = class AssignProductsToChannelDialogComponent {\r\n    constructor(dataService, notificationService) {\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.priceFactorControl = new FormControl(1);\r\n        this.selectedChannelIdControl = new FormControl();\r\n    }\r\n    ngOnInit() {\r\n        const activeChannelId$ = this.dataService.client\r\n            .userStatus()\r\n            .mapSingle(({ userStatus }) => userStatus.activeChannelId);\r\n        const allChannels$ = this.dataService.settings.getChannels().mapSingle(data => data.channels);\r\n        combineLatest(activeChannelId$, allChannels$).subscribe(([activeChannelId, channels]) => {\r\n            // tslint:disable-next-line:no-non-null-assertion\r\n            this.currentChannel = channels.find(c => c.id === activeChannelId);\r\n            this.availableChannels = channels;\r\n        });\r\n        this.selectedChannelIdControl.valueChanges.subscribe(ids => {\r\n            this.selectChannel(ids);\r\n        });\r\n        this.variantsPreview$ = combineLatest(from(this.getTopVariants(10)), this.priceFactorControl.valueChanges.pipe(startWith(1))).pipe(map(([variants, factor]) => {\r\n            return variants.map(v => ({\r\n                id: v.id,\r\n                name: v.name,\r\n                price: v.price,\r\n                pricePreview: v.price * +factor,\r\n            }));\r\n        }));\r\n    }\r\n    selectChannel(channelIds) {\r\n        this.selectedChannel = this.availableChannels.find(c => c.id === channelIds[0]);\r\n    }\r\n    assign() {\r\n        const selectedChannel = this.selectedChannel;\r\n        if (selectedChannel) {\r\n            this.dataService.product\r\n                .assignProductsToChannel({\r\n                channelId: selectedChannel.id,\r\n                productIds: this.productIds,\r\n                priceFactor: +this.priceFactorControl.value,\r\n            })\r\n                .subscribe(() => {\r\n                this.notificationService.success(marker('catalog.assign-product-to-channel-success'), {\r\n                    channel: selectedChannel.code,\r\n                });\r\n                this.resolveWith(true);\r\n            });\r\n        }\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    getTopVariants(take) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const variants = [];\r\n            for (let i = 0; i < this.productIds.length && variants.length < take; i++) {\r\n                const productVariants = yield this.dataService.product\r\n                    .getProduct(this.productIds[i])\r\n                    .mapSingle(({ product }) => product && product.variants)\r\n                    .toPromise();\r\n                variants.push(...(productVariants || []));\r\n            }\r\n            return variants.slice(0, take);\r\n        });\r\n    }\r\n};\nAssignProductsToChannelDialogComponent.ɵfac = function AssignProductsToChannelDialogComponent_Factory(t) { return new (t || AssignProductsToChannelDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService)); };\nAssignProductsToChannelDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AssignProductsToChannelDialogComponent, selectors: [[\"vdr-assign-products-to-channel-dialog\"]], decls: 36, vars: 31, consts: [[\"vdrDialogTitle\", \"\"], [1, \"flex\"], [\"clrInput\", \"\", 3, \"multiple\", \"includeDefaultChannel\", \"formControl\"], [1, \"flex-spacer\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"max\", \"99999\", 3, \"formControl\"], [1, \"channel-price-preview\"], [1, \"clr-control-label\"], [1, \"table\"], [3, \"ngIf\", \"ngIfElse\"], [\"noSelection\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"vdrDialogButtons\", \"\"], [\"noChannelSelected\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function AssignProductsToChannelDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, AssignProductsToChannelDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"clr-input-container\");\n        ɵngcc0.ɵɵelementStart(3, \"label\");\n        ɵngcc0.ɵɵtext(4);\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(6, \"vdr-channel-assignment-control\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(7, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(8, \"clr-input-container\");\n        ɵngcc0.ɵɵelementStart(9, \"label\");\n        ɵngcc0.ɵɵtext(10);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(12, \"input\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(14, \"label\", 6);\n        ɵngcc0.ɵɵtext(15);\n        ɵngcc0.ɵɵpipe(16, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"table\", 7);\n        ɵngcc0.ɵɵelementStart(18, \"thead\");\n        ɵngcc0.ɵɵelementStart(19, \"tr\");\n        ɵngcc0.ɵɵelementStart(20, \"th\");\n        ɵngcc0.ɵɵtext(21);\n        ɵngcc0.ɵɵpipe(22, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"th\");\n        ɵngcc0.ɵɵtext(24);\n        ɵngcc0.ɵɵpipe(25, \"translate\");\n        ɵngcc0.ɵɵpipe(26, \"translate\");\n        ɵngcc0.ɵɵpipe(27, \"channelCodeToLabel\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(28, \"th\");\n        ɵngcc0.ɵɵtemplate(29, AssignProductsToChannelDialogComponent_ng_template_29_Template, 2, 6, \"ng-template\", 8);\n        ɵngcc0.ɵɵtemplate(30, AssignProductsToChannelDialogComponent_ng_template_30_Template, 2, 3, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(32, \"tbody\");\n        ɵngcc0.ɵɵtemplate(33, AssignProductsToChannelDialogComponent_tr_33_Template, 10, 7, \"tr\", 10);\n        ɵngcc0.ɵɵpipe(34, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(35, AssignProductsToChannelDialogComponent_ng_template_35_Template, 7, 6, \"ng-template\", 11);\n    } if (rf & 2) {\n        const _r2 = ɵngcc0.ɵɵreference(31);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 12, \"common.channel\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"multiple\", false)(\"includeDefaultChannel\", false)(\"formControl\", ctx.selectedChannelIdControl);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 14, \"catalog.price-conversion-factor\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"formControl\", ctx.priceFactorControl);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(16, 16, \"catalog.channel-price-preview\"));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(22, 18, \"common.name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(25, 20, \"catalog.price-in-channel\", ɵngcc0.ɵɵpureFunction1(29, _c12, ɵngcc0.ɵɵpipeBind1(26, 23, ɵngcc0.ɵɵpipeBind1(27, 25, ctx.currentChannel == null ? null : ctx.currentChannel.code)))), \" \");\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectedChannel)(\"ngIfElse\", _r2);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(34, 27, ctx.variantsPreview$));\n    } }, directives: [ɵngcc2.DialogTitleDirective, ɵngcc7.ClrInputContainer, ɵngcc7.ClrLabel, ɵngcc2.ChannelAssignmentControlComponent, ɵngcc7.ClrInput, ɵngcc3.NgControlStatus, ɵngcc3.FormControlDirective, ɵngcc2.FormFieldControlDirective, ɵngcc3.NumberValueAccessor, ɵngcc3.DefaultValueAccessor, ɵngcc4.NgIf, ɵngcc4.NgForOf, ɵngcc2.DialogButtonsDirective], pipes: [ɵngcc5.TranslatePipe, ɵngcc2.ChannelLabelPipe, ɵngcc4.AsyncPipe, ɵngcc4.CurrencyPipe], styles: [\"vdr-channel-assignment-control[_ngcontent-%COMP%]{min-width:200px}.channel-price-preview[_ngcontent-%COMP%]{margin-top:24px}.channel-price-preview[_ngcontent-%COMP%]   table.table[_ngcontent-%COMP%]{margin-top:6px}\"], changeDetection: 0 });\r\nAssignProductsToChannelDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: NotificationService }\r\n];\r\nAssignProductsToChannelDialogComponent = __decorate([ __metadata(\"design:paramtypes\", [DataService, NotificationService])\r\n], AssignProductsToChannelDialogComponent);\n\nlet ProductDetailComponent = class ProductDetailComponent extends BaseDetailComponent {\r\n    constructor(route, router, serverConfigService, productDetailService, formBuilder, modalService, notificationService, dataService, location, changeDetector) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.productDetailService = productDetailService;\r\n        this.formBuilder = formBuilder;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.dataService = dataService;\r\n        this.location = location;\r\n        this.changeDetector = changeDetector;\r\n        this.assetChanges = {};\r\n        this.variantAssetChanges = {};\r\n        this.selectedVariantIds = [];\r\n        this.variantDisplayMode = 'card';\r\n        this.createVariantsConfig = { groups: [], variants: [] };\r\n        this.customFields = this.getCustomFieldConfig('Product');\r\n        this.customVariantFields = this.getCustomFieldConfig('ProductVariant');\r\n        this.customOptionGroupFields = this.getCustomFieldConfig('ProductOptionGroup');\r\n        this.customOptionFields = this.getCustomFieldConfig('ProductOption');\r\n        this.detailForm = this.formBuilder.group({\r\n            product: this.formBuilder.group({\r\n                enabled: true,\r\n                name: ['', Validators.required],\r\n                slug: '',\r\n                description: '',\r\n                facetValueIds: [[]],\r\n                customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n            }),\r\n            variants: this.formBuilder.array([]),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.product$ = this.entity$;\r\n        this.variants$ = this.product$.pipe(map((product) => product.variants));\r\n        this.taxCategories$ = this.productDetailService.getTaxCategories().pipe(takeUntil(this.destroy$));\r\n        this.activeTab$ = this.route.paramMap.pipe(map((qpm) => qpm.get('tab')));\r\n        // FacetValues are provided initially by the nested array of the\r\n        // Product entity, but once a fetch to get all Facets is made (as when\r\n        // opening the FacetValue selector modal), then these additional values\r\n        // are concatenated onto the initial array.\r\n        this.facets$ = this.productDetailService.getFacets();\r\n        const productFacetValues$ = this.product$.pipe(map((product) => product.facetValues));\r\n        const allFacetValues$ = this.facets$.pipe(map(flattenFacetValues));\r\n        const productGroup = this.getProductFormGroup();\r\n        const formFacetValueIdChanges$ = productGroup.valueChanges.pipe(map((val) => val.facetValueIds), distinctUntilChanged());\r\n        const formChangeFacetValues$ = combineLatest(formFacetValueIdChanges$, productFacetValues$, allFacetValues$).pipe(map(([ids, productFacetValues, allFacetValues]) => {\r\n            const combined = [...productFacetValues, ...allFacetValues];\r\n            return ids.map((id) => combined.find((fv) => fv.id === id)).filter(notNullOrUndefined);\r\n        }));\r\n        this.facetValues$ = merge(productFacetValues$, formChangeFacetValues$);\r\n        this.productChannels$ = this.product$.pipe(map((p) => p.channels));\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    navigateToTab(tabName) {\r\n        this.router.navigate(['./', Object.assign(Object.assign({}, this.route.snapshot.params), { tab: tabName })], {\r\n            queryParamsHandling: 'merge',\r\n            relativeTo: this.route,\r\n            state: {\r\n                [IGNORE_CAN_DEACTIVATE_GUARD]: true,\r\n            },\r\n        });\r\n    }\r\n    isDefaultChannel(channelCode) {\r\n        return channelCode === DEFAULT_CHANNEL_CODE;\r\n    }\r\n    assignToChannel() {\r\n        this.modalService\r\n            .fromComponent(AssignProductsToChannelDialogComponent, {\r\n            size: 'lg',\r\n            locals: {\r\n                productIds: [this.id],\r\n            },\r\n        })\r\n            .subscribe();\r\n    }\r\n    removeFromChannel(channelId) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.remove-product-from-channel'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('catalog.remove-from-channel'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap((response) => response\r\n            ? this.dataService.product.removeProductsFromChannel({\r\n                channelId,\r\n                productIds: [this.id],\r\n            })\r\n            : EMPTY))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('catalog.notify-remove-product-from-channel-success'));\r\n        }, (err) => {\r\n            this.notificationService.error(marker('catalog.notify-remove-product-from-channel-error'));\r\n        });\r\n    }\r\n    customFieldIsSet(name) {\r\n        return !!this.detailForm.get(['product', 'customFields', name]);\r\n    }\r\n    assetsChanged() {\r\n        return !!Object.values(this.assetChanges).length;\r\n    }\r\n    variantAssetsChanged() {\r\n        return !!Object.keys(this.variantAssetChanges).length;\r\n    }\r\n    variantAssetChange(event) {\r\n        this.variantAssetChanges[event.variantId] = event;\r\n    }\r\n    /**\r\n     * If creating a new product, automatically generate the slug based on the product name.\r\n     */\r\n    updateSlug(nameValue) {\r\n        this.isNew$.pipe(take(1)).subscribe((isNew) => {\r\n            if (isNew) {\r\n                const slugControl = this.detailForm.get(['product', 'slug']);\r\n                if (slugControl && slugControl.pristine) {\r\n                    slugControl.setValue(normalizeString(`${nameValue}`, '-'));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    selectProductFacetValue() {\r\n        this.displayFacetValueModal().subscribe((facetValueIds) => {\r\n            if (facetValueIds) {\r\n                const productGroup = this.getProductFormGroup();\r\n                const currentFacetValueIds = productGroup.value.facetValueIds;\r\n                productGroup.patchValue({\r\n                    facetValueIds: unique([...currentFacetValueIds, ...facetValueIds]),\r\n                });\r\n                productGroup.markAsDirty();\r\n            }\r\n        });\r\n    }\r\n    updateProductOption(input) {\r\n        this.productDetailService.updateProductOption(input).subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'ProductOption',\r\n            });\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'ProductOption',\r\n            });\r\n        });\r\n    }\r\n    removeProductFacetValue(facetValueId) {\r\n        const productGroup = this.getProductFormGroup();\r\n        const currentFacetValueIds = productGroup.value.facetValueIds;\r\n        productGroup.patchValue({\r\n            facetValueIds: currentFacetValueIds.filter((id) => id !== facetValueId),\r\n        });\r\n        productGroup.markAsDirty();\r\n    }\r\n    /**\r\n     * Opens a dialog to select FacetValues to apply to the select ProductVariants.\r\n     */\r\n    selectVariantFacetValue(selectedVariantIds) {\r\n        this.displayFacetValueModal()\r\n            .pipe(withLatestFrom(this.variants$))\r\n            .subscribe(([facetValueIds, variants]) => {\r\n            if (facetValueIds) {\r\n                for (const variantId of selectedVariantIds) {\r\n                    const index = variants.findIndex((v) => v.id === variantId);\r\n                    const variant = variants[index];\r\n                    const existingFacetValueIds = variant ? variant.facetValues.map((fv) => fv.id) : [];\r\n                    const variantFormGroup = this.detailForm.get(['variants', index]);\r\n                    if (variantFormGroup) {\r\n                        variantFormGroup.patchValue({\r\n                            facetValueIds: unique([...existingFacetValueIds, ...facetValueIds]),\r\n                        });\r\n                        variantFormGroup.markAsDirty();\r\n                    }\r\n                }\r\n                this.changeDetector.markForCheck();\r\n            }\r\n        });\r\n    }\r\n    variantsToCreateAreValid() {\r\n        return (0 < this.createVariantsConfig.variants.length &&\r\n            this.createVariantsConfig.variants.every((v) => {\r\n                return v.sku !== '';\r\n            }));\r\n    }\r\n    displayFacetValueModal() {\r\n        return this.productDetailService.getFacets().pipe(mergeMap((facets) => this.modalService.fromComponent(ApplyFacetDialogComponent, {\r\n            size: 'md',\r\n            closable: true,\r\n            locals: { facets },\r\n        })), map((facetValues) => facetValues && facetValues.map((v) => v.id)));\r\n    }\r\n    create() {\r\n        const productGroup = this.getProductFormGroup();\r\n        if (!productGroup.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.product$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([product, languageCode]) => {\r\n            const newProduct = this.getUpdatedProduct(product, productGroup, languageCode);\r\n            return this.productDetailService.createProductWithVariants(newProduct, this.createVariantsConfig, languageCode);\r\n        }))\r\n            .subscribe(({ createProductVariants, productId }) => {\r\n            this.notificationService.success(marker('common.notify-create-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.assetChanges = {};\r\n            this.variantAssetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.router.navigate(['../', productId], { relativeTo: this.route });\r\n        }, (err) => {\r\n            // tslint:disable-next-line:no-console\r\n            console.error(err);\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.product$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([product, languageCode]) => {\r\n            const productGroup = this.getProductFormGroup();\r\n            let productInput;\r\n            let variantsInput;\r\n            if (productGroup.dirty || this.assetsChanged()) {\r\n                productInput = this.getUpdatedProduct(product, productGroup, languageCode);\r\n            }\r\n            const variantsArray = this.detailForm.get('variants');\r\n            if ((variantsArray && variantsArray.dirty) || this.variantAssetsChanged()) {\r\n                variantsInput = this.getUpdatedProductVariants(product, variantsArray, languageCode);\r\n            }\r\n            return this.productDetailService.updateProduct(productInput, variantsInput);\r\n        }))\r\n            .subscribe((result) => {\r\n            this.updateSlugAfterSave(result);\r\n            this.detailForm.markAsPristine();\r\n            this.assetChanges = {};\r\n            this.variantAssetChanges = {};\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.changeDetector.markForCheck();\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n    canDeactivate() {\r\n        return super.canDeactivate() && !this.assetChanges.assetIds && !this.assetChanges.featuredAssetId;\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the product or current language.\r\n     */\r\n    setFormValues(product, languageCode) {\r\n        const currentTranslation = product.translations.find((t) => t.languageCode === languageCode);\r\n        this.detailForm.patchValue({\r\n            product: {\r\n                enabled: product.enabled,\r\n                name: currentTranslation ? currentTranslation.name : '',\r\n                slug: currentTranslation ? currentTranslation.slug : '',\r\n                description: currentTranslation ? currentTranslation.description : '',\r\n                facetValueIds: product.facetValues.map((fv) => fv.id),\r\n            },\r\n        });\r\n        if (this.customFields.length) {\r\n            const customFieldsGroup = this.detailForm.get(['product', 'customFields']);\r\n            const cfCurrentTranslation = (currentTranslation && currentTranslation.customFields) || {};\r\n            const cfProduct = product.customFields || {};\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString' ? cfCurrentTranslation[key] : cfProduct[key];\r\n                const control = customFieldsGroup.get(key);\r\n                if (control) {\r\n                    control.patchValue(value);\r\n                }\r\n            }\r\n        }\r\n        const variantsFormArray = this.detailForm.get('variants');\r\n        product.variants.forEach((variant, i) => {\r\n            const variantTranslation = variant.translations.find((t) => t.languageCode === languageCode);\r\n            const facetValueIds = variant.facetValues.map((fv) => fv.id);\r\n            const group = {\r\n                enabled: variant.enabled,\r\n                sku: variant.sku,\r\n                name: variantTranslation ? variantTranslation.name : '',\r\n                price: variant.price,\r\n                priceIncludesTax: variant.priceIncludesTax,\r\n                priceWithTax: variant.priceWithTax,\r\n                taxCategoryId: variant.taxCategory.id,\r\n                stockOnHand: variant.stockOnHand,\r\n                trackInventory: variant.trackInventory,\r\n                facetValueIds,\r\n            };\r\n            let variantFormGroup = variantsFormArray.at(i);\r\n            if (variantFormGroup) {\r\n                variantFormGroup.patchValue(group);\r\n            }\r\n            else {\r\n                variantFormGroup = this.formBuilder.group(Object.assign(Object.assign({}, group), { facetValueIds: this.formBuilder.control(facetValueIds) }));\r\n                variantsFormArray.insert(i, variantFormGroup);\r\n            }\r\n            if (this.customVariantFields.length) {\r\n                let customFieldsGroup = variantFormGroup.get(['customFields']);\r\n                if (!customFieldsGroup) {\r\n                    customFieldsGroup = this.formBuilder.group(this.customVariantFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {}));\r\n                    variantFormGroup.addControl('customFields', customFieldsGroup);\r\n                }\r\n                for (const fieldDef of this.customVariantFields) {\r\n                    const key = fieldDef.name;\r\n                    const value = fieldDef.type === 'localeString'\r\n                        ? variantTranslation.customFields[key]\r\n                        : variant.customFields[key];\r\n                    const control = customFieldsGroup.get(key);\r\n                    if (control) {\r\n                        control.patchValue(value);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Given a product and the value of the detailForm, this method creates an updated copy of the product which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedProduct(product, productFormGroup, languageCode) {\r\n        const updatedProduct = createUpdatedTranslatable({\r\n            translatable: product,\r\n            updatedFields: productFormGroup.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: product.name || '',\r\n                slug: product.slug || '',\r\n                description: product.description || '',\r\n            },\r\n        });\r\n        return Object.assign(Object.assign(Object.assign({}, updatedProduct), this.assetChanges), { facetValueIds: productFormGroup.value.facetValueIds });\r\n    }\r\n    /**\r\n     * Given an array of product variants and the values from the detailForm, this method creates an new array\r\n     * which can be persisted to the API.\r\n     */\r\n    getUpdatedProductVariants(product, variantsFormArray, languageCode) {\r\n        const dirtyVariants = product.variants.filter((v, i) => {\r\n            const formRow = variantsFormArray.get(i.toString());\r\n            return formRow && formRow.dirty;\r\n        });\r\n        const dirtyVariantValues = variantsFormArray.controls.filter((c) => c.dirty).map((c) => c.value);\r\n        if (dirtyVariants.length !== dirtyVariantValues.length) {\r\n            throw new Error(marker(`error.product-variant-form-values-do-not-match`));\r\n        }\r\n        return dirtyVariants\r\n            .map((variant, i) => {\r\n            const formValue = dirtyVariantValues[i];\r\n            const result = createUpdatedTranslatable({\r\n                translatable: variant,\r\n                updatedFields: formValue,\r\n                customFieldConfig: this.customVariantFields,\r\n                languageCode,\r\n                defaultTranslation: {\r\n                    languageCode,\r\n                    name: '',\r\n                },\r\n            });\r\n            result.taxCategoryId = formValue.taxCategoryId;\r\n            result.facetValueIds = formValue.facetValueIds;\r\n            const assetChanges = this.variantAssetChanges[variant.id];\r\n            if (assetChanges) {\r\n                result.featuredAssetId = assetChanges.featuredAssetId;\r\n                result.assetIds = assetChanges.assetIds;\r\n            }\r\n            return result;\r\n        })\r\n            .filter(notNullOrUndefined);\r\n    }\r\n    getProductFormGroup() {\r\n        return this.detailForm.get('product');\r\n    }\r\n    /**\r\n     * The server may alter the slug value in order to normalize and ensure uniqueness upon saving.\r\n     */\r\n    updateSlugAfterSave(results) {\r\n        const firstResult = results[0];\r\n        const slugControl = this.detailForm.get(['product', 'slug']);\r\n        function isUpdateMutation(input) {\r\n            return input.hasOwnProperty('updateProduct');\r\n        }\r\n        if (slugControl && isUpdateMutation(firstResult)) {\r\n            slugControl.setValue(firstResult.updateProduct.slug, { emitEvent: false });\r\n        }\r\n    }\r\n};\nProductDetailComponent.ɵfac = function ProductDetailComponent_Factory(t) { return new (t || ProductDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ProductDetailService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.Location), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nProductDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductDetailComponent, selectors: [[\"vdr-product-detail\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 18, vars: 20, consts: [[1, \"flex\", \"clr-flex-row\"], [3, \"entity\"], [4, \"vdrIfPermissions\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"product-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", \"keydown.enter\", 4, \"ngIf\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", 3, \"formControl\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\", \"keydown.enter\"], [\"clrTabLink\", \"\", 3, \"click\"], [4, \"clrIfActive\"], [4, \"ngIf\"], [1, \"clr-row\"], [1, \"clr-col\"], [\"formGroupName\", \"product\", 1, \"form-block\"], [4, \"vdrIfMultichannel\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"for\", \"slug\", 3, \"label\", \"errors\"], [\"id\", \"slug\", \"type\", \"text\", \"formControlName\", \"slug\", \"pattern\", \"[a-z0-9_-]+\", 3, \"readonly\"], [\"formControlName\", \"description\", 3, \"readonly\", \"label\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [1, \"facets\"], [3, \"facetValue\", \"removable\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [1, \"clr-col-md-auto\"], [3, \"assets\", \"featuredAsset\", \"change\"], [3, \"label\", 4, \"vdrIfDefaultChannelActive\"], [3, \"label\"], [1, \"flex\"], [1, \"product-channels\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-sm\", 3, \"click\"], [\"shape\", \"layers\"], [\"icon\", \"times-circle\", 3, \"iconClick\", 4, \"ngIf\"], [\"icon\", \"times-circle\", 3, \"iconClick\"], [3, \"channelCode\"], [\"formGroupName\", \"customFields\"], [\"entityName\", \"Product\", 3, \"customFieldsFormGroup\", \"customField\", \"readonly\", 4, \"ngIf\"], [\"entityName\", \"Product\", 3, \"customFieldsFormGroup\", \"customField\", \"readonly\"], [3, \"facetValue\", \"removable\", \"remove\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"plus\"], [3, \"variantsChange\"], [1, \"form-block\"], [1, \"view-mode\"], [1, \"btn-group\", \"btn-sm\"], [1, \"btn\", \"btn-secondary-outline\", 3, \"click\"], [\"shape\", \"list\"], [1, \"btn\", 3, \"click\"], [\"shape\", \"table\"], [1, \"flex-spacer\"], [\"class\", \"btn btn-secondary btn-sm edit-variants-btn\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"variants\", \"optionGroups\", \"productVariantsFormArray\", 4, \"ngIf\"], [3, \"variants\", \"facets\", \"optionGroups\", \"productVariantsFormArray\", \"taxCategories\", \"customFields\", \"customOptionFields\", \"activeLanguage\", \"assetChange\", \"updateProductOption\", \"selectionChange\", \"selectFacetValueClick\", 4, \"ngIf\"], [1, \"btn\", \"btn-secondary\", \"btn-sm\", \"edit-variants-btn\", 3, \"routerLink\"], [\"shape\", \"add-text\"], [3, \"variants\", \"optionGroups\", \"productVariantsFormArray\"], [3, \"variants\", \"facets\", \"optionGroups\", \"productVariantsFormArray\", \"taxCategories\", \"customFields\", \"customOptionFields\", \"activeLanguage\", \"assetChange\", \"updateProductOption\", \"selectionChange\", \"selectFacetValueClick\"]], template: function ProductDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelementStart(2, \"div\", 0);\n        ɵngcc0.ɵɵelement(3, \"vdr-entity-info\", 1);\n        ɵngcc0.ɵɵpipe(4, \"async\");\n        ɵngcc0.ɵɵtemplate(5, ProductDetailComponent_clr_toggle_wrapper_5_Template, 5, 5, \"clr-toggle-wrapper\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"vdr-language-selector\", 3);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function ProductDetailComponent_Template_vdr_language_selector_languageCodeChange_6_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(11, \"vdr-action-bar-items\", 4);\n        ɵngcc0.ɵɵtemplate(12, ProductDetailComponent_button_12_Template, 3, 4, \"button\", 5);\n        ɵngcc0.ɵɵpipe(13, \"async\");\n        ɵngcc0.ɵɵtemplate(14, ProductDetailComponent_ng_template_14_Template, 1, 1, \"ng-template\", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(16, ProductDetailComponent_form_16_Template, 10, 10, \"form\", 7);\n        ɵngcc0.ɵɵpipe(17, \"async\");\n    } if (rf & 2) {\n        const _r2 = ɵngcc0.ɵɵreference(15);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(4, 8, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdateCatalog\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(7, 10, ctx.isNew$))(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(8, 12, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(9, 14, ctx.languageCode$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(13, 16, ctx.isNew$))(\"ngIfElse\", _r2);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(17, 18, ctx.product$));\n    } }, directives: function () { return [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.LanguageSelectorComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc4.NgIf, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.FormControlDirective, ɵngcc7.ClrLabel, ɵngcc3.ɵangular_packages_forms_forms_y, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc7.ClrTabs, ɵngcc7.ɵem, ɵngcc7.ClrTab, ɵngcc7.ClrTabLink, ɵngcc7.ɵen, ɵngcc7.ClrIfActive, ɵngcc7.ClrTabContent, ɵngcc3.FormGroupName, ɵngcc2.IfMultichannelDirective, ɵngcc2.FormFieldComponent, ɵngcc3.DefaultValueAccessor, ɵngcc3.FormControlName, ɵngcc3.PatternValidator, ɵngcc2.RichTextEditorComponent, ɵngcc4.NgForOf, ProductAssetsComponent, ɵngcc2.IfDefaultChannelActiveDirective, ɵngcc2.FormItemComponent, ɵngcc7.ClrIconCustomTag, ɵngcc2.ChipComponent, ɵngcc2.ChannelBadgeComponent, ɵngcc2.CustomFieldControlComponent, ɵngcc2.FacetValueChipComponent, GenerateProductVariantsComponent, ɵngcc1.RouterLinkWithHref, ProductVariantsTableComponent,\n        ProductVariantsListComponent]; }, pipes: function () { return [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe, ɵngcc2.ChannelLabelPipe]; }, styles: [\"[_nghost-%COMP%]     trix-toolbar{top:24px}vdr-action-bar[_ngcontent-%COMP%]   clr-toggle-wrapper[_ngcontent-%COMP%]{margin-top:12px}.group-name[_ngcontent-%COMP%]{padding-right:6px}.view-mode[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.edit-variants-btn[_ngcontent-%COMP%]{margin-top:0}\"], changeDetection: 0 });\r\nProductDetailComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: Router },\r\n    { type: ServerConfigService },\r\n    { type: ProductDetailService },\r\n    { type: FormBuilder },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: DataService },\r\n    { type: Location },\r\n    { type: ChangeDetectorRef }\r\n];\r\nProductDetailComponent = __decorate([ __metadata(\"design:paramtypes\", [ActivatedRoute,\r\n        Router,\r\n        ServerConfigService,\r\n        ProductDetailService,\r\n        FormBuilder,\r\n        ModalService,\r\n        NotificationService,\r\n        DataService,\r\n        Location,\r\n        ChangeDetectorRef])\r\n], ProductDetailComponent);\n\n/**\r\n * A custom SelectionModel for the NgSelect component which only allows a single\r\n * search term at a time.\r\n */\r\nclass ProductSearchSelectionModel {\r\n    constructor() {\r\n        this._selected = [];\r\n    }\r\n    get value() {\r\n        return this._selected;\r\n    }\r\n    select(item, multiple, groupAsModel) {\r\n        item.selected = true;\r\n        if (groupAsModel || !item.children) {\r\n            if (item.value.label) {\r\n                const isSearchTerm = (i) => !!i.value.label;\r\n                const searchTerms = this._selected.filter(isSearchTerm);\r\n                if (searchTerms.length > 0) {\r\n                    // there is already a search term, so replace it with this new one.\r\n                    this._selected = this._selected.filter(i => !isSearchTerm(i)).concat(item);\r\n                }\r\n                else {\r\n                    this._selected.push(item);\r\n                }\r\n            }\r\n            else {\r\n                this._selected.push(item);\r\n            }\r\n        }\r\n    }\r\n    unselect(item, multiple) {\r\n        this._selected = this._selected.filter(x => x !== item);\r\n        item.selected = false;\r\n    }\r\n    clear(keepDisabled) {\r\n        this._selected = keepDisabled ? this._selected.filter(x => x.disabled) : [];\r\n    }\r\n    _setChildrenSelectedState(children, selected) {\r\n        children.forEach(x => (x.selected = selected));\r\n    }\r\n    _removeChildren(parent) {\r\n        this._selected = this._selected.filter(x => x.parent !== parent);\r\n    }\r\n    _removeParent(parent) {\r\n        this._selected = this._selected.filter(x => x !== parent);\r\n    }\r\n}\r\nfunction ProductSearchSelectionModelFactory() {\r\n    return new ProductSearchSelectionModel();\r\n}\n\nconst ɵ0 = ProductSearchSelectionModelFactory;\r\nlet ProductSearchInputComponent = class ProductSearchInputComponent {\r\n    constructor() {\r\n        this.searchTermChange = new EventEmitter();\r\n        this.facetValueChange = new EventEmitter();\r\n        this.lastTerm = '';\r\n        this.lastFacetValueIds = [];\r\n        this.filterFacetResults = (term, item) => {\r\n            if (!this.isFacetValueItem(item)) {\r\n                return false;\r\n            }\r\n            return (item.facetValue.name.toLowerCase().startsWith(term.toLowerCase()) ||\r\n                item.facetValue.facet.name.toLowerCase().startsWith(term.toLowerCase()));\r\n        };\r\n        this.groupByFacet = (item) => {\r\n            if (this.isFacetValueItem(item)) {\r\n                return item.facetValue.facet.name;\r\n            }\r\n            else {\r\n                return '';\r\n            }\r\n        };\r\n        this.isFacetValueItem = (input) => {\r\n            return typeof input === 'object' && !!input && input.hasOwnProperty('facetValue');\r\n        };\r\n    }\r\n    setSearchTerm(term) {\r\n        if (term) {\r\n            this.selectComponent.select({ label: term, value: { label: term } });\r\n        }\r\n        else {\r\n            const currentTerm = this.selectComponent.selectedItems.find(i => !this.isFacetValueItem(i.value));\r\n            if (currentTerm) {\r\n                this.selectComponent.unselect(currentTerm);\r\n            }\r\n        }\r\n    }\r\n    setFacetValues(ids) {\r\n        const items = this.selectComponent.items;\r\n        this.selectComponent.selectedItems.forEach(item => {\r\n            if (this.isFacetValueItem(item.value) && !ids.includes(item.value.facetValue.id)) {\r\n                this.selectComponent.unselect(item);\r\n            }\r\n        });\r\n        ids.map(id => {\r\n            return items.find(item => this.isFacetValueItem(item) && item.facetValue.id === id);\r\n        })\r\n            .filter(notNullOrUndefined)\r\n            .forEach(item => {\r\n            const isSelected = this.selectComponent.selectedItems.find(i => {\r\n                const val = i.value;\r\n                if (this.isFacetValueItem(val)) {\r\n                    return val.facetValue.id === item.facetValue.id;\r\n                }\r\n                return false;\r\n            });\r\n            if (!isSelected) {\r\n                this.selectComponent.select({ label: '', value: item });\r\n            }\r\n        });\r\n    }\r\n    onSelectChange(selectedItems) {\r\n        if (!Array.isArray(selectedItems)) {\r\n            selectedItems = [selectedItems];\r\n        }\r\n        const searchTermItem = selectedItems.find(item => !this.isFacetValueItem(item));\r\n        const searchTerm = searchTermItem ? searchTermItem.label : '';\r\n        const facetValueIds = selectedItems.filter(this.isFacetValueItem).map(i => i.facetValue.id);\r\n        if (searchTerm !== this.lastTerm) {\r\n            this.searchTermChange.emit(searchTerm);\r\n            this.lastTerm = searchTerm;\r\n        }\r\n        if (this.lastFacetValueIds.join(',') !== facetValueIds.join(',')) {\r\n            this.facetValueChange.emit(facetValueIds);\r\n            this.lastFacetValueIds = facetValueIds;\r\n        }\r\n    }\r\n    isSearchHeaderSelected() {\r\n        return this.selectComponent.itemsList.markedIndex === -1;\r\n    }\r\n};\nProductSearchInputComponent.ɵfac = function ProductSearchInputComponent_Factory(t) { return new (t || ProductSearchInputComponent)(); };\nProductSearchInputComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductSearchInputComponent, selectors: [[\"vdr-product-search-input\"]], viewQuery: function ProductSearchInputComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c17, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.selectComponent = _t.first);\n    } }, inputs: { facetValueResults: \"facetValueResults\" }, outputs: { searchTermChange: \"searchTermChange\", facetValueChange: \"facetValueChange\" }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: SELECTION_MODEL_FACTORY, useValue: ɵ0 }])], decls: 6, vars: 9, consts: [[3, \"addTag\", \"placeholder\", \"items\", \"searchFn\", \"hideSelected\", \"multiple\", \"markFirst\", \"change\"], [\"selectComponent\", \"\"], [\"ng-header-tmp\", \"\"], [\"ng-label-tmp\", \"\"], [\"ng-option-tmp\", \"\"], [\"class\", \"search-header\", 3, \"selected\", \"click\", 4, \"ngIf\"], [1, \"search-header\", 3, \"click\"], [4, \"ngIf\"], [3, \"facetValue\", \"removable\", \"remove\"], [3, \"icon\", \"iconClick\"], [3, \"facetValue\", \"removable\"]], template: function ProductSearchInputComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"ng-select\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"change\", function ProductSearchInputComponent_Template_ng_select_change_0_listener($event) { return ctx.onSelectChange($event); });\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵtemplate(3, ProductSearchInputComponent_ng_template_3_Template, 1, 1, \"ng-template\", 2);\n        ɵngcc0.ɵɵtemplate(4, ProductSearchInputComponent_ng_template_4_Template, 2, 2, \"ng-template\", 3);\n        ɵngcc0.ɵɵtemplate(5, ProductSearchInputComponent_ng_template_5_Template, 1, 1, \"ng-template\", 4);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"addTag\", true)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 7, \"catalog.search-product-name-or-code\"))(\"items\", ctx.facetValueResults)(\"searchFn\", ctx.filterFacetResults)(\"hideSelected\", true)(\"multiple\", true)(\"markFirst\", false);\n    } }, directives: [ɵngcc8.NgSelectComponent, ɵngcc8.ɵj, ɵngcc8.ɵh, ɵngcc8.ɵf, ɵngcc4.NgIf, ɵngcc2.FacetValueChipComponent, ɵngcc2.ChipComponent], pipes: [ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{margin-top:6px;display:block;width:100%}[_nghost-%COMP%]     .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{background:0 0;margin:0}[_nghost-%COMP%]     .ng-dropdown-panel-items div.ng-option:last-child{display:none}[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-header{border:none;padding:0}[_nghost-%COMP%]     .ng-select.ng-select-multiple .ng-select-container .ng-value-container{padding:0}[_nghost-%COMP%]     .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{padding-left:8px}ng-select[_ngcontent-%COMP%]{width:100%;min-width:300px;margin-right:12px}.search-header[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #f2f3f5;cursor:pointer}.search-header.selected[_ngcontent-%COMP%], .search-header[_ngcontent-%COMP%]:hover{background-color:#f2f3f5}\"], changeDetection: 0 });\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductSearchInputComponent.prototype, \"facetValueResults\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductSearchInputComponent.prototype, \"searchTermChange\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductSearchInputComponent.prototype, \"facetValueChange\", void 0);\r\n__decorate([\r\n    ViewChild('selectComponent', { static: true }),\r\n    __metadata(\"design:type\", NgSelectComponent)\r\n], ProductSearchInputComponent.prototype, \"selectComponent\", void 0);\n\nlet ProductListComponent = class ProductListComponent extends BaseListComponent {\r\n    constructor(dataService, modalService, notificationService, jobQueueService, router, route) {\r\n        super(router, route);\r\n        this.dataService = dataService;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.jobQueueService = jobQueueService;\r\n        this.searchTerm = '';\r\n        this.facetValueIds = [];\r\n        this.groupByProduct = true;\r\n        super.setQueryFn((...args) => this.dataService.product.searchProducts(this.searchTerm, ...args).refetchOnChannelChange(), data => data.search, \r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        (skip, take) => ({\r\n            input: {\r\n                skip,\r\n                take,\r\n                term: this.searchTerm,\r\n                facetValueIds: this.facetValueIds,\r\n                facetValueOperator: LogicalOperator.AND,\r\n                groupByProduct: this.groupByProduct,\r\n            },\r\n        }));\r\n    }\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.facetValues$ = this.result$.pipe(map(data => data.search.facetValues));\r\n        // this.facetValues$ = of([]);\r\n        this.route.queryParamMap\r\n            .pipe(map(qpm => qpm.get('q')), takeUntil(this.destroy$))\r\n            .subscribe(term => {\r\n            this.productSearchInput.setSearchTerm(term);\r\n        });\r\n        const fvids$ = this.route.queryParamMap.pipe(map(qpm => qpm.getAll('fvids')));\r\n        fvids$.pipe(takeUntil(this.destroy$)).subscribe(ids => {\r\n            this.productSearchInput.setFacetValues(ids);\r\n        });\r\n        this.facetValues$.pipe(take(1), delay(100), withLatestFrom(fvids$)).subscribe(([__, ids]) => {\r\n            this.productSearchInput.setFacetValues(ids);\r\n        });\r\n    }\r\n    setSearchTerm(term) {\r\n        this.searchTerm = term;\r\n        this.setQueryParam({ q: term || null, page: 1 });\r\n        this.refresh();\r\n    }\r\n    setFacetValueIds(ids) {\r\n        this.facetValueIds = ids;\r\n        this.setQueryParam({ fvids: ids, page: 1 });\r\n        this.refresh();\r\n    }\r\n    rebuildSearchIndex() {\r\n        this.dataService.product.reindex().subscribe(({ reindex }) => {\r\n            this.notificationService.info(marker('catalog.reindexing'));\r\n            this.jobQueueService.addJob(reindex.id, job => {\r\n                if (job.state === JobState.COMPLETED) {\r\n                    const time = new Intl.NumberFormat().format(job.duration || 0);\r\n                    this.notificationService.success(marker('catalog.reindex-successful'), {\r\n                        count: job.result.indexedItemCount,\r\n                        time,\r\n                    });\r\n                    this.refresh();\r\n                }\r\n                else {\r\n                    this.notificationService.error(marker('catalog.reindex-error'));\r\n                }\r\n            });\r\n        });\r\n    }\r\n    deleteProduct(productId) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-product'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(response => (response ? this.dataService.product.deleteProduct(productId) : EMPTY)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n};\nProductListComponent.ɵfac = function ProductListComponent_Factory(t) { return new (t || ProductListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.JobQueueService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute)); };\nProductListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductListComponent, selectors: [[\"vdr-products-list\"]], viewQuery: function ProductListComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c18, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.productSearchInput = _t.first);\n    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 28, vars: 27, consts: [[3, \"grow\"], [1, \"search-form\"], [3, \"facetValueResults\", \"searchTermChange\", \"facetValueChange\"], [\"productSearchInputComponent\", \"\"], [1, \"search-settings-menu\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"cog\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"locationId\", \"product-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"full-label\"], [1, \"left\", \"align-middle\"], [1, \"image-placeholder\"], [3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"imagePlaceholder\", \"\"], [1, \"align-middle\"], [4, \"ngIf\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"src\"], [1, \"placeholder\"], [\"shape\", \"image\", \"size\", \"48\"]], template: function ProductListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\", 0);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(3, \"vdr-product-search-input\", 2, 3);\n        ɵngcc0.ɵɵlistener(\"searchTermChange\", function ProductListComponent_Template_vdr_product_search_input_searchTermChange_3_listener($event) { return ctx.setSearchTerm($event); })(\"facetValueChange\", function ProductListComponent_Template_vdr_product_search_input_facetValueChange_3_listener($event) { return ctx.setFacetValueIds($event); });\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"vdr-dropdown\", 4);\n        ɵngcc0.ɵɵelementStart(7, \"button\", 5);\n        ɵngcc0.ɵɵelement(8, \"clr-icon\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"vdr-dropdown-menu\", 7);\n        ɵngcc0.ɵɵelementStart(10, \"button\", 8);\n        ɵngcc0.ɵɵlistener(\"click\", function ProductListComponent_Template_button_click_10_listener() { return ctx.rebuildSearchIndex(); });\n        ɵngcc0.ɵɵpipe(11, \"hasPermission\");\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"clr-checkbox-wrapper\");\n        ɵngcc0.ɵɵelementStart(15, \"input\", 9);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_input_ngModelChange_15_listener($event) { return ctx.groupByProduct = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"label\");\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(19, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(20, \"vdr-action-bar-items\", 10);\n        ɵngcc0.ɵɵtemplate(21, ProductListComponent_a_21_Template, 5, 5, \"a\", 11);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(22, \"vdr-data-table\", 12);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function ProductListComponent_Template_vdr_data_table_pageChange_22_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function ProductListComponent_Template_vdr_data_table_itemsPerPageChange_22_listener($event) { return ctx.setItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(23, \"async\");\n        ɵngcc0.ɵɵpipe(24, \"async\");\n        ɵngcc0.ɵɵpipe(25, \"async\");\n        ɵngcc0.ɵɵpipe(26, \"async\");\n        ɵngcc0.ɵɵtemplate(27, ProductListComponent_ng_template_27_Template, 24, 29, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"grow\", true);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"facetValueResults\", ɵngcc0.ɵɵpipeBind1(5, 11, ctx.facetValues$));\n        ɵngcc0.ɵɵadvance(7);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(11, 13, \"UpdateCatalog\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 15, \"catalog.rebuild-search-index\"), \" \");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.groupByProduct);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 17, \"catalog.group-by-product\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"CreateCatalog\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(23, 19, ctx.items$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(24, 21, ctx.itemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(25, 23, ctx.totalItems$))(\"currentPage\", ɵngcc0.ɵɵpipeBind1(26, 25, ctx.currentPage$));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ProductSearchInputComponent, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc7.ClrIconCustomTag, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc7.ClrLabel, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.DataTableComponent, ɵngcc1.RouterLinkWithHref, ɵngcc4.NgIf, ɵngcc2.TableRowActionComponent, ɵngcc2.ChipComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc2.HasPermissionPipe, ɵngcc5.TranslatePipe, ɵngcc2.AssetPreviewPipe], styles: [\".image-placeholder[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#f2f3f5}.image-placeholder[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{text-align:center;color:#bfc3cc}.search-form[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin-bottom:6px}.search-input[_ngcontent-%COMP%]{min-width:300px}@media screen and (max-width:768px){.search-input[_ngcontent-%COMP%]{min-width:100px}}.search-settings-menu[_ngcontent-%COMP%]{margin:0 12px}td.disabled[_ngcontent-%COMP%]{background-color:#f2f3f5}\"] });\r\nProductListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: JobQueueService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\r\n__decorate([\r\n    ViewChild('productSearchInputComponent', { static: true }),\r\n    __metadata(\"design:type\", ProductSearchInputComponent)\r\n], ProductListComponent.prototype, \"productSearchInput\", void 0);\r\nProductListComponent = __decorate([ __metadata(\"design:paramtypes\", [DataService,\r\n        ModalService,\r\n        NotificationService,\r\n        JobQueueService,\r\n        Router,\r\n        ActivatedRoute])\r\n], ProductListComponent);\n\nconst DEFAULT_VARIANT_CODE = '__DEFAULT_VARIANT__';\r\nlet ProductVariantsEditorComponent = class ProductVariantsEditorComponent {\r\n    constructor(route, dataService, productDetailService, notificationService, modalService) {\r\n        this.route = route;\r\n        this.dataService = dataService;\r\n        this.productDetailService = productDetailService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.formValueChanged = false;\r\n        this.variants = [];\r\n        this.variantFormValues = {};\r\n    }\r\n    ngOnInit() {\r\n        this.initOptionsAndVariants();\r\n        this.languageCode =\r\n            this.route.snapshot.paramMap.get('lang') || getDefaultUiLanguage();\r\n        this.dataService.settings.getActiveChannel().single$.subscribe((data) => {\r\n            this.currencyCode = data.activeChannel.currencyCode;\r\n        });\r\n    }\r\n    onFormChanged(variantInfo) {\r\n        this.formValueChanged = true;\r\n        variantInfo.enabled = true;\r\n    }\r\n    canDeactivate() {\r\n        return !this.formValueChanged;\r\n    }\r\n    getVariantsToAdd() {\r\n        return Object.values(this.variantFormValues).filter((v) => !v.existing && v.enabled);\r\n    }\r\n    getVariantName(variant) {\r\n        return variant.options.length === 0\r\n            ? marker('catalog.default-variant')\r\n            : variant.options.map((o) => o.name).join(' ');\r\n    }\r\n    addOption() {\r\n        this.optionGroups.push({\r\n            isNew: true,\r\n            name: '',\r\n            values: [],\r\n        });\r\n    }\r\n    generateVariants() {\r\n        const groups = this.optionGroups.map((g) => g.values);\r\n        const previousVariants = this.variants;\r\n        this.variants = groups.length\r\n            ? generateAllCombinations(groups).map((options, i) => ({\r\n                isDefault: this.product.variants.length === 1 && i === 0,\r\n                id: options.map((o) => o.name).join('|'),\r\n                options,\r\n            }))\r\n            : [{ isDefault: true, id: DEFAULT_VARIANT_CODE, options: [] }];\r\n        this.variants.forEach((variant) => {\r\n            if (!this.variantFormValues[variant.id]) {\r\n                const prototype = this.getVariantPrototype(variant, previousVariants);\r\n                this.variantFormValues[variant.id] = {\r\n                    enabled: false,\r\n                    existing: false,\r\n                    options: variant.options.map((o) => o.name),\r\n                    price: prototype.price,\r\n                    sku: prototype.sku,\r\n                    stock: prototype.stock,\r\n                };\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns one of the existing variants to base the newly-generated variant's\r\n     * details off.\r\n     */\r\n    getVariantPrototype(variant, previousVariants) {\r\n        if (variant.isDefault) {\r\n            return this.variantFormValues[DEFAULT_VARIANT_CODE];\r\n        }\r\n        const variantsWithSimilarOptions = previousVariants.filter((v) => variant.options.map((o) => o.name).filter((name) => v.options.map((o) => o.name).includes(name)));\r\n        if (variantsWithSimilarOptions.length) {\r\n            return this.variantFormValues[variantsWithSimilarOptions[0].options.map((o) => o.name).join('|')];\r\n        }\r\n        return {\r\n            sku: '',\r\n            price: 0,\r\n            stock: 0,\r\n        };\r\n    }\r\n    deleteVariant(id) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-product-variant'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap((response) => response ? this.productDetailService.deleteProductVariant(id, this.product.id) : EMPTY), switchMap(() => this.reFetchProduct(null)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'ProductVariant',\r\n            });\r\n            this.initOptionsAndVariants();\r\n        }, (err) => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'ProductVariant',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        const newOptionGroups = this.optionGroups\r\n            .filter((og) => og.isNew)\r\n            .map((og) => ({\r\n            name: og.name,\r\n            values: [],\r\n        }));\r\n        this.confirmDeletionOfDefault()\r\n            .pipe(mergeMap(() => this.productDetailService.createProductOptionGroups(newOptionGroups, this.languageCode)), mergeMap((createdOptionGroups) => this.addOptionGroupsToProduct(createdOptionGroups)), mergeMap((createdOptionGroups) => this.addNewOptionsToGroups(createdOptionGroups)), mergeMap((groupsIds) => this.fetchOptionGroups(groupsIds)), mergeMap((groups) => this.createNewProductVariants(groups)), mergeMap((res) => this.deleteDefaultVariant(res.createProductVariants)), mergeMap((variants) => this.reFetchProduct(variants)))\r\n            .subscribe({\r\n            next: (variants) => {\r\n                this.formValueChanged = false;\r\n                this.notificationService.success(marker('catalog.created-new-variants-success'), {\r\n                    count: variants.length,\r\n                });\r\n                this.initOptionsAndVariants();\r\n            },\r\n        });\r\n    }\r\n    confirmDeletionOfDefault() {\r\n        if (this.product.variants.length === 1) {\r\n            return this.modalService\r\n                .dialog({\r\n                title: marker('catalog.confirm-adding-options-delete-default-title'),\r\n                body: marker('catalog.confirm-adding-options-delete-default-body'),\r\n                buttons: [\r\n                    { type: 'secondary', label: marker('common.cancel') },\r\n                    { type: 'danger', label: marker('catalog.delete-default-variant'), returnValue: true },\r\n                ],\r\n            })\r\n                .pipe(mergeMap((res) => {\r\n                return res === true ? of(true) : EMPTY;\r\n            }));\r\n        }\r\n        else {\r\n            return of(true);\r\n        }\r\n    }\r\n    addOptionGroupsToProduct(createdOptionGroups) {\r\n        if (createdOptionGroups.length) {\r\n            return forkJoin(createdOptionGroups.map((optionGroup) => {\r\n                return this.dataService.product.addOptionGroupToProduct({\r\n                    productId: this.product.id,\r\n                    optionGroupId: optionGroup.id,\r\n                });\r\n            })).pipe(map(() => createdOptionGroups));\r\n        }\r\n        else {\r\n            return of([]);\r\n        }\r\n    }\r\n    addNewOptionsToGroups(createdOptionGroups) {\r\n        const newOptions = this.optionGroups\r\n            .map((og) => {\r\n            const createdGroup = createdOptionGroups.find((cog) => cog.name === og.name);\r\n            const productOptionGroupId = createdGroup ? createdGroup.id : og.id;\r\n            if (!productOptionGroupId) {\r\n                throw new Error('Could not get a productOptionGroupId');\r\n            }\r\n            return og.values\r\n                .filter((v) => !v.locked)\r\n                .map((v) => ({\r\n                productOptionGroupId,\r\n                code: normalizeString(v.name, '-'),\r\n                translations: [{ name: v.name, languageCode: this.languageCode }],\r\n            }));\r\n        })\r\n            .reduce((flat, options) => [...flat, ...options], []);\r\n        const allGroupIds = [\r\n            ...createdOptionGroups.map((g) => g.id),\r\n            ...this.optionGroups.map((g) => g.id).filter(notNullOrUndefined),\r\n        ];\r\n        if (newOptions.length) {\r\n            return forkJoin(newOptions.map((input) => this.dataService.product.addOptionToGroup(input))).pipe(map(() => allGroupIds));\r\n        }\r\n        else {\r\n            return of(allGroupIds);\r\n        }\r\n    }\r\n    fetchOptionGroups(groupsIds) {\r\n        return forkJoin(groupsIds.map((id) => this.dataService.product\r\n            .getProductOptionGroup(id)\r\n            .mapSingle((data) => data.productOptionGroup)\r\n            .pipe(filter(notNullOrUndefined))));\r\n    }\r\n    createNewProductVariants(groups) {\r\n        const options = groups\r\n            .filter(notNullOrUndefined)\r\n            .map((og) => og.options)\r\n            .reduce((flat, o) => [...flat, ...o], []);\r\n        const variants = Object.values(this.variantFormValues)\r\n            .filter((v) => v.enabled && !v.existing)\r\n            .map((v) => ({\r\n            price: v.price,\r\n            sku: v.sku,\r\n            stock: v.stock,\r\n            optionIds: v.options\r\n                .map((name) => options.find((o) => o.name === name))\r\n                .filter(notNullOrUndefined)\r\n                .map((o) => o.id),\r\n        }));\r\n        return this.productDetailService.createProductVariants(this.product, variants, options, this.languageCode);\r\n    }\r\n    deleteDefaultVariant(input) {\r\n        if (this.product.variants.length === 1) {\r\n            // If the default single product variant has been replaced by multiple variants,\r\n            // delete the original default variant.\r\n            return this.dataService.product\r\n                .deleteProductVariant(this.product.variants[0].id)\r\n                .pipe(map(() => input));\r\n        }\r\n        else {\r\n            return of(input);\r\n        }\r\n    }\r\n    reFetchProduct(input) {\r\n        // Re-fetch the Product to force an update to the view.\r\n        const id = this.route.snapshot.paramMap.get('id');\r\n        if (id) {\r\n            return this.dataService.product.getProduct(id).single$.pipe(map(() => input));\r\n        }\r\n        else {\r\n            return of(input);\r\n        }\r\n    }\r\n    initOptionsAndVariants() {\r\n        this.route.data\r\n            .pipe(switchMap((data) => data.entity), take(1))\r\n            .subscribe((product) => {\r\n            this.product = product;\r\n            this.optionGroups = product.optionGroups.map((og) => {\r\n                return {\r\n                    id: og.id,\r\n                    isNew: false,\r\n                    name: og.name,\r\n                    values: og.options.map((o) => ({\r\n                        id: o.id,\r\n                        name: o.name,\r\n                        locked: true,\r\n                    })),\r\n                };\r\n            });\r\n            this.variantFormValues = this.getExistingVariants(product.variants);\r\n            this.generateVariants();\r\n        });\r\n    }\r\n    getExistingVariants(variants) {\r\n        return variants.reduce((all, v) => {\r\n            const id = v.options.length ? v.options.map((o) => o.name).join('|') : DEFAULT_VARIANT_CODE;\r\n            return Object.assign(Object.assign({}, all), { [id]: {\r\n                    productVariantId: v.id,\r\n                    enabled: true,\r\n                    existing: true,\r\n                    options: v.options.map((o) => o.name),\r\n                    sku: v.sku,\r\n                    price: v.price,\r\n                    stock: v.stockOnHand,\r\n                } });\r\n        }, {});\r\n    }\r\n};\nProductVariantsEditorComponent.ɵfac = function ProductVariantsEditorComponent_Factory(t) { return new (t || ProductVariantsEditorComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ProductDetailService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService)); };\nProductVariantsEditorComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductVariantsEditorComponent, selectors: [[\"vdr-product-variants-editor\"]], decls: 28, vars: 25, consts: [[1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"option-groups\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-primary-outline btn-sm\", 3, \"click\", 4, \"ngIf\"], [1, \"variants-preview\"], [1, \"table\"], [3, \"disabled\", 4, \"ngFor\", \"ngForOf\"], [1, \"option-groups\"], [1, \"name\"], [\"clrInput\", \"\", \"name\", \"name\", 3, \"ngModel\", \"readonly\", \"ngModelChange\"], [1, \"values\"], [3, \"ngModel\", \"groupName\", \"disabled\", \"ngModelChange\"], [\"optionValueInputComponent\", \"\"], [1, \"btn\", \"btn-primary-outline\", \"btn-sm\", 3, \"click\"], [\"shape\", \"plus\"], [\"type\", \"checkbox\", \"name\", \"enabled\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [4, \"ngIf\"], [\"type\", \"checkbox\", \"name\", \"enabled\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"text\", \"name\", \"sku\", \"required\", \"\", 3, \"ngModel\", \"placeholder\", \"ngModelChange\"], [\"clrInput\", \"\", \"name\", \"price\", 3, \"ngModel\", \"currencyCode\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"number\", \"name\", \"stock\", \"min\", \"0\", \"step\", \"1\", 3, \"ngModel\", \"ngModelChange\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"]], template: function ProductVariantsEditorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelementStart(2, \"button\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsEditorComponent_Template_button_click_2_listener() { return ctx.save(); });\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(5, ProductVariantsEditorComponent_div_5_Template, 12, 11, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(6, ProductVariantsEditorComponent_button_6_Template, 4, 3, \"button\", 2);\n        ɵngcc0.ɵɵelementStart(7, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(8, \"table\", 4);\n        ɵngcc0.ɵɵelementStart(9, \"thead\");\n        ɵngcc0.ɵɵelementStart(10, \"tr\");\n        ɵngcc0.ɵɵelementStart(11, \"th\");\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"th\");\n        ɵngcc0.ɵɵtext(15);\n        ɵngcc0.ɵɵpipe(16, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"th\");\n        ɵngcc0.ɵɵtext(18);\n        ɵngcc0.ɵɵpipe(19, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(20, \"th\");\n        ɵngcc0.ɵɵtext(21);\n        ɵngcc0.ɵɵpipe(22, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"th\");\n        ɵngcc0.ɵɵtext(24);\n        ɵngcc0.ɵɵpipe(25, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(26, \"th\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(27, ProductVariantsEditorComponent_tr_27_Template, 16, 11, \"tr\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.formValueChanged || ctx.getVariantsToAdd().length === 0);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(4, 10, \"common.add-new-variants\", ɵngcc0.ɵɵpureFunction1(23, _c6, ctx.getVariantsToAdd().length)), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.optionGroups);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.product.variants.length === 1);\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(13, 13, \"common.create\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(16, 15, \"catalog.variant\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(19, 17, \"catalog.sku\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(22, 19, \"catalog.price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(25, 21, \"catalog.stock-on-hand\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.variants);\n    } }, directives: function () { return [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarRightComponent, ɵngcc4.NgForOf, ɵngcc4.NgIf, ɵngcc7.ClrLabel, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc7.ClrInput, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, OptionValueInputComponent, ɵngcc7.ClrIconCustomTag, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc7.ClrInputContainer, ɵngcc3.RequiredValidator, ɵngcc2.CurrencyInputComponent, ɵngcc3.NumberValueAccessor, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective]; }, pipes: function () { return [ɵngcc5.TranslatePipe, ɵngcc4.CurrencyPipe]; }, styles: [\".option-groups[_ngcontent-%COMP%]{display:flex}.option-groups[_ngcontent-%COMP%]:first-of-type{margin-top:24px}.values[_ngcontent-%COMP%]{flex:1;margin:0 6px}.variants-preview[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fafafa;color:#97979a}\"] });\r\nProductVariantsEditorComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: DataService },\r\n    { type: ProductDetailService },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\r\nProductVariantsEditorComponent = __decorate([ __metadata(\"design:paramtypes\", [ActivatedRoute,\r\n        DataService,\r\n        ProductDetailService,\r\n        NotificationService,\r\n        ModalService])\r\n], ProductVariantsEditorComponent);\n\nlet AssetResolver = class AssetResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Asset',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            name: '',\r\n            type: AssetType.IMAGE,\r\n            fileSize: 0,\r\n            mimeType: '',\r\n            width: 0,\r\n            height: 0,\r\n            source: '',\r\n            preview: '',\r\n            focalPoint: null,\r\n        }, id => dataService.product.getAsset(id).mapStream(data => data.asset));\r\n    }\r\n};\nAssetResolver.ɵfac = function AssetResolver_Factory(t) { return new (t || AssetResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nAssetResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\r\nAssetResolver.ɵprov = ɵɵdefineInjectable({ factory: function AssetResolver_Factory() { return new AssetResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: AssetResolver, providedIn: \"root\" });\r\nAssetResolver = __decorate([ __metadata(\"design:paramtypes\", [Router, DataService])\r\n], AssetResolver);\n\nlet CollectionResolver = class CollectionResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Collection',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            slug: '',\r\n            isPrivate: false,\r\n            description: '',\r\n            featuredAsset: null,\r\n            assets: [],\r\n            translations: [],\r\n            filters: [],\r\n            parent: {},\r\n            children: null,\r\n        }, id => dataService.collection.getCollection(id).mapStream(data => data.collection));\r\n    }\r\n};\nCollectionResolver.ɵfac = function CollectionResolver_Factory(t) { return new (t || CollectionResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nCollectionResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\r\nCollectionResolver.ɵprov = ɵɵdefineInjectable({ factory: function CollectionResolver_Factory() { return new CollectionResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: CollectionResolver, providedIn: \"root\" });\r\nCollectionResolver = __decorate([ __metadata(\"design:paramtypes\", [Router, DataService])\r\n], CollectionResolver);\n\nlet FacetResolver = class FacetResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Facet',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            isPrivate: false,\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            code: '',\r\n            translations: [],\r\n            values: [],\r\n        }, (id) => dataService.facet.getFacet(id).mapStream((data) => data.facet));\r\n    }\r\n};\nFacetResolver.ɵfac = function FacetResolver_Factory(t) { return new (t || FacetResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nFacetResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\r\nFacetResolver.ɵprov = ɵɵdefineInjectable({ factory: function FacetResolver_Factory() { return new FacetResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: FacetResolver, providedIn: \"root\" });\r\nFacetResolver = __decorate([ __metadata(\"design:paramtypes\", [Router, DataService])\r\n], FacetResolver);\n\nlet ProductResolver = class ProductResolver extends BaseEntityResolver {\r\n    constructor(dataService, router) {\r\n        super(router, {\r\n            __typename: 'Product',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            enabled: true,\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            slug: '',\r\n            featuredAsset: null,\r\n            assets: [],\r\n            description: '',\r\n            translations: [],\r\n            optionGroups: [],\r\n            facetValues: [],\r\n            variants: [],\r\n            channels: [],\r\n        }, (id) => dataService.product\r\n            .getProduct(id)\r\n            .refetchOnChannelChange()\r\n            .mapStream((data) => data.product));\r\n    }\r\n};\nProductResolver.ɵfac = function ProductResolver_Factory(t) { return new (t || ProductResolver)(ɵngcc0.ɵɵinject(ɵngcc2.DataService), ɵngcc0.ɵɵinject(ɵngcc1.Router)); };\r\nProductResolver.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: Router }\r\n];\r\nProductResolver.ɵprov = ɵɵdefineInjectable({ factory: function ProductResolver_Factory() { return new ProductResolver(ɵɵinject(DataService), ɵɵinject(Router)); }, token: ProductResolver, providedIn: \"root\" });\r\nProductResolver = __decorate([ __metadata(\"design:paramtypes\", [DataService, Router])\r\n], ProductResolver);\n\nlet ProductVariantsResolver = class ProductVariantsResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Product',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            name: '',\r\n            optionGroups: [],\r\n            variants: [],\r\n        }, id => dataService.product.getProductVariantsOptions(id).mapStream(data => data.product));\r\n    }\r\n};\nProductVariantsResolver.ɵfac = function ProductVariantsResolver_Factory(t) { return new (t || ProductVariantsResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nProductVariantsResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\r\nProductVariantsResolver.ɵprov = ɵɵdefineInjectable({ factory: function ProductVariantsResolver_Factory() { return new ProductVariantsResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: ProductVariantsResolver, providedIn: \"root\" });\r\nProductVariantsResolver = __decorate([ __metadata(\"design:paramtypes\", [Router, DataService])\r\n], ProductVariantsResolver);\n\nconst ɵ0$1 = {\r\n    breadcrumb: marker('breadcrumb.products'),\r\n}, ɵ1 = {\r\n    breadcrumb: productBreadcrumb,\r\n}, ɵ2 = {\r\n    breadcrumb: productVariantEditorBreadcrumb,\r\n}, ɵ3 = {\r\n    breadcrumb: marker('breadcrumb.facets'),\r\n}, ɵ4 = {\r\n    breadcrumb: facetBreadcrumb,\r\n}, ɵ5 = {\r\n    breadcrumb: marker('breadcrumb.collections'),\r\n}, ɵ6 = {\r\n    breadcrumb: collectionBreadcrumb,\r\n}, ɵ7 = {\r\n    breadcrumb: marker('breadcrumb.assets'),\r\n}, ɵ8 = {\r\n    breadcrumb: assetBreadcrumb,\r\n};\r\nconst catalogRoutes = [\r\n    {\r\n        path: 'products',\r\n        component: ProductListComponent,\r\n        data: ɵ0$1,\r\n    },\r\n    {\r\n        path: 'products/:id',\r\n        component: ProductDetailComponent,\r\n        resolve: createResolveData(ProductResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ1,\r\n    },\r\n    {\r\n        path: 'products/:id/manage-variants',\r\n        component: ProductVariantsEditorComponent,\r\n        resolve: createResolveData(ProductVariantsResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ2,\r\n    },\r\n    {\r\n        path: 'facets',\r\n        component: FacetListComponent,\r\n        data: ɵ3,\r\n    },\r\n    {\r\n        path: 'facets/:id',\r\n        component: FacetDetailComponent,\r\n        resolve: createResolveData(FacetResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ4,\r\n    },\r\n    {\r\n        path: 'collections',\r\n        component: CollectionListComponent,\r\n        data: ɵ5,\r\n    },\r\n    {\r\n        path: 'collections/:id',\r\n        component: CollectionDetailComponent,\r\n        resolve: createResolveData(CollectionResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ6,\r\n    },\r\n    {\r\n        path: 'assets',\r\n        component: AssetListComponent,\r\n        data: ɵ7,\r\n    },\r\n    {\r\n        path: 'assets/:id',\r\n        component: AssetDetailComponent,\r\n        resolve: createResolveData(AssetResolver),\r\n        data: ɵ8,\r\n    },\r\n];\r\nfunction productBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.products',\r\n        getName: product => product.name,\r\n        route: 'products',\r\n    });\r\n}\r\nfunction productVariantEditorBreadcrumb(data, params) {\r\n    return data.entity.pipe(map((entity) => {\r\n        return [\r\n            {\r\n                label: marker('breadcrumb.products'),\r\n                link: ['../', 'products'],\r\n            },\r\n            {\r\n                label: `${entity.name}`,\r\n                link: ['../', 'products', params.id, { tab: 'variants' }],\r\n            },\r\n            {\r\n                label: marker('breadcrumb.manage-variants'),\r\n                link: ['manage-variants'],\r\n            },\r\n        ];\r\n    }));\r\n}\r\nfunction facetBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.facets',\r\n        getName: facet => facet.name,\r\n        route: 'facets',\r\n    });\r\n}\r\nfunction collectionBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.collections',\r\n        getName: collection => collection.name,\r\n        route: 'collections',\r\n    });\r\n}\r\nfunction assetBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.assets',\r\n        getName: asset => asset.name,\r\n        route: 'assets',\r\n    });\r\n}\n\n/**\r\n * Builds a tree from an array of nodes which have a parent.\r\n * Based on https://stackoverflow.com/a/31247960/772859, modified to preserve ordering.\r\n */\r\nfunction arrayToTree(nodes) {\r\n    const topLevelNodes = [];\r\n    const mappedArr = {};\r\n    // First map the nodes of the array to an object -> create a hash table.\r\n    for (const node of nodes) {\r\n        mappedArr[node.id] = Object.assign(Object.assign({}, node), { children: [] });\r\n    }\r\n    for (const id of nodes.map(n => n.id)) {\r\n        if (mappedArr.hasOwnProperty(id)) {\r\n            const mappedElem = mappedArr[id];\r\n            mappedElem.expanded = false;\r\n            const parent = mappedElem.parent;\r\n            if (!parent) {\r\n                continue;\r\n            }\r\n            // If the element is not at the root level, add it to its parent array of children.\r\n            const parentIsRoot = !mappedArr[parent.id];\r\n            if (!parentIsRoot) {\r\n                if (mappedArr[parent.id]) {\r\n                    mappedArr[parent.id].children.push(mappedElem);\r\n                }\r\n                else {\r\n                    mappedArr[parent.id] = { children: [mappedElem] };\r\n                }\r\n            }\r\n            else {\r\n                topLevelNodes.push(mappedElem);\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:no-non-null-assertion\r\n    const rootId = topLevelNodes.length ? topLevelNodes[0].parent.id : undefined;\r\n    return { id: rootId, children: topLevelNodes };\r\n}\n\nlet CollectionTreeComponent = class CollectionTreeComponent {\r\n    constructor() {\r\n        this.expandAll = false;\r\n        this.rearrange = new EventEmitter();\r\n        this.deleteCollection = new EventEmitter();\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('collections' in changes && this.collections) {\r\n            this.collectionTree = arrayToTree(this.collections);\r\n        }\r\n    }\r\n    onDrop(event) {\r\n        const item = event.item.data;\r\n        const newParent = event.container.data;\r\n        const newParentId = newParent.id;\r\n        if (newParentId == null) {\r\n            throw new Error(`Could not determine the ID of the root Collection`);\r\n        }\r\n        this.rearrange.emit({\r\n            collectionId: item.id,\r\n            parentId: newParentId,\r\n            index: event.currentIndex,\r\n        });\r\n    }\r\n    onMove(event) {\r\n        this.rearrange.emit(event);\r\n    }\r\n    onDelete(id) {\r\n        this.deleteCollection.emit(id);\r\n    }\r\n    isRootNode(node) {\r\n        return !node.hasOwnProperty('parent');\r\n    }\r\n};\nCollectionTreeComponent.ɵfac = function CollectionTreeComponent_Factory(t) { return new (t || CollectionTreeComponent)(); };\nCollectionTreeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionTreeComponent, selectors: [[\"vdr-collection-tree\"]], inputs: { expandAll: \"expandAll\", collections: \"collections\", activeCollectionId: \"activeCollectionId\" }, outputs: { rearrange: \"rearrange\", deleteCollection: \"deleteCollection\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 1, consts: [[\"cdkDropListGroup\", \"\", 3, \"expandAll\", \"collectionTree\", \"activeCollectionId\", 4, \"ngIf\"], [\"cdkDropListGroup\", \"\", 3, \"expandAll\", \"collectionTree\", \"activeCollectionId\"]], template: function CollectionTreeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, CollectionTreeComponent_vdr_collection_tree_node_0_Template, 1, 3, \"vdr-collection-tree-node\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.collectionTree);\n    } }, directives: function () { return [ɵngcc4.NgIf, CollectionTreeNodeComponent, ɵngcc9.CdkDropListGroup]; }, styles: [\"\"], changeDetection: 0 });\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], CollectionTreeComponent.prototype, \"collections\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], CollectionTreeComponent.prototype, \"activeCollectionId\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], CollectionTreeComponent.prototype, \"expandAll\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], CollectionTreeComponent.prototype, \"rearrange\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], CollectionTreeComponent.prototype, \"deleteCollection\", void 0);\n\nlet CollectionTreeNodeComponent = class CollectionTreeNodeComponent {\r\n    constructor(parent, root, dataService) {\r\n        this.parent = parent;\r\n        this.root = root;\r\n        this.dataService = dataService;\r\n        this.depth = 0;\r\n        this.expandAll = false;\r\n        if (parent) {\r\n            this.depth = parent.depth + 1;\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        this.parentName = this.collectionTree.name || '<root>';\r\n        const permissions$ = this.dataService.client\r\n            .userStatus()\r\n            .mapStream(data => data.userStatus.permissions)\r\n            .pipe(shareReplay(1));\r\n        this.hasUpdatePermission$ = permissions$.pipe(map(perms => perms.includes(Permission.UpdateCatalog)));\r\n        this.hasDeletePermission$ = permissions$.pipe(map(perms => perms.includes(Permission.DeleteCatalog)));\r\n    }\r\n    trackByFn(index, item) {\r\n        return item.id;\r\n    }\r\n    getMoveListItems(collection) {\r\n        const visit = (node, parentPath, output) => {\r\n            if (node.id !== collection.id) {\r\n                const path = parentPath.concat(node.name);\r\n                const parentId = collection.parent && collection.parent.id;\r\n                if (node.id !== parentId) {\r\n                    output.push({ path: path.slice(1).join(' / ') || 'root', id: node.id });\r\n                }\r\n                node.children.forEach(child => visit(child, path, output));\r\n            }\r\n            return output;\r\n        };\r\n        return visit(this.root.collectionTree, [], []);\r\n    }\r\n    move(collection, parentId) {\r\n        this.root.onMove({\r\n            index: 0,\r\n            parentId,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    moveUp(collection, currentIndex) {\r\n        if (!collection.parent) {\r\n            return;\r\n        }\r\n        this.root.onMove({\r\n            index: currentIndex - 1,\r\n            parentId: collection.parent.id,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    moveDown(collection, currentIndex) {\r\n        if (!collection.parent) {\r\n            return;\r\n        }\r\n        this.root.onMove({\r\n            index: currentIndex + 1,\r\n            parentId: collection.parent.id,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    drop(event) {\r\n        moveItemInArray(this.collectionTree.children, event.previousIndex, event.currentIndex);\r\n        this.root.onDrop(event);\r\n    }\r\n    delete(id) {\r\n        this.root.onDelete(id);\r\n    }\r\n};\nCollectionTreeNodeComponent.ɵfac = function CollectionTreeNodeComponent_Factory(t) { return new (t || CollectionTreeNodeComponent)(ɵngcc0.ɵɵdirectiveInject(CollectionTreeNodeComponent, 12), ɵngcc0.ɵɵdirectiveInject(CollectionTreeComponent), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nCollectionTreeNodeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionTreeNodeComponent, selectors: [[\"vdr-collection-tree-node\"]], inputs: { expandAll: \"expandAll\", collectionTree: \"collectionTree\", activeCollectionId: \"activeCollectionId\" }, decls: 4, vars: 6, consts: [[\"cdkDropList\", \"\", 1, \"tree-node\", 3, \"cdkDropListData\", \"cdkDropListDisabled\", \"cdkDropListDropped\"], [\"dropList\", \"\"], [\"class\", \"collection\", \"cdkDrag\", \"\", 3, \"private\", \"cdkDragData\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"cdkDrag\", \"\", 1, \"collection\", 3, \"cdkDragData\"], [1, \"collection-detail\", 3, \"ngClass\"], [1, \"name\"], [\"class\", \"icon-button folder-button\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"folderSpacer\", \"\"], [1, \"flex-spacer\"], [4, \"ngIf\"], [\"queryParamsHandling\", \"preserve\", 1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"routerLink\"], [\"shape\", \"view-list\"], [1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"routerLink\"], [\"shape\", \"edit\"], [\"class\", \"drag-handle\", \"cdkDragHandle\", \"\", 4, \"vdrIfPermissions\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"class\", \"dropdown-item\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [1, \"dropdown-divider\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [\"shape\", \"caret up\"], [\"shape\", \"caret down\"], [1, \"dropdown-header\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"vdrDropdownItem\", \"\", 1, \"button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"expandAll\", \"collectionTree\", \"activeCollectionId\", 4, \"ngIf\"], [1, \"icon-button\", \"folder-button\", 3, \"disabled\", \"click\"], [\"shape\", \"folder\", 4, \"ngIf\"], [\"shape\", \"folder-open\", 4, \"ngIf\"], [\"shape\", \"folder\"], [\"shape\", \"folder-open\"], [1, \"folder-button-spacer\"], [\"cdkDragHandle\", \"\", 1, \"drag-handle\"], [\"shape\", \"drag-handle\", \"size\", \"24\"], [1, \"dropdown-item\", 3, \"routerLink\"], [\"shape\", \"plus\"], [\"shape\", \"child-arrow\"], [3, \"expandAll\", \"collectionTree\", \"activeCollectionId\"]], template: function CollectionTreeNodeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"cdkDropListDropped\", function CollectionTreeNodeComponent_Template_div_cdkDropListDropped_0_listener($event) { return ctx.drop($event); });\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵtemplate(3, CollectionTreeNodeComponent_div_3_Template, 45, 49, \"div\", 2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"cdkDropListData\", ctx.collectionTree)(\"cdkDropListDisabled\", !ɵngcc0.ɵɵpipeBind1(2, 4, ctx.hasUpdatePermission$));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.collectionTree.children)(\"ngForTrackBy\", ctx.trackByFn);\n    } }, directives: [ɵngcc9.CdkDropList, ɵngcc4.NgForOf, ɵngcc7.ClrDatagridItemsTrackBy, ɵngcc9.CdkDrag, ɵngcc4.NgClass, ɵngcc4.NgIf, ɵngcc1.RouterLinkWithHref, ɵngcc7.ClrIconCustomTag, ɵngcc2.IfPermissionsDirective, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective, ɵngcc2.ChipComponent, ɵngcc9.CdkDragHandle, CollectionTreeNodeComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:block}.collection[_ngcontent-%COMP%]{background-color:#fff;font-size:.65rem;color:rgba(0,0,0,.87);transition:border-left-color .2s;margin-bottom:2px;border-left:2px solid transparent}.collection.private[_ngcontent-%COMP%]{background-color:#f2f3f5}.collection[_ngcontent-%COMP%]   .collection-detail[_ngcontent-%COMP%]{padding:6px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #f2f3f5}.collection[_ngcontent-%COMP%]   .collection-detail.active[_ngcontent-%COMP%]{background-color:#f2f3f5}.collection[_ngcontent-%COMP%]   .collection-detail.depth-1[_ngcontent-%COMP%]{padding-left:36px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-2[_ngcontent-%COMP%]{padding-left:60px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-3[_ngcontent-%COMP%]{padding-left:84px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-4[_ngcontent-%COMP%]{padding-left:108px}.collection[_ngcontent-%COMP%]   .collection-detail[_ngcontent-%COMP%]   .folder-button-spacer[_ngcontent-%COMP%]{display:inline-block;width:28px}.tree-node[_ngcontent-%COMP%]{display:block;background:#fff;overflow:hidden}.tree-node.cdk-drop-list-dragging[_ngcontent-%COMP%] > .collection[_ngcontent-%COMP%]{border-left-color:#9adbf3}.drag-placeholder[_ngcontent-%COMP%]{min-height:120px;background-color:#bfc3cc;transition:transform 250ms cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform 250ms cubic-bezier(0,0,.2,1)}\"], changeDetection: 0 });\r\nCollectionTreeNodeComponent.ctorParameters = () => [\r\n    { type: CollectionTreeNodeComponent, decorators: [{ type: SkipSelf }, { type: Optional }] },\r\n    { type: CollectionTreeComponent },\r\n    { type: DataService }\r\n];\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], CollectionTreeNodeComponent.prototype, \"collectionTree\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], CollectionTreeNodeComponent.prototype, \"activeCollectionId\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], CollectionTreeNodeComponent.prototype, \"expandAll\", void 0);\r\nCollectionTreeNodeComponent = __decorate([ __param(0, SkipSelf()), __param(0, Optional()),\r\n    __metadata(\"design:paramtypes\", [CollectionTreeNodeComponent,\r\n        CollectionTreeComponent,\r\n        DataService])\r\n], CollectionTreeNodeComponent);\n\nconst DEFAULT_VARIANT_CODE$1 = '__DEFAULT_VARIANT__';\r\nlet GenerateProductVariantsComponent = class GenerateProductVariantsComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.variantsChange = new EventEmitter();\r\n        this.optionGroups = [];\r\n        this.variantFormValues = {};\r\n    }\r\n    ngOnInit() {\r\n        this.dataService.settings.getActiveChannel().single$.subscribe(data => {\r\n            this.currencyCode = data.activeChannel.currencyCode;\r\n        });\r\n        this.generateVariants();\r\n    }\r\n    addOption() {\r\n        this.optionGroups.push({ name: '', values: [] });\r\n    }\r\n    removeOption(name) {\r\n        this.optionGroups = this.optionGroups.filter(g => g.name !== name);\r\n        this.generateVariants();\r\n    }\r\n    generateVariants() {\r\n        const totalValuesCount = this.optionGroups.reduce((sum, group) => sum + group.values.length, 0);\r\n        const groups = totalValuesCount\r\n            ? this.optionGroups.map(g => g.values.map(v => v.name))\r\n            : [[DEFAULT_VARIANT_CODE$1]];\r\n        this.variants = generateAllCombinations(groups).map(values => ({ id: values.join('|'), values }));\r\n        this.variants.forEach(variant => {\r\n            if (!this.variantFormValues[variant.id]) {\r\n                this.variantFormValues[variant.id] = {\r\n                    optionValues: variant.values,\r\n                    enabled: true,\r\n                    price: this.copyFromDefault(variant.id, 'price', 0),\r\n                    sku: this.copyFromDefault(variant.id, 'sku', ''),\r\n                    stock: this.copyFromDefault(variant.id, 'stock', 0),\r\n                };\r\n            }\r\n        });\r\n        this.onFormChange();\r\n    }\r\n    trackByFn(index, variant) {\r\n        return variant.values.join('|');\r\n    }\r\n    handleEnter(event, optionValueInputComponent) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        optionValueInputComponent.focus();\r\n    }\r\n    onFormChange() {\r\n        const variantsToCreate = this.variants.map(v => this.variantFormValues[v.id]).filter(v => v.enabled);\r\n        this.variantsChange.emit({\r\n            groups: this.optionGroups.map(og => ({ name: og.name, values: og.values.map(v => v.name) })),\r\n            variants: variantsToCreate,\r\n        });\r\n    }\r\n    copyFromDefault(variantId, prop, value) {\r\n        return variantId !== DEFAULT_VARIANT_CODE$1\r\n            ? this.variantFormValues[DEFAULT_VARIANT_CODE$1][prop]\r\n            : value;\r\n    }\r\n};\nGenerateProductVariantsComponent.ɵfac = function GenerateProductVariantsComponent_Factory(t) { return new (t || GenerateProductVariantsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nGenerateProductVariantsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: GenerateProductVariantsComponent, selectors: [[\"vdr-generate-product-variants\"]], outputs: { variantsChange: \"variantsChange\" }, decls: 21, vars: 17, consts: [[\"class\", \"option-groups\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary-outline\", \"btn-sm\", 3, \"click\"], [\"shape\", \"plus\"], [1, \"variants-preview\"], [1, \"table\"], [4, \"ngIf\"], [3, \"disabled\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"option-groups\"], [1, \"name\"], [\"placeholder\", \"e.g. Size\", \"clrInput\", \"\", \"name\", \"name\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"keydown.enter\"], [1, \"values\"], [3, \"ngModel\", \"groupName\", \"disabled\", \"ngModelChange\"], [\"optionValueInputComponent\", \"\"], [1, \"remove-group\"], [1, \"btn\", \"btn-icon\", \"btn-warning-outline\", 3, \"title\", \"click\"], [\"shape\", \"trash\"], [\"clrInput\", \"\", \"type\", \"text\", 3, \"ngModel\", \"placeholder\", \"change\", \"ngModelChange\"], [\"clrInput\", \"\", 3, \"ngModel\", \"currencyCode\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"step\", \"1\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"change\", \"ngModelChange\"]], template: function GenerateProductVariantsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, GenerateProductVariantsComponent_div_0_Template, 16, 13, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"button\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function GenerateProductVariantsComponent_Template_button_click_1_listener() { return ctx.addOption(); });\n        ɵngcc0.ɵɵelement(2, \"clr-icon\", 2);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(6, \"table\", 4);\n        ɵngcc0.ɵɵelementStart(7, \"thead\");\n        ɵngcc0.ɵɵelementStart(8, \"tr\");\n        ɵngcc0.ɵɵtemplate(9, GenerateProductVariantsComponent_th_9_Template, 3, 3, \"th\", 5);\n        ɵngcc0.ɵɵtemplate(10, GenerateProductVariantsComponent_th_10_Template, 3, 3, \"th\", 5);\n        ɵngcc0.ɵɵelementStart(11, \"th\");\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"th\");\n        ɵngcc0.ɵɵtext(15);\n        ɵngcc0.ɵɵpipe(16, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"th\");\n        ɵngcc0.ɵɵtext(18);\n        ɵngcc0.ɵɵpipe(19, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(20, GenerateProductVariantsComponent_tr_20_Template, 13, 11, \"tr\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.optionGroups);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 9, \"catalog.add-option\"), \"\\n\");\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"ngIf\", 1 < ctx.variants.length);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", 1 < ctx.variants.length);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(13, 11, \"catalog.sku\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(16, 13, \"catalog.price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(19, 15, \"catalog.stock-on-hand\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.variants)(\"ngForTrackBy\", ctx.trackByFn);\n    } }, directives: function () { return [ɵngcc4.NgForOf, ɵngcc7.ClrIconCustomTag, ɵngcc4.NgIf, ɵngcc7.ClrDatagridItemsTrackBy, ɵngcc7.ClrLabel, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc7.ClrInput, ɵngcc3.RequiredValidator, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, OptionValueInputComponent, ɵngcc7.ClrInputContainer, ɵngcc2.CurrencyInputComponent, ɵngcc3.NumberValueAccessor, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox]; }, pipes: function () { return [ɵngcc5.TranslatePipe]; }, styles: [\"[_nghost-%COMP%]{display:block;margin-bottom:120px}.option-groups[_ngcontent-%COMP%]{display:flex}.values[_ngcontent-%COMP%]{flex:1;margin:0 6px}.remove-group[_ngcontent-%COMP%]{padding-top:18px}.variants-preview[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fafafa;color:#97979a}\"] });\r\nGenerateProductVariantsComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], GenerateProductVariantsComponent.prototype, \"variantsChange\", void 0);\r\nGenerateProductVariantsComponent = __decorate([ __metadata(\"design:paramtypes\", [DataService])\r\n], GenerateProductVariantsComponent);\n\nconst OPTION_VALUE_INPUT_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => OptionValueInputComponent),\r\n    multi: true,\r\n};\r\nlet OptionValueInputComponent = class OptionValueInputComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.groupName = '';\r\n        this.disabled = false;\r\n        this.input = '';\r\n        this.isFocussed = false;\r\n        this.lastSelected = false;\r\n    }\r\n    registerOnChange(fn) {\r\n        this.onChangeFn = fn;\r\n    }\r\n    registerOnTouched(fn) {\r\n        this.onTouchFn = fn;\r\n    }\r\n    setDisabledState(isDisabled) {\r\n        this.disabled = isDisabled;\r\n        this.changeDetector.markForCheck();\r\n    }\r\n    writeValue(obj) {\r\n        this.options = obj || [];\r\n    }\r\n    focus() {\r\n        this.textArea.nativeElement.focus();\r\n    }\r\n    removeOption(option) {\r\n        if (!option.locked) {\r\n            this.options = this.options.filter(o => o.name !== option.name);\r\n            this.onChangeFn(this.options);\r\n        }\r\n    }\r\n    handleKey(event) {\r\n        switch (event.key) {\r\n            case ',':\r\n            case 'Enter':\r\n                this.addOptionValue();\r\n                event.preventDefault();\r\n                break;\r\n            case 'Backspace':\r\n                if (this.lastSelected) {\r\n                    this.removeLastOption();\r\n                    this.lastSelected = false;\r\n                }\r\n                else if (this.input === '') {\r\n                    this.lastSelected = true;\r\n                }\r\n                break;\r\n            default:\r\n                this.lastSelected = false;\r\n        }\r\n    }\r\n    handleBlur() {\r\n        this.isFocussed = false;\r\n        this.addOptionValue();\r\n    }\r\n    addOptionValue() {\r\n        this.options = unique([...this.options, ...this.parseInputIntoOptions(this.input)]);\r\n        this.input = '';\r\n        this.onChangeFn(this.options);\r\n    }\r\n    parseInputIntoOptions(input) {\r\n        return input\r\n            .split(/[,\\n]/)\r\n            .map(s => s.trim())\r\n            .filter(s => s !== '')\r\n            .map(s => ({ name: s, locked: false }));\r\n    }\r\n    removeLastOption() {\r\n        if (!this.options[this.options.length - 1].locked) {\r\n            this.options = this.options.slice(0, this.options.length - 1);\r\n        }\r\n    }\r\n};\nOptionValueInputComponent.ɵfac = function OptionValueInputComponent_Factory(t) { return new (t || OptionValueInputComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nOptionValueInputComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OptionValueInputComponent, selectors: [[\"vdr-option-value-input\"]], viewQuery: function OptionValueInputComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c23, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.textArea = _t.first);\n    } }, inputs: { groupName: \"groupName\" }, features: [ɵngcc0.ɵɵProvidersFeature([OPTION_VALUE_INPUT_VALUE_ACCESSOR])], decls: 4, vars: 5, consts: [[1, \"input-wrapper\", 3, \"click\"], [\"class\", \"chips\", 4, \"ngIf\"], [3, \"ngModel\", \"disabled\", \"keyup\", \"focus\", \"blur\", \"ngModelChange\"], [\"textArea\", \"\"], [1, \"chips\"], [3, \"icon\", \"selected\", \"locked\", \"colorFrom\", \"iconClick\", 4, \"ngFor\", \"ngForOf\"], [3, \"icon\", \"colorFrom\", \"iconClick\"]], template: function OptionValueInputComponent_Template(rf, ctx) { if (rf & 1) {\n        const _r7 = ɵngcc0.ɵɵgetCurrentView();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function OptionValueInputComponent_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r7); const _r1 = ɵngcc0.ɵɵreference(3); return _r1.focus(); });\n        ɵngcc0.ɵɵtemplate(1, OptionValueInputComponent_div_1_Template, 2, 1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"textarea\", 2, 3);\n        ɵngcc0.ɵɵlistener(\"keyup\", function OptionValueInputComponent_Template_textarea_keyup_2_listener($event) { return ctx.handleKey($event); })(\"focus\", function OptionValueInputComponent_Template_textarea_focus_2_listener() { return ctx.isFocussed = true; })(\"blur\", function OptionValueInputComponent_Template_textarea_blur_2_listener() { return ctx.handleBlur(); })(\"ngModelChange\", function OptionValueInputComponent_Template_textarea_ngModelChange_2_listener($event) { return ctx.input = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"focus\", ctx.isFocussed);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", 0 < ctx.options.length);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.input)(\"disabled\", ctx.disabled);\n    } }, directives: [ɵngcc4.NgIf, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc4.NgForOf, ɵngcc2.ChipComponent], styles: [\".input-wrapper[_ngcontent-%COMP%]{background-color:#fff;border-radius:3px!important;border:1px solid #bfc3cc!important;cursor:text}.input-wrapper.focus[_ngcontent-%COMP%]{border-color:#13b7f3!important;box-shadow:0 0 1px 1px #e3f6fc}.input-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{padding:5px}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:none;width:100%;height:24px;margin-top:3px;padding:0 6px}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:0}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background-color:#fafafa}vdr-chip[_ngcontent-%COMP%]     .wrapper{margin:0 3px}vdr-chip.locked[_ngcontent-%COMP%]{opacity:.8}vdr-chip.selected[_ngcontent-%COMP%]     .wrapper{border-color:#ff9f07!important;box-shadow:0 0 1px 1px #ffb74d;opacity:.6}\"] });\r\nOptionValueInputComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], OptionValueInputComponent.prototype, \"groupName\", void 0);\r\n__decorate([\r\n    ViewChild('textArea', { static: true }),\r\n    __metadata(\"design:type\", ElementRef)\r\n], OptionValueInputComponent.prototype, \"textArea\", void 0);\r\nOptionValueInputComponent = __decorate([ __metadata(\"design:paramtypes\", [ChangeDetectorRef])\r\n], OptionValueInputComponent);\n\n/**\r\n * A component which displays the Assets associated with a product, and allows assets to be removed and\r\n * added, and for the featured asset to be set.\r\n *\r\n * Note: rather complex code for drag drop is due to a limitation of the default CDK implementation\r\n * which is addressed by a work-around from here: https://github.com/angular/components/issues/13372#issuecomment-483998378\r\n */\r\nlet ProductAssetsComponent = class ProductAssetsComponent {\r\n    constructor(modalService, changeDetector, viewportRuler) {\r\n        this.modalService = modalService;\r\n        this.changeDetector = changeDetector;\r\n        this.viewportRuler = viewportRuler;\r\n        this.assets = [];\r\n        this.compact = false;\r\n        this.change = new EventEmitter();\r\n        this.dropListEnterPredicate = (drag, drop) => {\r\n            if (drop === this.placeholder) {\r\n                return true;\r\n            }\r\n            if (drop !== this.activeContainer) {\r\n                return false;\r\n            }\r\n            const phElement = this.placeholder.element.nativeElement;\r\n            const sourceElement = drag.dropContainer.element.nativeElement;\r\n            const dropElement = drop.element.nativeElement;\r\n            const children = dropElement.parentElement && dropElement.parentElement.children;\r\n            const dragIndex = __indexOf(children, this.source ? phElement : sourceElement);\r\n            const dropIndex = __indexOf(children, dropElement);\r\n            if (!this.source) {\r\n                this.sourceIndex = dragIndex;\r\n                this.source = drag.dropContainer;\r\n                phElement.style.width = sourceElement.clientWidth + 'px';\r\n                phElement.style.height = sourceElement.clientHeight + 'px';\r\n                if (sourceElement.parentElement) {\r\n                    sourceElement.parentElement.removeChild(sourceElement);\r\n                }\r\n            }\r\n            this.targetIndex = dropIndex;\r\n            this.target = drop;\r\n            phElement.style.display = '';\r\n            if (dropElement.parentElement) {\r\n                dropElement.parentElement.insertBefore(phElement, dropIndex > dragIndex ? dropElement.nextSibling : dropElement);\r\n            }\r\n            this.placeholder.enter(drag, drag.element.nativeElement.offsetLeft, drag.element.nativeElement.offsetTop);\r\n            return false;\r\n        };\r\n    }\r\n    ngAfterViewInit() {\r\n        const phElement = this.placeholder.element.nativeElement;\r\n        phElement.style.display = 'none';\r\n        if (phElement.parentElement) {\r\n            phElement.parentElement.removeChild(phElement);\r\n        }\r\n    }\r\n    selectAssets() {\r\n        this.modalService\r\n            .fromComponent(AssetPickerDialogComponent, {\r\n            size: 'xl',\r\n        })\r\n            .subscribe(result => {\r\n            if (result && result.length) {\r\n                this.assets = unique(this.assets.concat(result), 'id');\r\n                if (!this.featuredAsset) {\r\n                    this.featuredAsset = result[0];\r\n                }\r\n                this.emitChangeEvent(this.assets, this.featuredAsset);\r\n                this.changeDetector.markForCheck();\r\n            }\r\n        });\r\n    }\r\n    setAsFeatured(asset) {\r\n        this.featuredAsset = asset;\r\n        this.emitChangeEvent(this.assets, asset);\r\n    }\r\n    isFeatured(asset) {\r\n        return !!this.featuredAsset && this.featuredAsset.id === asset.id;\r\n    }\r\n    previewAsset(asset) {\r\n        this.modalService\r\n            .fromComponent(AssetPreviewDialogComponent, {\r\n            size: 'xl',\r\n            closable: true,\r\n            locals: { asset },\r\n        })\r\n            .subscribe();\r\n    }\r\n    removeAsset(asset) {\r\n        this.assets = this.assets.filter(a => a.id !== asset.id);\r\n        if (this.featuredAsset && this.featuredAsset.id === asset.id) {\r\n            this.featuredAsset = this.assets.length > 0 ? this.assets[0] : undefined;\r\n        }\r\n        this.emitChangeEvent(this.assets, this.featuredAsset);\r\n    }\r\n    emitChangeEvent(assets, featuredAsset) {\r\n        this.change.emit({\r\n            assetIds: assets.map(a => a.id),\r\n            featuredAssetId: featuredAsset && featuredAsset.id,\r\n        });\r\n    }\r\n    dragMoved(e) {\r\n        const point = this.getPointerPositionOnPage(e.event);\r\n        this.listGroup._items.forEach(dropList => {\r\n            if (__isInsideDropListClientRect(dropList, point.x, point.y)) {\r\n                this.activeContainer = dropList;\r\n                return;\r\n            }\r\n        });\r\n    }\r\n    dropListDropped() {\r\n        if (!this.target || !this.source) {\r\n            return;\r\n        }\r\n        const phElement = this.placeholder.element.nativeElement;\r\n        // tslint:disable-next-line:no-non-null-assertion\r\n        const parent = phElement.parentElement;\r\n        phElement.style.display = 'none';\r\n        parent.removeChild(phElement);\r\n        parent.appendChild(phElement);\r\n        parent.insertBefore(this.source.element.nativeElement, parent.children[this.sourceIndex]);\r\n        this.target = null;\r\n        this.source = null;\r\n        if (this.sourceIndex !== this.targetIndex) {\r\n            moveItemInArray(this.assets, this.sourceIndex, this.targetIndex);\r\n            this.emitChangeEvent(this.assets, this.featuredAsset);\r\n        }\r\n    }\r\n    /** Determines the point of the page that was touched by the user. */\r\n    getPointerPositionOnPage(event) {\r\n        // `touches` will be empty for start/end events so we have to fall back to `changedTouches`.\r\n        const point = __isTouchEvent(event) ? event.touches[0] || event.changedTouches[0] : event;\r\n        const scrollPosition = this.viewportRuler.getViewportScrollPosition();\r\n        return {\r\n            x: point.pageX - scrollPosition.left,\r\n            y: point.pageY - scrollPosition.top,\r\n        };\r\n    }\r\n};\nProductAssetsComponent.ɵfac = function ProductAssetsComponent_Factory(t) { return new (t || ProductAssetsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc10.ViewportRuler)); };\nProductAssetsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductAssetsComponent, selectors: [[\"vdr-product-assets\"]], viewQuery: function ProductAssetsComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c24, true, CdkDropListGroup);\n        ɵngcc0.ɵɵviewQuery(_c25, true, CdkDropList);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.listGroup = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.placeholder = _t.first);\n    } }, hostVars: 2, hostBindings: function ProductAssetsComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"compact\", ctx.compact);\n    } }, inputs: { assets: \"assets\", compact: \"compact\", featuredAsset: \"featuredAsset\" }, outputs: { change: \"change\" }, decls: 5, vars: 2, consts: [[\"class\", \"card\", 4, \"ngIf\", \"ngIfElse\"], [\"compactView\", \"\"], [\"assetList\", \"\"], [1, \"card\"], [1, \"card-img\"], [1, \"featured-asset\"], [3, \"src\", \"click\", 4, \"ngIf\"], [\"class\", \"placeholder\", 4, \"ngIf\"], [1, \"card-block\"], [4, \"ngTemplateOutlet\"], [\"class\", \"card-footer\", 4, \"vdrIfPermissions\"], [3, \"src\", \"click\"], [1, \"placeholder\"], [\"shape\", \"image\", \"size\", \"128\"], [1, \"card-footer\"], [1, \"btn\", 3, \"click\"], [\"shape\", \"attachment\"], [1, \"featured-asset\", \"compact\"], [\"class\", \"compact-select btn btn-icon btn-sm btn-block\", 3, \"title\", \"click\", 4, \"vdrIfPermissions\"], [\"shape\", \"image\", \"size\", \"150\"], [1, \"compact-select\", \"btn\", \"btn-icon\", \"btn-sm\", \"btn-block\", 3, \"title\", \"click\"], [\"cdkDropListGroup\", \"\", 1, \"all-assets\"], [\"dlg\", \"\"], [\"cdkDropList\", \"\", 3, \"cdkDropListDisabled\", \"cdkDropListEnterPredicate\", \"cdkDropListDropped\"], [\"dl\", \"\"], [\"cdkDropList\", \"\", 3, \"cdkDropListDisabled\", \"cdkDropListEnterPredicate\", \"cdkDropListDropped\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDrag\", \"\", 3, \"cdkDragMoved\"], [\"vdrDropdownTrigger\", \"\", \"tabindex\", \"0\", 1, \"asset-thumb\", 3, \"title\"], [3, \"src\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [1, \"dropdown-divider\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"remove-asset\", 3, \"disabled\", \"click\"]], template: function ProductAssetsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ProductAssetsComponent_div_0_Template, 8, 4, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, ProductAssetsComponent_ng_template_1_Template, 5, 4, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵtemplate(3, ProductAssetsComponent_ng_template_3_Template, 6, 7, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.compact)(\"ngIfElse\", _r1);\n    } }, directives: [ɵngcc4.NgIf, ɵngcc4.NgTemplateOutlet, ɵngcc2.IfPermissionsDirective, ɵngcc7.ClrIconCustomTag, ɵngcc9.CdkDropListGroup, ɵngcc9.CdkDropList, ɵngcc4.NgForOf, ɵngcc2.DropdownComponent, ɵngcc9.CdkDrag, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective], pipes: [ɵngcc2.AssetPreviewPipe, ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe], styles: [\"[_nghost-%COMP%]{width:340px;display:block}.compact[_nghost-%COMP%]{width:162px}.placeholder[_ngcontent-%COMP%]{text-align:center;color:#bfc3cc}.featured-asset[_ngcontent-%COMP%]{text-align:center;background:#f2f3f5;padding:6px;cursor:pointer}.featured-asset.compact[_ngcontent-%COMP%]{width:100%;min-height:40px;padding:6px;position:relative}.featured-asset[_ngcontent-%COMP%]   .compact-select[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;margin:0}.all-assets[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.all-assets[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{margin:3px;padding:0;border:2px solid #f2f3f5;cursor:pointer}.all-assets[_ngcontent-%COMP%]   .asset-thumb.featured[_ngcontent-%COMP%]{border-color:#13b7f3}.all-assets[_ngcontent-%COMP%]   .remove-asset[_ngcontent-%COMP%]{color:#ff9f07}.all-assets.compact[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{margin:1px;border-width:1px}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;background-color:#fafafa;opacity:.9;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.8;width:60px;height:50px}.cdk-drag-placeholder[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{background-color:#bfc3cc;height:100%;width:54px}.cdk-drag-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}.all-assets.compact[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%], .all-assets.compact[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{width:50px}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform 250ms cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.all-assets.cdk-drop-list-dragging[_ngcontent-%COMP%]   vdr-dropdown[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform 250ms cubic-bezier(0,0,.2,1)}\"], changeDetection: 0 });\r\nProductAssetsComponent.ctorParameters = () => [\r\n    { type: ModalService },\r\n    { type: ChangeDetectorRef },\r\n    { type: ViewportRuler }\r\n];\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductAssetsComponent.prototype, \"assets\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductAssetsComponent.prototype, \"featuredAsset\", void 0);\r\n__decorate([\r\n    HostBinding('class.compact'),\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductAssetsComponent.prototype, \"compact\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductAssetsComponent.prototype, \"change\", void 0);\r\n__decorate([\r\n    ViewChild('dlg', { static: false, read: CdkDropListGroup }),\r\n    __metadata(\"design:type\", CdkDropListGroup)\r\n], ProductAssetsComponent.prototype, \"listGroup\", void 0);\r\n__decorate([\r\n    ViewChild('dl', { static: false, read: CdkDropList }),\r\n    __metadata(\"design:type\", CdkDropList)\r\n], ProductAssetsComponent.prototype, \"placeholder\", void 0);\r\nProductAssetsComponent = __decorate([ __metadata(\"design:paramtypes\", [ModalService,\r\n        ChangeDetectorRef,\r\n        ViewportRuler])\r\n], ProductAssetsComponent);\r\nfunction __indexOf(collection, node) {\r\n    if (!collection) {\r\n        return -1;\r\n    }\r\n    return Array.prototype.indexOf.call(collection, node);\r\n}\r\n/** Determines whether an event is a touch event. */\r\nfunction __isTouchEvent(event) {\r\n    return event.type.startsWith('touch');\r\n}\r\nfunction __isInsideDropListClientRect(dropList, x, y) {\r\n    const { top, bottom, left, right } = dropList.element.nativeElement.getBoundingClientRect();\r\n    return y >= top && y <= bottom && x >= left && x <= right;\r\n}\n\nlet UpdateProductOptionDialogComponent = class UpdateProductOptionDialogComponent {\r\n    constructor() {\r\n        this.codeInputTouched = false;\r\n    }\r\n    ngOnInit() {\r\n        var _a;\r\n        const currentTranslation = this.productOption.translations.find((t) => t.languageCode === this.activeLanguage);\r\n        this.name = (_a = currentTranslation === null || currentTranslation === void 0 ? void 0 : currentTranslation.name) !== null && _a !== void 0 ? _a : '';\r\n        this.code = this.productOption.code;\r\n        this.customFieldsForm = new FormGroup({});\r\n        if (this.customFields) {\r\n            const cfCurrentTranslation = (currentTranslation && currentTranslation.customFields) || {};\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString'\r\n                    ? cfCurrentTranslation[key]\r\n                    : this.productOption.customFields[key];\r\n                this.customFieldsForm.addControl(fieldDef.name, new FormControl(value));\r\n            }\r\n        }\r\n    }\r\n    update() {\r\n        const result = createUpdatedTranslatable({\r\n            translatable: this.productOption,\r\n            languageCode: this.activeLanguage,\r\n            updatedFields: {\r\n                code: this.code,\r\n                name: this.name,\r\n                customFields: this.customFieldsForm.value,\r\n            },\r\n            customFieldConfig: this.customFields,\r\n            defaultTranslation: {\r\n                languageCode: this.activeLanguage,\r\n                name: '',\r\n            },\r\n        });\r\n        this.resolveWith(result);\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    updateCode(nameValue) {\r\n        if (!this.codeInputTouched && !this.productOption.code) {\r\n            this.code = normalizeString(nameValue, '-');\r\n        }\r\n    }\r\n};\nUpdateProductOptionDialogComponent.ɵfac = function UpdateProductOptionDialogComponent_Factory(t) { return new (t || UpdateProductOptionDialogComponent)(); };\nUpdateProductOptionDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: UpdateProductOptionDialogComponent, selectors: [[\"vdr-update-product-option-dialog\"]], decls: 11, vars: 9, consts: [[\"vdrDialogTitle\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"nameInput\", \"ngModel\"], [\"for\", \"code\", 3, \"label\"], [\"id\", \"code\", \"type\", \"text\", \"required\", \"\", \"pattern\", \"[a-z0-9_-]+\", 3, \"ngModel\", \"ngModelChange\"], [\"codeInput\", \"ngModel\"], [4, \"ngIf\"], [\"vdrDialogButtons\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"entityName\", \"ProductOption\", 3, \"customFieldsFormGroup\", \"customField\", \"readonly\", 4, \"ngIf\"], [\"entityName\", \"ProductOption\", 3, \"customFieldsFormGroup\", \"customField\", \"readonly\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function UpdateProductOptionDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, UpdateProductOptionDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"vdr-form-field\", 1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementStart(3, \"input\", 2, 3);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function UpdateProductOptionDialogComponent_Template_input_ngModelChange_3_listener($event) { return ctx.name = $event; })(\"input\", function UpdateProductOptionDialogComponent_Template_input_input_3_listener($event) { return ctx.updateCode($event.target.value); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"vdr-form-field\", 4);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementStart(7, \"input\", 5, 6);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function UpdateProductOptionDialogComponent_Template_input_ngModelChange_7_listener($event) { return ctx.code = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(9, UpdateProductOptionDialogComponent_section_9_Template, 5, 4, \"section\", 7);\n        ɵngcc0.ɵɵtemplate(10, UpdateProductOptionDialogComponent_ng_template_10_Template, 6, 7, \"ng-template\", 8);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(2, 5, \"catalog.option-name\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.name);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(6, 7, \"common.code\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.code);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.customFields.length);\n    } }, directives: [ɵngcc2.DialogTitleDirective, ɵngcc2.FormFieldComponent, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc3.RequiredValidator, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc3.PatternValidator, ɵngcc4.NgIf, ɵngcc2.DialogButtonsDirective, ɵngcc7.ClrLabel, ɵngcc4.NgForOf, ɵngcc2.CustomFieldControlComponent], pipes: [ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe], styles: [\"\"], changeDetection: 0 });\n\nlet ProductVariantsListComponent = class ProductVariantsListComponent {\r\n    constructor(changeDetector, modalService) {\r\n        this.changeDetector = changeDetector;\r\n        this.modalService = modalService;\r\n        this.assetChange = new EventEmitter();\r\n        this.selectionChange = new EventEmitter();\r\n        this.selectFacetValueClick = new EventEmitter();\r\n        this.updateProductOption = new EventEmitter();\r\n        this.selectedVariantIds = [];\r\n    }\r\n    ngOnInit() {\r\n        this.formSubscription = this.formArray.valueChanges.subscribe(() => this.changeDetector.markForCheck());\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('facets' in changes && !!changes['facets'].currentValue) {\r\n            this.facetValues = flattenFacetValues(this.facets);\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.formSubscription) {\r\n            this.formSubscription.unsubscribe();\r\n        }\r\n    }\r\n    getTaxCategoryName(index) {\r\n        const control = this.formArray.at(index).get(['taxCategoryId']);\r\n        if (control && this.taxCategories) {\r\n            const match = this.taxCategories.find((t) => t.id === control.value);\r\n            return match ? match.name : '';\r\n        }\r\n        return '';\r\n    }\r\n    areAllSelected() {\r\n        return !!this.variants && this.selectedVariantIds.length === this.variants.length;\r\n    }\r\n    onAssetChange(variantId, event) {\r\n        this.assetChange.emit(Object.assign({ variantId }, event));\r\n        const index = this.variants.findIndex((v) => v.id === variantId);\r\n        this.formArray.at(index).markAsDirty();\r\n    }\r\n    toggleSelectAll() {\r\n        if (this.areAllSelected()) {\r\n            this.selectedVariantIds = [];\r\n        }\r\n        else {\r\n            this.selectedVariantIds = this.variants.map((v) => v.id);\r\n        }\r\n        this.selectionChange.emit(this.selectedVariantIds);\r\n    }\r\n    toggleSelectVariant(variantId) {\r\n        const index = this.selectedVariantIds.indexOf(variantId);\r\n        if (-1 < index) {\r\n            this.selectedVariantIds.splice(index, 1);\r\n        }\r\n        else {\r\n            this.selectedVariantIds.push(variantId);\r\n        }\r\n        this.selectionChange.emit(this.selectedVariantIds);\r\n    }\r\n    optionGroupName(optionGroupId) {\r\n        var _a;\r\n        const group = this.optionGroups.find((g) => g.id === optionGroupId);\r\n        if (group) {\r\n            const translation = (_a = group === null || group === void 0 ? void 0 : group.translations.find((t) => t.languageCode === this.activeLanguage)) !== null && _a !== void 0 ? _a : group.translations[0];\r\n            return translation.name;\r\n        }\r\n    }\r\n    optionName(option) {\r\n        var _a;\r\n        const translation = (_a = option.translations.find((t) => t.languageCode === this.activeLanguage)) !== null && _a !== void 0 ? _a : option.translations[0];\r\n        return translation.name;\r\n    }\r\n    pendingFacetValues(index) {\r\n        if (this.facets) {\r\n            const formFacetValueIds = this.getFacetValueIds(index);\r\n            const variantFacetValueIds = this.variants[index].facetValues.map((fv) => fv.id);\r\n            return formFacetValueIds\r\n                .filter((x) => !variantFacetValueIds.includes(x))\r\n                .map((id) => this.facetValues.find((fv) => fv.id === id))\r\n                .filter(notNullOrUndefined);\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n    existingFacetValues(index) {\r\n        const variant = this.variants[index];\r\n        const formFacetValueIds = this.getFacetValueIds(index);\r\n        const intersection = [...formFacetValueIds].filter((x) => variant.facetValues.map((fv) => fv.id).includes(x));\r\n        return intersection\r\n            .map((id) => variant.facetValues.find((fv) => fv.id === id))\r\n            .filter(notNullOrUndefined);\r\n    }\r\n    removeFacetValue(index, facetValueId) {\r\n        const formGroup = this.formArray.at(index);\r\n        const newValue = formGroup.value.facetValueIds.filter((id) => id !== facetValueId);\r\n        formGroup.patchValue({\r\n            facetValueIds: newValue,\r\n        });\r\n        formGroup.markAsDirty();\r\n    }\r\n    isVariantSelected(variantId) {\r\n        return -1 < this.selectedVariantIds.indexOf(variantId);\r\n    }\r\n    customFieldIsSet(index, name) {\r\n        return !!this.formArray.at(index).get(['customFields', name]);\r\n    }\r\n    editOption(option) {\r\n        this.modalService\r\n            .fromComponent(UpdateProductOptionDialogComponent, {\r\n            size: 'md',\r\n            locals: {\r\n                productOption: option,\r\n                activeLanguage: this.activeLanguage,\r\n                customFields: this.customOptionFields,\r\n            },\r\n        })\r\n            .subscribe((result) => {\r\n            if (result) {\r\n                this.updateProductOption.emit(result);\r\n            }\r\n        });\r\n    }\r\n    getFacetValueIds(index) {\r\n        const formValue = this.formArray.at(index).value;\r\n        return formValue.facetValueIds;\r\n    }\r\n};\nProductVariantsListComponent.ɵfac = function ProductVariantsListComponent_Factory(t) { return new (t || ProductVariantsListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService)); };\nProductVariantsListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductVariantsListComponent, selectors: [[\"vdr-product-variants-list\"]], inputs: { formArray: [\"productVariantsFormArray\", \"formArray\"], variants: \"variants\", taxCategories: \"taxCategories\", facets: \"facets\", optionGroups: \"optionGroups\", customFields: \"customFields\", customOptionFields: \"customOptionFields\", activeLanguage: \"activeLanguage\" }, outputs: { assetChange: \"assetChange\", selectionChange: \"selectionChange\", selectFacetValueClick: \"selectFacetValueClick\", updateProductOption: \"updateProductOption\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 2, vars: 1, consts: [[1, \"variants-list\"], [\"class\", \"variant-container card\", 3, \"disabled\", 4, \"ngFor\", \"ngForOf\"], [1, \"variant-container\", \"card\"], [3, \"formGroup\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"card-block\", \"header-row\"], [1, \"details\"], [1, \"sku\", 3, \"readonly\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"sku\", 3, \"readonly\", \"placeholder\"], [1, \"name\", 3, \"readonly\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"placeholder\"], [1, \"right-controls\"], [4, \"vdrIfPermissions\"], [1, \"card-block\"], [1, \"variant-body\"], [1, \"assets\"], [3, \"compact\", \"assets\", \"featuredAsset\", \"change\"], [1, \"variant-form-inputs\"], [1, \"standard-fields\"], [1, \"variant-form-input-row\"], [1, \"tax-category\"], [4, \"vdrIfPermissions\", \"vdrIfPermissionsElse\"], [\"taxCategoryLabel\", \"\"], [1, \"price\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\"], [3, \"price\", \"currencyCode\", \"priceIncludesTax\", \"taxCategoryId\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"step\", \"1\", \"formControlName\", \"stockOnHand\", 3, \"readonly\"], [1, \"track-inventory-toggle\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", \"name\", \"trackInventory\", \"formControlName\", \"trackInventory\", 3, \"vdrDisabled\"], [1, \"custom-fields\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [1, \"options-facets\"], [3, \"entity\"], [4, \"ngIf\"], [1, \"flex-spacer\"], [1, \"facets\"], [3, \"facetValue\", \"removable\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", \"formControlName\", \"enabled\"], [\"clrSelect\", \"\", \"name\", \"options\", \"formControlName\", \"taxCategoryId\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"clr-control-label\"], [1, \"tax-category-label\"], [\"formGroupName\", \"customFields\"], [4, \"ngFor\", \"ngForOf\"], [\"entityName\", \"ProductVariant\", 3, \"compact\", \"customFieldsFormGroup\", \"readonly\", \"customField\", 4, \"ngIf\"], [\"entityName\", \"ProductVariant\", 3, \"compact\", \"customFieldsFormGroup\", \"readonly\", \"customField\"], [1, \"options\"], [3, \"colorFrom\", \"invert\", \"icon\", \"iconClick\", 4, \"ngFor\", \"ngForOf\"], [3, \"colorFrom\", \"invert\", \"icon\", \"iconClick\"], [1, \"option-group-name\"], [3, \"facetValue\", \"removable\", \"remove\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"plus\"]], template: function ProductVariantsListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_Template, 2, 5, \"div\", 1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.variants);\n    } }, directives: function () { return [ɵngcc4.NgForOf, ɵngcc4.NgIf, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc2.TitleInputComponent, ɵngcc7.ClrInputContainer, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc7.ClrInput, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc2.IfPermissionsDirective, ProductAssetsComponent, ɵngcc7.ClrLabel, ɵngcc2.CurrencyInputComponent, VariantPriceDetailComponent, ɵngcc3.NumberValueAccessor, ɵngcc7.ClrCheckboxWrapper, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc2.DisabledDirective, ɵngcc2.EntityInfoComponent, ɵngcc7.ClrSelectContainer, ɵngcc3.SelectControlValueAccessor, ɵngcc7.ClrSelect, ɵngcc3.NgSelectOption, ɵngcc3.ɵangular_packages_forms_forms_x, ɵngcc3.FormGroupName, ɵngcc2.CustomFieldControlComponent, ɵngcc2.ChipComponent, ɵngcc2.FacetValueChipComponent, ɵngcc7.ClrIconCustomTag]; }, pipes: function () { return [ɵngcc2.HasPermissionPipe, ɵngcc5.TranslatePipe, ɵngcc2.SortPipe]; }, styles: [\".with-selected[_ngcontent-%COMP%]{display:flex;min-height:52px;align-items:center;border:1px solid #f2f3f5;border-radius:3px;padding:6px 18px}.with-selected[_ngcontent-%COMP%]   vdr-select-toggle[_ngcontent-%COMP%], .with-selected[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-right:12px}.variant-container[_ngcontent-%COMP%]{transition:background-color .2s}.variant-container.disabled[_ngcontent-%COMP%]{background-color:#f2f3f5}.variant-container[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.variant-container[_ngcontent-%COMP%]   .variant-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width:768px){.variant-container[_ngcontent-%COMP%]   .variant-body[_ngcontent-%COMP%]{flex-direction:row}}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:12px}@media screen and (min-width:768px){.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex-direction:row;height:36px}}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]     .clr-control-container{width:100%}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]     .clr-control-container input.clr-input{min-width:100%}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .sku[_ngcontent-%COMP%]{width:160px;margin-right:20px;flex:0}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]     .name input{min-width:300px}.variant-container[_ngcontent-%COMP%]   .right-controls[_ngcontent-%COMP%]{display:flex}.variant-container[_ngcontent-%COMP%]   .tax-category-label[_ngcontent-%COMP%]{margin-top:3px}.variant-container[_ngcontent-%COMP%]   .variant-form-inputs[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}@media screen and (min-width:768px){.variant-container[_ngcontent-%COMP%]   .variant-form-inputs[_ngcontent-%COMP%]{flex-direction:row}.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%]{margin:0 6px 8px 24px}}.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:24px;margin-bottom:24px}.variant-container[_ngcontent-%COMP%]   .track-inventory-toggle[_ngcontent-%COMP%]{margin-top:22px}.variant-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]{margin-top:0}.variant-container[_ngcontent-%COMP%]   .facets[_ngcontent-%COMP%]{display:flex;align-items:center}.variant-container[_ngcontent-%COMP%]   .pricing[_ngcontent-%COMP%]{display:flex}.variant-container[_ngcontent-%COMP%]   .pricing[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:12px}.variant-container[_ngcontent-%COMP%]   .option-group-name[_ngcontent-%COMP%]{color:#97979a;text-transform:uppercase;font-size:10px;margin-right:3px;height:11px}.variant-container[_ngcontent-%COMP%]   .options-facets[_ngcontent-%COMP%]{display:flex;color:#97979a}\"], changeDetection: 0 });\r\nProductVariantsListComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef },\r\n    { type: ModalService }\r\n];\r\n__decorate([\r\n    Input('productVariantsFormArray'),\r\n    __metadata(\"design:type\", FormArray)\r\n], ProductVariantsListComponent.prototype, \"formArray\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductVariantsListComponent.prototype, \"variants\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductVariantsListComponent.prototype, \"taxCategories\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductVariantsListComponent.prototype, \"facets\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductVariantsListComponent.prototype, \"optionGroups\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductVariantsListComponent.prototype, \"customFields\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductVariantsListComponent.prototype, \"customOptionFields\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], ProductVariantsListComponent.prototype, \"activeLanguage\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductVariantsListComponent.prototype, \"assetChange\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductVariantsListComponent.prototype, \"selectionChange\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductVariantsListComponent.prototype, \"selectFacetValueClick\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], ProductVariantsListComponent.prototype, \"updateProductOption\", void 0);\r\nProductVariantsListComponent = __decorate([ __metadata(\"design:paramtypes\", [ChangeDetectorRef, ModalService])\r\n], ProductVariantsListComponent);\n\nlet ProductVariantsTableComponent = class ProductVariantsTableComponent {\r\n    optionGroupName(optionGroupId) {\r\n        const group = this.optionGroups.find(g => g.id === optionGroupId);\r\n        return group && group.name;\r\n    }\r\n};\nProductVariantsTableComponent.ɵfac = function ProductVariantsTableComponent_Factory(t) { return new (t || ProductVariantsTableComponent)(); };\nProductVariantsTableComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductVariantsTableComponent, selectors: [[\"vdr-product-variants-table\"]], inputs: { formArray: [\"productVariantsFormArray\", \"formArray\"], variants: \"variants\", optionGroups: \"optionGroups\" }, decls: 20, vars: 20, consts: [[3, \"items\"], [4, \"ngFor\", \"ngForOf\"], [3, \"formGroup\"], [1, \"left\", \"align-middle\"], [1, \"card-img\"], [1, \"featured-asset\"], [3, \"src\", 4, \"ngIf\"], [\"class\", \"placeholder\", 4, \"ngIf\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"placeholder\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"sku\", 3, \"readonly\", \"placeholder\"], [1, \"left\", \"align-middle\", \"price\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\"], [1, \"left\", \"align-middle\", \"stock\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"step\", \"1\", \"formControlName\", \"stockOnHand\", 3, \"readonly\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", \"formControlName\", \"enabled\", 3, \"vdrDisabled\"], [3, \"src\"], [1, \"placeholder\"], [\"shape\", \"image\", \"size\", \"48\"]], template: function ProductVariantsTableComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-data-table\", 0);\n        ɵngcc0.ɵɵelement(1, \"vdr-dt-column\");\n        ɵngcc0.ɵɵelementStart(2, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(6);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, ProductVariantsTableComponent_ng_container_8_Template, 3, 1, \"ng-container\", 1);\n        ɵngcc0.ɵɵpipe(9, \"sort\");\n        ɵngcc0.ɵɵelementStart(10, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(19, ProductVariantsTableComponent_ng_template_19_Template, 30, 53, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"items\", ctx.variants);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 7, \"common.name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(7, 9, \"catalog.sku\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(9, 11, ctx.optionGroups, \"id\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 14, \"catalog.price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 16, \"catalog.stock-on-hand\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 18, \"common.enabled\"));\n    } }, directives: [ɵngcc2.DataTableComponent, ɵngcc2.DataTableColumnComponent, ɵngcc4.NgForOf, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc4.NgIf, ɵngcc7.ClrInputContainer, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc7.ClrInput, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc2.CurrencyInputComponent, ɵngcc3.NumberValueAccessor, ɵngcc7.ClrCheckboxWrapper, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc2.DisabledDirective, ɵngcc7.ClrIconCustomTag], pipes: [ɵngcc5.TranslatePipe, ɵngcc2.SortPipe, ɵngcc2.HasPermissionPipe, ɵngcc2.AssetPreviewPipe, ɵngcc2.StringToColorPipe], styles: [\".placeholder[_ngcontent-%COMP%]{color:#bfc3cc}input[_ngcontent-%COMP%]{width:100%}.price[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .stock[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:96px}td[_ngcontent-%COMP%]{transition:background-color .2s}td.disabled[_ngcontent-%COMP%]{background-color:#f2f3f5}\"], changeDetection: 0 });\r\n__decorate([\r\n    Input('productVariantsFormArray'),\r\n    __metadata(\"design:type\", FormArray)\r\n], ProductVariantsTableComponent.prototype, \"formArray\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductVariantsTableComponent.prototype, \"variants\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], ProductVariantsTableComponent.prototype, \"optionGroups\", void 0);\n\nlet VariantPriceDetailComponent = class VariantPriceDetailComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.priceChange$ = new BehaviorSubject(0);\r\n        this.taxCategoryIdChange$ = new BehaviorSubject('');\r\n    }\r\n    ngOnInit() {\r\n        const taxRates$ = this.dataService.settings\r\n            .getTaxRates(99999, 0, 'cache-first')\r\n            .mapStream(data => data.taxRates.items);\r\n        const activeChannel$ = this.dataService.settings\r\n            .getActiveChannel('cache-first')\r\n            .mapStream(data => data.activeChannel);\r\n        this.taxRate$ = combineLatest(activeChannel$, taxRates$, this.taxCategoryIdChange$).pipe(map(([channel, taxRates, taxCategoryId]) => {\r\n            const defaultTaxZone = channel.defaultTaxZone;\r\n            if (!defaultTaxZone) {\r\n                return 0;\r\n            }\r\n            const applicableRate = taxRates.find(taxRate => taxRate.zone.id === defaultTaxZone.id && taxRate.category.id === taxCategoryId);\r\n            if (!applicableRate) {\r\n                return 0;\r\n            }\r\n            return applicableRate.value;\r\n        }));\r\n        this.grossPrice$ = combineLatest(this.taxRate$, this.priceChange$).pipe(map(([taxRate, price]) => {\r\n            return Math.round(price * ((100 + taxRate) / 100)) / 100;\r\n        }));\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('price' in changes) {\r\n            this.priceChange$.next(changes.price.currentValue);\r\n        }\r\n        if ('taxCategoryId' in changes) {\r\n            this.taxCategoryIdChange$.next(changes.taxCategoryId.currentValue);\r\n        }\r\n    }\r\n};\nVariantPriceDetailComponent.ɵfac = function VariantPriceDetailComponent_Factory(t) { return new (t || VariantPriceDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nVariantPriceDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: VariantPriceDetailComponent, selectors: [[\"vdr-variant-price-detail\"]], inputs: { priceIncludesTax: \"priceIncludesTax\", price: \"price\", currencyCode: \"currencyCode\", taxCategoryId: \"taxCategoryId\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 5, vars: 5, consts: [[1, \"clr-control-label\"], [\"class\", \"value\", 4, \"ngIf\"], [1, \"value\"]], template: function VariantPriceDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"label\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, VariantPriceDetailComponent_div_3_Template, 4, 8, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(4, VariantPriceDetailComponent_div_4_Template, 6, 14, \"div\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"catalog.taxes\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.priceIncludesTax);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.priceIncludesTax);\n    } }, directives: [ɵngcc7.ClrLabel, ɵngcc4.NgIf], pipes: [ɵngcc5.TranslatePipe, ɵngcc4.AsyncPipe, ɵngcc4.CurrencyPipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column}.value[_ngcontent-%COMP%]{margin-top:3px}\"], changeDetection: 0 });\r\nVariantPriceDetailComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], VariantPriceDetailComponent.prototype, \"priceIncludesTax\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Number)\r\n], VariantPriceDetailComponent.prototype, \"price\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], VariantPriceDetailComponent.prototype, \"currencyCode\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], VariantPriceDetailComponent.prototype, \"taxCategoryId\", void 0);\r\nVariantPriceDetailComponent = __decorate([ __metadata(\"design:paramtypes\", [DataService])\r\n], VariantPriceDetailComponent);\n\nlet CatalogModule = class CatalogModule {\r\n};\nCatalogModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: CatalogModule });\nCatalogModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function CatalogModule_Factory(t) { return new (t || CatalogModule)(); }, imports: [[SharedModule, RouterModule.forChild(catalogRoutes)]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AssetDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-asset-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"asset-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            *vdrIfPermissions=\\\"'UpdateCatalog'\\\"\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            (click)=\\\"save()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.update' | translate }}\\r\\n        </button>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n<vdr-asset-preview\\r\\n    [asset]=\\\"entity$ | async\\\"\\r\\n    [editable]=\\\"true\\\"\\r\\n    (assetChange)=\\\"onAssetChange($event)\\\"\\r\\n></vdr-asset-preview>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:flex;flex-direction:column;height:100%}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.DataService }, { type: ɵngcc3.FormBuilder }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AssetListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-asset-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <input\\r\\n            type=\\\"text\\\"\\r\\n            name=\\\"searchTerm\\\"\\r\\n            [formControl]=\\\"searchTerm\\\"\\r\\n            [placeholder]=\\\"'asset.search-asset-name' | translate\\\"\\r\\n            class=\\\"clr-input search-input\\\"\\r\\n        />\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"asset-list\\\"></vdr-action-bar-items>\\r\\n        <vdr-asset-file-input\\r\\n            (selectFiles)=\\\"filesSelected($event)\\\"\\r\\n            [uploading]=\\\"uploading\\\"\\r\\n            dropZoneTarget=\\\".content-area\\\"\\r\\n        ></vdr-asset-file-input>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-asset-gallery\\r\\n    [assets]=\\\"(items$ | async)! | paginate: (paginationConfig$ | async) || {}\\\"\\r\\n    [multiSelect]=\\\"true\\\"\\r\\n    [canDelete]=\\\"'DeleteCatalog' | hasPermission\\\"\\r\\n    (deleteAsset)=\\\"deleteAsset($event)\\\"\\r\\n></vdr-asset-gallery>\\r\\n\\r\\n<div class=\\\"paging-controls\\\">\\r\\n    <vdr-items-per-page-controls\\r\\n        [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n        (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n    ></vdr-items-per-page-controls>\\r\\n\\r\\n    <vdr-pagination-controls\\r\\n        [currentPage]=\\\"currentPage$ | async\\\"\\r\\n        [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n        [totalItems]=\\\"totalItems$ | async\\\"\\r\\n        (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    ></vdr-pagination-controls>\\r\\n</div>\\r\\n\",\n                styles: [\":host{display:flex;flex-direction:column;height:100%}vdr-asset-gallery{flex:1}.paging-controls{padding-top:6px;border-top:1px solid #f2f3f5;display:flex;justify-content:space-between}.search-input{margin-top:6px;min-width:300px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.DataService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CollectionContentsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-contents',\n                template: \"<div class=\\\"contents-header\\\">\\r\\n    <div class=\\\"header-title-row\\\">\\r\\n        <ng-container\\r\\n            *ngTemplateOutlet=\\\"headerTemplate; context: { $implicit: contentsTotalItems$ | async }\\\"\\r\\n        ></ng-container>\\r\\n    </div>\\r\\n    <input\\r\\n        type=\\\"text\\\"\\r\\n        [placeholder]=\\\"'catalog.filter-by-name' | translate\\\"\\r\\n        class=\\\"clr-input\\\"\\r\\n        [formControl]=\\\"filterTermControl\\\"\\r\\n    />\\r\\n</div>\\r\\n<vdr-data-table\\r\\n    [items]=\\\"contents$ | async\\\"\\r\\n    [itemsPerPage]=\\\"contentsItemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"contentsTotalItems$ | async\\\"\\r\\n    [currentPage]=\\\"contentsCurrentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setContentsPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setContentsItemsPerPage($event)\\\"\\r\\n>\\r\\n    <ng-template let-variant=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\">{{ variant.name }}</td>\\r\\n        <td class=\\\"right align-middle\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['/catalog/products', variant.productId, { tab: 'variants' }]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".contents-header{background-color:#fafafa;position:-webkit-sticky;position:sticky;top:0;padding:6px;z-index:1;border-bottom:1px solid #bfc3cc}.contents-header .header-title-row{display:flex;justify-content:space-between;align-items:center}.contents-header .clr-input{width:100%}:host ::ng-deep table{margin-top:-1px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ActivatedRoute }, { type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, { collectionId: [{\n            type: Input\n        }], headerTemplate: [{\n            type: ContentChild,\n            args: [TemplateRef, { static: true }]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CollectionDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"collection-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"'UpdateCatalog'\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"(detailForm.invalid || detailForm.pristine) && !assetsChanged()\\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"entity$ | async as category\\\">\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <vdr-form-field [label]=\\\"'catalog.visibility' | translate\\\" for=\\\"visibility\\\">\\r\\n                <clr-toggle-wrapper>\\r\\n                    <input\\r\\n                        type=\\\"checkbox\\\"\\r\\n                        clrToggle\\r\\n                        formControlName=\\\"visible\\\"\\r\\n                        id=\\\"visibility\\\"\\r\\n                        [vdrDisabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                    />\\r\\n                    <label class=\\\"visible-toggle\\\">\\r\\n                        <ng-container *ngIf=\\\"detailForm.value.visible; else private\\\">{{ 'catalog.public' | translate }}</ng-container>\\r\\n                        <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n                    </label>\\r\\n                </clr-toggle-wrapper>\\r\\n            </vdr-form-field>\\r\\n            <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n                <input\\r\\n                    id=\\\"name\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    formControlName=\\\"name\\\"\\r\\n                    [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                    (input)=\\\"updateSlug($event.target.value)\\\"\\r\\n                />\\r\\n            </vdr-form-field>\\r\\n            <vdr-form-field\\r\\n                [label]=\\\"'catalog.slug' | translate\\\"\\r\\n                for=\\\"slug\\\"\\r\\n                [errors]=\\\"{ pattern: ('catalog.slug-pattern-error' | translate) }\\\"\\r\\n            >\\r\\n                <input\\r\\n                    id=\\\"slug\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    formControlName=\\\"slug\\\"\\r\\n                    [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                    pattern=\\\"[a-z0-9_-]+\\\"\\r\\n                />\\r\\n            </vdr-form-field>\\r\\n            <vdr-rich-text-editor\\r\\n                formControlName=\\\"description\\\"\\r\\n                [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                [label]=\\\"'common.description' | translate\\\"\\r\\n            ></vdr-rich-text-editor>\\r\\n\\r\\n            <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n                <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n                    <vdr-custom-field-control\\r\\n                        *ngIf=\\\"customFieldIsSet(customField.name)\\\"\\r\\n                        entityName=\\\"Collection\\\"\\r\\n                        [customFieldsFormGroup]=\\\"detailForm.get(['customFields'])\\\"\\r\\n                        [customField]=\\\"customField\\\"\\r\\n                    ></vdr-custom-field-control>\\r\\n                </ng-container>\\r\\n            </section>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col-md-auto\\\">\\r\\n            <vdr-product-assets\\r\\n                [assets]=\\\"category.assets\\\"\\r\\n                [featuredAsset]=\\\"category.featuredAsset\\\"\\r\\n                (change)=\\\"assetChanges = $event\\\"\\r\\n            ></vdr-product-assets>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"clr-row\\\" formArrayName=\\\"filters\\\">\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <label>{{ 'catalog.filters' | translate }}</label>\\r\\n            <ng-container *ngFor=\\\"let filter of filters; index as i\\\">\\r\\n                <vdr-configurable-input\\r\\n                    (remove)=\\\"removeFilter($event)\\\"\\r\\n                    [facets]=\\\"facets$ | async\\\"\\r\\n                    [operation]=\\\"filter\\\"\\r\\n                    [operationDefinition]=\\\"getFilterDefinition(filter)\\\"\\r\\n                    [formControlName]=\\\"i\\\"\\r\\n                    [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                    [activeChannel]=\\\"activeChannel$ | async\\\"\\r\\n                ></vdr-configurable-input>\\r\\n            </ng-container>\\r\\n\\r\\n            <div *vdrIfPermissions=\\\"'UpdateCatalog'\\\">\\r\\n                <vdr-dropdown>\\r\\n                    <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                        <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                        {{ 'marketing.add-condition' | translate }}\\r\\n                    </button>\\r\\n                    <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                        <button\\r\\n                            *ngFor=\\\"let filter of allFilters\\\"\\r\\n                            type=\\\"button\\\"\\r\\n                            vdrDropdownItem\\r\\n                            (click)=\\\"addFilter(filter)\\\"\\r\\n                        >\\r\\n                            {{ filter.description }}\\r\\n                        </button>\\r\\n                    </vdr-dropdown-menu>\\r\\n                </vdr-dropdown>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <vdr-collection-contents [collectionId]=\\\"id\\\" #collectionContents>\\r\\n                <ng-template let-count>\\r\\n                    <div class=\\\"contents-title\\\">\\r\\n                        {{ 'catalog.collection-contents' | translate }} ({{\\r\\n                            'common.results-count' | translate: { count: count }\\r\\n                        }})\\r\\n                    </div>\\r\\n                </ng-template>\\r\\n            </vdr-collection-contents>\\r\\n        </div>\\r\\n    </div>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".visible-toggle{margin-top:-3px!important}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc2.DataService }, { type: ɵngcc3.FormBuilder }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }]; }, { contentsComponent: [{\n            type: ViewChild,\n            args: ['collectionContents']\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CollectionListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <clr-checkbox-wrapper class=\\\"expand-all-toggle\\\">\\r\\n            <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"expandAll\\\" />\\r\\n            <label>{{ 'catalog.expand-all-collections' | translate }}</label>\\r\\n        </clr-checkbox-wrapper>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"collection-list\\\"></vdr-action-bar-items>\\r\\n        <a class=\\\"btn btn-primary\\\" *vdrIfPermissions=\\\"'CreateCatalog'\\\" [routerLink]=\\\"['./create']\\\">\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            {{ 'catalog.create-new-collection' | translate }}\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n<div class=\\\"collection-wrapper\\\">\\r\\n    <vdr-collection-tree\\r\\n        [collections]=\\\"items$ | async\\\"\\r\\n        [activeCollectionId]=\\\"activeCollectionId$ | async\\\"\\r\\n        [expandAll]=\\\"expandAll\\\"\\r\\n        (rearrange)=\\\"onRearrange($event)\\\"\\r\\n        (deleteCollection)=\\\"deleteCollection($event)\\\"\\r\\n    ></vdr-collection-tree>\\r\\n\\r\\n    <div class=\\\"collection-contents\\\" [class.expanded]=\\\"activeCollectionId$ | async\\\">\\r\\n        <vdr-collection-contents [collectionId]=\\\"activeCollectionId$ | async\\\">\\r\\n            <ng-template let-count>\\r\\n                <div class=\\\"collection-title\\\">\\r\\n                    {{ activeCollectionTitle$ | async }} ({{\\r\\n                        'common.results-count' | translate: { count: count }\\r\\n                    }})\\r\\n                </div>\\r\\n                <button type=\\\"button\\\" class=\\\"close-button\\\" (click)=\\\"closeContents()\\\">\\r\\n                    <clr-icon shape=\\\"close\\\"></clr-icon>\\r\\n                </button>\\r\\n            </ng-template>\\r\\n        </vdr-collection-contents>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;flex-direction:column}.expand-all-toggle{display:block;margin-top:14px}.collection-wrapper{display:flex;height:calc(100% - 50px)}.collection-wrapper vdr-collection-tree{flex:1;height:100%;overflow:auto}.collection-wrapper .collection-contents{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility .3s}.collection-wrapper .collection-contents.expanded{width:30vw;visibility:visible;opacity:1;padding-left:12px}.collection-wrapper .collection-contents .close-button{margin:0;background:0 0;border:none;cursor:pointer}.paging-controls{padding-top:6px;border-top:1px solid #f2f3f5;display:flex;justify-content:space-between}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FacetDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-facet-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"facet-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"'UpdateCatalog'\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"entity$ | async as facet\\\">\\r\\n    <section class=\\\"form-block\\\" formGroupName=\\\"facet\\\">\\r\\n        <vdr-form-field [label]=\\\"'catalog.visibility' | translate\\\" for=\\\"visibility\\\">\\r\\n            <clr-toggle-wrapper>\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    clrToggle\\r\\n                    [vdrDisabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                    formControlName=\\\"visible\\\"\\r\\n                    id=\\\"visibility\\\"\\r\\n                />\\r\\n                <label class=\\\"visible-toggle\\\">\\r\\n                    <ng-container *ngIf=\\\"detailForm.value.facet.visible; else private\\\">{{ 'catalog.public' | translate }}</ng-container>\\r\\n                    <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n                </label>\\r\\n            </clr-toggle-wrapper>\\r\\n        </vdr-form-field>\\r\\n        <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n            <input\\r\\n                id=\\\"name\\\"\\r\\n                type=\\\"text\\\"\\r\\n                formControlName=\\\"name\\\"\\r\\n                [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                (input)=\\\"updateCode(facet.code, $event.target.value)\\\"\\r\\n            />\\r\\n        </vdr-form-field>\\r\\n        <vdr-form-field\\r\\n            [label]=\\\"'common.code' | translate\\\"\\r\\n            for=\\\"code\\\"\\r\\n            [readOnlyToggle]=\\\"'UpdateCatalog' | hasPermission\\\"\\r\\n        >\\r\\n            <input\\r\\n                id=\\\"code\\\"\\r\\n                type=\\\"text\\\"\\r\\n                [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                formControlName=\\\"code\\\"\\r\\n            />\\r\\n        </vdr-form-field>\\r\\n\\r\\n        <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n            <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n            <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n                <vdr-custom-field-control\\r\\n                    *ngIf=\\\"customFieldIsSet(customField.name)\\\"\\r\\n                    entityName=\\\"Facet\\\"\\r\\n                    [customFieldsFormGroup]=\\\"detailForm.get(['facet', 'customFields'])\\\"\\r\\n                    [customField]=\\\"customField\\\"\\r\\n                ></vdr-custom-field-control>\\r\\n            </ng-container>\\r\\n        </section>\\r\\n    </section>\\r\\n\\r\\n    <section class=\\\"form-block\\\" *ngIf=\\\"!(isNew$ | async)\\\">\\r\\n        <label>{{ 'catalog.facet-values' | translate }}</label>\\r\\n\\r\\n        <table class=\\\"facet-values-list table\\\" formArrayName=\\\"values\\\" *ngIf=\\\"0 < getValuesFormArray().length\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'common.name' | translate }}</th>\\r\\n                    <th>{{ 'common.code' | translate }}</th>\\r\\n                    <ng-container *ngFor=\\\"let customField of customValueFields\\\">\\r\\n                        <th>{{ customField.name }}</th>\\r\\n                    </ng-container>\\r\\n                    <th></th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n                <tr\\r\\n                    class=\\\"facet-value\\\"\\r\\n                    *ngFor=\\\"let value of values; let i = index\\\"\\r\\n                    [formGroupName]=\\\"i\\\"\\r\\n                >\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <vdr-entity-info [entity]=\\\"value\\\"></vdr-entity-info>\\r\\n                    </td>\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <input\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"name\\\"\\r\\n                            [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                            (input)=\\\"updateValueCode(facet.values[i]?.code, $event.target.value, i)\\\"\\r\\n                        />\\r\\n                    </td>\\r\\n                    <td class=\\\"align-middle\\\"><input type=\\\"text\\\" formControlName=\\\"code\\\" readonly /></td>\\r\\n                    <ng-container *ngFor=\\\"let customField of customValueFields\\\">\\r\\n                        <td class=\\\"align-middle\\\">\\r\\n                            <vdr-custom-field-control\\r\\n                                *ngIf=\\\"customValueFieldIsSet(i, customField.name)\\\"\\r\\n                                entityName=\\\"FacetValue\\\"\\r\\n                                [showLabel]=\\\"false\\\"\\r\\n                                [customFieldsFormGroup]=\\\"detailForm.get(['values', i, 'customFields'])\\\"\\r\\n                                [customField]=\\\"customField\\\"\\r\\n                            ></vdr-custom-field-control>\\r\\n                        </td>\\r\\n                    </ng-container>\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <vdr-dropdown>\\r\\n                            <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                                {{ 'common.actions' | translate }}\\r\\n                                <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                            </button>\\r\\n                            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                                <button\\r\\n                                    type=\\\"button\\\"\\r\\n                                    class=\\\"delete-button\\\"\\r\\n                                    (click)=\\\"deleteFacetValue(facet.values[i]?.id, i)\\\"\\r\\n                                    [disabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                    vdrDropdownItem\\r\\n                                >\\r\\n                                    <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                                    {{ 'common.delete' | translate }}\\r\\n                                </button>\\r\\n                            </vdr-dropdown-menu>\\r\\n                        </vdr-dropdown>\\r\\n                    </td>\\r\\n                </tr>\\r\\n            </tbody>\\r\\n        </table>\\r\\n\\r\\n        <div>\\r\\n            <button\\r\\n                type=\\\"button\\\"\\r\\n                class=\\\"btn btn-secondary\\\"\\r\\n                *vdrIfPermissions=\\\"'CreateCatalog'\\\"\\r\\n                (click)=\\\"addFacetValue()\\\"\\r\\n            >\\r\\n                <clr-icon shape=\\\"add\\\"></clr-icon>\\r\\n                {{ 'catalog.add-facet-value' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n    </section>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".visible-toggle{margin-top:-3px!important}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc2.DataService }, { type: ɵngcc3.FormBuilder }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FacetListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-facet-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"facet-list\\\"></vdr-action-bar-items>\\r\\n        <a class=\\\"btn btn-primary\\\"\\r\\n           *vdrIfPermissions=\\\"'CreateCatalog'\\\"\\r\\n           [routerLink]=\\\"['./create']\\\">\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            {{ 'catalog.create-new-facet' | translate }}\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <vdr-dt-column>{{ 'common.code' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.name' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column [expand]=\\\"true\\\">{{ 'catalog.values' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'catalog.visibility' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <ng-template let-facet=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">{{ facet.code }}</td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">{{ facet.name }}</td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-facet-value-chip\\r\\n                *ngFor=\\\"let value of facet.values | slice: 0:displayLimit[facet.id] || 3\\\"\\r\\n                [facetValue]=\\\"value\\\"\\r\\n                [removable]=\\\"false\\\"\\r\\n                [displayFacetName]=\\\"false\\\"\\r\\n            ></vdr-facet-value-chip>\\r\\n            <button\\r\\n                class=\\\"btn btn-sm btn-secondary btn-icon\\\"\\r\\n                *ngIf=\\\"facet.values.length > initialLimit\\\"\\r\\n                (click)=\\\"toggleDisplayLimit(facet)\\\"\\r\\n            >\\r\\n                <ng-container *ngIf=\\\"(displayLimit[facet.id] || 0) < facet.values.length; else collapse\\\">\\r\\n                    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                    {{ facet.values.length - initialLimit }}\\r\\n                </ng-container>\\r\\n                <ng-template #collapse>\\r\\n                    <clr-icon shape=\\\"minus\\\"></clr-icon>\\r\\n                </ng-template>\\r\\n            </button>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-chip>\\r\\n                <ng-container *ngIf=\\\"!facet.isPrivate; else private\\\">{{ 'catalog.public' | translate }}</ng-container>\\r\\n                <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n            </vdr-chip>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['./', facet.id]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-dropdown>\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                    {{ 'common.actions' | translate }}\\r\\n                    <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"delete-button\\\"\\r\\n                        (click)=\\\"deleteFacet(facet.id)\\\"\\r\\n                        [disabled]=\\\"!('DeleteCatalog' | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                styles: [\"td.private{background-color:#f2f3f5}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductDetailService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ApplyFacetDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-apply-facet-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'catalog.add-facets' | translate }}</ng-template>\\r\\n\\r\\n<vdr-facet-value-selector\\r\\n    [facets]=\\\"facets\\\"\\r\\n    (selectedValuesChange)=\\\"selectedValues = $event\\\"\\r\\n></vdr-facet-value-selector>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"selectValues()\\\"\\r\\n        [disabled]=\\\"selectedValues.length === 0\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'catalog.add-facets' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { selector: [{\n            type: ViewChild,\n            args: [FacetValueSelectorComponent]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AssignProductsToChannelDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-assign-products-to-channel-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'catalog.assign-products-to-channel' | translate }}</ng-template>\\r\\n\\r\\n<div class=\\\"flex\\\">\\r\\n    <clr-input-container>\\r\\n        <label>{{ 'common.channel' | translate }}</label>\\r\\n        <vdr-channel-assignment-control\\r\\n            clrInput\\r\\n            [multiple]=\\\"false\\\"\\r\\n            [includeDefaultChannel]=\\\"false\\\"\\r\\n            [formControl]=\\\"selectedChannelIdControl\\\"\\r\\n        ></vdr-channel-assignment-control>\\r\\n    </clr-input-container>\\r\\n    <div class=\\\"flex-spacer\\\"></div>\\r\\n    <clr-input-container>\\r\\n        <label>{{ 'catalog.price-conversion-factor' | translate }}</label>\\r\\n        <input clrInput type=\\\"number\\\" min=\\\"0\\\" max=\\\"99999\\\" [formControl]=\\\"priceFactorControl\\\" />\\r\\n    </clr-input-container>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"channel-price-preview\\\">\\r\\n    <label class=\\\"clr-control-label\\\">{{ 'catalog.channel-price-preview' | translate }}</label>\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{ 'common.name' | translate }}</th>\\r\\n                <th>\\r\\n                    {{\\r\\n                        'catalog.price-in-channel'\\r\\n                            | translate: { channel: currentChannel?.code | channelCodeToLabel | translate }\\r\\n                    }}\\r\\n                </th>\\r\\n                <th>\\r\\n                    <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noSelection\\\">\\r\\n                        {{ 'catalog.price-in-channel' | translate: { channel: selectedChannel?.code } }}\\r\\n                    </ng-template>\\r\\n                    <ng-template #noSelection>\\r\\n                        {{ 'catalog.no-channel-selected' | translate }}\\r\\n                    </ng-template>\\r\\n                </th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            <tr *ngFor=\\\"let row of variantsPreview$ | async\\\">\\r\\n                <td>{{ row.name }}</td>\\r\\n                <td>{{ row.price / 100 | currency: currentChannel?.currencyCode }}</td>\\r\\n                <td>\\r\\n                    <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noChannelSelected\\\">\\r\\n                        {{ row.pricePreview / 100 | currency: selectedChannel?.currencyCode }}\\r\\n                    </ng-template>\\r\\n                    <ng-template #noChannelSelected>\\r\\n                        -\\r\\n                    </ng-template>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </tbody>\\r\\n    </table>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"assign()\\\" [disabled]=\\\"!selectedChannel\\\" class=\\\"btn btn-primary\\\">\\r\\n        <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noSelection\\\">\\r\\n            {{ 'catalog.assign-to-named-channel' | translate: { channelCode: selectedChannel?.code } }}\\r\\n        </ng-template>\\r\\n        <ng-template #noSelection>\\r\\n            {{ 'catalog.no-channel-selected' | translate }}\\r\\n        </ng-template>\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"vdr-channel-assignment-control{min-width:200px}.channel-price-preview{margin-top:24px}.channel-price-preview table.table{margin-top:6px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc2.NotificationService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-flex-row\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <clr-toggle-wrapper *vdrIfPermissions=\\\"'UpdateCatalog'\\\">\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    clrToggle\\r\\n                    name=\\\"enabled\\\"\\r\\n                    [formControl]=\\\"detailForm.get(['product', 'enabled'])\\\"\\r\\n                />\\r\\n                <label>{{ 'common.enabled' | translate }}</label>\\r\\n            </clr-toggle-wrapper>\\r\\n        </div>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"product-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine || !variantsToCreateAreValid()\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"'UpdateCatalog'\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"\\r\\n                    (detailForm.invalid || detailForm.pristine) && !assetsChanged() && !variantAssetsChanged()\\r\\n                \\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"product$ | async as product\\\" (keydown.enter)=\\\"$event.preventDefault()\\\">\\r\\n    <clr-tabs>\\r\\n        <clr-tab>\\r\\n            <button clrTabLink (click)=\\\"navigateToTab('details')\\\">\\r\\n                {{ 'catalog.product-details' | translate }}\\r\\n            </button>\\r\\n            <clr-tab-content *clrIfActive=\\\"(activeTab$ | async) === 'details'\\\">\\r\\n                <div class=\\\"clr-row\\\">\\r\\n                    <div class=\\\"clr-col\\\">\\r\\n                        <section class=\\\"form-block\\\" formGroupName=\\\"product\\\">\\r\\n                            <ng-container *vdrIfMultichannel>\\r\\n                                <vdr-form-item\\r\\n                                    [label]=\\\"'common.channels' | translate\\\"\\r\\n                                    *vdrIfDefaultChannelActive\\r\\n                                >\\r\\n                                    <div class=\\\"flex\\\">\\r\\n                                        <div class=\\\"product-channels\\\">\\r\\n                                            <ng-container *ngFor=\\\"let channel of productChannels$ | async\\\">\\r\\n                                                <vdr-chip\\r\\n                                                    *ngIf=\\\"!isDefaultChannel(channel.code)\\\"\\r\\n                                                    icon=\\\"times-circle\\\"\\r\\n                                                    (iconClick)=\\\"removeFromChannel(channel.id)\\\"\\r\\n                                                >\\r\\n                                                    <vdr-channel-badge\\r\\n                                                        [channelCode]=\\\"channel.code\\\"\\r\\n                                                    ></vdr-channel-badge>\\r\\n                                                    {{ channel.code | channelCodeToLabel }}\\r\\n                                                </vdr-chip>\\r\\n                                            </ng-container>\\r\\n                                        </div>\\r\\n                                        <button class=\\\"btn btn-sm\\\" (click)=\\\"assignToChannel()\\\">\\r\\n                                            <clr-icon shape=\\\"layers\\\"></clr-icon>\\r\\n                                            {{ 'catalog.assign-to-channel' | translate }}\\r\\n                                        </button>\\r\\n                                    </div>\\r\\n                                </vdr-form-item>\\r\\n                            </ng-container>\\r\\n                            <vdr-form-field [label]=\\\"'catalog.product-name' | translate\\\" for=\\\"name\\\">\\r\\n                                <input\\r\\n                                    id=\\\"name\\\"\\r\\n                                    type=\\\"text\\\"\\r\\n                                    formControlName=\\\"name\\\"\\r\\n                                    [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                    (input)=\\\"updateSlug($event.target.value)\\\"\\r\\n                                />\\r\\n                            </vdr-form-field>\\r\\n                            <vdr-form-field\\r\\n                                [label]=\\\"'catalog.slug' | translate\\\"\\r\\n                                for=\\\"slug\\\"\\r\\n                                [errors]=\\\"{ pattern: 'catalog.slug-pattern-error' | translate }\\\"\\r\\n                            >\\r\\n                                <input\\r\\n                                    id=\\\"slug\\\"\\r\\n                                    type=\\\"text\\\"\\r\\n                                    formControlName=\\\"slug\\\"\\r\\n                                    [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                    pattern=\\\"[a-z0-9_-]+\\\"\\r\\n                                />\\r\\n                            </vdr-form-field>\\r\\n                            <vdr-rich-text-editor\\r\\n                                formControlName=\\\"description\\\"\\r\\n                                [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                [label]=\\\"'common.description' | translate\\\"\\r\\n                            ></vdr-rich-text-editor>\\r\\n\\r\\n                            <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                                <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n                                <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n                                    <vdr-custom-field-control\\r\\n                                        *ngIf=\\\"customFieldIsSet(customField.name)\\\"\\r\\n                                        entityName=\\\"Product\\\"\\r\\n                                        [customFieldsFormGroup]=\\\"detailForm.get(['product', 'customFields'])\\\"\\r\\n                                        [customField]=\\\"customField\\\"\\r\\n                                        [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                    ></vdr-custom-field-control>\\r\\n                                </ng-container>\\r\\n                            </section>\\r\\n\\r\\n                            <div class=\\\"facets\\\">\\r\\n                                <vdr-facet-value-chip\\r\\n                                    *ngFor=\\\"let facetValue of facetValues$ | async\\\"\\r\\n                                    [facetValue]=\\\"facetValue\\\"\\r\\n                                    [removable]=\\\"'UpdateCatalog' | hasPermission\\\"\\r\\n                                    (remove)=\\\"removeProductFacetValue(facetValue.id)\\\"\\r\\n                                ></vdr-facet-value-chip>\\r\\n                                <button\\r\\n                                    class=\\\"btn btn-sm btn-secondary\\\"\\r\\n                                    *vdrIfPermissions=\\\"'UpdateCatalog'\\\"\\r\\n                                    (click)=\\\"selectProductFacetValue()\\\"\\r\\n                                >\\r\\n                                    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                                    {{ 'catalog.add-facets' | translate }}\\r\\n                                </button>\\r\\n                            </div>\\r\\n                        </section>\\r\\n                    </div>\\r\\n                    <div class=\\\"clr-col-md-auto\\\">\\r\\n                        <vdr-product-assets\\r\\n                            [assets]=\\\"product.assets\\\"\\r\\n                            [featuredAsset]=\\\"product.featuredAsset\\\"\\r\\n                            (change)=\\\"assetChanges = $event\\\"\\r\\n                        ></vdr-product-assets>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <div *ngIf=\\\"isNew$ | async\\\">\\r\\n                    <h4>{{ 'catalog.product-variants' | translate }}</h4>\\r\\n                    <vdr-generate-product-variants\\r\\n                        (variantsChange)=\\\"createVariantsConfig = $event\\\"\\r\\n                    ></vdr-generate-product-variants>\\r\\n                </div>\\r\\n            </clr-tab-content>\\r\\n        </clr-tab>\\r\\n        <clr-tab *ngIf=\\\"!(isNew$ | async)\\\">\\r\\n            <button clrTabLink (click)=\\\"navigateToTab('variants')\\\">\\r\\n                {{ 'catalog.product-variants' | translate }}\\r\\n            </button>\\r\\n            <clr-tab-content *clrIfActive=\\\"(activeTab$ | async) === 'variants'\\\">\\r\\n                <section class=\\\"form-block\\\">\\r\\n                    <div class=\\\"view-mode\\\">\\r\\n                        <div class=\\\"btn-group btn-sm\\\">\\r\\n                            <button\\r\\n                                class=\\\"btn btn-secondary-outline\\\"\\r\\n                                (click)=\\\"variantDisplayMode = 'card'\\\"\\r\\n                                [class.btn-primary]=\\\"variantDisplayMode === 'card'\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"list\\\"></clr-icon>\\r\\n                                {{ 'catalog.display-variant-cards' | translate }}\\r\\n                            </button>\\r\\n                            <button\\r\\n                                class=\\\"btn\\\"\\r\\n                                (click)=\\\"variantDisplayMode = 'table'\\\"\\r\\n                                [class.btn-primary]=\\\"variantDisplayMode === 'table'\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"table\\\"></clr-icon>\\r\\n                                {{ 'catalog.display-variant-table' | translate }}\\r\\n                            </button>\\r\\n                        </div>\\r\\n                        <div class=\\\"flex-spacer\\\"></div>\\r\\n                        <a\\r\\n                            *vdrIfPermissions=\\\"'UpdateCatalog'\\\"\\r\\n                            [routerLink]=\\\"['./', 'manage-variants']\\\"\\r\\n                            class=\\\"btn btn-secondary btn-sm edit-variants-btn\\\"\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"add-text\\\"></clr-icon>\\r\\n                            {{ 'catalog.manage-variants' | translate }}\\r\\n                        </a>\\r\\n                    </div>\\r\\n\\r\\n                    <vdr-product-variants-table\\r\\n                        *ngIf=\\\"variantDisplayMode === 'table'\\\"\\r\\n                        [variants]=\\\"variants$ | async\\\"\\r\\n                        [optionGroups]=\\\"product.optionGroups\\\"\\r\\n                        [productVariantsFormArray]=\\\"detailForm.get('variants')\\\"\\r\\n                    ></vdr-product-variants-table>\\r\\n                    <vdr-product-variants-list\\r\\n                        *ngIf=\\\"variantDisplayMode === 'card'\\\"\\r\\n                        [variants]=\\\"variants$ | async\\\"\\r\\n                        [facets]=\\\"facets$ | async\\\"\\r\\n                        [optionGroups]=\\\"product.optionGroups\\\"\\r\\n                        [productVariantsFormArray]=\\\"detailForm.get('variants')\\\"\\r\\n                        [taxCategories]=\\\"taxCategories$ | async\\\"\\r\\n                        [customFields]=\\\"customVariantFields\\\"\\r\\n                        [customOptionFields]=\\\"customOptionFields\\\"\\r\\n                        [activeLanguage]=\\\"languageCode$ | async\\\"\\r\\n                        (assetChange)=\\\"variantAssetChange($event)\\\"\\r\\n                        (updateProductOption)=\\\"updateProductOption($event)\\\"\\r\\n                        (selectionChange)=\\\"selectedVariantIds = $event\\\"\\r\\n                        (selectFacetValueClick)=\\\"selectVariantFacetValue($event)\\\"\\r\\n                    ></vdr-product-variants-list>\\r\\n                </section>\\r\\n            </clr-tab-content>\\r\\n        </clr-tab>\\r\\n    </clr-tabs>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host ::ng-deep trix-toolbar{top:24px}vdr-action-bar clr-toggle-wrapper{margin-top:12px}.group-name{padding-right:6px}.view-mode{display:flex;justify-content:flex-end}.edit-variants-btn{margin-top:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ActivatedRoute }, { type: ɵngcc1.Router }, { type: ɵngcc2.ServerConfigService }, { type: ProductDetailService }, { type: ɵngcc3.FormBuilder }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.DataService }, { type: ɵngcc4.Location }, { type: ɵngcc0.ChangeDetectorRef }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductSearchInputComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-search-input',\n                template: \"<ng-select\\r\\n    [addTag]=\\\"true\\\"\\r\\n    [placeholder]=\\\"'catalog.search-product-name-or-code' | translate\\\"\\r\\n    [items]=\\\"facetValueResults\\\"\\r\\n    [searchFn]=\\\"filterFacetResults\\\"\\r\\n    [hideSelected]=\\\"true\\\"\\r\\n    [multiple]=\\\"true\\\"\\r\\n    [markFirst]=\\\"false\\\"\\r\\n    (change)=\\\"onSelectChange($event)\\\"\\r\\n    #selectComponent\\r\\n>\\r\\n    <ng-template ng-header-tmp>\\r\\n        <div\\r\\n            class=\\\"search-header\\\"\\r\\n            *ngIf=\\\"selectComponent.searchTerm\\\"\\r\\n            [class.selected]=\\\"isSearchHeaderSelected()\\\"\\r\\n            (click)=\\\"selectComponent.selectTag()\\\"\\r\\n        >\\r\\n            {{ 'catalog.search-for-term' | translate }}: {{ selectComponent.searchTerm }}\\r\\n        </div>\\r\\n    </ng-template>\\r\\n    <ng-template ng-label-tmp let-item=\\\"item\\\" let-clear=\\\"clear\\\">\\r\\n        <ng-container *ngIf=\\\"item.facetValue\\\">\\r\\n            <vdr-facet-value-chip\\r\\n                [facetValue]=\\\"item.facetValue\\\"\\r\\n                [removable]=\\\"true\\\"\\r\\n                (remove)=\\\"clear(item)\\\"\\r\\n            ></vdr-facet-value-chip>\\r\\n        </ng-container>\\r\\n        <ng-container *ngIf=\\\"!item.facetValue\\\">\\r\\n            <vdr-chip [icon]=\\\"'times'\\\" (iconClick)=\\\"clear(item)\\\">\\\"{{ item.label }}\\\"</vdr-chip>\\r\\n        </ng-container>\\r\\n    </ng-template>\\r\\n    <ng-template ng-option-tmp let-item=\\\"item\\\" let-index=\\\"index\\\" let-search=\\\"searchTerm\\\">\\r\\n        <ng-container *ngIf=\\\"item.facetValue\\\">\\r\\n            <vdr-facet-value-chip [facetValue]=\\\"item.facetValue\\\" [removable]=\\\"false\\\"></vdr-facet-value-chip>\\r\\n        </ng-container>\\r\\n    </ng-template>\\r\\n</ng-select>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                providers: [{ provide: SELECTION_MODEL_FACTORY, useValue: ɵ0 }],\n                styles: [\":host{margin-top:6px;display:block;width:100%}:host ::ng-deep .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{background:0 0;margin:0}:host ::ng-deep .ng-dropdown-panel-items div.ng-option:last-child{display:none}:host ::ng-deep .ng-dropdown-panel .ng-dropdown-header{border:none;padding:0}:host ::ng-deep .ng-select.ng-select-multiple .ng-select-container .ng-value-container{padding:0}:host ::ng-deep .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{padding-left:8px}ng-select{width:100%;min-width:300px;margin-right:12px}.search-header{padding:8px 10px;border-bottom:1px solid #f2f3f5;cursor:pointer}.search-header.selected,.search-header:hover{background-color:#f2f3f5}\"]\n            }]\n    }], function () { return []; }, { searchTermChange: [{\n            type: Output\n        }], facetValueChange: [{\n            type: Output\n        }], facetValueResults: [{\n            type: Input\n        }], selectComponent: [{\n            type: ViewChild,\n            args: ['selectComponent', { static: true }]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-products-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left [grow]=\\\"true\\\">\\r\\n        <div class=\\\"search-form\\\">\\r\\n            <vdr-product-search-input\\r\\n                #productSearchInputComponent\\r\\n                [facetValueResults]=\\\"facetValues$ | async\\\"\\r\\n                (searchTermChange)=\\\"setSearchTerm($event)\\\"\\r\\n                (facetValueChange)=\\\"setFacetValueIds($event)\\\"\\r\\n            ></vdr-product-search-input>\\r\\n            <vdr-dropdown class=\\\"search-settings-menu\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                    <clr-icon shape=\\\"cog\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"rebuildSearchIndex()\\\"\\r\\n                        [disabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                    >\\r\\n                        {{ 'catalog.rebuild-search-index' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n        <clr-checkbox-wrapper>\\r\\n            <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"groupByProduct\\\" />\\r\\n            <label>{{ 'catalog.group-by-product' | translate }}</label>\\r\\n        </clr-checkbox-wrapper>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"product-list\\\"></vdr-action-bar-items>\\r\\n        <a class=\\\"btn btn-primary\\\" [routerLink]=\\\"['./create']\\\" *vdrIfPermissions=\\\"'CreateCatalog'\\\">\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            <span class=\\\"full-label\\\">{{ 'catalog.create-new-product' | translate }}</span>\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <ng-template let-result=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <div class=\\\"image-placeholder\\\">\\r\\n                <img\\r\\n                    *ngIf=\\\"\\r\\n                        groupByProduct\\r\\n                            ? result.productAsset\\r\\n                            : result.productVariantAsset || result.productAsset as asset;\\r\\n                        else imagePlaceholder\\r\\n                    \\\"\\r\\n                    [src]=\\\"asset | assetPreview:'tiny'\\\"\\r\\n                />\\r\\n                <ng-template #imagePlaceholder>\\r\\n                    <div class=\\\"placeholder\\\"><clr-icon shape=\\\"image\\\" size=\\\"48\\\"></clr-icon></div>\\r\\n                </ng-template>\\r\\n            </div>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            {{ groupByProduct ? result.productName : result.productVariantName }}\\r\\n        </td>\\r\\n        <td class=\\\"align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <vdr-chip *ngIf=\\\"!result.enabled\\\">{{ 'common.disabled' | translate }}</vdr-chip>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['./', result.productId]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <vdr-dropdown>\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                    {{ 'common.actions' | translate }}\\r\\n                    <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"delete-button\\\"\\r\\n                        (click)=\\\"deleteProduct(result.productId)\\\"\\r\\n                        [disabled]=\\\"!('DeleteCatalog' | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                styles: [\".image-placeholder{width:50px;height:50px;background-color:#f2f3f5}.image-placeholder .placeholder{text-align:center;color:#bfc3cc}.search-form{display:flex;align-items:center;width:100%;margin-bottom:6px}.search-input{min-width:300px}@media screen and (max-width:768px){.search-input{min-width:100px}}.search-settings-menu{margin:0 12px}td.disabled{background-color:#f2f3f5}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.JobQueueService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }]; }, { productSearchInput: [{\n            type: ViewChild,\n            args: ['productSearchInputComponent', { static: true }]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductVariantsEditorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-editor',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-right>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            (click)=\\\"save()\\\"\\r\\n            [disabled]=\\\"!formValueChanged || getVariantsToAdd().length === 0\\\"\\r\\n        >\\r\\n            {{ 'common.add-new-variants' | translate: { count: getVariantsToAdd().length } }}\\r\\n        </button>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<div *ngFor=\\\"let group of optionGroups\\\" class=\\\"option-groups\\\">\\r\\n    <div class=\\\"name\\\">\\r\\n        <label>{{ 'catalog.option' | translate }}</label>\\r\\n        <input\\r\\n            clrInput\\r\\n            [(ngModel)]=\\\"group.name\\\"\\r\\n            name=\\\"name\\\"\\r\\n            [readonly]=\\\"!group.isNew\\\"\\r\\n        />\\r\\n    </div>\\r\\n    <div class=\\\"values\\\">\\r\\n        <label>{{ 'catalog.option-values' | translate }}</label>\\r\\n        <vdr-option-value-input\\r\\n            #optionValueInputComponent\\r\\n            [(ngModel)]=\\\"group.values\\\"\\r\\n            (ngModelChange)=\\\"generateVariants()\\\"\\r\\n            [groupName]=\\\"group.name\\\"\\r\\n            [disabled]=\\\"group.name === ''\\\"\\r\\n        ></vdr-option-value-input>\\r\\n    </div>\\r\\n</div>\\r\\n<button class=\\\"btn btn-primary-outline btn-sm\\\" (click)=\\\"addOption()\\\" *ngIf=\\\"product.variants.length === 1\\\">\\r\\n    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n    {{ 'catalog.add-option' | translate }}\\r\\n</button>\\r\\n\\r\\n<div class=\\\"variants-preview\\\">\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n        <tr>\\r\\n            <th>{{ 'common.create' | translate }}</th>\\r\\n            <th>{{ 'catalog.variant' | translate }}</th>\\r\\n            <th>{{ 'catalog.sku' | translate }}</th>\\r\\n            <th>{{ 'catalog.price' | translate }}</th>\\r\\n            <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n            <th></th>\\r\\n        </tr>\\r\\n        </thead>\\r\\n        <tr\\r\\n            *ngFor=\\\"let variant of variants\\\"\\r\\n            [class.disabled]=\\\"!variantFormValues[variant.id].enabled || variantFormValues[variant.id].existing\\\"\\r\\n        >\\r\\n            <td>\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    *ngIf=\\\"!variantFormValues[variant.id].existing\\\"\\r\\n                    [(ngModel)]=\\\"variantFormValues[variant.id].enabled\\\"\\r\\n                    name=\\\"enabled\\\"\\r\\n                    clrCheckbox\\r\\n                    (ngModelChange)=\\\"formValueChanged = true\\\"\\r\\n                />\\r\\n            </td>\\r\\n            <td>\\r\\n                {{ getVariantName(variant) }}\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container *ngIf=\\\"!variantFormValues[variant.id].existing\\\">\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].sku\\\"\\r\\n                        [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                        name=\\\"sku\\\"\\r\\n                        required\\r\\n                        (ngModelChange)=\\\"onFormChanged(variantFormValues[variant.id])\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n                <span *ngIf=\\\"variantFormValues[variant.id].existing\\\">{{ variantFormValues[variant.id].sku }}</span>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container *ngIf=\\\"!variantFormValues[variant.id].existing\\\">\\r\\n                    <vdr-currency-input\\r\\n                        clrInput\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].price\\\"\\r\\n                        name=\\\"price\\\"\\r\\n                        [currencyCode]=\\\"currencyCode\\\"\\r\\n                        (ngModelChange)=\\\"onFormChanged(variantFormValues[variant.id])\\\"\\r\\n                    ></vdr-currency-input>\\r\\n                </clr-input-container>\\r\\n                <span *ngIf=\\\"variantFormValues[variant.id].existing\\\">{{ variantFormValues[variant.id].price / 100 | currency: currencyCode }}</span>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container *ngIf=\\\"!variantFormValues[variant.id].existing\\\">\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"number\\\"\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].stock\\\"\\r\\n                        name=\\\"stock\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        step=\\\"1\\\"\\r\\n                        (ngModelChange)=\\\"onFormChanged(variantFormValues[variant.id])\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n                <span *ngIf=\\\"variantFormValues[variant.id].existing\\\">{{ variantFormValues[variant.id].stock }}</span>\\r\\n            </td>\\r\\n            <td>\\r\\n                <vdr-dropdown *ngIf=\\\"variantFormValues[variant.id].productVariantId as productVariantId\\\">\\r\\n                    <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                        <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n                    </button>\\r\\n                    <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                        <button\\r\\n                            type=\\\"button\\\"\\r\\n                            class=\\\"delete-button\\\"\\r\\n                            (click)=\\\"deleteVariant(productVariantId)\\\"\\r\\n                            vdrDropdownItem\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                            {{ 'common.delete' | translate }}\\r\\n                        </button>\\r\\n                    </vdr-dropdown-menu>\\r\\n\\r\\n                </vdr-dropdown>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </table>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.Default,\n                styles: [\".option-groups{display:flex}.option-groups:first-of-type{margin-top:24px}.values{flex:1;margin:0 6px}.variants-preview tr.disabled td{background-color:#fafafa;color:#97979a}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.DataService }, { type: ProductDetailService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AssetResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CollectionResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FacetResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc1.Router }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductVariantsResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CollectionTreeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-tree',\n                template: \"<vdr-collection-tree-node\\r\\n    *ngIf=\\\"collectionTree\\\"\\r\\n    cdkDropListGroup\\r\\n    [expandAll]=\\\"expandAll\\\"\\r\\n    [collectionTree]=\\\"collectionTree\\\"\\r\\n    [activeCollectionId]=\\\"activeCollectionId\\\"\\r\\n></vdr-collection-tree-node>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { expandAll: [{\n            type: Input\n        }], rearrange: [{\n            type: Output\n        }], deleteCollection: [{\n            type: Output\n        }], collections: [{\n            type: Input\n        }], activeCollectionId: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CollectionTreeNodeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-tree-node',\n                template: \"<div\\r\\n    cdkDropList\\r\\n    class=\\\"tree-node\\\"\\r\\n    #dropList\\r\\n    [cdkDropListData]=\\\"collectionTree\\\"\\r\\n    [cdkDropListDisabled]=\\\"!(hasUpdatePermission$ | async)\\\"\\r\\n    (cdkDropListDropped)=\\\"drop($event)\\\"\\r\\n>\\r\\n    <div\\r\\n        class=\\\"collection\\\"\\r\\n        [class.private]=\\\"collection.isPrivate\\\"\\r\\n        *ngFor=\\\"let collection of collectionTree.children; index as i; trackBy: trackByFn\\\"\\r\\n        cdkDrag\\r\\n        [cdkDragData]=\\\"collection\\\"\\r\\n    >\\r\\n        <div\\r\\n            class=\\\"collection-detail\\\"\\r\\n            [ngClass]=\\\"'depth-' + depth\\\"\\r\\n            [class.active]=\\\"collection.id === activeCollectionId\\\"\\r\\n        >\\r\\n            <div class=\\\"name\\\">\\r\\n                <button\\r\\n                    class=\\\"icon-button folder-button\\\"\\r\\n                    [disabled]=\\\"expandAll\\\"\\r\\n                    *ngIf=\\\"collection.children?.length; else folderSpacer\\\"\\r\\n                    (click)=\\\"collection.expanded = !collection.expanded\\\"\\r\\n                >\\r\\n                    <clr-icon shape=\\\"folder\\\" *ngIf=\\\"!collection.expanded && !expandAll\\\"></clr-icon>\\r\\n                    <clr-icon shape=\\\"folder-open\\\" *ngIf=\\\"collection.expanded || expandAll\\\"></clr-icon>\\r\\n                </button>\\r\\n                <ng-template #folderSpacer>\\r\\n                    <div class=\\\"folder-button-spacer\\\"></div>\\r\\n                </ng-template>\\r\\n                {{ collection.name }}\\r\\n            </div>\\r\\n            <div class=\\\"flex-spacer\\\"></div>\\r\\n            <vdr-chip *ngIf=\\\"collection.isPrivate\\\">{{ 'catalog.private' | translate }}</vdr-chip>\\r\\n            <a\\r\\n                class=\\\"btn btn-link btn-sm\\\"\\r\\n                [routerLink]=\\\"['./', { contents: collection.id }]\\\"\\r\\n                queryParamsHandling=\\\"preserve\\\"\\r\\n            >\\r\\n                <clr-icon shape=\\\"view-list\\\"></clr-icon>\\r\\n                {{ 'catalog.view-contents' | translate }}\\r\\n            </a>\\r\\n            <a class=\\\"btn btn-link btn-sm\\\" [routerLink]=\\\"['/catalog/collections/', collection.id]\\\">\\r\\n                <clr-icon shape=\\\"edit\\\"></clr-icon>\\r\\n                {{ 'common.edit' | translate }}\\r\\n            </a>\\r\\n            <div class=\\\"drag-handle\\\" cdkDragHandle *vdrIfPermissions=\\\"'UpdateCatalog'\\\">\\r\\n                <clr-icon shape=\\\"drag-handle\\\" size=\\\"24\\\"></clr-icon>\\r\\n            </div>\\r\\n            <vdr-dropdown>\\r\\n                <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                    <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <a\\r\\n                        class=\\\"dropdown-item\\\"\\r\\n                        [routerLink]=\\\"['./', 'create', { parentId: collection.id }]\\\"\\r\\n                        *vdrIfPermissions=\\\"'CreateCatalog'\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                        {{ 'catalog.create-new-collection' | translate }}\\r\\n                    </a>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"i === 0 || !(hasUpdatePermission$ | async)\\\"\\r\\n                        (click)=\\\"moveUp(collection, i)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"caret up\\\"></clr-icon>\\r\\n                        {{ 'catalog.move-up' | translate }}\\r\\n                    </button>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"\\r\\n                            i === collectionTree.children.length - 1 || !(hasUpdatePermission$ | async)\\r\\n                        \\\"\\r\\n                        (click)=\\\"moveDown(collection, i)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                        {{ 'catalog.move-down' | translate }}\\r\\n                    </button>\\r\\n                    <h4 class=\\\"dropdown-header\\\">{{ 'catalog.move-to' | translate }}</h4>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        *ngFor=\\\"let item of getMoveListItems(collection)\\\"\\r\\n                        (click)=\\\"move(collection, item.id)\\\"\\r\\n                        [disabled]=\\\"!(hasUpdatePermission$ | async)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"child-arrow\\\"></clr-icon>\\r\\n                        {{ item.path }}\\r\\n                    </button>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        class=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"delete(collection.id)\\\"\\r\\n                        [disabled]=\\\"!(hasDeletePermission$ | async)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n        <vdr-collection-tree-node\\r\\n            *ngIf=\\\"collection.expanded || expandAll\\\"\\r\\n            [expandAll]=\\\"expandAll\\\"\\r\\n            [collectionTree]=\\\"collection\\\"\\r\\n            [activeCollectionId]=\\\"activeCollectionId\\\"\\r\\n        ></vdr-collection-tree-node>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}.collection{background-color:#fff;font-size:.65rem;color:rgba(0,0,0,.87);transition:border-left-color .2s;margin-bottom:2px;border-left:2px solid transparent}.collection.private{background-color:#f2f3f5}.collection .collection-detail{padding:6px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #f2f3f5}.collection .collection-detail.active{background-color:#f2f3f5}.collection .collection-detail.depth-1{padding-left:36px}.collection .collection-detail.depth-2{padding-left:60px}.collection .collection-detail.depth-3{padding-left:84px}.collection .collection-detail.depth-4{padding-left:108px}.collection .collection-detail .folder-button-spacer{display:inline-block;width:28px}.tree-node{display:block;background:#fff;overflow:hidden}.tree-node.cdk-drop-list-dragging>.collection{border-left-color:#9adbf3}.drag-placeholder{min-height:120px;background-color:#bfc3cc;transition:transform 250ms cubic-bezier(0,0,.2,1)}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating,.example-list.cdk-drop-list-dragging .tree-node:not(.cdk-drag-placeholder){transition:transform 250ms cubic-bezier(0,0,.2,1)}\"]\n            }]\n    }], function () { return [{ type: CollectionTreeNodeComponent, decorators: [{\n                type: SkipSelf\n            }, {\n                type: Optional\n            }] }, { type: CollectionTreeComponent }, { type: ɵngcc2.DataService }]; }, { expandAll: [{\n            type: Input\n        }], collectionTree: [{\n            type: Input\n        }], activeCollectionId: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GenerateProductVariantsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-generate-product-variants',\n                template: \"<div *ngFor=\\\"let group of optionGroups\\\" class=\\\"option-groups\\\">\\r\\n    <div class=\\\"name\\\">\\r\\n        <label>{{ 'catalog.option' | translate }}</label>\\r\\n        <input\\r\\n            placeholder=\\\"e.g. Size\\\"\\r\\n            clrInput\\r\\n            [(ngModel)]=\\\"group.name\\\"\\r\\n            name=\\\"name\\\"\\r\\n            required\\r\\n            (keydown.enter)=\\\"handleEnter($event, optionValueInputComponent)\\\"\\r\\n        />\\r\\n    </div>\\r\\n    <div class=\\\"values\\\">\\r\\n        <label>{{ 'catalog.option-values' | translate }}</label>\\r\\n        <vdr-option-value-input\\r\\n            #optionValueInputComponent\\r\\n            [(ngModel)]=\\\"group.values\\\"\\r\\n            (ngModelChange)=\\\"generateVariants()\\\"\\r\\n            [groupName]=\\\"group.name\\\"\\r\\n            [disabled]=\\\"group.name === ''\\\"\\r\\n        ></vdr-option-value-input>\\r\\n    </div>\\r\\n    <div class=\\\"remove-group\\\">\\r\\n        <button\\r\\n            class=\\\"btn btn-icon btn-warning-outline\\\"\\r\\n            [title]=\\\"'catalog.remove-option' | translate\\\"\\r\\n            (click)=\\\"removeOption(group.name)\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n<button class=\\\"btn btn-primary-outline btn-sm\\\" (click)=\\\"addOption()\\\">\\r\\n    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n    {{ 'catalog.add-option' | translate }}\\r\\n</button>\\r\\n\\r\\n<div class=\\\"variants-preview\\\">\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th *ngIf=\\\"1 < variants.length\\\">{{ 'common.create' | translate }}</th>\\r\\n                <th *ngIf=\\\"1 < variants.length\\\">{{ 'catalog.variant' | translate }}</th>\\r\\n                <th>{{ 'catalog.sku' | translate }}</th>\\r\\n                <th>{{ 'catalog.price' | translate }}</th>\\r\\n                <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tr\\r\\n            *ngFor=\\\"let variant of variants; trackBy: trackByFn\\\"\\r\\n            [class.disabled]=\\\"!variantFormValues[variant.id].enabled\\\"\\r\\n        >\\r\\n            <td *ngIf=\\\"1 < variants.length\\\">\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    (change)=\\\"onFormChange()\\\"\\r\\n                    [(ngModel)]=\\\"variantFormValues[variant.id].enabled\\\"\\r\\n                    clrCheckbox\\r\\n                />\\r\\n            </td>\\r\\n            <td *ngIf=\\\"1 < variants.length\\\">\\r\\n                {{ variant.values.join(' ') }}\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        (change)=\\\"onFormChange()\\\"\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].sku\\\"\\r\\n                        [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <vdr-currency-input\\r\\n                        clrInput\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].price\\\"\\r\\n                        (ngModelChange)=\\\"onFormChange()\\\"\\r\\n                        [currencyCode]=\\\"currencyCode\\\"\\r\\n                    ></vdr-currency-input>\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"number\\\"\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].stock\\\"\\r\\n                        (change)=\\\"onFormChange()\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        step=\\\"1\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </table>\\r\\n</div>\\r\\n\",\n                styles: [\":host{display:block;margin-bottom:120px}.option-groups{display:flex}.values{flex:1;margin:0 6px}.remove-group{padding-top:18px}.variants-preview tr.disabled td{background-color:#fafafa;color:#97979a}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }]; }, { variantsChange: [{\n            type: Output\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OptionValueInputComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-option-value-input',\n                template: \"<div class=\\\"input-wrapper\\\" [class.focus]=\\\"isFocussed\\\" (click)=\\\"textArea.focus()\\\">\\r\\n    <div class=\\\"chips\\\" *ngIf=\\\"0 < options.length\\\">\\r\\n        <vdr-chip\\r\\n            *ngFor=\\\"let option of options; last as isLast\\\"\\r\\n            [icon]=\\\"option.locked ? 'lock' : 'times'\\\"\\r\\n            [class.selected]=\\\"isLast && lastSelected\\\"\\r\\n            [class.locked]=\\\"option.locked\\\"\\r\\n            [colorFrom]=\\\"groupName\\\"\\r\\n            (iconClick)=\\\"removeOption(option)\\\"\\r\\n        >\\r\\n            {{ option.name }}\\r\\n        </vdr-chip>\\r\\n    </div>\\r\\n    <textarea\\r\\n        #textArea\\r\\n        (keyup)=\\\"handleKey($event)\\\"\\r\\n        (focus)=\\\"isFocussed = true\\\"\\r\\n        (blur)=\\\"handleBlur()\\\"\\r\\n        [(ngModel)]=\\\"input\\\"\\r\\n        [disabled]=\\\"disabled\\\"\\r\\n    ></textarea>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.Default,\n                providers: [OPTION_VALUE_INPUT_VALUE_ACCESSOR],\n                styles: [\".input-wrapper{background-color:#fff;border-radius:3px!important;border:1px solid #bfc3cc!important;cursor:text}.input-wrapper.focus{border-color:#13b7f3!important;box-shadow:0 0 1px 1px #e3f6fc}.input-wrapper .chips{padding:5px}.input-wrapper textarea{border:none;width:100%;height:24px;margin-top:3px;padding:0 6px}.input-wrapper textarea:focus{outline:0}.input-wrapper textarea:disabled{background-color:#fafafa}vdr-chip ::ng-deep .wrapper{margin:0 3px}vdr-chip.locked{opacity:.8}vdr-chip.selected ::ng-deep .wrapper{border-color:#ff9f07!important;box-shadow:0 0 1px 1px #ffb74d;opacity:.6}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { groupName: [{\n            type: Input\n        }], textArea: [{\n            type: ViewChild,\n            args: ['textArea', { static: true }]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductAssetsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-assets',\n                template: \"<div class=\\\"card\\\" *ngIf=\\\"!compact; else compactView\\\">\\r\\n    <div class=\\\"card-img\\\">\\r\\n        <div class=\\\"featured-asset\\\">\\r\\n            <img\\r\\n                *ngIf=\\\"featuredAsset\\\"\\r\\n                [src]=\\\"featuredAsset | assetPreview:'small'\\\"\\r\\n                (click)=\\\"previewAsset(featuredAsset)\\\"\\r\\n            />\\r\\n            <div class=\\\"placeholder\\\" *ngIf=\\\"!featuredAsset\\\">\\r\\n                <clr-icon shape=\\\"image\\\" size=\\\"128\\\"></clr-icon>\\r\\n                <div>{{ 'catalog.no-featured-asset' | translate }}</div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\"><ng-container *ngTemplateOutlet=\\\"assetList\\\"></ng-container></div>\\r\\n    <div class=\\\"card-footer\\\" *vdrIfPermissions=\\\"'UpdateCatalog'\\\">\\r\\n        <button class=\\\"btn\\\" (click)=\\\"selectAssets()\\\">\\r\\n            <clr-icon shape=\\\"attachment\\\"></clr-icon>\\r\\n            {{ 'asset.add-asset' | translate }}\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template #compactView>\\r\\n    <div class=\\\"featured-asset compact\\\">\\r\\n        <img\\r\\n            *ngIf=\\\"featuredAsset\\\"\\r\\n            [src]=\\\"featuredAsset | assetPreview:'thumb'\\\"\\r\\n            (click)=\\\"previewAsset(featuredAsset)\\\"\\r\\n        />\\r\\n\\r\\n        <div class=\\\"placeholder\\\" *ngIf=\\\"!featuredAsset\\\"><clr-icon shape=\\\"image\\\" size=\\\"150\\\"></clr-icon></div>\\r\\n    </div>\\r\\n    <ng-container *ngTemplateOutlet=\\\"assetList\\\"></ng-container>\\r\\n    <button\\r\\n        *vdrIfPermissions=\\\"'UpdateCatalog'\\\"\\r\\n        class=\\\"compact-select btn btn-icon btn-sm btn-block\\\"\\r\\n        [title]=\\\"'asset.add-asset' | translate\\\"\\r\\n        (click)=\\\"selectAssets()\\\"\\r\\n    >\\r\\n        <clr-icon shape=\\\"attachment\\\"></clr-icon>\\r\\n        {{ 'asset.add-asset' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\\r\\n<ng-template #assetList>\\r\\n    <div class=\\\"all-assets\\\" [class.compact]=\\\"compact\\\" cdkDropListGroup #dlg>\\r\\n        <div\\r\\n            cdkDropList\\r\\n            #dl\\r\\n            [cdkDropListDisabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n            [cdkDropListEnterPredicate]=\\\"dropListEnterPredicate\\\"\\r\\n            (cdkDropListDropped)=\\\"dropListDropped()\\\"\\r\\n        ></div>\\r\\n        <div\\r\\n            *ngFor=\\\"let asset of assets\\\"\\r\\n            cdkDropList\\r\\n            [cdkDropListDisabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n            [cdkDropListEnterPredicate]=\\\"dropListEnterPredicate\\\"\\r\\n            (cdkDropListDropped)=\\\"dropListDropped()\\\"\\r\\n        >\\r\\n            <vdr-dropdown cdkDrag (cdkDragMoved)=\\\"dragMoved($event)\\\">\\r\\n                <div\\r\\n                    class=\\\"asset-thumb\\\"\\r\\n                    vdrDropdownTrigger\\r\\n                    [class.featured]=\\\"isFeatured(asset)\\\"\\r\\n                    [title]=\\\"\\\"\\r\\n                    tabindex=\\\"0\\\"\\r\\n                >\\r\\n                    <img [src]=\\\"asset | assetPreview:'tiny'\\\" />\\r\\n                </div>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button type=\\\"button\\\" vdrDropdownItem (click)=\\\"previewAsset(asset)\\\">\\r\\n                        {{ 'asset.preview' | translate }}\\r\\n                    </button>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        [disabled]=\\\"isFeatured(asset) || !('UpdateCatalog' | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"setAsFeatured(asset)\\\"\\r\\n                    >\\r\\n                        {{ 'asset.set-as-featured-asset' | translate }}\\r\\n                    </button>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"remove-asset\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                        (click)=\\\"removeAsset(asset)\\\"\\r\\n                    >\\r\\n                        {{ 'asset.remove-asset' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n    </div>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{width:340px;display:block}:host.compact{width:162px}.placeholder{text-align:center;color:#bfc3cc}.featured-asset{text-align:center;background:#f2f3f5;padding:6px;cursor:pointer}.featured-asset.compact{width:100%;min-height:40px;padding:6px;position:relative}.featured-asset .compact-select{position:absolute;bottom:6px;right:6px;margin:0}.all-assets{display:flex;flex-wrap:wrap}.all-assets .asset-thumb{margin:3px;padding:0;border:2px solid #f2f3f5;cursor:pointer}.all-assets .asset-thumb.featured{border-color:#13b7f3}.all-assets .remove-asset{color:#ff9f07}.all-assets.compact .asset-thumb{margin:1px;border-width:1px}.cdk-drag-preview{display:flex;align-items:center;justify-content:center;width:50px;background-color:#fafafa;opacity:.9;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:.8;width:60px;height:50px}.cdk-drag-placeholder .asset-thumb{background-color:#bfc3cc;height:100%;width:54px}.cdk-drag-placeholder img{display:none}.all-assets.compact .cdk-drag-placeholder,.all-assets.compact .cdk-drag-placeholder .asset-thumb{width:50px}.cdk-drag-animating{transition:transform 250ms cubic-bezier(0,0,.2,1)}.example-box:last-child{border:none}.all-assets.cdk-drop-list-dragging vdr-dropdown:not(.cdk-drag-placeholder){transition:transform 250ms cubic-bezier(0,0,.2,1)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.ModalService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc10.ViewportRuler }]; }, { assets: [{\n            type: Input\n        }], compact: [{\n            type: HostBinding,\n            args: ['class.compact']\n        }, {\n            type: Input\n        }], change: [{\n            type: Output\n        }], featuredAsset: [{\n            type: Input\n        }], listGroup: [{\n            type: ViewChild,\n            args: ['dlg', { static: false, read: CdkDropListGroup }]\n        }], placeholder: [{\n            type: ViewChild,\n            args: ['dl', { static: false, read: CdkDropList }]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(UpdateProductOptionDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-update-product-option-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'catalog.update-product-option' | translate }}</ng-template>\\r\\n<vdr-form-field [label]=\\\"'catalog.option-name' | translate\\\" for=\\\"name\\\">\\r\\n    <input\\r\\n        id=\\\"name\\\"\\r\\n        type=\\\"text\\\"\\r\\n        #nameInput=\\\"ngModel\\\"\\r\\n        [(ngModel)]=\\\"name\\\"\\r\\n        required\\r\\n        (input)=\\\"updateCode($event.target.value)\\\"\\r\\n    />\\r\\n</vdr-form-field>\\r\\n<vdr-form-field [label]=\\\"'common.code' | translate\\\" for=\\\"code\\\">\\r\\n    <input id=\\\"code\\\" type=\\\"text\\\" #codeInput=\\\"ngModel\\\" required [(ngModel)]=\\\"code\\\" pattern=\\\"[a-z0-9_-]+\\\" />\\r\\n</vdr-form-field>\\r\\n<section *ngIf=\\\"customFields.length\\\">\\r\\n    <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n    <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n        <vdr-custom-field-control\\r\\n            *ngIf=\\\"customFieldsForm.get(customField.name)\\\"\\r\\n            entityName=\\\"ProductOption\\\"\\r\\n            [customFieldsFormGroup]=\\\"customFieldsForm\\\"\\r\\n            [customField]=\\\"customField\\\"\\r\\n            [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n        ></vdr-custom-field-control>\\r\\n    </ng-container>\\r\\n</section>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"update()\\\"\\r\\n        [disabled]=\\\"nameInput.invalid || codeInput.invalid || (nameInput.pristine && codeInput.pristine && customFieldsForm.pristine)\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'catalog.update-product-option' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductVariantsListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-list',\n                template: \"<div class=\\\"variants-list\\\">\\r\\n    <div\\r\\n        class=\\\"variant-container card\\\"\\r\\n        *ngFor=\\\"let variant of variants; let i = index\\\"\\r\\n        [class.disabled]=\\\"!formArray.get([i, 'enabled'])?.value\\\"\\r\\n    >\\r\\n        <ng-container *ngIf=\\\"formArray.at(i)\\\" [formGroup]=\\\"formArray.at(i)\\\">\\r\\n            <div class=\\\"card-block header-row\\\">\\r\\n                <div class=\\\"details\\\">\\r\\n                    <vdr-title-input class=\\\"sku\\\" [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\">\\r\\n                        <clr-input-container>\\r\\n                            <input\\r\\n                                clrInput\\r\\n                                type=\\\"text\\\"\\r\\n                                formControlName=\\\"sku\\\"\\r\\n                                [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                            />\\r\\n                        </clr-input-container>\\r\\n                    </vdr-title-input>\\r\\n                    <vdr-title-input class=\\\"name\\\" [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\">\\r\\n                        <clr-input-container>\\r\\n                            <input\\r\\n                                clrInput\\r\\n                                type=\\\"text\\\"\\r\\n                                formControlName=\\\"name\\\"\\r\\n                                [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                [placeholder]=\\\"'common.name' | translate\\\"\\r\\n                            />\\r\\n                        </clr-input-container>\\r\\n                    </vdr-title-input>\\r\\n                </div>\\r\\n                <div class=\\\"right-controls\\\">\\r\\n                    <clr-toggle-wrapper *vdrIfPermissions=\\\"'UpdateCatalog'\\\">\\r\\n                        <input type=\\\"checkbox\\\" clrToggle name=\\\"enabled\\\" formControlName=\\\"enabled\\\" />\\r\\n                        <label>{{ 'common.enabled' | translate }}</label>\\r\\n                    </clr-toggle-wrapper>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card-block\\\">\\r\\n                <div class=\\\"variant-body\\\">\\r\\n                    <div class=\\\"assets\\\">\\r\\n                        <vdr-product-assets\\r\\n                            [compact]=\\\"true\\\"\\r\\n                            [assets]=\\\"variant.assets\\\"\\r\\n                            [featuredAsset]=\\\"variant.featuredAsset\\\"\\r\\n                            (change)=\\\"onAssetChange(variant.id, $event)\\\"\\r\\n                        ></vdr-product-assets>\\r\\n                    </div>\\r\\n                    <div class=\\\"variant-form-inputs\\\">\\r\\n                        <div class=\\\"standard-fields\\\">\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <div class=\\\"tax-category\\\">\\r\\n                                    <clr-select-container *vdrIfPermissions=\\\"'UpdateCatalog'; else taxCategoryLabel\\\">\\r\\n                                        <label>{{ 'catalog.tax-category' | translate }}</label>\\r\\n                                        <select clrSelect name=\\\"options\\\" formControlName=\\\"taxCategoryId\\\">\\r\\n                                            <option\\r\\n                                                *ngFor=\\\"let taxCategory of taxCategories\\\"\\r\\n                                                [value]=\\\"taxCategory.id\\\"\\r\\n                                            >\\r\\n                                                {{ taxCategory.name }}\\r\\n                                            </option>\\r\\n                                        </select>\\r\\n                                    </clr-select-container>\\r\\n                                    <ng-template #taxCategoryLabel>\\r\\n                                        <label class=\\\"clr-control-label\\\">{{ 'catalog.tax-category' | translate }}</label>\\r\\n                                        <div class=\\\"tax-category-label\\\">\\r\\n                                            {{ getTaxCategoryName(i) }}\\r\\n                                        </div>\\r\\n                                    </ng-template>\\r\\n                                </div>\\r\\n                                <div class=\\\"price\\\">\\r\\n                                    <clr-input-container>\\r\\n                                        <label>{{ 'catalog.price' | translate }}</label>\\r\\n                                        <vdr-currency-input\\r\\n                                            clrInput\\r\\n                                            [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                                            [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                            formControlName=\\\"price\\\"\\r\\n                                        ></vdr-currency-input>\\r\\n                                    </clr-input-container>\\r\\n                                </div>\\r\\n                                <vdr-variant-price-detail\\r\\n                                    [price]=\\\"formArray.get([i, 'price'])!.value\\\"\\r\\n                                    [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                                    [priceIncludesTax]=\\\"variant.priceIncludesTax\\\"\\r\\n                                    [taxCategoryId]=\\\"formArray.get([i, 'taxCategoryId'])!.value\\\"\\r\\n                                ></vdr-variant-price-detail>\\r\\n                            </div>\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <clr-input-container>\\r\\n                                    <label>{{ 'catalog.stock-on-hand' | translate }}</label>\\r\\n                                    <input\\r\\n                                        clrInput\\r\\n                                        type=\\\"number\\\"\\r\\n                                        min=\\\"0\\\"\\r\\n                                        step=\\\"1\\\"\\r\\n                                        formControlName=\\\"stockOnHand\\\"\\r\\n                                        [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                    />\\r\\n                                </clr-input-container>\\r\\n                                <clr-checkbox-wrapper class=\\\"track-inventory-toggle\\\">\\r\\n                                    <input\\r\\n                                        type=\\\"checkbox\\\"\\r\\n                                        clrCheckbox\\r\\n                                        name=\\\"trackInventory\\\"\\r\\n\\r\\n                                        formControlName=\\\"trackInventory\\\"\\r\\n                                        [vdrDisabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                    />\\r\\n                                    <label>{{ 'catalog.track-inventory' | translate }}</label>\\r\\n                                </clr-checkbox-wrapper>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"custom-fields\\\">\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                                    <!--<label>{{ 'common.custom-fields' | translate }}</label>-->\\r\\n                                    <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n                                        <vdr-custom-field-control\\r\\n                                            *ngIf=\\\"customFieldIsSet(i, customField.name)\\\"\\r\\n                                            entityName=\\\"ProductVariant\\\"\\r\\n                                            [compact]=\\\"true\\\"\\r\\n                                            [customFieldsFormGroup]=\\\"formArray.at(i).get(['customFields'])\\\"\\r\\n                                            [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                                            [customField]=\\\"customField\\\"\\r\\n                                        ></vdr-custom-field-control>\\r\\n                                    </ng-container>\\r\\n                                </section>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card-block\\\">\\r\\n                <div class=\\\"options-facets\\\">\\r\\n                    <vdr-entity-info [entity]=\\\"variant\\\"></vdr-entity-info>\\r\\n                    <div *ngIf=\\\"variant.options.length\\\">\\r\\n                        <div class=\\\"options\\\">\\r\\n                            <vdr-chip\\r\\n                                *ngFor=\\\"let option of variant.options | sort: 'groupId'\\\"\\r\\n                                [colorFrom]=\\\"optionGroupName(option.groupId)\\\"\\r\\n                                [invert]=\\\"true\\\"\\r\\n                                (iconClick)=\\\"editOption(option)\\\"\\r\\n                                [icon]=\\\"('UpdateCatalog' | hasPermission) && 'pencil'\\\"\\r\\n                            >\\r\\n                                <span class=\\\"option-group-name\\\">{{ optionGroupName(option.groupId) }}</span>\\r\\n                                {{ optionName(option) }}\\r\\n                            </vdr-chip>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"flex-spacer\\\"></div>\\r\\n                    <div class=\\\"facets\\\">\\r\\n                        <vdr-facet-value-chip\\r\\n                            *ngFor=\\\"let facetValue of existingFacetValues(i)\\\"\\r\\n                            [facetValue]=\\\"facetValue\\\"\\r\\n                            [removable]=\\\"'UpdateCatalog' | hasPermission\\\"\\r\\n                            (remove)=\\\"removeFacetValue(i, facetValue.id)\\\"\\r\\n                        ></vdr-facet-value-chip>\\r\\n                        <vdr-facet-value-chip\\r\\n                            *ngFor=\\\"let facetValue of pendingFacetValues(i)\\\"\\r\\n                            [facetValue]=\\\"facetValue\\\"\\r\\n                            [removable]=\\\"'UpdateCatalog' | hasPermission\\\"\\r\\n                            (remove)=\\\"removeFacetValue(i, facetValue.id)\\\"\\r\\n                        ></vdr-facet-value-chip>\\r\\n                        <button\\r\\n                            *vdrIfPermissions=\\\"'UpdateCatalog'\\\"\\r\\n                            class=\\\"btn btn-sm btn-secondary\\\"\\r\\n                            (click)=\\\"selectFacetValueClick.emit([variant.id])\\\"\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                            {{ 'catalog.add-facets' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </ng-container>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".with-selected{display:flex;min-height:52px;align-items:center;border:1px solid #f2f3f5;border-radius:3px;padding:6px 18px}.with-selected vdr-select-toggle,.with-selected>label{margin-right:12px}.variant-container{transition:background-color .2s}.variant-container.disabled{background-color:#f2f3f5}.variant-container .header-row{display:flex;align-items:center;flex-wrap:wrap}.variant-container .variant-body{display:flex;flex-direction:column}@media screen and (min-width:768px){.variant-container .variant-body{flex-direction:row}}.variant-container .details{display:flex;flex-direction:column;flex:1;margin-right:12px}@media screen and (min-width:768px){.variant-container .details{flex-direction:row;height:36px}}.variant-container .details .name{flex:1}.variant-container .details .name ::ng-deep .clr-control-container{width:100%}.variant-container .details .name ::ng-deep .clr-control-container input.clr-input{min-width:100%}.variant-container .details .sku{width:160px;margin-right:20px;flex:0}.variant-container .details ::ng-deep .name input{min-width:300px}.variant-container .right-controls{display:flex}.variant-container .tax-category-label{margin-top:3px}.variant-container .variant-form-inputs{flex:1;display:flex;flex-direction:column}@media screen and (min-width:768px){.variant-container .variant-form-inputs{flex-direction:row}.variant-container .variant-form-input-row{margin:0 6px 8px 24px}}.variant-container .variant-form-input-row{display:flex;flex-wrap:wrap}.variant-container .variant-form-input-row>*{margin-right:24px;margin-bottom:24px}.variant-container .track-inventory-toggle{margin-top:22px}.variant-container .clr-form-control{margin-top:0}.variant-container .facets{display:flex;align-items:center}.variant-container .pricing{display:flex}.variant-container .pricing>div{margin-right:12px}.variant-container .option-group-name{color:#97979a;text-transform:uppercase;font-size:10px;margin-right:3px;height:11px}.variant-container .options-facets{display:flex;color:#97979a}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc2.ModalService }]; }, { assetChange: [{\n            type: Output\n        }], selectionChange: [{\n            type: Output\n        }], selectFacetValueClick: [{\n            type: Output\n        }], updateProductOption: [{\n            type: Output\n        }], formArray: [{\n            type: Input,\n            args: ['productVariantsFormArray']\n        }], variants: [{\n            type: Input\n        }], taxCategories: [{\n            type: Input\n        }], facets: [{\n            type: Input\n        }], optionGroups: [{\n            type: Input\n        }], customFields: [{\n            type: Input\n        }], customOptionFields: [{\n            type: Input\n        }], activeLanguage: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProductVariantsTableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-table',\n                template: \"<vdr-data-table [items]=\\\"variants\\\">\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.name' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'catalog.sku' | translate }}</vdr-dt-column>\\r\\n    <ng-container *ngFor=\\\"let optionGroup of optionGroups | sort: 'id'\\\">\\r\\n        <vdr-dt-column>{{ optionGroup.name }}</vdr-dt-column>\\r\\n    </ng-container>\\r\\n    <vdr-dt-column>{{ 'catalog.price' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'catalog.stock-on-hand' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.enabled' | translate }}</vdr-dt-column>\\r\\n    <ng-template let-variant=\\\"item\\\" let-i=\\\"index\\\">\\r\\n        <ng-container [formGroup]=\\\"formArray.at(i)\\\">\\r\\n            <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formArray.get([i, 'enabled'])!.value\\\">\\r\\n                <div class=\\\"card-img\\\">\\r\\n                    <div class=\\\"featured-asset\\\">\\r\\n                        <img\\r\\n                            *ngIf=\\\"variant.featuredAsset\\\"\\r\\n                            [src]=\\\"variant.featuredAsset | assetPreview:'tiny'\\\"\\r\\n                        />\\r\\n                        <div class=\\\"placeholder\\\" *ngIf=\\\"!variant.featuredAsset\\\">\\r\\n                            <clr-icon shape=\\\"image\\\" size=\\\"48\\\"></clr-icon>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </td>\\r\\n            <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formArray.get([i, 'enabled'])!.value\\\">\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        formControlName=\\\"name\\\"\\r\\n                        [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                        [placeholder]=\\\"'common.name' | translate\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formArray.get([i, 'enabled'])!.value\\\">\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        formControlName=\\\"sku\\\"\\r\\n                        [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                        [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <ng-container *ngFor=\\\"let option of variant.options | sort: 'groupId'\\\">\\r\\n                <td\\r\\n                    class=\\\"left align-middle\\\"\\r\\n                    [class.disabled]=\\\"!formArray.get([i, 'enabled'])!.value\\\"\\r\\n                    [style.color]=\\\"optionGroupName(option.groupId) | stringToColor\\\"\\r\\n                >\\r\\n                    {{ option.name }}\\r\\n                </td>\\r\\n            </ng-container>\\r\\n            <td class=\\\"left align-middle price\\\" [class.disabled]=\\\"!formArray.get([i, 'enabled'])!.value\\\">\\r\\n                <clr-input-container>\\r\\n                    <vdr-currency-input\\r\\n                        clrInput\\r\\n                        [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                        [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                        formControlName=\\\"price\\\"\\r\\n                    ></vdr-currency-input>\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td class=\\\"left align-middle stock\\\" [class.disabled]=\\\"!formArray.get([i, 'enabled'])!.value\\\">\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"number\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        step=\\\"1\\\"\\r\\n                        formControlName=\\\"stockOnHand\\\"\\r\\n                        [readonly]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td class=\\\"left align-middle stock\\\" [class.disabled]=\\\"!formArray.get([i, 'enabled'])!.value\\\">\\r\\n                <clr-toggle-wrapper>\\r\\n                    <input\\r\\n                        type=\\\"checkbox\\\"\\r\\n                        clrToggle\\r\\n                        name=\\\"enabled\\\"\\r\\n                        formControlName=\\\"enabled\\\"\\r\\n                        [vdrDisabled]=\\\"!('UpdateCatalog' | hasPermission)\\\"\\r\\n                    />\\r\\n                </clr-toggle-wrapper>\\r\\n            </td>\\r\\n        </ng-container>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".placeholder{color:#bfc3cc}input{width:100%}.price input,.stock input{max-width:96px}td{transition:background-color .2s}td.disabled{background-color:#f2f3f5}\"]\n            }]\n    }], null, { formArray: [{\n            type: Input,\n            args: ['productVariantsFormArray']\n        }], variants: [{\n            type: Input\n        }], optionGroups: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(VariantPriceDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-variant-price-detail',\n                template: \"<label class=\\\"clr-control-label\\\">{{ 'catalog.taxes' | translate }}</label>\\r\\n<div *ngIf=\\\"priceIncludesTax\\\" class=\\\"value\\\">\\r\\n    {{ 'catalog.price-includes-tax-at' | translate: { rate: taxRate$ | async } }}\\r\\n</div>\\r\\n<div *ngIf=\\\"!priceIncludesTax\\\" class=\\\"value\\\">\\r\\n    {{\\r\\n        'catalog.price-with-tax-in-default-zone'\\r\\n            | translate: { price: grossPrice$ | async | currency: currencyCode, rate: taxRate$ | async }\\r\\n    }}\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:flex;flex-direction:column}.value{margin-top:3px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }]; }, { priceIncludesTax: [{\n            type: Input\n        }], price: [{\n            type: Input\n        }], currencyCode: [{\n            type: Input\n        }], taxCategoryId: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(CatalogModule, { declarations: function () { return [ProductListComponent,\n        ProductDetailComponent,\n        FacetListComponent,\n        FacetDetailComponent,\n        GenerateProductVariantsComponent,\n        ProductVariantsListComponent,\n        ApplyFacetDialogComponent,\n        AssetListComponent,\n        ProductAssetsComponent,\n        VariantPriceDetailComponent,\n        CollectionListComponent,\n        CollectionDetailComponent,\n        CollectionTreeComponent,\n        CollectionTreeNodeComponent,\n        CollectionContentsComponent,\n        ProductVariantsTableComponent,\n        ProductSearchInputComponent,\n        OptionValueInputComponent,\n        UpdateProductOptionDialogComponent,\n        ProductVariantsEditorComponent,\n        AssignProductsToChannelDialogComponent,\n        AssetDetailComponent]; }, imports: function () { return [SharedModule, ɵngcc1.RouterModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [SharedModule, RouterModule.forChild(catalogRoutes)],\n                exports: [],\n                declarations: [\n                    ProductListComponent,\n                    ProductDetailComponent,\n                    FacetListComponent,\n                    FacetDetailComponent,\n                    GenerateProductVariantsComponent,\n                    ProductVariantsListComponent,\n                    ApplyFacetDialogComponent,\n                    AssetListComponent,\n                    ProductAssetsComponent,\n                    VariantPriceDetailComponent,\n                    CollectionListComponent,\n                    CollectionDetailComponent,\n                    CollectionTreeComponent,\n                    CollectionTreeNodeComponent,\n                    CollectionContentsComponent,\n                    ProductVariantsTableComponent,\n                    ProductSearchInputComponent,\n                    OptionValueInputComponent,\n                    UpdateProductOptionDialogComponent,\n                    ProductVariantsEditorComponent,\n                    AssignProductsToChannelDialogComponent,\n                    AssetDetailComponent,\n                ]\n            }]\n    }], null, null); })();\n\n// This file was generated by the build-public-api.ts script\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { ApplyFacetDialogComponent, AssetDetailComponent, AssetListComponent, AssetResolver, AssignProductsToChannelDialogComponent, CatalogModule, CollectionContentsComponent, CollectionDetailComponent, CollectionListComponent, CollectionResolver, CollectionTreeComponent, CollectionTreeNodeComponent, FacetDetailComponent, FacetListComponent, FacetResolver, GenerateProductVariantsComponent, OPTION_VALUE_INPUT_VALUE_ACCESSOR, OptionValueInputComponent, ProductAssetsComponent, ProductDetailComponent, ProductDetailService, ProductListComponent, ProductResolver, ProductSearchInputComponent, ProductSearchSelectionModel, ProductSearchSelectionModelFactory, ProductVariantsEditorComponent, ProductVariantsListComponent, ProductVariantsResolver, ProductVariantsTableComponent, UpdateProductOptionDialogComponent, VariantPriceDetailComponent, arrayToTree, assetBreadcrumb, catalogRoutes, collectionBreadcrumb, facetBreadcrumb, productBreadcrumb, productVariantEditorBreadcrumb, ɵ0$1 as ɵ0, ɵ1, ɵ2, ɵ3, ɵ4, ɵ5, ɵ6, ɵ7, ɵ8 };\n\n//# sourceMappingURL=vendure-admin-ui-catalog.js.map","export function isDate(value) {\n    return value instanceof Date && !isNaN(+value);\n}\n//# sourceMappingURL=isDate.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction unique(arr, byKey) {\n    return arr.filter((item, index, self) => {\n        return (index ===\n            self.findIndex(i => {\n                if (byKey === undefined) {\n                    return i === item;\n                }\n                else {\n                    return i[byKey] === item[byKey];\n                }\n            }));\n    });\n}\nexports.unique = unique;\n//# sourceMappingURL=unique.js.map"]}