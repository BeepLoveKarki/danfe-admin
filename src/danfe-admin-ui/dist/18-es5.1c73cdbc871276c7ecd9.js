!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,c){if(!t)return;if("string"==typeof t)return e(t,c);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,c)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var c=0,n=new Array(e);c<e;c++)n[c]=t[c];return n}function c(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var c,n=l(t);if(e){var r=l(this).constructor;c=Reflect.construct(n,arguments,r)}else c=n.apply(this,arguments);return o(this,c)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e,c){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,c){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(c):r.value}})(t,e,c||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{tB2i:function(e,c,o){"use strict";o.r(c),o.d(c,"HealthCheckComponent",(function(){return F})),o.d(c,"JobListComponent",(function(){return Z})),o.d(c,"JobStateLabelComponent",(function(){return q})),o.d(c,"SystemModule",(function(){return U})),o.d(c,"systemRoutes",(function(){return J})),o.d(c,"\u02750",(function(){return A})),o.d(c,"\u02751",(function(){return $}));var d=o("EM62"),b=o("ixhn"),h=o("nIj0"),f=o("sEIs"),p=o("8lHc"),m=o("kuMc"),y=o("xVbo"),g=o("YtkY"),v=o("OxKu"),R=o("2kYt"),w=o("Kej3"),j=o("s2Ay"),k=o("iysP");function C(t,e){1&t&&(d.gc(0),d.Xc(1),d.sc(2,"translate"),d.fc()),2&t&&(d.Rb(1),d.Zc(" ",d.tc(2,1,"system.health-all-systems-up")," "))}function O(t,e){1&t&&(d.Xc(0),d.sc(1,"translate")),2&t&&d.Zc(" ",d.tc(1,1,"system.health-error")," ")}var I=function(t,e){return{"is-success":t,"is-danger":e}};function P(t,e){if(1&t&&(d.ic(0,"div",7),d.ic(1,"div",8),d.dc(2,"clr-icon",9),d.hc(),d.ic(3,"div",10),d.Vc(4,C,3,3,"ng-container",11),d.Vc(5,O,2,3,"ng-template",null,12,d.Wc),d.ic(7,"div",13),d.Xc(8),d.sc(9,"translate"),d.sc(10,"date"),d.sc(11,"async"),d.hc(),d.hc(),d.hc()),2&t){var c=e.ngIf,n=d.Jc(6),r=d.rc();d.Rb(2),d.yc("ngClass",d.Ec(13,I,"ok"===c,"ok"!==c)),d.Sb("shape","ok"===c?"check-circle":"exclamation-circle"),d.Rb(2),d.yc("ngIf","ok"===c)("ngIfElse",n),d.Rb(4),d.ad(" ",d.tc(9,6,"system.health-last-checked"),": ",d.uc(10,8,d.tc(11,11,r.healthCheckService.lastCheck$),"mediumTime")," ")}}function S(t,e){1&t&&(d.gc(0),d.dc(1,"clr-icon",17),d.Xc(2),d.sc(3,"translate"),d.fc()),2&t&&(d.Rb(2),d.Zc(" ",d.tc(3,1,"system.health-status-up")," "))}function X(t,e){1&t&&(d.dc(0,"clr-icon",18),d.Xc(1),d.sc(2,"translate")),2&t&&(d.Rb(1),d.Zc(" ",d.tc(2,1,"system.health-status-down")," "))}function E(t,e){if(1&t&&(d.ic(0,"tr"),d.ic(1,"td",14),d.Xc(2),d.hc(),d.ic(3,"td",14),d.ic(4,"vdr-chip",15),d.Vc(5,S,4,3,"ng-container",11),d.Vc(6,X,3,3,"ng-template",null,16,d.Wc),d.hc(),d.hc(),d.ic(8,"td",14),d.Xc(9),d.hc(),d.hc()),2&t){var c=e.$implicit,n=d.Jc(7);d.Rb(2),d.Yc(c.key),d.Rb(2),d.yc("colorType","up"===c.result.status?"success":"error"),d.Rb(1),d.yc("ngIf","up"===c.result.status)("ngIfElse",n),d.Rb(4),d.Yc(c.result.message)}}function x(t,e){1&t&&(d.gc(0),d.Xc(1),d.sc(2,"translate"),d.fc()),2&t&&(d.Rb(1),d.Zc(" ",d.tc(2,1,"system.all-job-queues")," "))}function N(t,e){if(1&t&&(d.ic(0,"vdr-chip",8),d.Xc(1),d.hc()),2&t){var c=d.rc().item;d.yc("colorFrom",c.name),d.Rb(1),d.Yc(c.name)}}function D(t,e){if(1&t&&(d.Vc(0,x,3,3,"ng-container",6),d.Vc(1,N,2,2,"ng-template",null,7,d.Wc)),2&t){var c=e.item,n=d.Jc(2);d.yc("ngIf","all"===c.name)("ngIfElse",n)}}function Y(t,e){if(1&t&&(d.ic(0,"vdr-dropdown"),d.ic(1,"button",13),d.sc(2,"translate"),d.dc(3,"clr-icon",14),d.hc(),d.ic(4,"vdr-dropdown-menu"),d.ic(5,"div",15),d.dc(6,"vdr-object-tree",16),d.hc(),d.hc(),d.hc()),2&t){var c=d.rc().item;d.Rb(1),d.yc("title",d.tc(2,2,"system.job-data")),d.Rb(5),d.yc("value",c.data)}}function T(t,e){if(1&t&&(d.ic(0,"vdr-dropdown"),d.ic(1,"button",17),d.dc(2,"clr-icon",14),d.Xc(3),d.sc(4,"translate"),d.hc(),d.ic(5,"vdr-dropdown-menu"),d.ic(6,"div",15),d.dc(7,"vdr-object-tree",16),d.hc(),d.hc(),d.hc()),2&t){var c=d.rc().item;d.Rb(3),d.Zc(" ",d.tc(4,2,"system.job-result")," "),d.Rb(4),d.yc("value",c.result)}}function M(t,e){if(1&t&&(d.ic(0,"vdr-dropdown"),d.ic(1,"button",17),d.dc(2,"clr-icon",18),d.Xc(3),d.sc(4,"translate"),d.hc(),d.ic(5,"vdr-dropdown-menu"),d.ic(6,"div",15),d.Xc(7),d.hc(),d.hc(),d.hc()),2&t){var c=d.rc().item;d.Rb(3),d.Zc(" ",d.tc(4,2,"system.job-error")," "),d.Rb(4),d.Zc(" ",c.error," ")}}function V(t,e){if(1&t&&(d.ic(0,"td",9),d.dc(1,"vdr-entity-info",10),d.hc(),d.ic(2,"td",9),d.Vc(3,Y,7,4,"vdr-dropdown",11),d.ic(4,"vdr-chip",8),d.Xc(5),d.hc(),d.hc(),d.ic(6,"td",9),d.Xc(7),d.sc(8,"timeAgo"),d.hc(),d.ic(9,"td",9),d.dc(10,"vdr-job-state-label",12),d.hc(),d.ic(11,"td",9),d.Xc(12),d.sc(13,"duration"),d.hc(),d.ic(14,"td",9),d.Vc(15,T,8,4,"vdr-dropdown",11),d.Vc(16,M,8,4,"vdr-dropdown",11),d.hc()),2&t){var c=e.item,n=d.rc();d.Rb(1),d.yc("entity",c),d.Rb(2),d.yc("ngIf",c.data),d.Rb(1),d.yc("colorFrom",c.queueName),d.Rb(1),d.Yc(c.queueName),d.Rb(2),d.Yc(d.tc(8,9,c.createdAt)),d.Rb(3),d.yc("job",c),d.Rb(2),d.Yc(d.tc(13,11,c.duration)),d.Rb(3),d.yc("ngIf",n.hasResult(c)),d.Rb(1),d.yc("ngIf",c.error)}}function _(t,e){if(1&t&&(d.ic(0,"span",2),d.Xc(1),d.sc(2,"percent"),d.hc()),2&t){var c=d.rc();d.Rb(1),d.Zc(" ",d.tc(2,1,c.job.progress/100)," ")}}var F=function t(e){u(this,t),this.healthCheckService=e};F.\u0275fac=function(t){return new(t||F)(d.cc(b.lb))},F.\u0275cmp=d.Wb({type:F,selectors:[["vdr-health-check"]],decls:25,vars:18,consts:[["class","system-status-header",4,"ngIf"],["locationId","system-status"],[1,"btn","btn-secondary",3,"click"],["shape","refresh"],[1,"table"],[1,"left"],[4,"ngFor","ngForOf"],[1,"system-status-header"],[1,"status-icon"],["size","48",3,"ngClass"],[1,"status-detail"],[4,"ngIf","ngIfElse"],["error",""],[1,"last-checked"],[1,"align-middle","left"],[3,"colorType"],["down",""],["shape","check-circle"],["shape","exclamation-circle"]],template:function(t,e){1&t&&(d.ic(0,"vdr-action-bar"),d.ic(1,"vdr-ab-left"),d.Vc(2,P,12,16,"div",0),d.sc(3,"async"),d.hc(),d.ic(4,"vdr-ab-right"),d.dc(5,"vdr-action-bar-items",1),d.ic(6,"button",2),d.pc("click",(function(){return e.healthCheckService.refresh()})),d.dc(7,"clr-icon",3),d.Xc(8),d.sc(9,"translate"),d.hc(),d.hc(),d.hc(),d.ic(10,"table",4),d.ic(11,"thead"),d.ic(12,"tr"),d.ic(13,"th",5),d.Xc(14),d.sc(15,"translate"),d.hc(),d.ic(16,"th",5),d.Xc(17),d.sc(18,"translate"),d.hc(),d.ic(19,"th",5),d.Xc(20),d.sc(21,"translate"),d.hc(),d.hc(),d.hc(),d.ic(22,"tbody"),d.Vc(23,E,10,5,"tr",6),d.sc(24,"async"),d.hc(),d.hc()),2&t&&(d.Rb(2),d.yc("ngIf",d.tc(3,6,e.healthCheckService.status$)),d.Rb(6),d.Zc(" ",d.tc(9,8,"system.health-refresh")," "),d.Rb(6),d.Zc(" ",d.tc(15,10,"common.name")," "),d.Rb(3),d.Zc(" ",d.tc(18,12,"system.health-status")," "),d.Rb(3),d.Zc(" ",d.tc(21,14,"system.health-message")," "),d.Rb(3),d.yc("ngForOf",d.tc(24,16,e.healthCheckService.details$)))},directives:[b.c,b.e,R.p,b.f,b.d,w.o,R.o,R.n,b.C],pipes:[R.b,j.d,R.f],styles:[".system-status-header[_ngcontent-%COMP%]{align-items:flex-start;display:flex;justify-content:space-between}.system-status-header[_ngcontent-%COMP%]   .status-detail[_ngcontent-%COMP%]{font-weight:700}.system-status-header[_ngcontent-%COMP%]   .last-checked[_ngcontent-%COMP%]{color:#525456;font-weight:400}"],changeDetection:0}),F.ctorParameters=function(){return[{type:b.lb}]};var Z=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(o,e);var c=a(o);function o(t,e,n,r,a){var d,f;return u(this,o),(f=c.call(this,r,a)).dataService=t,f.modalService=e,f.notificationService=n,f.liveUpdate=new h.f(!0),f.hideSettled=new h.f(!0),f.queueFilter=new h.f("all"),s((d=i(f),l(o.prototype)),"setQueryFn",d).call(d,(function(){var t;return(t=f.dataService.settings).getAllJobs.apply(t,arguments)}),(function(t){return t.jobs}),(function(t,e){var c="all"===f.queueFilter.value?null:{queueName:{eq:f.queueFilter.value}},n=f.hideSettled.value;return{options:{skip:t,take:e,filter:Object.assign(Object.assign({},c),n?{isSettled:{eq:!1}}:{}),sort:{createdAt:b.Nb.DESC}}}})),f}return n(o,[{key:"ngOnInit",value:function(){var e=this;s(l(o.prototype),"ngOnInit",this).call(this),Object(p.a)(5e3,2e3).pipe(Object(m.a)(this.destroy$),Object(y.a)((function(){return e.liveUpdate.value}))).subscribe((function(){e.refresh()})),this.queues$=this.dataService.settings.getJobQueues().mapStream((function(t){return t.jobQueues})).pipe(Object(g.a)((function(e){return[{name:"all",running:!0}].concat(t(e))})))}},{key:"hasResult",value:function(t){var e=t.result;return null!=e&&("object"!=typeof e||Object.keys(e).length>0)}}]),o}(b.x);Z.\u0275fac=function(t){return new(t||Z)(d.cc(b.M),d.cc(b.Cb),d.cc(b.Db),d.cc(f.e),d.cc(f.a))},Z.\u0275cmp=d.Wb({type:Z,selectors:[["vdr-job-list"]],features:[d.Ob],decls:40,vars:45,consts:[["type","checkbox","clrCheckbox","","name","live-update",3,"formControl"],["type","checkbox","clrCheckbox","","name","hide-settled",3,"formControl","change"],["bindValue","name",3,"addTag","items","hideSelected","multiple","markFirst","clearable","searchable","formControl","change"],["ng-label-tmp","","ng-option-tmp",""],["locationId","job-list"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[4,"ngIf","ngIfElse"],["others",""],[3,"colorFrom"],[1,"left","align-middle"],[3,"entity"],[4,"ngIf"],[3,"job"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-icon",3,"title"],["shape","details"],[1,"result-detail"],[3,"value"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-sm","details-button"],["shape","exclamation-circle"]],template:function(t,e){1&t&&(d.ic(0,"vdr-action-bar"),d.ic(1,"vdr-ab-left"),d.ic(2,"clr-checkbox-container"),d.ic(3,"clr-checkbox-wrapper"),d.dc(4,"input",0),d.ic(5,"label"),d.Xc(6),d.sc(7,"translate"),d.hc(),d.hc(),d.ic(8,"clr-checkbox-wrapper"),d.ic(9,"input",1),d.pc("change",(function(){return e.refresh()})),d.hc(),d.ic(10,"label"),d.Xc(11),d.sc(12,"translate"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(13,"vdr-ab-right"),d.ic(14,"ng-select",2),d.pc("change",(function(){return e.refresh()})),d.sc(15,"async"),d.Vc(16,D,3,2,"ng-template",3),d.hc(),d.dc(17,"vdr-action-bar-items",4),d.hc(),d.hc(),d.ic(18,"vdr-data-table",5),d.pc("pageChange",(function(t){return e.setPageNumber(t)}))("itemsPerPageChange",(function(t){return e.setItemsPerPage(t)})),d.sc(19,"async"),d.sc(20,"async"),d.sc(21,"async"),d.sc(22,"async"),d.dc(23,"vdr-dt-column"),d.ic(24,"vdr-dt-column"),d.Xc(25),d.sc(26,"translate"),d.hc(),d.ic(27,"vdr-dt-column"),d.Xc(28),d.sc(29,"translate"),d.hc(),d.ic(30,"vdr-dt-column"),d.Xc(31),d.sc(32,"translate"),d.hc(),d.ic(33,"vdr-dt-column"),d.Xc(34),d.sc(35,"translate"),d.hc(),d.ic(36,"vdr-dt-column"),d.Xc(37),d.sc(38,"translate"),d.hc(),d.Vc(39,V,17,13,"ng-template"),d.hc()),2&t&&(d.Rb(4),d.yc("formControl",e.liveUpdate),d.Rb(2),d.Yc(d.tc(7,21,"common.live-update")),d.Rb(3),d.yc("formControl",e.hideSettled),d.Rb(2),d.Yc(d.tc(12,23,"system.hide-settled-jobs")),d.Rb(3),d.yc("addTag",!1)("items",d.tc(15,25,e.queues$))("hideSelected",!0)("multiple",!1)("markFirst",!1)("clearable",!1)("searchable",!1)("formControl",e.queueFilter),d.Rb(4),d.yc("items",d.tc(19,27,e.items$))("itemsPerPage",d.tc(20,29,e.itemsPerPage$))("totalItems",d.tc(21,31,e.totalItems$))("currentPage",d.tc(22,33,e.currentPage$)),d.Rb(7),d.Yc(d.tc(26,35,"system.job-queue-name")),d.Rb(3),d.Yc(d.tc(29,37,"common.created-at")),d.Rb(3),d.Yc(d.tc(32,39,"system.job-state")),d.Rb(3),d.Yc(d.tc(35,41,"system.job-duration")),d.Rb(3),d.Yc(d.tc(38,43,"system.job-result")))},directives:function(){return[b.c,b.e,w.j,w.k,b.gb,h.a,w.i,h.p,h.g,w.u,b.f,k.a,k.e,k.d,b.d,b.O,b.N,R.p,b.C,b.cb,q,b.U,b.X,w.o,b.W,b.Eb]},pipes:function(){return[j.d,R.b,b.Sb,b.Y]},styles:[".result-detail[_ngcontent-%COMP%]{margin:0 12px}"],changeDetection:0}),Z.ctorParameters=function(){return[{type:b.M},{type:b.Cb},{type:b.Db},{type:f.e},{type:f.a}]};var q=function(){function t(){u(this,t)}return n(t,[{key:"iconShape",get:function(){switch(this.job.state){case b.wb.COMPLETED:return"check-circle";case b.wb.FAILED:return"exclamation-circle";case b.wb.PENDING:case b.wb.RETRYING:return"hourglass";case b.wb.RUNNING:return"sync"}}},{key:"colorType",get:function(){switch(this.job.state){case b.wb.COMPLETED:return"success";case b.wb.FAILED:return"error";case b.wb.PENDING:case b.wb.RETRYING:return"";case b.wb.RUNNING:return"warning"}}}]),t}();q.\u0275fac=function(t){return new(t||q)},q.\u0275cmp=d.Wb({type:q,selectors:[["vdr-job-state-label"]],inputs:{job:"job"},decls:5,vars:6,consts:[[3,"colorType"],["class","progress",4,"ngIf"],[1,"progress"]],template:function(t,e){1&t&&(d.ic(0,"vdr-chip",0),d.dc(1,"clr-icon"),d.Xc(2),d.sc(3,"titlecase"),d.Vc(4,_,3,3,"span",1),d.hc()),2&t&&(d.yc("colorType",e.colorType),d.Rb(1),d.Sb("shape",e.iconShape),d.Rb(1),d.Zc(" ",d.tc(3,4,e.job.state)," "),d.Rb(2),d.yc("ngIf","RUNNING"===e.job.state))},directives:[b.C,w.o,R.p],pipes:[R.z,R.w],styles:[".progress[_ngcontent-%COMP%]{margin-left:3px}clr-icon[_ngcontent-%COMP%]{min-width:12px}"],changeDetection:0}),q.propDecorators={job:[{type:d.D}]};var A={breadcrumb:Object(v.a)("breadcrumb.job-queue")},$={breadcrumb:Object(v.a)("breadcrumb.system-status")},J=[{path:"jobs",component:Z,data:A},{path:"system-status",component:F,data:$}],U=function t(){u(this,t)};U.\u0275mod=d.ac({type:U}),U.\u0275inj=d.Zb({factory:function(t){return new(t||U)},imports:[[b.Mb,f.i.forChild(J)]]})}}])}();